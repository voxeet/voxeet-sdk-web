/*! For license information please see voxeet-sdk.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.VoxeetSDK=t():e.VoxeetSDK=t()}(this,(function(){return function(){var e={1665:function(e){var t;self,t=()=>(()=>{var e={859:e=>{var t,n=(t="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(e){var n,r,i=void 0!==(e=e||{})?e:{};i.ready=new Promise((function(e,t){n=e,r=t}));var o,a,s=Object.assign({},i),c=[],u="./this.program",d=(e,t)=>{throw t},l="";"undefined"!=typeof document&&document.currentScript&&(l=document.currentScript.src),t&&(l=t),l=0!==l.indexOf("blob:")?l.substr(0,l.replace(/[?#].*/,"").lastIndexOf("/")+1):"",o=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},a=(e,t,n)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)};var h=i.print||console.log.bind(console),p=i.printErr||console.warn.bind(console);Object.assign(i,s),s=null,i.arguments&&(c=i.arguments),i.thisProgram&&(u=i.thisProgram),i.quit&&(d=i.quit);var f,m=i.dynamicLibraries||[];i.wasmBinary&&(f=i.wasmBinary);var g,v=i.noExitRuntime||!0;"object"!=typeof WebAssembly&&ee("no native wasm support detected");var y,_=!1;function w(e,t){e||ee(t)}var b,k,S,E,T,C,j,x,P,I="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function M(e,t,n){for(var r=t+n,i=t;e[i]&&!(i>=r);)++i;if(i-t>16&&e.buffer&&I)return I.decode(e.subarray(t,i));for(var o="";t<i;){var a=e[t++];if(128&a){var s=63&e[t++];if(192!=(224&a)){var c=63&e[t++];if((a=224==(240&a)?(15&a)<<12|s<<6|c:(7&a)<<18|s<<12|c<<6|63&e[t++])<65536)o+=String.fromCharCode(a);else{var u=a-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&a)<<6|s)}else o+=String.fromCharCode(a)}return o}function R(e,t){return e?M(S,e,t):""}function A(e,t,n,r){if(!(r>0))return 0;for(var i=n,o=n+r-1,a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++a)),s<=127){if(n>=o)break;t[n++]=s}else if(s<=2047){if(n+1>=o)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=o)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=o)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}return t[n]=0,n-i}function D(e,t,n){return A(e,S,t,n)}function O(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r<=127?t++:r<=2047?t+=2:r>=55296&&r<=57343?(t+=4,++n):t+=3}return t}function N(e){b=e,i.HEAP8=k=new Int8Array(e),i.HEAP16=E=new Int16Array(e),i.HEAP32=C=new Int32Array(e),i.HEAPU8=S=new Uint8Array(e),i.HEAPU16=T=new Uint16Array(e),i.HEAPU32=j=new Uint32Array(e),i.HEAPF32=x=new Float32Array(e),i.HEAPF64=P=new Float64Array(e)}var F=i.INITIAL_MEMORY||16777216;(g=i.wasmMemory?i.wasmMemory:new WebAssembly.Memory({initial:F/65536,maximum:32768}))&&(b=g.buffer),F=b.byteLength,N(b);var L,z,U,V,B=new WebAssembly.Table({initial:1533,element:"anyfunc"}),W=[],G=[],H=[],Y=[],$=[],Z=!1,q=0,X=null,K=null;function J(e){q++,i.monitorRunDependencies&&i.monitorRunDependencies(q)}function Q(e){if(q--,i.monitorRunDependencies&&i.monitorRunDependencies(q),0==q&&(null!==X&&(clearInterval(X),X=null),K)){var t=K;K=null,t()}}function ee(e){i.onAbort&&i.onAbort(e),p(e="Aborted("+e+")"),_=!0,y=1,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw r(t),t}function te(e){return e.startsWith("data:application/octet-stream;base64,")}function ne(e){try{if(e==L&&f)return new Uint8Array(f);throw"both async and sync fetching of the wasm failed"}catch(e){ee(e)}}function re(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}te(L="dapm_impl.wasm")||(z=L,L=i.locateFile?i.locateFile(z,l):l+z);var ie={},oe=new Set([]),ae={get:function(e,t){var n=ie[t];return n||(n=ie[t]=new WebAssembly.Global({value:"i32",mutable:!0})),oe.has(t)||(n.required=!0),n}};function se(e){for(;e.length>0;)e.shift()(i)}function ce(e){var t=0,n=0;function r(){for(var n=0,r=1;;){var i=e[t++];if(n+=(127&i)*r,r*=128,!(128&i))break}return n}function i(){var n=r();return M(e,(t+=n)-n,n)}function o(e,t){if(e)throw new Error(t)}var a="dylink.0";if(e instanceof WebAssembly.Module){var s=WebAssembly.Module.customSections(e,a);0===s.length&&(a="dylink",s=WebAssembly.Module.customSections(e,a)),o(0===s.length,"need dylink section"),n=(e=new Uint8Array(s[0])).length}else{o(!(1836278016==new Uint32Array(new Uint8Array(e.subarray(0,24)).buffer)[0]),"need to see wasm magic number"),o(0!==e[8],"need the dylink section to be first"),t=9;var c=r();n=t+c,a=i()}var u={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if("dylink"==a){u.memorySize=r(),u.memoryAlign=r(),u.tableSize=r(),u.tableAlign=r();for(var d=r(),l=0;l<d;++l){var h=i();u.neededDynlibs.push(h)}}else for(o("dylink.0"!==a);t<n;){var p=e[t++],f=r();if(1===p)u.memorySize=r(),u.memoryAlign=r(),u.tableSize=r(),u.tableAlign=r();else if(2===p)for(d=r(),l=0;l<d;++l)h=i(),u.neededDynlibs.push(h);else if(3===p)for(var m=r();m--;){var g=i();256&r()&&u.tlsExports.add(g)}else if(4===p)for(m=r();m--;)i(),g=i(),1==(3&r())&&u.weakImports.add(g);else t+=f}return u}function ue(e){if(e instanceof re||"unwind"==e)return y;d(1,e)}function de(e){return 0==e.indexOf("dynCall_")||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(e)?e:"_"+e}function le(e,t){for(var n in e)if(e.hasOwnProperty(n)){Vr.hasOwnProperty(n)||(Vr[n]=e[n]);var r=de(n);i.hasOwnProperty(r)||(i[r]=e[n]),"__main_argc_argv"==n&&(i._main=e[n])}}var he={loadedLibsByName:{},loadedLibsByHandle:{}},pe=[];function fe(e){var t=pe[e];return t||(e>=pe.length&&(pe.length=e+1),pe[e]=t=B.get(e)),t}function me(e,t,n){return e.includes("j")?function(e,t,n){var r=i["dynCall_"+e];return n&&n.length?r.apply(null,[t].concat(n)):r.call(null,t)}(e,t,n):fe(t).apply(null,n)}var ge=5652912;function ve(e,t){return S.fill(0,e,e+t),e}function ye(e){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors"].includes(e)}function _e(e,t){e<128?t.push(e):t.push(e%128|128,e>>7)}function we(e,t){if(be)for(var n=e;n<e+t;n++){var r=fe(n);r&&be.set(r,n)}}var be=void 0,ke=[];function Se(e,t){B.set(e,t),pe[e]=B.get(e)}function Ee(e,t){if(be||(be=new WeakMap,we(0,B.length)),be.has(e))return be.get(e);var n=function(){if(ke.length)return ke.pop();try{B.grow(1)}catch(e){if(!(e instanceof RangeError))throw e;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}return B.length-1}();try{Se(n,e)}catch(i){if(!(i instanceof TypeError))throw i;var r=function(e,t){if("function"==typeof WebAssembly.Function)return new WebAssembly.Function(function(e){for(var t={i:"i32",j:"i64",f:"f32",d:"f64",p:"i32"},n={parameters:[],results:"v"==e[0]?[]:[t[e[0]]]},r=1;r<e.length;++r)n.parameters.push(t[e[r]]);return n}(t),e);var n=[1,96],r=t.slice(0,1),i=t.slice(1),o={i:127,p:127,j:126,f:125,d:124};_e(i.length,n);for(var a=0;a<i.length;++a)n.push(o[i[a]]);"v"==r?n.push(0):n.push(1,o[r]);var s=[0,97,115,109,1,0,0,0,1];_e(n.length,s),s.push.apply(s,n),s.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var c=new WebAssembly.Module(new Uint8Array(s));return new WebAssembly.Instance(c,{e:{f:e}}).exports.f}(e,t);Se(n,r)}return be.set(e,n),n}function Te(e,t,n){var r={};for(var i in e){var o=e[i];"object"==typeof o&&(o=o.value),"number"==typeof o&&(o+=t),r[i]=o}return function(e,t){for(var n in e)if(!ye(n)){var r=e[n];n.startsWith("orig$")&&(n=n.split("$")[1],t=!0),ie[n]||(ie[n]=new WebAssembly.Global({value:"i32",mutable:!0})),(t||0==ie[n].value)&&("function"==typeof r?ie[n].value=Ee(r):"number"==typeof r?ie[n].value=r:"bigint"==typeof r?ie[n].value=Number(r):p("unhandled export type for `"+n+"`: "+typeof r))}}(r,n),r}function Ce(e,t){var n,r;return t&&(n=Vr["orig$"+e]),n||(n=Vr[e])&&n.stub&&(n=void 0),n||(n=i[de(e)]),!n&&e.startsWith("invoke_")&&(r=e.split("_")[1],n=function(){var e=Xr();try{return me(r,arguments[0],Array.prototype.slice.call(arguments,1))}catch(t){if(Kr(e),t!==t+0)throw t;Zr(1,0)}}),!n&&e.startsWith("__cxa_find_matching_catch")&&(n=i.___cxa_find_matching_catch),n}function je(e,t){return Math.ceil(e/t)*t}function xe(e,t,n){var r=ce(e);function i(){if(n&&k[n+24>>0])o=j[n+28>>2],a=j[n+36>>2];else{var i=Math.pow(2,r.memoryAlign);i=Math.max(i,16);var o=r.memorySize?je(function(e){if(Z)return ve(Wr(e),e);var t=ge,n=t+e+15&-16;return ge=n,ie.__heap_base.value=n,t}(r.memorySize+i),i):0,a=r.tableSize?B.length:0;n&&(k[n+24>>0]=1,j[n+28>>2]=o,C[n+32>>2]=r.memorySize,j[n+36>>2]=a,C[n+40>>2]=r.tableSize)}var s,c=a+r.tableSize-B.length;c>0&&B.grow(c);var u={get:function(e,t){switch(t){case"__memory_base":return o;case"__table_base":return a}return t in Vr?Vr[t]:(t in e||(e[t]=function(){return n||(n=function(e){var t=Ce(e,!1);return t||(t=s[e]),t}(t)),n.apply(null,arguments)}),e[t]);var n}},d=new Proxy({},u),l={"GOT.mem":new Proxy({},ae),"GOT.func":new Proxy({},ae),env:d,wasi_snapshot_preview1:d};function h(e){we(a,r.tableSize),s=Te(e.exports,o),t.allowUndefined||Ie();var n=s.__wasm_apply_data_relocs;n&&(Z?n():$.push(n));var i=s.__wasm_call_ctors;return i&&(Z?i():G.push(i)),s}if(t.loadAsync){if(e instanceof WebAssembly.Module){var p=new WebAssembly.Instance(e,l);return Promise.resolve(h(p))}return WebAssembly.instantiate(e,l).then((function(e){return h(e.instance)}))}var f=e instanceof WebAssembly.Module?e:new WebAssembly.Module(e);return h(p=new WebAssembly.Instance(f,l))}return oe=r.weakImports,t.loadAsync?r.neededDynlibs.reduce((function(e,n){return e.then((function(){return Pe(n,t)}))}),Promise.resolve()).then((function(){return i()})):(r.neededDynlibs.forEach((function(e){Pe(e,t)})),i())}function Pe(e,t,n){t=t||{global:!0,nodelete:!0};var r=he.loadedLibsByName[e];if(r)return t.global&&!r.global&&(r.global=!0,"loading"!==r.module&&le(r.module)),t.nodelete&&r.refcount!==1/0&&(r.refcount=1/0),r.refcount++,n&&(he.loadedLibsByHandle[n]=r),!t.loadAsync||Promise.resolve(!0);function i(e){if(t.fs&&t.fs.findObject(e)){var n=t.fs.readFile(e,{encoding:"binary"});return n instanceof Uint8Array||(n=new Uint8Array(n)),t.loadAsync?Promise.resolve(n):n}if(t.loadAsync)return new Promise((function(t,n){a(e,(e=>t(new Uint8Array(e))),n)}));throw new Error(e+": file not found, and synchronous loading of external files is not available")}function o(){if("undefined"!=typeof preloadedWasm&&preloadedWasm[e]){var r=preloadedWasm[e];return t.loadAsync?Promise.resolve(r):r}return t.loadAsync?i(e).then((function(e){return xe(e,t,n)})):xe(i(e),t,n)}function s(e){r.global&&le(e),r.module=e}return r={refcount:t.nodelete?1/0:1,name:e,module:"loading",global:t.global},he.loadedLibsByName[e]=r,n&&(he.loadedLibsByHandle[n]=r),t.loadAsync?o().then((function(e){return s(e),!0})):(s(o()),!0)}function Ie(){for(var e in ie)if(0==ie[e].value){var t=Ce(e,!0);if(!t&&!ie[e].required)continue;if("function"==typeof t)ie[e].value=Ee(t,t.sig);else{if("number"!=typeof t)throw new Error("bad export type for `"+e+"`: "+typeof t);ie[e].value=t}}}function Me(e){return Wr(e+24)+24}i.___cxa_allocate_exception=Me,Me.sig="pp";var Re=[];function Ae(e){e.add_ref()}var De=0;function Oe(e){var t=new Ne(e);return t.get_caught()||(t.set_caught(!0),De--),t.set_rethrown(!1),Re.push(t),Ae(t),t.get_exception_ptr()}function Ne(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(e){j[this.ptr+4>>2]=e},this.get_type=function(){return j[this.ptr+4>>2]},this.set_destructor=function(e){j[this.ptr+8>>2]=e},this.get_destructor=function(){return j[this.ptr+8>>2]},this.set_refcount=function(e){C[this.ptr>>2]=e},this.set_caught=function(e){e=e?1:0,k[this.ptr+12>>0]=e},this.get_caught=function(){return 0!=k[this.ptr+12>>0]},this.set_rethrown=function(e){e=e?1:0,k[this.ptr+13>>0]=e},this.get_rethrown=function(){return 0!=k[this.ptr+13>>0]},this.init=function(e,t){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var e=C[this.ptr>>2];C[this.ptr>>2]=e+1},this.release_ref=function(){var e=C[this.ptr>>2];return C[this.ptr>>2]=e-1,1===e},this.set_adjusted_ptr=function(e){j[this.ptr+16>>2]=e},this.get_adjusted_ptr=function(){return j[this.ptr+16>>2]},this.get_exception_ptr=function(){if(i.___cxa_is_pointer_type(this.get_type()))return j[this.excPtr>>2];var e=this.get_adjusted_ptr();return 0!==e?e:this.excPtr}}function Fe(e){return Gr(new Ne(e).ptr)}function Le(e){if(e.release_ref()&&!e.get_rethrown()){var t=e.get_destructor();t&&fe(t)(e.excPtr),Fe(e.excPtr)}}function ze(e){e&&Le(new Ne(e))}i.___cxa_begin_catch=Oe,Oe.sig="pp",i.___cxa_free_exception=Fe,Fe.sig="vp",ze.sig="vp";var Ue=0;function Ve(){Zr(0),Le(Re.pop()),Ue=0}function Be(e){throw Ue||(Ue=e),e}function We(){var e=Ue;if(!e)return qr(0),0;var t=new Ne(e);t.set_adjusted_ptr(e);var n=t.get_type();if(!n)return qr(0),e;for(var r=0;r<arguments.length;r++){var o=arguments[r];if(0===o||o===n)break;var a=t.ptr+16;if(i.___cxa_can_catch(o,n,a))return qr(o),e}return qr(n),e}function Ge(){var e=Ue;if(!e)return qr(0),0;var t=new Ne(e);t.set_adjusted_ptr(e);var n=t.get_type();if(!n)return qr(0),e;for(var r=0;r<arguments.length;r++){var o=arguments[r];if(0===o||o===n)break;var a=t.ptr+16;if(i.___cxa_can_catch(o,n,a))return qr(o),e}return qr(n),e}function He(){var e=Ue;if(!e)return qr(0),0;var t=new Ne(e);t.set_adjusted_ptr(e);var n=t.get_type();if(!n)return qr(0),e;for(var r=0;r<arguments.length;r++){var o=arguments[r];if(0===o||o===n)break;var a=t.ptr+16;if(i.___cxa_can_catch(o,n,a))return qr(o),e}return qr(n),e}function Ye(e){return new Ne(e).get_exception_ptr()}function $e(e){e&&Ae(new Ne(e))}function Ze(){var e=Re.pop();e||ee("no exception to throw");var t=e.excPtr;throw e.get_rethrown()||(Re.push(e),e.set_rethrown(!0),e.set_caught(!1),De++),Ue=t,t}function qe(e,t,n){throw new Ne(e).init(t,n),Ue=e,De++,e}i.___cxa_end_catch=Ve,Ve.sig="v",i.___resumeException=Be,Be.sig="vp",i.___cxa_find_matching_catch_2=We,We.sig="ppp",i.___cxa_find_matching_catch_3=Ge,Ge.sig="pppp",He.sig="ppppp",Ye.sig="pp",$e.sig="vp",i.___cxa_rethrow=Ze,Ze.sig="v",i.___cxa_throw=qe,qe.sig="vppp";var Xe=new WebAssembly.Global({value:"i32",mutable:!1},1024);i.___memory_base=Xe;var Ke=new WebAssembly.Global({value:"i32",mutable:!0},5652912);i.___stack_pointer=Ke;var Je={isAbs:e=>"/"===e.charAt(0),splitPath:e=>/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1),normalizeArray:(e,t)=>{for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},normalize:e=>{var t=Je.isAbs(e),n="/"===e.substr(-1);return(e=Je.normalizeArray(e.split("/").filter((e=>!!e)),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},dirname:e=>{var t=Je.splitPath(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},basename:e=>{if("/"===e)return"/";var t=(e=(e=Je.normalize(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)},join:function(){var e=Array.prototype.slice.call(arguments);return Je.normalize(e.join("/"))},join2:(e,t)=>Je.normalize(e+"/"+t)};function Qe(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return()=>(crypto.getRandomValues(e),e[0])}return()=>ee("randomDevice")}var et={resolve:function(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var r=n>=0?arguments[n]:ot.cwd();if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";e=r+"/"+e,t=Je.isAbs(r)}return(t?"/":"")+(e=Je.normalizeArray(e.split("/").filter((e=>!!e)),!t).join("/"))||"."},relative:(e,t)=>{function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=et.resolve(e).substr(1),t=et.resolve(t).substr(1);for(var r=n(e.split("/")),i=n(t.split("/")),o=Math.min(r.length,i.length),a=o,s=0;s<o;s++)if(r[s]!==i[s]){a=s;break}var c=[];for(s=a;s<r.length;s++)c.push("..");return(c=c.concat(i.slice(a))).join("/")}};function tt(e,t,n){var r=n>0?n:O(e)+1,i=new Array(r),o=A(e,i,0,i.length);return t&&(i.length=o),i}var nt={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){nt.ttys[e]={input:[],output:[],ops:t},ot.registerDevice(e,nt.stream_ops)},stream_ops:{open:function(e){var t=nt.ttys[e.node.rdev];if(!t)throw new ot.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.fsync(e.tty)},fsync:function(e){e.tty.ops.fsync(e.tty)},read:function(e,t,n,r,i){if(!e.tty||!e.tty.ops.get_char)throw new ot.ErrnoError(60);for(var o=0,a=0;a<r;a++){var s;try{s=e.tty.ops.get_char(e.tty)}catch(e){throw new ot.ErrnoError(29)}if(void 0===s&&0===o)throw new ot.ErrnoError(6);if(null==s)break;o++,t[n+a]=s}return o&&(e.node.timestamp=Date.now()),o},write:function(e,t,n,r,i){if(!e.tty||!e.tty.ops.put_char)throw new ot.ErrnoError(60);try{for(var o=0;o<r;o++)e.tty.ops.put_char(e.tty,t[n+o])}catch(e){throw new ot.ErrnoError(29)}return r&&(e.node.timestamp=Date.now()),o}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n"),!t)return null;e.input=tt(t,!0)}return e.input.shift()},put_char:function(e,t){null===t||10===t?(h(M(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},fsync:function(e){e.output&&e.output.length>0&&(h(M(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(p(M(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},fsync:function(e){e.output&&e.output.length>0&&(p(M(e.output,0)),e.output=[])}}};function rt(e){e=je(e,65536);var t=$r(65536,e);return t?ve(t,e):0}var it={ops_table:null,mount:function(e){return it.createNode(null,"/",16895,0)},createNode:function(e,t,n,r){if(ot.isBlkdev(n)||ot.isFIFO(n))throw new ot.ErrnoError(63);it.ops_table||(it.ops_table={dir:{node:{getattr:it.node_ops.getattr,setattr:it.node_ops.setattr,lookup:it.node_ops.lookup,mknod:it.node_ops.mknod,rename:it.node_ops.rename,unlink:it.node_ops.unlink,rmdir:it.node_ops.rmdir,readdir:it.node_ops.readdir,symlink:it.node_ops.symlink},stream:{llseek:it.stream_ops.llseek}},file:{node:{getattr:it.node_ops.getattr,setattr:it.node_ops.setattr},stream:{llseek:it.stream_ops.llseek,read:it.stream_ops.read,write:it.stream_ops.write,allocate:it.stream_ops.allocate,mmap:it.stream_ops.mmap,msync:it.stream_ops.msync}},link:{node:{getattr:it.node_ops.getattr,setattr:it.node_ops.setattr,readlink:it.node_ops.readlink},stream:{}},chrdev:{node:{getattr:it.node_ops.getattr,setattr:it.node_ops.setattr},stream:ot.chrdev_stream_ops}});var i=ot.createNode(e,t,n,r);return ot.isDir(i.mode)?(i.node_ops=it.ops_table.dir.node,i.stream_ops=it.ops_table.dir.stream,i.contents={}):ot.isFile(i.mode)?(i.node_ops=it.ops_table.file.node,i.stream_ops=it.ops_table.file.stream,i.usedBytes=0,i.contents=null):ot.isLink(i.mode)?(i.node_ops=it.ops_table.link.node,i.stream_ops=it.ops_table.link.stream):ot.isChrdev(i.mode)&&(i.node_ops=it.ops_table.chrdev.node,i.stream_ops=it.ops_table.chrdev.stream),i.timestamp=Date.now(),e&&(e.contents[t]=i,e.timestamp=i.timestamp),i},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,t){var n=e.contents?e.contents.length:0;if(!(n>=t)){t=Math.max(t,n*(n<1048576?2:1.125)>>>0),0!=n&&(t=Math.max(t,256));var r=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(r.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,t){if(e.usedBytes!=t)if(0==t)e.contents=null,e.usedBytes=0;else{var n=e.contents;e.contents=new Uint8Array(t),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=ot.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,ot.isDir(e.mode)?t.size=4096:ot.isFile(e.mode)?t.size=e.usedBytes:ot.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&it.resizeFileStorage(e,t.size)},lookup:function(e,t){throw ot.genericErrors[44]},mknod:function(e,t,n,r){return it.createNode(e,t,n,r)},rename:function(e,t,n){if(ot.isDir(e.mode)){var r;try{r=ot.lookupNode(t,n)}catch(e){}if(r)for(var i in r.contents)throw new ot.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=n,t.contents[n]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink:function(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir:function(e,t){var n=ot.lookupNode(e,t);for(var r in n.contents)throw new ot.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir:function(e){var t=[".",".."];for(var n in e.contents)e.contents.hasOwnProperty(n)&&t.push(n);return t},symlink:function(e,t,n){var r=it.createNode(e,t,41471,0);return r.link=n,r},readlink:function(e){if(!ot.isLink(e.mode))throw new ot.ErrnoError(28);return e.link}},stream_ops:{read:function(e,t,n,r,i){var o=e.node.contents;if(i>=e.node.usedBytes)return 0;var a=Math.min(e.node.usedBytes-i,r);if(a>8&&o.subarray)t.set(o.subarray(i,i+a),n);else for(var s=0;s<a;s++)t[n+s]=o[i+s];return a},write:function(e,t,n,r,i,o){if(t.buffer===k.buffer&&(o=!1),!r)return 0;var a=e.node;if(a.timestamp=Date.now(),t.subarray&&(!a.contents||a.contents.subarray)){if(o)return a.contents=t.subarray(n,n+r),a.usedBytes=r,r;if(0===a.usedBytes&&0===i)return a.contents=t.slice(n,n+r),a.usedBytes=r,r;if(i+r<=a.usedBytes)return a.contents.set(t.subarray(n,n+r),i),r}if(it.expandFileStorage(a,i+r),a.contents.subarray&&t.subarray)a.contents.set(t.subarray(n,n+r),i);else for(var s=0;s<r;s++)a.contents[i+s]=t[n+s];return a.usedBytes=Math.max(a.usedBytes,i+r),r},llseek:function(e,t,n){var r=t;if(1===n?r+=e.position:2===n&&ot.isFile(e.node.mode)&&(r+=e.node.usedBytes),r<0)throw new ot.ErrnoError(28);return r},allocate:function(e,t,n){it.expandFileStorage(e.node,t+n),e.node.usedBytes=Math.max(e.node.usedBytes,t+n)},mmap:function(e,t,n,r,i){if(!ot.isFile(e.node.mode))throw new ot.ErrnoError(43);var o,a,s=e.node.contents;if(2&i||s.buffer!==b){if((n>0||n+t<s.length)&&(s=s.subarray?s.subarray(n,n+t):Array.prototype.slice.call(s,n,n+t)),a=!0,!(o=rt(t)))throw new ot.ErrnoError(48);k.set(s,o)}else a=!1,o=s.byteOffset;return{ptr:o,allocated:a}},msync:function(e,t,n,r,i){if(!ot.isFile(e.node.mode))throw new ot.ErrnoError(43);return 2&i||it.stream_ops.write(e,t,0,r,n,!1),0}}},ot={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(e,t={})=>{if(!(e=et.resolve(ot.cwd(),e)))return{path:"",node:null};if((t=Object.assign({follow_mount:!0,recurse_count:0},t)).recurse_count>8)throw new ot.ErrnoError(32);for(var n=Je.normalizeArray(e.split("/").filter((e=>!!e)),!1),r=ot.root,i="/",o=0;o<n.length;o++){var a=o===n.length-1;if(a&&t.parent)break;if(r=ot.lookupNode(r,n[o]),i=Je.join2(i,n[o]),ot.isMountpoint(r)&&(!a||a&&t.follow_mount)&&(r=r.mounted.root),!a||t.follow)for(var s=0;ot.isLink(r.mode);){var c=ot.readlink(i);if(i=et.resolve(Je.dirname(i),c),r=ot.lookupPath(i,{recurse_count:t.recurse_count+1}).node,s++>40)throw new ot.ErrnoError(32)}}return{path:i,node:r}},getPath:e=>{for(var t;;){if(ot.isRoot(e)){var n=e.mount.mountpoint;return t?"/"!==n[n.length-1]?n+"/"+t:n+t:n}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:(e,t)=>{for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(e+n>>>0)%ot.nameTable.length},hashAddNode:e=>{var t=ot.hashName(e.parent.id,e.name);e.name_next=ot.nameTable[t],ot.nameTable[t]=e},hashRemoveNode:e=>{var t=ot.hashName(e.parent.id,e.name);if(ot.nameTable[t]===e)ot.nameTable[t]=e.name_next;else for(var n=ot.nameTable[t];n;){if(n.name_next===e){n.name_next=e.name_next;break}n=n.name_next}},lookupNode:(e,t)=>{var n=ot.mayLookup(e);if(n)throw new ot.ErrnoError(n,e);for(var r=ot.hashName(e.id,t),i=ot.nameTable[r];i;i=i.name_next){var o=i.name;if(i.parent.id===e.id&&o===t)return i}return ot.lookup(e,t)},createNode:(e,t,n,r)=>{var i=new ot.FSNode(e,t,n,r);return ot.hashAddNode(i),i},destroyNode:e=>{ot.hashRemoveNode(e)},isRoot:e=>e===e.parent,isMountpoint:e=>!!e.mounted,isFile:e=>32768==(61440&e),isDir:e=>16384==(61440&e),isLink:e=>40960==(61440&e),isChrdev:e=>8192==(61440&e),isBlkdev:e=>24576==(61440&e),isFIFO:e=>4096==(61440&e),isSocket:e=>49152==(49152&e),flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:e=>{var t=ot.flagModes[e];if(void 0===t)throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:e=>{var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:(e,t)=>ot.ignorePermissions||(!t.includes("r")||292&e.mode)&&(!t.includes("w")||146&e.mode)&&(!t.includes("x")||73&e.mode)?0:2,mayLookup:e=>ot.nodePermissions(e,"x")||(e.node_ops.lookup?0:2),mayCreate:(e,t)=>{try{return ot.lookupNode(e,t),20}catch(e){}return ot.nodePermissions(e,"wx")},mayDelete:(e,t,n)=>{var r;try{r=ot.lookupNode(e,t)}catch(e){return e.errno}var i=ot.nodePermissions(e,"wx");if(i)return i;if(n){if(!ot.isDir(r.mode))return 54;if(ot.isRoot(r)||ot.getPath(r)===ot.cwd())return 10}else if(ot.isDir(r.mode))return 31;return 0},mayOpen:(e,t)=>e?ot.isLink(e.mode)?32:ot.isDir(e.mode)&&("r"!==ot.flagsToPermissionString(t)||512&t)?31:ot.nodePermissions(e,ot.flagsToPermissionString(t)):44,MAX_OPEN_FDS:4096,nextfd:(e=0,t=ot.MAX_OPEN_FDS)=>{for(var n=e;n<=t;n++)if(!ot.streams[n])return n;throw new ot.ErrnoError(33)},getStream:e=>ot.streams[e],createStream:(e,t,n)=>{ot.FSStream||(ot.FSStream=function(){this.shared={}},ot.FSStream.prototype={},Object.defineProperties(ot.FSStream.prototype,{object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}},flags:{get:function(){return this.shared.flags},set:function(e){this.shared.flags=e}},position:{get:function(){return this.shared.position},set:function(e){this.shared.position=e}}})),e=Object.assign(new ot.FSStream,e);var r=ot.nextfd(t,n);return e.fd=r,ot.streams[r]=e,e},closeStream:e=>{ot.streams[e]=null},chrdev_stream_ops:{open:e=>{var t=ot.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:()=>{throw new ot.ErrnoError(70)}},major:e=>e>>8,minor:e=>255&e,makedev:(e,t)=>e<<8|t,registerDevice:(e,t)=>{ot.devices[e]={stream_ops:t}},getDevice:e=>ot.devices[e],getMounts:e=>{for(var t=[],n=[e];n.length;){var r=n.pop();t.push(r),n.push.apply(n,r.mounts)}return t},syncfs:(e,t)=>{"function"==typeof e&&(t=e,e=!1),ot.syncFSRequests++,ot.syncFSRequests>1&&p("warning: "+ot.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var n=ot.getMounts(ot.root.mount),r=0;function i(e){return ot.syncFSRequests--,t(e)}function o(e){if(e)return o.errored?void 0:(o.errored=!0,i(e));++r>=n.length&&i(null)}n.forEach((t=>{if(!t.type.syncfs)return o(null);t.type.syncfs(t,e,o)}))},mount:(e,t,n)=>{var r,i="/"===n,o=!n;if(i&&ot.root)throw new ot.ErrnoError(10);if(!i&&!o){var a=ot.lookupPath(n,{follow_mount:!1});if(n=a.path,r=a.node,ot.isMountpoint(r))throw new ot.ErrnoError(10);if(!ot.isDir(r.mode))throw new ot.ErrnoError(54)}var s={type:e,opts:t,mountpoint:n,mounts:[]},c=e.mount(s);return c.mount=s,s.root=c,i?ot.root=c:r&&(r.mounted=s,r.mount&&r.mount.mounts.push(s)),c},unmount:e=>{var t=ot.lookupPath(e,{follow_mount:!1});if(!ot.isMountpoint(t.node))throw new ot.ErrnoError(28);var n=t.node,r=n.mounted,i=ot.getMounts(r);Object.keys(ot.nameTable).forEach((e=>{for(var t=ot.nameTable[e];t;){var n=t.name_next;i.includes(t.mount)&&ot.destroyNode(t),t=n}})),n.mounted=null;var o=n.mount.mounts.indexOf(r);n.mount.mounts.splice(o,1)},lookup:(e,t)=>e.node_ops.lookup(e,t),mknod:(e,t,n)=>{var r=ot.lookupPath(e,{parent:!0}).node,i=Je.basename(e);if(!i||"."===i||".."===i)throw new ot.ErrnoError(28);var o=ot.mayCreate(r,i);if(o)throw new ot.ErrnoError(o);if(!r.node_ops.mknod)throw new ot.ErrnoError(63);return r.node_ops.mknod(r,i,t,n)},create:(e,t)=>(t=void 0!==t?t:438,t&=4095,t|=32768,ot.mknod(e,t,0)),mkdir:(e,t)=>(t=void 0!==t?t:511,t&=1023,t|=16384,ot.mknod(e,t,0)),mkdirTree:(e,t)=>{for(var n=e.split("/"),r="",i=0;i<n.length;++i)if(n[i]){r+="/"+n[i];try{ot.mkdir(r,t)}catch(e){if(20!=e.errno)throw e}}},mkdev:(e,t,n)=>(void 0===n&&(n=t,t=438),t|=8192,ot.mknod(e,t,n)),symlink:(e,t)=>{if(!et.resolve(e))throw new ot.ErrnoError(44);var n=ot.lookupPath(t,{parent:!0}).node;if(!n)throw new ot.ErrnoError(44);var r=Je.basename(t),i=ot.mayCreate(n,r);if(i)throw new ot.ErrnoError(i);if(!n.node_ops.symlink)throw new ot.ErrnoError(63);return n.node_ops.symlink(n,r,e)},rename:(e,t)=>{var n,r,i=Je.dirname(e),o=Je.dirname(t),a=Je.basename(e),s=Je.basename(t);if(n=ot.lookupPath(e,{parent:!0}).node,r=ot.lookupPath(t,{parent:!0}).node,!n||!r)throw new ot.ErrnoError(44);if(n.mount!==r.mount)throw new ot.ErrnoError(75);var c,u=ot.lookupNode(n,a),d=et.relative(e,o);if("."!==d.charAt(0))throw new ot.ErrnoError(28);if("."!==(d=et.relative(t,i)).charAt(0))throw new ot.ErrnoError(55);try{c=ot.lookupNode(r,s)}catch(e){}if(u!==c){var l=ot.isDir(u.mode),h=ot.mayDelete(n,a,l);if(h)throw new ot.ErrnoError(h);if(h=c?ot.mayDelete(r,s,l):ot.mayCreate(r,s))throw new ot.ErrnoError(h);if(!n.node_ops.rename)throw new ot.ErrnoError(63);if(ot.isMountpoint(u)||c&&ot.isMountpoint(c))throw new ot.ErrnoError(10);if(r!==n&&(h=ot.nodePermissions(n,"w")))throw new ot.ErrnoError(h);ot.hashRemoveNode(u);try{n.node_ops.rename(u,r,s)}catch(e){throw e}finally{ot.hashAddNode(u)}}},rmdir:e=>{var t=ot.lookupPath(e,{parent:!0}).node,n=Je.basename(e),r=ot.lookupNode(t,n),i=ot.mayDelete(t,n,!0);if(i)throw new ot.ErrnoError(i);if(!t.node_ops.rmdir)throw new ot.ErrnoError(63);if(ot.isMountpoint(r))throw new ot.ErrnoError(10);t.node_ops.rmdir(t,n),ot.destroyNode(r)},readdir:e=>{var t=ot.lookupPath(e,{follow:!0}).node;if(!t.node_ops.readdir)throw new ot.ErrnoError(54);return t.node_ops.readdir(t)},unlink:e=>{var t=ot.lookupPath(e,{parent:!0}).node;if(!t)throw new ot.ErrnoError(44);var n=Je.basename(e),r=ot.lookupNode(t,n),i=ot.mayDelete(t,n,!1);if(i)throw new ot.ErrnoError(i);if(!t.node_ops.unlink)throw new ot.ErrnoError(63);if(ot.isMountpoint(r))throw new ot.ErrnoError(10);t.node_ops.unlink(t,n),ot.destroyNode(r)},readlink:e=>{var t=ot.lookupPath(e).node;if(!t)throw new ot.ErrnoError(44);if(!t.node_ops.readlink)throw new ot.ErrnoError(28);return et.resolve(ot.getPath(t.parent),t.node_ops.readlink(t))},stat:(e,t)=>{var n=ot.lookupPath(e,{follow:!t}).node;if(!n)throw new ot.ErrnoError(44);if(!n.node_ops.getattr)throw new ot.ErrnoError(63);return n.node_ops.getattr(n)},lstat:e=>ot.stat(e,!0),chmod:(e,t,n)=>{var r;if(!(r="string"==typeof e?ot.lookupPath(e,{follow:!n}).node:e).node_ops.setattr)throw new ot.ErrnoError(63);r.node_ops.setattr(r,{mode:4095&t|-4096&r.mode,timestamp:Date.now()})},lchmod:(e,t)=>{ot.chmod(e,t,!0)},fchmod:(e,t)=>{var n=ot.getStream(e);if(!n)throw new ot.ErrnoError(8);ot.chmod(n.node,t)},chown:(e,t,n,r)=>{var i;if(!(i="string"==typeof e?ot.lookupPath(e,{follow:!r}).node:e).node_ops.setattr)throw new ot.ErrnoError(63);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown:(e,t,n)=>{ot.chown(e,t,n,!0)},fchown:(e,t,n)=>{var r=ot.getStream(e);if(!r)throw new ot.ErrnoError(8);ot.chown(r.node,t,n)},truncate:(e,t)=>{if(t<0)throw new ot.ErrnoError(28);var n;if(!(n="string"==typeof e?ot.lookupPath(e,{follow:!0}).node:e).node_ops.setattr)throw new ot.ErrnoError(63);if(ot.isDir(n.mode))throw new ot.ErrnoError(31);if(!ot.isFile(n.mode))throw new ot.ErrnoError(28);var r=ot.nodePermissions(n,"w");if(r)throw new ot.ErrnoError(r);n.node_ops.setattr(n,{size:t,timestamp:Date.now()})},ftruncate:(e,t)=>{var n=ot.getStream(e);if(!n)throw new ot.ErrnoError(8);if(0==(2097155&n.flags))throw new ot.ErrnoError(28);ot.truncate(n.node,t)},utime:(e,t,n)=>{var r=ot.lookupPath(e,{follow:!0}).node;r.node_ops.setattr(r,{timestamp:Math.max(t,n)})},open:(e,t,n)=>{if(""===e)throw new ot.ErrnoError(44);var r;if(n=void 0===n?438:n,n=64&(t="string"==typeof t?ot.modeStringToFlags(t):t)?4095&n|32768:0,"object"==typeof e)r=e;else{e=Je.normalize(e);try{r=ot.lookupPath(e,{follow:!(131072&t)}).node}catch(e){}}var o=!1;if(64&t)if(r){if(128&t)throw new ot.ErrnoError(20)}else r=ot.mknod(e,n,0),o=!0;if(!r)throw new ot.ErrnoError(44);if(ot.isChrdev(r.mode)&&(t&=-513),65536&t&&!ot.isDir(r.mode))throw new ot.ErrnoError(54);if(!o){var a=ot.mayOpen(r,t);if(a)throw new ot.ErrnoError(a)}512&t&&!o&&ot.truncate(r,0),t&=-131713;var s=ot.createStream({node:r,path:ot.getPath(r),flags:t,seekable:!0,position:0,stream_ops:r.stream_ops,ungotten:[],error:!1});return s.stream_ops.open&&s.stream_ops.open(s),!i.logReadFiles||1&t||(ot.readFiles||(ot.readFiles={}),e in ot.readFiles||(ot.readFiles[e]=1)),s},close:e=>{if(ot.isClosed(e))throw new ot.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{ot.closeStream(e.fd)}e.fd=null},isClosed:e=>null===e.fd,llseek:(e,t,n)=>{if(ot.isClosed(e))throw new ot.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new ot.ErrnoError(70);if(0!=n&&1!=n&&2!=n)throw new ot.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,n),e.ungotten=[],e.position},read:(e,t,n,r,i)=>{if(r<0||i<0)throw new ot.ErrnoError(28);if(ot.isClosed(e))throw new ot.ErrnoError(8);if(1==(2097155&e.flags))throw new ot.ErrnoError(8);if(ot.isDir(e.node.mode))throw new ot.ErrnoError(31);if(!e.stream_ops.read)throw new ot.ErrnoError(28);var o=void 0!==i;if(o){if(!e.seekable)throw new ot.ErrnoError(70)}else i=e.position;var a=e.stream_ops.read(e,t,n,r,i);return o||(e.position+=a),a},write:(e,t,n,r,i,o)=>{if(r<0||i<0)throw new ot.ErrnoError(28);if(ot.isClosed(e))throw new ot.ErrnoError(8);if(0==(2097155&e.flags))throw new ot.ErrnoError(8);if(ot.isDir(e.node.mode))throw new ot.ErrnoError(31);if(!e.stream_ops.write)throw new ot.ErrnoError(28);e.seekable&&1024&e.flags&&ot.llseek(e,0,2);var a=void 0!==i;if(a){if(!e.seekable)throw new ot.ErrnoError(70)}else i=e.position;var s=e.stream_ops.write(e,t,n,r,i,o);return a||(e.position+=s),s},allocate:(e,t,n)=>{if(ot.isClosed(e))throw new ot.ErrnoError(8);if(t<0||n<=0)throw new ot.ErrnoError(28);if(0==(2097155&e.flags))throw new ot.ErrnoError(8);if(!ot.isFile(e.node.mode)&&!ot.isDir(e.node.mode))throw new ot.ErrnoError(43);if(!e.stream_ops.allocate)throw new ot.ErrnoError(138);e.stream_ops.allocate(e,t,n)},mmap:(e,t,n,r,i)=>{if(0!=(2&r)&&0==(2&i)&&2!=(2097155&e.flags))throw new ot.ErrnoError(2);if(1==(2097155&e.flags))throw new ot.ErrnoError(2);if(!e.stream_ops.mmap)throw new ot.ErrnoError(43);return e.stream_ops.mmap(e,t,n,r,i)},msync:(e,t,n,r,i)=>e&&e.stream_ops.msync?e.stream_ops.msync(e,t,n,r,i):0,munmap:e=>0,ioctl:(e,t,n)=>{if(!e.stream_ops.ioctl)throw new ot.ErrnoError(59);return e.stream_ops.ioctl(e,t,n)},readFile:(e,t={})=>{if(t.flags=t.flags||0,t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error('Invalid encoding type "'+t.encoding+'"');var n,r=ot.open(e,t.flags),i=ot.stat(e).size,o=new Uint8Array(i);return ot.read(r,o,0,i,0),"utf8"===t.encoding?n=M(o,0):"binary"===t.encoding&&(n=o),ot.close(r),n},writeFile:(e,t,n={})=>{n.flags=n.flags||577;var r=ot.open(e,n.flags,n.mode);if("string"==typeof t){var i=new Uint8Array(O(t)+1),o=A(t,i,0,i.length);ot.write(r,i,0,o,void 0,n.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");ot.write(r,t,0,t.byteLength,void 0,n.canOwn)}ot.close(r)},cwd:()=>ot.currentPath,chdir:e=>{var t=ot.lookupPath(e,{follow:!0});if(null===t.node)throw new ot.ErrnoError(44);if(!ot.isDir(t.node.mode))throw new ot.ErrnoError(54);var n=ot.nodePermissions(t.node,"x");if(n)throw new ot.ErrnoError(n);ot.currentPath=t.path},createDefaultDirectories:()=>{ot.mkdir("/tmp"),ot.mkdir("/home"),ot.mkdir("/home/web_user")},createDefaultDevices:()=>{ot.mkdir("/dev"),ot.registerDevice(ot.makedev(1,3),{read:()=>0,write:(e,t,n,r,i)=>r}),ot.mkdev("/dev/null",ot.makedev(1,3)),nt.register(ot.makedev(5,0),nt.default_tty_ops),nt.register(ot.makedev(6,0),nt.default_tty1_ops),ot.mkdev("/dev/tty",ot.makedev(5,0)),ot.mkdev("/dev/tty1",ot.makedev(6,0));var e=Qe();ot.createDevice("/dev","random",e),ot.createDevice("/dev","urandom",e),ot.mkdir("/dev/shm"),ot.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{ot.mkdir("/proc");var e=ot.mkdir("/proc/self");ot.mkdir("/proc/self/fd"),ot.mount({mount:()=>{var t=ot.createNode(e,"fd",16895,73);return t.node_ops={lookup:(e,t)=>{var n=+t,r=ot.getStream(n);if(!r)throw new ot.ErrnoError(8);var i={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>r.path}};return i.parent=i,i}},t}},{},"/proc/self/fd")},createStandardStreams:()=>{i.stdin?ot.createDevice("/dev","stdin",i.stdin):ot.symlink("/dev/tty","/dev/stdin"),i.stdout?ot.createDevice("/dev","stdout",null,i.stdout):ot.symlink("/dev/tty","/dev/stdout"),i.stderr?ot.createDevice("/dev","stderr",null,i.stderr):ot.symlink("/dev/tty1","/dev/stderr"),ot.open("/dev/stdin",0),ot.open("/dev/stdout",1),ot.open("/dev/stderr",1)},ensureErrnoError:()=>{ot.ErrnoError||(ot.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){this.errno=e},this.setErrno(e),this.message="FS error"},ot.ErrnoError.prototype=new Error,ot.ErrnoError.prototype.constructor=ot.ErrnoError,[44].forEach((e=>{ot.genericErrors[e]=new ot.ErrnoError(e),ot.genericErrors[e].stack="<generic error, no stack>"})))},staticInit:()=>{ot.ensureErrnoError(),ot.nameTable=new Array(4096),ot.mount(it,{},"/"),ot.createDefaultDirectories(),ot.createDefaultDevices(),ot.createSpecialDirectories(),ot.filesystems={MEMFS:it}},init:(e,t,n)=>{ot.init.initialized=!0,ot.ensureErrnoError(),i.stdin=e||i.stdin,i.stdout=t||i.stdout,i.stderr=n||i.stderr,ot.createStandardStreams()},quit:()=>{ot.init.initialized=!1;for(var e=0;e<ot.streams.length;e++){var t=ot.streams[e];t&&ot.close(t)}},getMode:(e,t)=>{var n=0;return e&&(n|=365),t&&(n|=146),n},findObject:(e,t)=>{var n=ot.analyzePath(e,t);return n.exists?n.object:null},analyzePath:(e,t)=>{try{e=(r=ot.lookupPath(e,{follow:!t})).path}catch(e){}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var r=ot.lookupPath(e,{parent:!0});n.parentExists=!0,n.parentPath=r.path,n.parentObject=r.node,n.name=Je.basename(e),r=ot.lookupPath(e,{follow:!t}),n.exists=!0,n.path=r.path,n.object=r.node,n.name=r.node.name,n.isRoot="/"===r.path}catch(e){n.error=e.errno}return n},createPath:(e,t,n,r)=>{e="string"==typeof e?e:ot.getPath(e);for(var i=t.split("/").reverse();i.length;){var o=i.pop();if(o){var a=Je.join2(e,o);try{ot.mkdir(a)}catch(e){}e=a}}return a},createFile:(e,t,n,r,i)=>{var o=Je.join2("string"==typeof e?e:ot.getPath(e),t),a=ot.getMode(r,i);return ot.create(o,a)},createDataFile:(e,t,n,r,i,o)=>{var a=t;e&&(e="string"==typeof e?e:ot.getPath(e),a=t?Je.join2(e,t):e);var s=ot.getMode(r,i),c=ot.create(a,s);if(n){if("string"==typeof n){for(var u=new Array(n.length),d=0,l=n.length;d<l;++d)u[d]=n.charCodeAt(d);n=u}ot.chmod(c,146|s);var h=ot.open(c,577);ot.write(h,n,0,n.length,0,o),ot.close(h),ot.chmod(c,s)}return c},createDevice:(e,t,n,r)=>{var i=Je.join2("string"==typeof e?e:ot.getPath(e),t),o=ot.getMode(!!n,!!r);ot.createDevice.major||(ot.createDevice.major=64);var a=ot.makedev(ot.createDevice.major++,0);return ot.registerDevice(a,{open:e=>{e.seekable=!1},close:e=>{r&&r.buffer&&r.buffer.length&&r(10)},read:(e,t,r,i,o)=>{for(var a=0,s=0;s<i;s++){var c;try{c=n()}catch(e){throw new ot.ErrnoError(29)}if(void 0===c&&0===a)throw new ot.ErrnoError(6);if(null==c)break;a++,t[r+s]=c}return a&&(e.node.timestamp=Date.now()),a},write:(e,t,n,i,o)=>{for(var a=0;a<i;a++)try{r(t[n+a])}catch(e){throw new ot.ErrnoError(29)}return i&&(e.node.timestamp=Date.now()),a}}),ot.mkdev(i,o,a)},forceLoadFile:e=>{if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!o)throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=tt(o(e.url),!0),e.usedBytes=e.contents.length}catch(e){throw new ot.ErrnoError(29)}},createLazyFile:(e,t,n,r,i)=>{function o(){this.lengthKnown=!1,this.chunks=[]}var a;if(o.prototype.get=function(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,n=e/this.chunkSize|0;return this.getter(n)[t]}},o.prototype.setDataGetter=function(e){this.getter=e},o.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",n,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+n+". Status: "+e.status);var t,r=Number(e.getResponseHeader("Content-length")),i=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,o=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,a=1048576;i||(a=r);var s=this;s.setDataGetter((e=>{var t=e*a,i=(e+1)*a-1;if(i=Math.min(i,r-1),void 0===s.chunks[e]&&(s.chunks[e]=((e,t)=>{if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>r-1)throw new Error("only "+r+" bytes available! programmer error!");var i=new XMLHttpRequest;if(i.open("GET",n,!1),r!==a&&i.setRequestHeader("Range","bytes="+e+"-"+t),i.responseType="arraybuffer",i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.send(null),!(i.status>=200&&i.status<300||304===i.status))throw new Error("Couldn't load "+n+". Status: "+i.status);return void 0!==i.response?new Uint8Array(i.response||[]):tt(i.responseText||"",!0)})(t,i)),void 0===s.chunks[e])throw new Error("doXHR failed!");return s.chunks[e]})),!o&&r||(a=r=1,r=this.getter(0).length,a=r,h("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=r,this._chunkSize=a,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";a={isDevice:!1,url:n};var s=ot.createFile(e,t,a,r,i);a.contents?s.contents=a.contents:a.url&&(s.contents=null,s.url=a.url),Object.defineProperties(s,{usedBytes:{get:function(){return this.contents.length}}});var c={};function u(e,t,n,r,i){var o=e.node.contents;if(i>=o.length)return 0;var a=Math.min(o.length-i,r);if(o.slice)for(var s=0;s<a;s++)t[n+s]=o[i+s];else for(s=0;s<a;s++)t[n+s]=o.get(i+s);return a}return Object.keys(s.stream_ops).forEach((e=>{var t=s.stream_ops[e];c[e]=function(){return ot.forceLoadFile(s),t.apply(null,arguments)}})),c.read=(e,t,n,r,i)=>(ot.forceLoadFile(s),u(e,t,n,r,i)),c.mmap=(e,t,n,r,i)=>{ot.forceLoadFile(s);var o=rt(t);if(!o)throw new ot.ErrnoError(48);return u(e,k,o,t,n),{ptr:o,allocated:!0}},s.stream_ops=c,s},createPreloadedFile:(e,t,n,r,i,o,s,c,u,d)=>{var l=t?et.resolve(Je.join2(e,t)):e;function h(n){function a(n){d&&d(),c||ot.createDataFile(e,t,n,r,i,u),o&&o(),Q()}Browser.handledByPreloadPlugin(n,l,a,(()=>{s&&s(),Q()}))||a(n)}J(),"string"==typeof n?function(e,t,n,r){var i="al "+e;a(e,(t=>{w(t,'Loading data file "'+e+'" failed (no arrayBuffer).'),h(new Uint8Array(t)),i&&Q()}),(t=>{if(!n)throw'Loading data file "'+e+'" failed.';n()})),i&&J()}(n,0,s):h(n)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,DB_NAME:()=>"EM_FS_"+window.location.pathname,DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:(e,t,n)=>{t=t||(()=>{}),n=n||(()=>{});var r=ot.indexedDB();try{var i=r.open(ot.DB_NAME(),ot.DB_VERSION)}catch(e){return n(e)}i.onupgradeneeded=()=>{h("creating db"),i.result.createObjectStore(ot.DB_STORE_NAME)},i.onsuccess=()=>{var r=i.result.transaction([ot.DB_STORE_NAME],"readwrite"),o=r.objectStore(ot.DB_STORE_NAME),a=0,s=0,c=e.length;function u(){0==s?t():n()}e.forEach((e=>{var t=o.put(ot.analyzePath(e).object.contents,e);t.onsuccess=()=>{++a+s==c&&u()},t.onerror=()=>{s++,a+s==c&&u()}})),r.onerror=n},i.onerror=n},loadFilesFromDB:(e,t,n)=>{t=t||(()=>{}),n=n||(()=>{});var r=ot.indexedDB();try{var i=r.open(ot.DB_NAME(),ot.DB_VERSION)}catch(e){return n(e)}i.onupgradeneeded=n,i.onsuccess=()=>{var r=i.result;try{var o=r.transaction([ot.DB_STORE_NAME],"readonly")}catch(e){return void n(e)}var a=o.objectStore(ot.DB_STORE_NAME),s=0,c=0,u=e.length;function d(){0==c?t():n()}e.forEach((e=>{var t=a.get(e);t.onsuccess=()=>{ot.analyzePath(e).exists&&ot.unlink(e),ot.createDataFile(Je.dirname(e),Je.basename(e),t.result,!0,!0,!0),++s+c==u&&d()},t.onerror=()=>{c++,s+c==u&&d()}})),o.onerror=n},i.onerror=n}},at={DEFAULT_POLLMASK:5,calculateAt:function(e,t,n){if(Je.isAbs(t))return t;var r;if(r=-100===e?ot.cwd():at.getStreamFromFD(e).path,0==t.length){if(!n)throw new ot.ErrnoError(44);return r}return Je.join2(r,t)},doStat:function(e,t,n){try{var r=e(t)}catch(e){if(e&&e.node&&Je.normalize(t)!==Je.normalize(ot.getPath(e.node)))return-54;throw e}return C[n>>2]=r.dev,C[n+8>>2]=r.ino,C[n+12>>2]=r.mode,j[n+16>>2]=r.nlink,C[n+20>>2]=r.uid,C[n+24>>2]=r.gid,C[n+28>>2]=r.rdev,V=[r.size>>>0,(U=r.size,+Math.abs(U)>=1?U>0?(0|Math.min(+Math.floor(U/4294967296),4294967295))>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],C[n+40>>2]=V[0],C[n+44>>2]=V[1],C[n+48>>2]=4096,C[n+52>>2]=r.blocks,V=[Math.floor(r.atime.getTime()/1e3)>>>0,(U=Math.floor(r.atime.getTime()/1e3),+Math.abs(U)>=1?U>0?(0|Math.min(+Math.floor(U/4294967296),4294967295))>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],C[n+56>>2]=V[0],C[n+60>>2]=V[1],j[n+64>>2]=0,V=[Math.floor(r.mtime.getTime()/1e3)>>>0,(U=Math.floor(r.mtime.getTime()/1e3),+Math.abs(U)>=1?U>0?(0|Math.min(+Math.floor(U/4294967296),4294967295))>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],C[n+72>>2]=V[0],C[n+76>>2]=V[1],j[n+80>>2]=0,V=[Math.floor(r.ctime.getTime()/1e3)>>>0,(U=Math.floor(r.ctime.getTime()/1e3),+Math.abs(U)>=1?U>0?(0|Math.min(+Math.floor(U/4294967296),4294967295))>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],C[n+88>>2]=V[0],C[n+92>>2]=V[1],j[n+96>>2]=0,V=[r.ino>>>0,(U=r.ino,+Math.abs(U)>=1?U>0?(0|Math.min(+Math.floor(U/4294967296),4294967295))>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],C[n+104>>2]=V[0],C[n+108>>2]=V[1],0},doMsync:function(e,t,n,r,i){var o=S.slice(e,e+n);ot.msync(t,o,i,n,r)},varargs:void 0,get:function(){return at.varargs+=4,C[at.varargs-4>>2]},getStr:function(e){return R(e)},getStreamFromFD:function(e){var t=ot.getStream(e);if(!t)throw new ot.ErrnoError(8);return t}};function st(e,t,n){at.varargs=n;try{var r=at.getStreamFromFD(e);switch(t){case 0:return(i=at.get())<0?-28:ot.createStream(r,i).fd;case 1:case 2:case 6:case 7:return 0;case 3:return r.flags;case 4:var i=at.get();return r.flags|=i,0;case 5:return i=at.get(),E[i+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return C[Br()>>2]=28,-1}}catch(e){if(void 0===ot||!(e instanceof ot.ErrnoError))throw e;return-e.errno}}function ct(e,t){try{var n=at.getStreamFromFD(e);return at.doStat(ot.stat,n.path,t)}catch(e){if(void 0===ot||!(e instanceof ot.ErrnoError))throw e;return-e.errno}}function ut(e,t,n){at.varargs=n;try{var r=at.getStreamFromFD(e);switch(t){case 21509:case 21505:case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:case 21523:case 21524:return r.tty?0:-59;case 21519:if(!r.tty)return-59;var i=at.get();return C[i>>2]=0,0;case 21520:return r.tty?-28:-59;case 21531:return i=at.get(),ot.ioctl(r,t,i);default:return-28}}catch(e){if(void 0===ot||!(e instanceof ot.ErrnoError))throw e;return-e.errno}}function dt(e,t,n,r){try{t=at.getStr(t);var i=256&r,o=4096&r;return r&=-4353,t=at.calculateAt(e,t,o),at.doStat(i?ot.lstat:ot.stat,t,n)}catch(e){if(void 0===ot||!(e instanceof ot.ErrnoError))throw e;return-e.errno}}function lt(e,t,n,r){at.varargs=r;try{t=at.getStr(t),t=at.calculateAt(e,t);var i=r?at.get():0;return ot.open(t,n,i).fd}catch(e){if(void 0===ot||!(e instanceof ot.ErrnoError))throw e;return-e.errno}}function ht(e,t){try{return e=at.getStr(e),at.doStat(ot.stat,e,t)}catch(e){if(void 0===ot||!(e instanceof ot.ErrnoError))throw e;return-e.errno}}st.sig="iiip",ct.sig="iip",ut.sig="iiip",dt.sig="iippi",lt.sig="iipip",ht.sig="ipp";var pt=new WebAssembly.Global({value:"i32",mutable:!1},1);i.___table_base=pt;var ft={};function mt(e){var t=O(e)+1,n=Jr(t);return A(e,k,n,t),n}function gt(e){var t,n;t=function(){var t=mt(e);Yr(t)},n=Xr(),t(),Kr(n)}function vt(e,t){var n,r=R(e+44),i=C[e+20>>2];n=r,new RegExp("^([a-zA-Z]+:\\/\\/)","i").test(n)||(r=Je.normalize(r));var o=[],a=e=>{var t=ot.findObject(e);return t&&!t.isFolder&&!t.isDevice};if(!a(r))for(var s in ft.LD_LIBRARY_PATH&&(o=ft.LD_LIBRARY_PATH.split(":")),o){var c=Je.join2(o[s],r);if(a(c)){r=c;break}}var u={global:Boolean(256&i),nodelete:Boolean(4096&i),loadAsync:t.loadAsync,fs:t.fs};if(t.loadAsync)return Pe(r,u,e);try{return Pe(r,u,e)}catch(e){return gt("Could not load dynamic lib: "+r+"\n"+e),0}}function yt(e){return vt(e,{loadAsync:!1,fs:ot})}function _t(e,t){var n;if(t=R(t),0==e){if(!(n=Ce(t,!0)))return gt('Tried to lookup unknown symbol "'+t+'" in dynamic lib: RTLD_DEFAULT'),0}else{var r=he.loadedLibsByHandle[e];if(!r.module.hasOwnProperty(t))return gt('Tried to lookup unknown symbol "'+t+'" in dynamic lib: '+r.name),0;(n=r.module["orig$"+t])||(n=r.module[t])}return"function"==typeof n&&(n=Ee(n,n.sig)),n}yt.sig="iiii",_t.sig="iii";var wt={};function bt(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function kt(e){return this.fromWireType(C[e>>2])}var St={},Et={},Tt={};function Ct(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=48&&t<=57?"_"+e:e}function jt(e,t){return e=Ct(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function xt(e,t){var n=jt(t,(function(e){this.name=t,this.message=e;var n=new Error(e).stack;void 0!==n&&(this.stack=this.toString()+"\n"+n.replace(/^Error(:[^\n]*)?\n/,""))}));return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},n}var Pt=void 0;function It(e){throw new Pt(e)}function Mt(e,t,n){function r(t){var r=n(t);r.length!==e.length&&It("Mismatched type converter count");for(var i=0;i<e.length;++i)Lt(e[i],r[i])}e.forEach((function(e){Tt[e]=t}));var i=new Array(t.length),o=[],a=0;t.forEach(((e,t)=>{Et.hasOwnProperty(e)?i[t]=Et[e]:(o.push(e),St.hasOwnProperty(e)||(St[e]=[]),St[e].push((()=>{i[t]=Et[e],++a===o.length&&r(i)})))})),0===o.length&&r(i)}function Rt(e){var t=wt[e];delete wt[e];var n=t.rawConstructor,r=t.rawDestructor,i=t.fields;Mt([e],i.map((e=>e.getterReturnType)).concat(i.map((e=>e.setterArgumentType))),(e=>{var o={};return i.forEach(((t,n)=>{var r=t.fieldName,a=e[n],s=t.getter,c=t.getterContext,u=e[n+i.length],d=t.setter,l=t.setterContext;o[r]={read:e=>a.fromWireType(s(c,e)),write:(e,t)=>{var n=[];d(l,e,u.toWireType(n,t)),bt(n)}}})),[{name:t.name,fromWireType:function(e){var t={};for(var n in o)t[n]=o[n].read(e);return r(e),t},toWireType:function(e,t){for(var i in o)if(!(i in t))throw new TypeError('Missing field:  "'+i+'"');var a=n();for(i in o)o[i].write(a,t[i]);return null!==e&&e.push(r,a),a},argPackAdvance:8,readValueFromPointer:kt,destructorFunction:r}]}))}function At(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}Rt.sig="ii";var Dt=void 0;function Ot(e){for(var t="",n=e;S[n];)t+=Dt[S[n++]];return t}var Nt=void 0;function Ft(e){throw new Nt(e)}function Lt(e,t,n={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var r=t.name;if(e||Ft('type "'+r+'" must have a positive integer typeid pointer'),Et.hasOwnProperty(e)){if(n.ignoreDuplicateRegistrations)return;Ft("Cannot register type '"+r+"' twice")}if(Et[e]=t,delete Tt[e],St.hasOwnProperty(e)){var i=St[e];delete St[e],i.forEach((e=>e()))}}function zt(e,t,n,r,i){var o=At(n);Lt(e,{name:t=Ot(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?r:i},argPackAdvance:8,readValueFromPointer:function(e){var r;if(1===n)r=k;else if(2===n)r=E;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+t);r=C}return this.fromWireType(r[e>>o])},destructorFunction:null})}function Ut(e){Ft(e.$$.ptrType.registeredClass.name+" instance already deleted")}zt.sig="vpppii";var Vt=!1;function Bt(e){}function Wt(e){e.count.value-=1,0===e.count.value&&function(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}(e)}function Gt(e,t,n){if(t===n)return e;if(void 0===n.baseClass)return null;var r=Gt(e,t,n.baseClass);return null===r?null:n.downcast(r)}var Ht={},Yt=[];function $t(){for(;Yt.length;){var e=Yt.pop();e.$$.deleteScheduled=!1,e.delete()}}var Zt=void 0,qt={};function Xt(e,t){return t.ptrType&&t.ptr||It("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!=!!t.smartPtr&&It("Both smartPtrType and smartPtr must be specified"),t.count={value:1},Kt(Object.create(e,{$$:{value:t}}))}function Kt(e){return"undefined"==typeof FinalizationRegistry?(Kt=e=>e,e):(Vt=new FinalizationRegistry((e=>{Wt(e.$$)})),Kt=e=>{var t=e.$$;if(t.smartPtr){var n={$$:t};Vt.register(e,n,e)}return e},Bt=e=>Vt.unregister(e),Kt(e))}function Jt(){}function Qt(e,t,n){if(void 0===e[t].overloadTable){var r=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||Ft("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[r.argCount]=r}}function en(e,t,n){i.hasOwnProperty(e)?((void 0===n||void 0!==i[e].overloadTable&&void 0!==i[e].overloadTable[n])&&Ft("Cannot register public name '"+e+"' twice"),Qt(i,e,e),i.hasOwnProperty(n)&&Ft("Cannot register multiple overloads of a function with the same number of arguments ("+n+")!"),i[e].overloadTable[n]=t):(i[e]=t,void 0!==n&&(i[e].numArguments=n))}function tn(e,t,n,r,i,o,a,s){this.name=e,this.constructor=t,this.instancePrototype=n,this.rawDestructor=r,this.baseClass=i,this.getActualType=o,this.upcast=a,this.downcast=s,this.pureVirtualFunctions=[]}function nn(e,t,n){for(;t!==n;)t.upcast||Ft("Expected null or instance of "+n.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function rn(e,t){if(null===t)return this.isReference&&Ft("null is not a valid "+this.name),0;t.$$||Ft('Cannot pass "'+Pn(t)+'" as a '+this.name),t.$$.ptr||Ft("Cannot pass deleted object as a pointer of type "+this.name);var n=t.$$.ptrType.registeredClass;return nn(t.$$.ptr,n,this.registeredClass)}function on(e,t){var n;if(null===t)return this.isReference&&Ft("null is not a valid "+this.name),this.isSmartPointer?(n=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,n),n):0;t.$$||Ft('Cannot pass "'+Pn(t)+'" as a '+this.name),t.$$.ptr||Ft("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&Ft("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);var r=t.$$.ptrType.registeredClass;if(n=nn(t.$$.ptr,r,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&Ft("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?n=t.$$.smartPtr:Ft("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:n=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)n=t.$$.smartPtr;else{var i=t.clone();n=this.rawShare(n,Sn.toHandle((function(){i.delete()}))),null!==e&&e.push(this.rawDestructor,n)}break;default:Ft("Unsupporting sharing policy")}return n}function an(e,t){if(null===t)return this.isReference&&Ft("null is not a valid "+this.name),0;t.$$||Ft('Cannot pass "'+Pn(t)+'" as a '+this.name),t.$$.ptr||Ft("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&Ft("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var n=t.$$.ptrType.registeredClass;return nn(t.$$.ptr,n,this.registeredClass)}function sn(e,t,n,r,i,o,a,s,c,u,d){this.name=e,this.registeredClass=t,this.isReference=n,this.isConst=r,this.isSmartPointer=i,this.pointeeType=o,this.sharingPolicy=a,this.rawGetPointee=s,this.rawConstructor=c,this.rawShare=u,this.rawDestructor=d,i||void 0!==t.baseClass?this.toWireType=on:r?(this.toWireType=rn,this.destructorFunction=null):(this.toWireType=an,this.destructorFunction=null)}function cn(e,t,n){i.hasOwnProperty(e)||It("Replacing nonexistant public symbol"),void 0!==i[e].overloadTable&&void 0!==n?i[e].overloadTable[n]=t:(i[e]=t,i[e].argCount=n)}function un(e,t){var n,r,i,o=(e=Ot(e)).includes("j")?(n=e,r=t,i=[],function(){return i.length=0,Object.assign(i,arguments),me(n,r,i)}):fe(t);return"function"!=typeof o&&Ft("unknown function pointer with signature "+e+": "+t),o}var dn=void 0;function ln(e){var t=Hr(e),n=Ot(t);return Gr(t),n}function hn(e,t){var n=[],r={};throw t.forEach((function e(t){r[t]||Et[t]||(Tt[t]?Tt[t].forEach(e):(n.push(t),r[t]=!0))})),new dn(e+": "+n.map(ln).join([", "]))}function pn(e,t,n,r,i,o,a,s,c,u,d,l,h){d=Ot(d),o=un(i,o),s&&(s=un(a,s)),u&&(u=un(c,u)),h=un(l,h);var p=Ct(d);en(p,(function(){hn("Cannot construct "+d+" due to unbound types",[r])})),Mt([e,t,n],r?[r]:[],(function(t){var n,i;t=t[0],i=r?(n=t.registeredClass).instancePrototype:Jt.prototype;var a=jt(p,(function(){if(Object.getPrototypeOf(this)!==c)throw new Nt("Use 'new' to construct "+d);if(void 0===l.constructor_body)throw new Nt(d+" has no accessible constructor");var e=l.constructor_body[arguments.length];if(void 0===e)throw new Nt("Tried to invoke ctor of "+d+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(l.constructor_body).toString()+") parameters instead!");return e.apply(this,arguments)})),c=Object.create(i,{constructor:{value:a}});a.prototype=c;var l=new tn(d,a,c,h,n,o,s,u),f=new sn(d,l,!0,!1,!1),m=new sn(d+"*",l,!1,!1,!1),g=new sn(d+" const*",l,!1,!0,!1);return Ht[e]={pointerType:m,constPointerType:g},cn(p,a),[f,m,g]}))}function fn(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var n=jt(e.name||"unknownFunctionName",(function(){}));n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return i instanceof Object?i:r}function mn(e,t,n,r,i){var o=t.length;o<2&&Ft("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var a=null!==t[1]&&null!==n,s=!1,c=1;c<t.length;++c)if(null!==t[c]&&void 0===t[c].destructorFunction){s=!0;break}var u="void"!==t[0].name,d="",l="";for(c=0;c<o-2;++c)d+=(0!==c?", ":"")+"arg"+c,l+=(0!==c?", ":"")+"arg"+c+"Wired";var h="return function "+Ct(e)+"("+d+") {\nif (arguments.length !== "+(o-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(o-2)+" args!');\n}\n";s&&(h+="var destructors = [];\n");var p=s?"destructors":"null",f=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],m=[Ft,r,i,bt,t[0],t[1]];for(a&&(h+="var thisWired = classParam.toWireType("+p+", this);\n"),c=0;c<o-2;++c)h+="var arg"+c+"Wired = argType"+c+".toWireType("+p+", arg"+c+"); // "+t[c+2].name+"\n",f.push("argType"+c),m.push(t[c+2]);if(a&&(l="thisWired"+(l.length>0?", ":"")+l),h+=(u?"var rv = ":"")+"invoker(fn"+(l.length>0?", ":"")+l+");\n",s)h+="runDestructors(destructors);\n";else for(c=a?1:2;c<t.length;++c){var g=1===c?"thisWired":"arg"+(c-2)+"Wired";null!==t[c].destructorFunction&&(h+=g+"_dtor("+g+"); // "+t[c].name+"\n",f.push(g+"_dtor"),m.push(t[c].destructorFunction))}return u&&(h+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),h+="}\n",f.push(h),fn(Function,f).apply(null,m)}function gn(e,t){for(var n=[],r=0;r<e;r++)n.push(j[t+4*r>>2]);return n}function vn(e,t,n,r,i,o,a){var s=gn(n,r);t=Ot(t),o=un(i,o),Mt([],[e],(function(e){var r=(e=e[0]).name+"."+t;function i(){hn("Cannot call "+r+" due to unbound types",s)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]);var c=e.registeredClass.constructor;return void 0===c[t]?(i.argCount=n-1,c[t]=i):(Qt(c,t,r),c[t].overloadTable[n-1]=i),Mt([],s,(function(e){var i=[e[0],null].concat(e.slice(1)),s=mn(r,i,null,o,a);return void 0===c[t].overloadTable?(s.argCount=n-1,c[t]=s):c[t].overloadTable[n-1]=s,[]})),[]}))}function yn(e,t,n,r,i,o){w(t>0);var a=gn(t,n);i=un(r,i),Mt([],[e],(function(e){var n="constructor "+(e=e[0]).name;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new Nt("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.registeredClass.constructor_body[t-1]=()=>{hn("Cannot construct "+e.name+" due to unbound types",a)},Mt([],a,(function(r){return r.splice(1,0,null),e.registeredClass.constructor_body[t-1]=mn(n,r,null,i,o),[]})),[]}))}function _n(e,t,n,r,i,o,a,s){var c=gn(n,r);t=Ot(t),o=un(i,o),Mt([],[e],(function(e){var r=(e=e[0]).name+"."+t;function i(){hn("Cannot call "+r+" due to unbound types",c)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]),s&&e.registeredClass.pureVirtualFunctions.push(t);var u=e.registeredClass.instancePrototype,d=u[t];return void 0===d||void 0===d.overloadTable&&d.className!==e.name&&d.argCount===n-2?(i.argCount=n-2,i.className=e.name,u[t]=i):(Qt(u,t,r),u[t].overloadTable[n-2]=i),Mt([],c,(function(i){var s=mn(r,i,e,o,a);return void 0===u[t].overloadTable?(s.argCount=n-2,u[t]=s):u[t].overloadTable[n-2]=s,[]})),[]}))}pn.sig="vppppppppppppp",vn.sig="vppipppp",yn.sig="vpipppp",_n.sig="vppippppi";var wn=[],bn=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function kn(e){e>4&&0==--bn[e].refcount&&(bn[e]=void 0,wn.push(e))}kn.sig="vp";var Sn={toValue:e=>(e||Ft("Cannot use deleted val. handle = "+e),bn[e].value),toHandle:e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=wn.length?wn.pop():bn.length;return bn[t]={refcount:1,value:e},t}}};function En(e,t){Lt(e,{name:t=Ot(t),fromWireType:function(e){var t=Sn.toValue(e);return kn(e),t},toWireType:function(e,t){return Sn.toHandle(t)},argPackAdvance:8,readValueFromPointer:kt,destructorFunction:null})}function Tn(e,t,n){switch(t){case 0:return function(e){var t=n?k:S;return this.fromWireType(t[e])};case 1:return function(e){var t=n?E:T;return this.fromWireType(t[e>>1])};case 2:return function(e){var t=n?C:j;return this.fromWireType(t[e>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function Cn(e,t,n,r){var i=At(n);function o(){}t=Ot(t),o.values={},Lt(e,{name:t,constructor:o,fromWireType:function(e){return this.constructor.values[e]},toWireType:function(e,t){return t.value},argPackAdvance:8,readValueFromPointer:Tn(t,i,r),destructorFunction:null}),en(t,o)}function jn(e,t){var n=Et[e];return void 0===n&&Ft(t+" has unknown type "+ln(e)),n}function xn(e,t,n){var r=jn(e,"enum");t=Ot(t);var i=r.constructor,o=Object.create(r.constructor.prototype,{value:{value:n},constructor:{value:jt(r.name+"_"+t,(function(){}))}});i.values[n]=o,i[t]=o}function Pn(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function In(e,t){switch(t){case 2:return function(e){return this.fromWireType(x[e>>2])};case 3:return function(e){return this.fromWireType(P[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function Mn(e,t,n){var r=At(n);Lt(e,{name:t=Ot(t),fromWireType:function(e){return e},toWireType:function(e,t){return t},argPackAdvance:8,readValueFromPointer:In(t,r),destructorFunction:null})}function Rn(e,t,n,r,i,o){var a=gn(t,n);e=Ot(e),i=un(r,i),en(e,(function(){hn("Cannot call "+e+" due to unbound types",a)}),t-1),Mt([],a,(function(n){var r=[n[0],null].concat(n.slice(1));return cn(e,mn(e,r,null,i,o),t-1),[]}))}function An(e,t,n){switch(t){case 0:return n?function(e){return k[e]}:function(e){return S[e]};case 1:return n?function(e){return E[e>>1]}:function(e){return T[e>>1]};case 2:return n?function(e){return C[e>>2]}:function(e){return j[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function Dn(e,t,n,r,i){t=Ot(t),-1===i&&(i=4294967295);var o=At(n),a=e=>e;if(0===r){var s=32-8*n;a=e=>e<<s>>>s}var c=t.includes("unsigned");Lt(e,{name:t,fromWireType:a,toWireType:c?function(e,t){return this.name,t>>>0}:function(e,t){return this.name,t},argPackAdvance:8,readValueFromPointer:An(t,o,0!==r),destructorFunction:null})}function On(e,t,n){var r=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function i(e){var t=j,n=t[e>>=2],i=t[e+1];return new r(b,i,n)}Lt(e,{name:n=Ot(n),fromWireType:i,argPackAdvance:8,readValueFromPointer:i},{ignoreDuplicateRegistrations:!0})}function Nn(e,t){var n="std::string"===(t=Ot(t));Lt(e,{name:t,fromWireType:function(e){var t,r=j[e>>2],i=e+4;if(n)for(var o=i,a=0;a<=r;++a){var s=i+a;if(a==r||0==S[s]){var c=R(o,s-o);void 0===t?t=c:(t+=String.fromCharCode(0),t+=c),o=s+1}}else{var u=new Array(r);for(a=0;a<r;++a)u[a]=String.fromCharCode(S[i+a]);t=u.join("")}return Gr(e),t},toWireType:function(e,t){var r;t instanceof ArrayBuffer&&(t=new Uint8Array(t));var i="string"==typeof t;i||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||Ft("Cannot pass non-string to std::string"),r=n&&i?O(t):t.length;var o=Wr(4+r+1),a=o+4;if(j[o>>2]=r,n&&i)D(t,a,r+1);else if(i)for(var s=0;s<r;++s){var c=t.charCodeAt(s);c>255&&(Gr(a),Ft("String has UTF-16 code units that do not fit in 8 bits")),S[a+s]=c}else for(s=0;s<r;++s)S[a+s]=t[s];return null!==e&&e.push(Gr,o),o},argPackAdvance:8,readValueFromPointer:kt,destructorFunction:function(e){Gr(e)}})}En.sig="vpp",Cn.sig="vpppi",xn.sig="vppi",Mn.sig="vppp",Rn.sig="vpipppp",Dn.sig="vpppii",On.sig="vpip",Nn.sig="vpp";var Fn="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function Ln(e,t){for(var n=e,r=n>>1,i=r+t/2;!(r>=i)&&T[r];)++r;if((n=r<<1)-e>32&&Fn)return Fn.decode(S.subarray(e,n));for(var o="",a=0;!(a>=t/2);++a){var s=E[e+2*a>>1];if(0==s)break;o+=String.fromCharCode(s)}return o}function zn(e,t,n){if(void 0===n&&(n=2147483647),n<2)return 0;for(var r=t,i=(n-=2)<2*e.length?n/2:e.length,o=0;o<i;++o){var a=e.charCodeAt(o);E[t>>1]=a,t+=2}return E[t>>1]=0,t-r}function Un(e){return 2*e.length}function Vn(e,t){for(var n=0,r="";!(n>=t/4);){var i=C[e+4*n>>2];if(0==i)break;if(++n,i>=65536){var o=i-65536;r+=String.fromCharCode(55296|o>>10,56320|1023&o)}else r+=String.fromCharCode(i)}return r}function Bn(e,t,n){if(void 0===n&&(n=2147483647),n<4)return 0;for(var r=t,i=r+n-4,o=0;o<e.length;++o){var a=e.charCodeAt(o);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++o)),C[t>>2]=a,(t+=4)+4>i)break}return C[t>>2]=0,t-r}function Wn(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&++n,t+=4}return t}function Gn(e,t,n){var r,i,o,a,s;n=Ot(n),2===t?(r=Ln,i=zn,a=Un,o=()=>T,s=1):4===t&&(r=Vn,i=Bn,a=Wn,o=()=>j,s=2),Lt(e,{name:n,fromWireType:function(e){for(var n,i=j[e>>2],a=o(),c=e+4,u=0;u<=i;++u){var d=e+4+u*t;if(u==i||0==a[d>>s]){var l=r(c,d-c);void 0===n?n=l:(n+=String.fromCharCode(0),n+=l),c=d+t}}return Gr(e),n},toWireType:function(e,r){"string"!=typeof r&&Ft("Cannot pass non-string to C++ string type "+n);var o=a(r),c=Wr(4+o+t);return j[c>>2]=o>>s,i(r,c+4,o+t),null!==e&&e.push(Gr,c),c},argPackAdvance:8,readValueFromPointer:kt,destructorFunction:function(e){Gr(e)}})}function Hn(e,t,n,r,i,o){wt[e]={name:Ot(t),rawConstructor:un(n,r),rawDestructor:un(i,o),fields:[]}}function Yn(e,t,n,r,i,o,a,s,c,u){wt[e].fields.push({fieldName:Ot(t),getterReturnType:n,getter:un(r,i),getterContext:o,setterArgumentType:a,setter:un(s,c),setterContext:u})}function $n(e,t){Lt(e,{isVoid:!0,name:t=Ot(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})}function Zn(){return Date.now()}function qn(e){if(!_)try{e()}catch(e){ue(e)}}function Xn(e,t,n){function r(t){gt("Could not load dynamic lib: "+R(j[e+44>>2])+"\n"+t),qn((function(){fe(n)(e)}))}var i=vt(e,{loadAsync:!0});i?i.then((function(){qn((function(){fe(t)(e)}))}),r):r()}function Kn(e,t,n){e=Sn.toValue(e),t=jn(t,"emval::as");var r=[],i=Sn.toHandle(r);return j[n>>2]=i,t.toWireType(r,e)}Gn.sig="vppp",Hn.sig="viiiiii",Yn.sig="viiiiiiiiii",$n.sig="vpp",Zn.sig="j",Xn.sig="viiiii",Kn.sig="dppp";var Jn={};function Qn(e){var t=Jn[e];return void 0===t?Ot(e):t}var er=[];function tr(e,t,n,r,i){return(e=er[e])(t=Sn.toValue(t),n=Qn(n),function(e){var t=[];return j[e>>2]=Sn.toHandle(t),t}(r),i)}tr.sig="dppppp";var nr,rr=[];function ir(e,t){var n=function(e,t){for(var n=new Array(e),r=0;r<e;++r)n[r]=jn(j[t+4*r>>2],"parameter "+r);return n}(e,t),r=n[0],i=r.name+"_$"+n.slice(1).map((function(e){return e.name})).join("_")+"$",o=rr[i];if(void 0!==o)return o;for(var a=["retType"],s=[r],c="",u=0;u<e-1;++u)c+=(0!==u?", ":"")+"arg"+u,a.push("argType"+u),s.push(n[1+u]);var d,l,h="return function "+Ct("methodCaller_"+i)+"(handle, name, destructors, args) {\n",p=0;for(u=0;u<e-1;++u)h+="    var arg"+u+" = argType"+u+".readValueFromPointer(args"+(p?"+"+p:"")+");\n",p+=n[u+1].argPackAdvance;for(h+="    var rv = handle[name]("+c+");\n",u=0;u<e-1;++u)n[u+1].deleteObject&&(h+="    argType"+u+".deleteObject(arg"+u+");\n");return r.isVoid||(h+="    return retType.toWireType(destructors, rv);\n"),h+="};\n",a.push(h),d=fn(Function,a).apply(null,s),l=er.length,er.push(d),o=l,rr[i]=o,o}function or(e,t){return e=Sn.toValue(e),t=Sn.toValue(t),Sn.toHandle(e[t])}function ar(e){e>4&&(bn[e].refcount+=1)}function sr(e){return Sn.toHandle(Qn(e))}function cr(e){bt(Sn.toValue(e)),kn(e)}function ur(e,t){var n=(e=jn(e,"_emval_take_value")).readValueFromPointer(t);return Sn.toHandle(n)}function dr(e,t){var n,r=new Date(1e3*(j[(n=e)>>2]+4294967296*C[n+4>>2]));C[t>>2]=r.getSeconds(),C[t+4>>2]=r.getMinutes(),C[t+8>>2]=r.getHours(),C[t+12>>2]=r.getDate(),C[t+16>>2]=r.getMonth(),C[t+20>>2]=r.getFullYear()-1900,C[t+24>>2]=r.getDay();var i=new Date(r.getFullYear(),0,1),o=(r.getTime()-i.getTime())/864e5|0;C[t+28>>2]=o,C[t+36>>2]=-60*r.getTimezoneOffset();var a=new Date(r.getFullYear(),6,1).getTimezoneOffset(),s=i.getTimezoneOffset(),c=0|(a!=s&&r.getTimezoneOffset()==Math.min(s,a));C[t+32>>2]=c}function lr(e,t,n,r,i,o){try{var a=at.getStreamFromFD(r),s=ot.mmap(a,e,i,t,n),c=s.ptr;return C[o>>2]=s.allocated,c}catch(e){if(void 0===ot||!(e instanceof ot.ErrnoError))throw e;return-e.errno}}function hr(e,t,n,r,i,o){try{var a=at.getStreamFromFD(i);2&n&&at.doMsync(e,a,t,r,o),ot.munmap(a)}catch(e){if(void 0===ot||!(e instanceof ot.ErrnoError))throw e;return-e.errno}}function pr(e){var t=O(e)+1,n=Wr(t);return n&&A(e,k,n,t),n}function fr(e,t,n){var r=(new Date).getFullYear(),i=new Date(r,0,1),o=new Date(r,6,1),a=i.getTimezoneOffset(),s=o.getTimezoneOffset(),c=Math.max(a,s);function u(e){var t=e.toTimeString().match(/\(([A-Za-z ]+)\)$/);return t?t[1]:"GMT"}C[e>>2]=60*c,C[t>>2]=Number(a!=s);var d=u(i),l=u(o),h=pr(d),p=pr(l);s<a?(j[n>>2]=h,j[n+4>>2]=p):(j[n>>2]=p,j[n+4>>2]=h)}function mr(e,t,n){mr.called||(mr.called=!0,fr(e,t,n))}function gr(){ee("")}function vr(){return 2147483648}function yr(e,t,n){S.copyWithin(e,t,t+n)}function _r(e){try{return g.grow(e-b.byteLength+65535>>>16),N(g.buffer),1}catch(e){}}function wr(e){var t,n=S.length,r=2147483648;if((e>>>=0)>r)return!1;for(var i=1;i<=4;i*=2){var o=n*(1+.2/i);if(o=Math.min(o,e+100663296),_r(Math.min(r,(t=Math.max(e,o))+(65536-t%65536)%65536)))return!0}return!1}ir.sig="ppp",or.sig="ppp",ar.sig="vp",sr.sig="pp",cr.sig="vp",ur.sig="ppp",dr.sig="ipp",lr.sig="ppiiipp",hr.sig="vppiiip",fr.sig="viii",mr.sig="vppp",i._abort=gr,gr.sig="v",vr.sig="p",nr=()=>performance.now(),i._emscripten_get_now=nr,nr.sig="d",yr.sig="vppp",wr.sig="ip";var br={xhrs:{},setu64:function(e,t){j[e>>2]=t,j[e+4>>2]=t/4294967296|0},openDatabase:function(e,t,n,r){try{var i=indexedDB.open(e,t)}catch(e){return r(e)}i.onupgradeneeded=e=>{var t=e.target.result;t.objectStoreNames.contains("FILES")&&t.deleteObjectStore("FILES"),t.createObjectStore("FILES")},i.onsuccess=e=>n(e.target.result),i.onerror=e=>r(e)},staticInit:function(){br.openDatabase("emscripten_filesystem",1,(e=>{br.dbInstance=e,Q()}),(()=>{br.dbInstance=!1,Q()})),"undefined"!=typeof ENVIRONMENT_IS_FETCH_WORKER&&ENVIRONMENT_IS_FETCH_WORKER||J()}};function kr(e,t,n,r,i){var o=j[e+8>>2];if(o){var a=R(o),s=e+112,c=R(s);c||(c="GET"),j[e+4>>2];var u=j[s+52>>2],d=j[s+56>>2],l=!!j[s+60>>2],h=(j[s+64>>2],j[s+68>>2]),p=j[s+72>>2],f=j[s+76>>2],m=j[s+80>>2],g=j[s+84>>2],v=j[s+88>>2],y=!!(1&u),_=!!(2&u),w=!!(64&u),b=h?R(h):void 0,k=p?R(p):void 0,E=new XMLHttpRequest;if(E.withCredentials=l,E.open(c,a,!w,b,k),w||(E.timeout=d),E.url_=a,E.responseType="arraybuffer",m){var C=R(m);E.overrideMimeType(C)}if(f)for(;;){var x=j[f>>2];if(!x)break;var P=j[f+4>>2];if(!P)break;f+=8;var I=R(x),M=R(P);E.setRequestHeader(I,M)}var A=j[e+0>>2];br.xhrs[A]=E;var O=g&&v?S.slice(g,g+v):null;E.onload=r=>{A in br.xhrs&&(N(),E.status>=200&&E.status<300?t&&t(e,E,r):n&&n(e,E,r))},E.onerror=t=>{A in br.xhrs&&(N(),n&&n(e,E,t))},E.ontimeout=t=>{A in br.xhrs&&n&&n(e,E,t)},E.onprogress=t=>{if(A in br.xhrs){var n=y&&_&&E.response?E.response.byteLength:0,i=0;n>0&&y&&_&&(i=Wr(n),S.set(new Uint8Array(E.response),i)),j[e+12>>2]=i,br.setu64(e+16,n),br.setu64(e+24,t.loaded-n),br.setu64(e+32,t.total),T[e+40>>1]=E.readyState,E.readyState>=3&&0===E.status&&t.loaded>0&&(E.status=200),T[e+42>>1]=E.status,E.statusText&&D(E.statusText,e+44,64),r&&r(e,E,t),i&&Gr(i)}},E.onreadystatechange=t=>{A in br.xhrs&&(T[e+40>>1]=E.readyState,E.readyState>=2&&(T[e+42>>1]=E.status),i&&i(e,E,t))};try{E.send(O)}catch(t){n&&n(e,E,t)}}else n(e,0,"no url specified!");function N(){var t=0,n=0;E.response&&y&&0===j[e+12>>2]&&(n=E.response.byteLength),n>0&&(t=Wr(n),S.set(new Uint8Array(E.response),t)),j[e+12>>2]=t,br.setu64(e+16,n),br.setu64(e+24,0);var r=E.response?E.response.byteLength:0;r&&br.setu64(e+32,r),T[e+40>>1]=E.readyState,T[e+42>>1]=E.status,E.statusText&&D(E.statusText,e+44,64)}}function Sr(e,t,n,r,i){if(e){var o=j[t+112+64>>2];o||(o=j[t+8>>2]);var a=R(o);try{var s=e.transaction(["FILES"],"readwrite").objectStore("FILES").put(n,a);s.onsuccess=e=>{T[t+40>>1]=4,T[t+42>>1]=200,D("OK",t+44,64),r(t,0,a)},s.onerror=e=>{T[t+40>>1]=4,T[t+42>>1]=413,D("Payload Too Large",t+44,64),i(t,0,e)}}catch(e){i(t,0,e)}}else i(t,0,"IndexedDB not available!")}function Er(e,t,n,r,i){var o=e+112,a=R(o),s=j[o+36>>2],c=j[o+40>>2],u=j[o+44>>2],d=j[o+48>>2],l=j[o+52>>2],h=!!(4&l),p=!!(32&l),f=!!(16&l),m=!!(64&l);function g(e){m?e():qn(e)}var v=(e,n,r)=>{g((()=>{s?fe(s)(e):t&&t(e)}))},y=(e,t,n)=>{g((()=>{u?fe(u)(e):r&&r(e)}))},_=(e,t,r)=>{g((()=>{c?fe(c)(e):n&&n(e)}))},w=(e,t,n)=>{g((()=>{d?fe(d)(e):i&&i(e)}))},b=(e,n,r)=>{Sr(br.dbInstance,e,n.response,((e,n,r)=>{g((()=>{s?fe(s)(e):t&&t(e)}))}),((e,n,r)=>{g((()=>{s?fe(s)(e):t&&t(e)}))}))};if("EM_IDB_STORE"===a){var k=j[o+84>>2];Sr(br.dbInstance,e,S.slice(k,k+j[o+88>>2]),v,_)}else if("EM_IDB_DELETE"===a)!function(e,t,n,r){if(e){var i=j[t+112+64>>2];i||(i=j[t+8>>2]);var o=R(i);try{var a=e.transaction(["FILES"],"readwrite").objectStore("FILES").delete(o);a.onsuccess=e=>{var r=e.target.result;j[t+12>>2]=0,br.setu64(t+16,0),br.setu64(t+24,0),br.setu64(t+32,0),T[t+40>>1]=4,T[t+42>>1]=200,D("OK",t+44,64),n(t,0,r)},a.onerror=e=>{T[t+40>>1]=4,T[t+42>>1]=404,D("Not Found",t+44,64),r(t,0,e)}}catch(e){r(t,0,e)}}else r(t,0,"IndexedDB not available!")}(br.dbInstance,e,v,_);else if(f){if(p)return 0;kr(e,h?b:v,_,y,w)}else!function(e,t,n,r){if(e){var i=j[t+112+64>>2];i||(i=j[t+8>>2]);var o=R(i);try{var a=e.transaction(["FILES"],"readonly").objectStore("FILES").get(o);a.onsuccess=e=>{if(e.target.result){var i=e.target.result,o=i.byteLength||i.length,a=Wr(o);S.set(new Uint8Array(i),a),j[t+12>>2]=a,br.setu64(t+16,o),br.setu64(t+24,0),br.setu64(t+32,o),T[t+40>>1]=4,T[t+42>>1]=200,D("OK",t+44,64),n(t,0,i)}else T[t+40>>1]=4,T[t+42>>1]=404,D("Not Found",t+44,64),r(t,0,"no data")},a.onerror=e=>{T[t+40>>1]=4,T[t+42>>1]=404,D("Not Found",t+44,64),r(t,0,e)}}catch(e){r(t,0,e)}}else r(t,0,"IndexedDB not available!")}(br.dbInstance,e,v,p?_:h?(e,t,n)=>{kr(e,b,_,y,w)}:(e,t,n)=>{kr(e,v,_,y,w)});return e}function Tr(){if(!Tr.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:u||"./this.program"};for(var t in ft)void 0===ft[t]?delete e[t]:e[t]=ft[t];var n=[];for(var t in e)n.push(t+"="+e[t]);Tr.strings=n}return Tr.strings}function Cr(e,t){var n=0;return Tr().forEach((function(r,i){var o=t+n;j[e+4*i>>2]=o,function(e,t,n){for(var r=0;r<e.length;++r)k[t++>>0]=e.charCodeAt(r);k[t>>0]=0}(r,o),n+=r.length+1})),0}function jr(e,t){var n=Tr();j[e>>2]=n.length;var r=0;return n.forEach((function(e){r+=e.length+1})),j[t>>2]=r,0}function xr(e){try{var t=at.getStreamFromFD(e);return ot.close(t),0}catch(e){if(void 0===ot||!(e instanceof ot.ErrnoError))throw e;return e.errno}}function Pr(e,t,n,r){try{var i=function(e,t,n,r){for(var i=0,o=0;o<n;o++){var a=j[t>>2],s=j[t+4>>2];t+=8;var c=ot.read(e,k,a,s,void 0);if(c<0)return-1;if(i+=c,c<s)break}return i}(at.getStreamFromFD(e),t,n);return j[r>>2]=i,0}catch(e){if(void 0===ot||!(e instanceof ot.ErrnoError))throw e;return e.errno}}function Ir(e,t,n,r,i){try{var o=(c=n)+2097152>>>0<4194305-!!(s=t)?(s>>>0)+4294967296*c:NaN;if(isNaN(o))return 61;var a=at.getStreamFromFD(e);return ot.llseek(a,o,r),V=[a.position>>>0,(U=a.position,+Math.abs(U)>=1?U>0?(0|Math.min(+Math.floor(U/4294967296),4294967295))>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],C[i>>2]=V[0],C[i+4>>2]=V[1],a.getdents&&0===o&&0===r&&(a.getdents=null),0}catch(e){if(void 0===ot||!(e instanceof ot.ErrnoError))throw e;return e.errno}var s,c}function Mr(e,t,n,r){try{var i=function(e,t,n,r){for(var i=0,o=0;o<n;o++){var a=j[t>>2],s=j[t+4>>2];t+=8;var c=ot.write(e,k,a,s,void 0);if(c<0)return-1;i+=c}return i}(at.getStreamFromFD(e),t,n);return j[r>>2]=i,0}catch(e){if(void 0===ot||!(e instanceof ot.ErrnoError))throw e;return e.errno}}function Rr(e,t){Rr.randomDevice||(Rr.randomDevice=Qe());for(var n=0;n<t;n++)k[e+n>>0]=Rr.randomDevice();return 0}function Ar(e){return e}function Dr(e){y=e,v||(i.onExit&&i.onExit(e),_=!0),d(e,new re(e))}function Or(e){return e%4==0&&(e%100!=0||e%400==0)}Er.sig="vp",Cr.sig="ipp",jr.sig="ipp",xr.sig="ii",Pr.sig="iippp",Ir.sig="iijip",Mr.sig="iippp",Rr.sig="ipp",Ar.sig="ip",Dr.sig="vi";var Nr=[31,29,31,30,31,30,31,31,30,31,30,31],Fr=[31,28,31,30,31,30,31,31,30,31,30,31];function Lr(e,t,n,r){var i=C[r+40>>2],o={tm_sec:C[r>>2],tm_min:C[r+4>>2],tm_hour:C[r+8>>2],tm_mday:C[r+12>>2],tm_mon:C[r+16>>2],tm_year:C[r+20>>2],tm_wday:C[r+24>>2],tm_yday:C[r+28>>2],tm_isdst:C[r+32>>2],tm_gmtoff:C[r+36>>2],tm_zone:i?R(i):""},a=R(n),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var c in s)a=a.replace(new RegExp(c,"g"),s[c]);var u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d=["January","February","March","April","May","June","July","August","September","October","November","December"];function l(e,t,n){for(var r="number"==typeof e?e.toString():e||"";r.length<t;)r=n[0]+r;return r}function h(e,t){return l(e,t,"0")}function p(e,t){function n(e){return e<0?-1:e>0?1:0}var r;return 0===(r=n(e.getFullYear()-t.getFullYear()))&&0===(r=n(e.getMonth()-t.getMonth()))&&(r=n(e.getDate()-t.getDate())),r}function f(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function m(e){var t=function(e,t){for(var n=new Date(e.getTime());t>0;){var r=Or(n.getFullYear()),i=n.getMonth(),o=(r?Nr:Fr)[i];if(!(t>o-n.getDate()))return n.setDate(n.getDate()+t),n;t-=o-n.getDate()+1,n.setDate(1),i<11?n.setMonth(i+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1))}return n}(new Date(e.tm_year+1900,0,1),e.tm_yday),n=new Date(t.getFullYear(),0,4),r=new Date(t.getFullYear()+1,0,4),i=f(n),o=f(r);return p(i,t)<=0?p(o,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var g={"%a":function(e){return u[e.tm_wday].substring(0,3)},"%A":function(e){return u[e.tm_wday]},"%b":function(e){return d[e.tm_mon].substring(0,3)},"%B":function(e){return d[e.tm_mon]},"%C":function(e){return h((e.tm_year+1900)/100|0,2)},"%d":function(e){return h(e.tm_mday,2)},"%e":function(e){return l(e.tm_mday,2," ")},"%g":function(e){return m(e).toString().substring(2)},"%G":function(e){return m(e)},"%H":function(e){return h(e.tm_hour,2)},"%I":function(e){var t=e.tm_hour;return 0==t?t=12:t>12&&(t-=12),h(t,2)},"%j":function(e){return h(e.tm_mday+function(e,t){for(var n=0,r=0;r<=t;n+=e[r++]);return n}(Or(e.tm_year+1900)?Nr:Fr,e.tm_mon-1),3)},"%m":function(e){return h(e.tm_mon+1,2)},"%M":function(e){return h(e.tm_min,2)},"%n":function(){return"\n"},"%p":function(e){return e.tm_hour>=0&&e.tm_hour<12?"AM":"PM"},"%S":function(e){return h(e.tm_sec,2)},"%t":function(){return"\t"},"%u":function(e){return e.tm_wday||7},"%U":function(e){var t=e.tm_yday+7-e.tm_wday;return h(Math.floor(t/7),2)},"%V":function(e){var t=Math.floor((e.tm_yday+7-(e.tm_wday+6)%7)/7);if((e.tm_wday+371-e.tm_yday-2)%7<=2&&t++,t){if(53==t){var n=(e.tm_wday+371-e.tm_yday)%7;4==n||3==n&&Or(e.tm_year)||(t=1)}}else{t=52;var r=(e.tm_wday+7-e.tm_yday-1)%7;(4==r||5==r&&Or(e.tm_year%400-1))&&t++}return h(t,2)},"%w":function(e){return e.tm_wday},"%W":function(e){var t=e.tm_yday+7-(e.tm_wday+6)%7;return h(Math.floor(t/7),2)},"%y":function(e){return(e.tm_year+1900).toString().substring(2)},"%Y":function(e){return e.tm_year+1900},"%z":function(e){var t=e.tm_gmtoff,n=t>=0;return t=(t=Math.abs(t)/60)/60*100+t%60,(n?"+":"-")+String("0000"+t).slice(-4)},"%Z":function(e){return e.tm_zone},"%%":function(){return"%"}};for(var c in a=a.replace(/%%/g,"\0\0"),g)a.includes(c)&&(a=a.replace(new RegExp(c,"g"),g[c](o)));var v=tt(a=a.replace(/\0\0/g,"%"),!1);return v.length>t?0:(function(e,t){k.set(e,t)}(v,e),v.length-1)}Lr.sig="ppppp";var zr=function(e,t,n,r){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=ot.nextInode++,this.name=t,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=r};Object.defineProperties(zr.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return ot.isDir(this.mode)}},isDevice:{get:function(){return ot.isChrdev(this.mode)}}}),ot.FSNode=zr,ot.staticInit(),Pt=i.InternalError=xt(Error,"InternalError"),function(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);Dt=e}(),Nt=i.BindingError=xt(Error,"BindingError"),Jt.prototype.isAliasOf=function(e){if(!(this instanceof Jt))return!1;if(!(e instanceof Jt))return!1;for(var t=this.$$.ptrType.registeredClass,n=this.$$.ptr,r=e.$$.ptrType.registeredClass,i=e.$$.ptr;t.baseClass;)n=t.upcast(n),t=t.baseClass;for(;r.baseClass;)i=r.upcast(i),r=r.baseClass;return t===r&&n===i},Jt.prototype.clone=function(){if(this.$$.ptr||Ut(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e,t=Kt(Object.create(Object.getPrototypeOf(this),{$$:{value:(e=this.$$,{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType})}}));return t.$$.count.value+=1,t.$$.deleteScheduled=!1,t},Jt.prototype.delete=function(){this.$$.ptr||Ut(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Ft("Object already scheduled for deletion"),Bt(this),Wt(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},Jt.prototype.isDeleted=function(){return!this.$$.ptr},Jt.prototype.deleteLater=function(){return this.$$.ptr||Ut(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Ft("Object already scheduled for deletion"),Yt.push(this),1===Yt.length&&Zt&&Zt($t),this.$$.deleteScheduled=!0,this},i.getInheritedInstanceCount=function(){return Object.keys(qt).length},i.getLiveInheritedInstances=function(){var e=[];for(var t in qt)qt.hasOwnProperty(t)&&e.push(qt[t]);return e},i.flushPendingDeletes=$t,i.setDelayFunction=function(e){Zt=e,Yt.length&&Zt&&Zt($t)},sn.prototype.getPointee=function(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},sn.prototype.destructor=function(e){this.rawDestructor&&this.rawDestructor(e)},sn.prototype.argPackAdvance=8,sn.prototype.readValueFromPointer=kt,sn.prototype.deleteObject=function(e){null!==e&&e.delete()},sn.prototype.fromWireType=function(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var n=function(e,t){return t=function(e,t){for(void 0===t&&Ft("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}(e,t),qt[t]}(this.registeredClass,t);if(void 0!==n){if(0===n.$$.count.value)return n.$$.ptr=t,n.$$.smartPtr=e,n.clone();var r=n.clone();return this.destructor(e),r}function i(){return this.isSmartPointer?Xt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):Xt(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var o,a=this.registeredClass.getActualType(t),s=Ht[a];if(!s)return i.call(this);o=this.isConst?s.constPointerType:s.pointerType;var c=Gt(t,this.registeredClass,o.registeredClass);return null===c?i.call(this):this.isSmartPointer?Xt(o.registeredClass.instancePrototype,{ptrType:o,ptr:c,smartPtrType:this,smartPtr:e}):Xt(o.registeredClass.instancePrototype,{ptrType:o,ptr:c})},dn=i.UnboundTypeError=xt(Error,"UnboundTypeError"),i.count_emval_handles=function(){for(var e=0,t=5;t<bn.length;++t)void 0!==bn[t]&&++e;return e},i.get_first_emval=function(){for(var e=5;e<bn.length;++e)if(void 0!==bn[e])return bn[e];return null},br.staticInit();var Ur,Vr={__cxa_allocate_exception:Me,__cxa_begin_catch:Oe,__cxa_current_primary_exception:function(){if(!Re.length)return 0;var e=Re[Re.length-1];return Ae(e),e.excPtr},__cxa_decrement_exception_refcount:ze,__cxa_end_catch:Ve,__cxa_find_matching_catch_2:We,__cxa_find_matching_catch_3:Ge,__cxa_find_matching_catch_4:He,__cxa_free_exception:Fe,__cxa_get_exception_ptr:Ye,__cxa_increment_exception_refcount:$e,__cxa_rethrow:Ze,__cxa_rethrow_primary_exception:function(e){if(e){var t=new Ne(e);Re.push(t),t.set_rethrown(!0),Ze()}},__cxa_throw:qe,__cxa_uncaught_exceptions:function(){return De},__heap_base:ge,__indirect_function_table:B,__memory_base:Xe,__resumeException:Be,__stack_pointer:Ke,__syscall_fcntl64:st,__syscall_fstat64:ct,__syscall_ioctl:ut,__syscall_newfstatat:dt,__syscall_openat:lt,__syscall_stat64:ht,__table_base:pt,_dlinit:function(e){var t={refcount:1/0,name:"__main__",module:i.asm,global:!0};he.loadedLibsByName[t.name]=t,he.loadedLibsByHandle[e]=t},_dlopen_js:yt,_dlsym_js:_t,_embind_finalize_value_object:Rt,_embind_register_bigint:function(e,t,n,r,i){},_embind_register_bool:zt,_embind_register_class:pn,_embind_register_class_class_function:vn,_embind_register_class_constructor:yn,_embind_register_class_function:_n,_embind_register_emval:En,_embind_register_enum:Cn,_embind_register_enum_value:xn,_embind_register_float:Mn,_embind_register_function:Rn,_embind_register_integer:Dn,_embind_register_memory_view:On,_embind_register_std_string:Nn,_embind_register_std_wstring:Gn,_embind_register_value_object:Hn,_embind_register_value_object_field:Yn,_embind_register_void:$n,_emscripten_date_now:Zn,_emscripten_dlopen_js:Xn,_emscripten_fetch_free:function(e){var t=br.xhrs[e];t&&(delete br.xhrs[e],t.readyState>0&&t.readyState<4&&t.abort())},_emscripten_get_now_is_monotonic:function(){return!0},_emval_as:Kn,_emval_call_method:tr,_emval_decref:kn,_emval_get_method_caller:ir,_emval_get_property:or,_emval_incref:ar,_emval_new_cstring:sr,_emval_run_destructors:cr,_emval_take_value:ur,_localtime_js:dr,_mmap_js:lr,_munmap_js:hr,_tzset_js:mr,abort:gr,emscripten_get_heap_max:vr,emscripten_get_now:nr,emscripten_is_main_browser_thread:function(){return!0},emscripten_memcpy_big:yr,emscripten_resize_heap:wr,emscripten_start_fetch:Er,environ_get:Cr,environ_sizes_get:jr,fd_close:xr,fd_read:Pr,fd_seek:Ir,fd_write:Mr,getentropy:Rr,invoke_diii:function(e,t,n,r){var i=Xr();try{return fe(e)(t,n,r)}catch(e){if(Kr(i),e!==e+0)throw e;Zr(1,0)}},invoke_diiiii:function(e,t,n,r,i,o){var a=Xr();try{return fe(e)(t,n,r,i,o)}catch(e){if(Kr(a),e!==e+0)throw e;Zr(1,0)}},invoke_fiii:function(e,t,n,r){var i=Xr();try{return fe(e)(t,n,r)}catch(e){if(Kr(i),e!==e+0)throw e;Zr(1,0)}},invoke_i:function(e){var t=Xr();try{return fe(e)()}catch(e){if(Kr(t),e!==e+0)throw e;Zr(1,0)}},invoke_ii:function(e,t){var n=Xr();try{return fe(e)(t)}catch(e){if(Kr(n),e!==e+0)throw e;Zr(1,0)}},invoke_iii:function(e,t,n){var r=Xr();try{return fe(e)(t,n)}catch(e){if(Kr(r),e!==e+0)throw e;Zr(1,0)}},invoke_iiiffff:function(e,t,n,r,i,o,a){var s=Xr();try{return fe(e)(t,n,r,i,o,a)}catch(e){if(Kr(s),e!==e+0)throw e;Zr(1,0)}},invoke_iiii:function(e,t,n,r){var i=Xr();try{return fe(e)(t,n,r)}catch(e){if(Kr(i),e!==e+0)throw e;Zr(1,0)}},invoke_iiiifffffi:function(e,t,n,r,i,o,a,s,c,u){var d=Xr();try{return fe(e)(t,n,r,i,o,a,s,c,u)}catch(e){if(Kr(d),e!==e+0)throw e;Zr(1,0)}},invoke_iiiii:function(e,t,n,r,i){var o=Xr();try{return fe(e)(t,n,r,i)}catch(e){if(Kr(o),e!==e+0)throw e;Zr(1,0)}},invoke_iiiiii:function(e,t,n,r,i,o){var a=Xr();try{return fe(e)(t,n,r,i,o)}catch(e){if(Kr(a),e!==e+0)throw e;Zr(1,0)}},invoke_iiiiiii:function(e,t,n,r,i,o,a){var s=Xr();try{return fe(e)(t,n,r,i,o,a)}catch(e){if(Kr(s),e!==e+0)throw e;Zr(1,0)}},invoke_iiiiiiii:function(e,t,n,r,i,o,a,s){var c=Xr();try{return fe(e)(t,n,r,i,o,a,s)}catch(e){if(Kr(c),e!==e+0)throw e;Zr(1,0)}},invoke_iiiiiiiiiii:function(e,t,n,r,i,o,a,s,c,u,d){var l=Xr();try{return fe(e)(t,n,r,i,o,a,s,c,u,d)}catch(e){if(Kr(l),e!==e+0)throw e;Zr(1,0)}},invoke_iiiiiiiiiiii:function(e,t,n,r,i,o,a,s,c,u,d,l){var h=Xr();try{return fe(e)(t,n,r,i,o,a,s,c,u,d,l)}catch(e){if(Kr(h),e!==e+0)throw e;Zr(1,0)}},invoke_iiiiiiiiiiiii:function(e,t,n,r,i,o,a,s,c,u,d,l,h){var p=Xr();try{return fe(e)(t,n,r,i,o,a,s,c,u,d,l,h)}catch(e){if(Kr(p),e!==e+0)throw e;Zr(1,0)}},invoke_iiiiij:function(e,t,n,r,o,a,s){var c=Xr();try{return i.dynCall_iiiiij(e,t,n,r,o,a,s)}catch(e){if(Kr(c),e!==e+0)throw e;Zr(1,0)}},invoke_iij:function(e,t,n,r){var o=Xr();try{return i.dynCall_iij(e,t,n,r)}catch(e){if(Kr(o),e!==e+0)throw e;Zr(1,0)}},invoke_j:function(e){var t=Xr();try{return i.dynCall_j(e)}catch(e){if(Kr(t),e!==e+0)throw e;Zr(1,0)}},invoke_ji:function(e,t){var n=Xr();try{return i.dynCall_ji(e,t)}catch(e){if(Kr(n),e!==e+0)throw e;Zr(1,0)}},invoke_jii:function(e,t,n){var r=Xr();try{return i.dynCall_jii(e,t,n)}catch(e){if(Kr(r),e!==e+0)throw e;Zr(1,0)}},invoke_jiiii:function(e,t,n,r,o){var a=Xr();try{return i.dynCall_jiiii(e,t,n,r,o)}catch(e){if(Kr(a),e!==e+0)throw e;Zr(1,0)}},invoke_v:function(e){var t=Xr();try{fe(e)()}catch(e){if(Kr(t),e!==e+0)throw e;Zr(1,0)}},invoke_vi:function(e,t){var n=Xr();try{fe(e)(t)}catch(e){if(Kr(n),e!==e+0)throw e;Zr(1,0)}},invoke_vif:function(e,t,n){var r=Xr();try{fe(e)(t,n)}catch(e){if(Kr(r),e!==e+0)throw e;Zr(1,0)}},invoke_vii:function(e,t,n){var r=Xr();try{fe(e)(t,n)}catch(e){if(Kr(r),e!==e+0)throw e;Zr(1,0)}},invoke_viii:function(e,t,n,r){var i=Xr();try{fe(e)(t,n,r)}catch(e){if(Kr(i),e!==e+0)throw e;Zr(1,0)}},invoke_viiii:function(e,t,n,r,i){var o=Xr();try{fe(e)(t,n,r,i)}catch(e){if(Kr(o),e!==e+0)throw e;Zr(1,0)}},invoke_viiiii:function(e,t,n,r,i,o){var a=Xr();try{fe(e)(t,n,r,i,o)}catch(e){if(Kr(a),e!==e+0)throw e;Zr(1,0)}},invoke_viiiiii:function(e,t,n,r,i,o,a){var s=Xr();try{fe(e)(t,n,r,i,o,a)}catch(e){if(Kr(s),e!==e+0)throw e;Zr(1,0)}},invoke_viiiiiii:function(e,t,n,r,i,o,a,s){var c=Xr();try{fe(e)(t,n,r,i,o,a,s)}catch(e){if(Kr(c),e!==e+0)throw e;Zr(1,0)}},invoke_viiiiiiiiii:function(e,t,n,r,i,o,a,s,c,u,d){var l=Xr();try{fe(e)(t,n,r,i,o,a,s,c,u,d)}catch(e){if(Kr(l),e!==e+0)throw e;Zr(1,0)}},invoke_viiiiiiiiiiiiiii:function(e,t,n,r,i,o,a,s,c,u,d,l,h,p,f,m){var g=Xr();try{fe(e)(t,n,r,i,o,a,s,c,u,d,l,h,p,f,m)}catch(e){if(Kr(g),e!==e+0)throw e;Zr(1,0)}},invoke_vij:function(e,t,n,r){var o=Xr();try{i.dynCall_vij(e,t,n,r)}catch(e){if(Kr(o),e!==e+0)throw e;Zr(1,0)}},llvm_eh_typeid_for:Ar,memory:g,proc_exit:Dr,strftime:Lr,strftime_l:function(e,t,n,r){return Lr(e,t,n,r)}},Br=(function(){var e={env:Vr,wasi_snapshot_preview1:Vr,"GOT.mem":new Proxy(Vr,ae),"GOT.func":new Proxy(Vr,ae)};function t(e,t){var n=e.exports;n=Te(n,1024),i.asm=n;var r,o=ce(t);o.neededDynlibs&&(m=o.neededDynlibs.concat(m)),le(n),r=i.asm.__wasm_call_ctors,G.unshift(r),$.push(i.asm.__wasm_apply_data_relocs),Q()}function n(e){t(e.instance,e.module)}function o(t){return(f||"function"!=typeof fetch?Promise.resolve().then((function(){return ne(L)})):fetch(L,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+L+"'";return e.arrayBuffer()})).catch((function(){return ne(L)}))).then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){p("failed to asynchronously prepare wasm: "+e),ee(e)}))}if(J(),i.instantiateWasm)try{return i.instantiateWasm(e,t)}catch(e){return p("Module.instantiateWasm callback failed with error: "+e),!1}(f||"function"!=typeof WebAssembly.instantiateStreaming||te(L)||"function"!=typeof fetch?o(n):fetch(L,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return p("wasm streaming compile failed: "+e),p("falling back to ArrayBuffer instantiation"),o(n)}))}))).catch(r)}(),i.___wasm_call_ctors=function(){return(i.___wasm_call_ctors=i.asm.__wasm_call_ctors).apply(null,arguments)},i.___wasm_apply_data_relocs=function(){return(i.___wasm_apply_data_relocs=i.asm.__wasm_apply_data_relocs).apply(null,arguments)},i.___cxa_atexit=function(){return(i.___cxa_atexit=i.asm.__cxa_atexit).apply(null,arguments)},i.__Znwm=function(){return(i.__Znwm=i.asm._Znwm).apply(null,arguments)},i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6appendEPKcm=function(){return(i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6appendEPKcm=i.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6appendEPKcm).apply(null,arguments)},i._pthread_self=function(){return(i._pthread_self=i.asm.pthread_self).apply(null,arguments)},i.__ZdlPv=function(){return(i.__ZdlPv=i.asm._ZdlPv).apply(null,arguments)},i.getTempRet0=function(){return(i.getTempRet0=i.asm.getTempRet0).apply(null,arguments)},i.__ZNSt3__218condition_variableD1Ev=function(){return(i.__ZNSt3__218condition_variableD1Ev=i.asm._ZNSt3__218condition_variableD1Ev).apply(null,arguments)},i.__ZNSt3__25mutexD1Ev=function(){return(i.__ZNSt3__25mutexD1Ev=i.asm._ZNSt3__25mutexD1Ev).apply(null,arguments)},i.__ZSt9terminatev=function(){return(i.__ZSt9terminatev=i.asm._ZSt9terminatev).apply(null,arguments)},i.__ZNSt3__29to_stringEi=function(){return(i.__ZNSt3__29to_stringEi=i.asm._ZNSt3__29to_stringEi).apply(null,arguments)},i._memcpy=function(){return(i._memcpy=i.asm.memcpy).apply(null,arguments)},i.__ZdaPv=function(){return(i.__ZdaPv=i.asm._ZdaPv).apply(null,arguments)},i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6appendEPKc=function(){return(i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6appendEPKc=i.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6appendEPKc).apply(null,arguments)},i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE25__init_copy_ctor_externalEPKcm=function(){return(i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE25__init_copy_ctor_externalEPKcm=i.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE25__init_copy_ctor_externalEPKcm).apply(null,arguments)},i._strlen=function(){return(i._strlen=i.asm.strlen).apply(null,arguments)},i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6insertEmPKc=function(){return(i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6insertEmPKc=i.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6insertEmPKc).apply(null,arguments)},i.__ZNSt3__25mutex4lockEv=function(){return(i.__ZNSt3__25mutex4lockEv=i.asm._ZNSt3__25mutex4lockEv).apply(null,arguments)},i.__ZNSt3__25mutex6unlockEv=function(){return(i.__ZNSt3__25mutex6unlockEv=i.asm._ZNSt3__25mutex6unlockEv).apply(null,arguments)},i._memmove=function(){return(i._memmove=i.asm.memmove).apply(null,arguments)},i._memset=function(){return(i._memset=i.asm.memset).apply(null,arguments)},i.__ZNSt3__26chrono12steady_clock3nowEv=function(){return(i.__ZNSt3__26chrono12steady_clock3nowEv=i.asm._ZNSt3__26chrono12steady_clock3nowEv).apply(null,arguments)},i._powf=function(){return(i._powf=i.asm.powf).apply(null,arguments)},i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE17__assign_no_aliasILb0EEERS5_PKcm=function(){return(i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE17__assign_no_aliasILb0EEERS5_PKcm=i.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE17__assign_no_aliasILb0EEERS5_PKcm).apply(null,arguments)},i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE17__assign_no_aliasILb1EEERS5_PKcm=function(){return(i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE17__assign_no_aliasILb1EEERS5_PKcm=i.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE17__assign_no_aliasILb1EEERS5_PKcm).apply(null,arguments)},i.__ZNSt12length_errorD1Ev=function(){return(i.__ZNSt12length_errorD1Ev=i.asm._ZNSt12length_errorD1Ev).apply(null,arguments)},i.__ZNSt11logic_errorC2EPKc=function(){return(i.__ZNSt11logic_errorC2EPKc=i.asm._ZNSt11logic_errorC2EPKc).apply(null,arguments)},i.__ZNSt20bad_array_new_lengthD1Ev=function(){return(i.__ZNSt20bad_array_new_lengthD1Ev=i.asm._ZNSt20bad_array_new_lengthD1Ev).apply(null,arguments)},i.__ZNSt20bad_array_new_lengthC1Ev=function(){return(i.__ZNSt20bad_array_new_lengthC1Ev=i.asm._ZNSt20bad_array_new_lengthC1Ev).apply(null,arguments)},i.__ZNSt3__26thread4joinEv=function(){return(i.__ZNSt3__26thread4joinEv=i.asm._ZNSt3__26thread4joinEv).apply(null,arguments)},i.__ZNSt3__26threadD1Ev=function(){return(i.__ZNSt3__26threadD1Ev=i.asm._ZNSt3__26threadD1Ev).apply(null,arguments)},i.__ZNSt3__217bad_function_callD1Ev=function(){return(i.__ZNSt3__217bad_function_callD1Ev=i.asm._ZNSt3__217bad_function_callD1Ev).apply(null,arguments)},i.__Znam=function(){return(i.__Znam=i.asm._Znam).apply(null,arguments)},i.__ZNSt3__218condition_variable10notify_allEv=function(){return(i.__ZNSt3__218condition_variable10notify_allEv=i.asm._ZNSt3__218condition_variable10notify_allEv).apply(null,arguments)},i._iprintf=function(){return(i._iprintf=i.asm.iprintf).apply(null,arguments)},i._dlsym=function(){return(i._dlsym=i.asm.dlsym).apply(null,arguments)},i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEEC1ERKS5_mmRKS4_=function(){return(i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEEC1ERKS5_mmRKS4_=i.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEEC1ERKS5_mmRKS4_).apply(null,arguments)},i._snprintf=function(){return(i._snprintf=i.asm.snprintf).apply(null,arguments)},i._memchr=function(){return(i._memchr=i.asm.memchr).apply(null,arguments)},i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7replaceEmmPKc=function(){return(i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7replaceEmmPKc=i.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7replaceEmmPKc).apply(null,arguments)},i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6resizeEmc=function(){return(i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6resizeEmc=i.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6resizeEmc).apply(null,arguments)},i.__ZNSt3__29to_stringEm=function(){return(i.__ZNSt3__29to_stringEm=i.asm._ZNSt3__29to_stringEm).apply(null,arguments)},i.__ZNSt3__219__shared_weak_count14__release_weakEv=function(){return(i.__ZNSt3__219__shared_weak_count14__release_weakEv=i.asm._ZNSt3__219__shared_weak_count14__release_weakEv).apply(null,arguments)},i.__ZNSt3__219__shared_weak_countD2Ev=function(){return(i.__ZNSt3__219__shared_weak_countD2Ev=i.asm._ZNSt3__219__shared_weak_countD2Ev).apply(null,arguments)},i.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7compareEmmPKcm=function(){return(i.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7compareEmmPKcm=i.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7compareEmmPKcm).apply(null,arguments)},i._memcmp=function(){return(i._memcmp=i.asm.memcmp).apply(null,arguments)},i.__ZNSt3__212__next_primeEm=function(){return(i.__ZNSt3__212__next_primeEm=i.asm._ZNSt3__212__next_primeEm).apply(null,arguments)},i.___errno_location=function(){return(Br=i.___errno_location=i.asm.__errno_location).apply(null,arguments)}),Wr=(i._strtoull=function(){return(i._strtoull=i.asm.strtoull).apply(null,arguments)},i._strtoll=function(){return(i._strtoll=i.asm.strtoll).apply(null,arguments)},i._strtod=function(){return(i._strtod=i.asm.strtod).apply(null,arguments)},i._malloc=function(){return(Wr=i._malloc=i.asm.malloc).apply(null,arguments)}),Gr=i._free=function(){return(Gr=i._free=i.asm.free).apply(null,arguments)},Hr=(i._dlopen=function(){return(i._dlopen=i.asm.dlopen).apply(null,arguments)},i.__ZNSt12out_of_rangeD1Ev=function(){return(i.__ZNSt12out_of_rangeD1Ev=i.asm._ZNSt12out_of_rangeD1Ev).apply(null,arguments)},i.__ZNSt3__213random_deviceD1Ev=function(){return(i.__ZNSt3__213random_deviceD1Ev=i.asm._ZNSt3__213random_deviceD1Ev).apply(null,arguments)},i.__ZNSt3__213random_deviceclEv=function(){return(i.__ZNSt3__213random_deviceclEv=i.asm._ZNSt3__213random_deviceclEv).apply(null,arguments)},i._atan2f=function(){return(i._atan2f=i.asm.atan2f).apply(null,arguments)},i._sinf=function(){return(i._sinf=i.asm.sinf).apply(null,arguments)},i._cosf=function(){return(i._cosf=i.asm.cosf).apply(null,arguments)},i._strcmp=function(){return(i._strcmp=i.asm.strcmp).apply(null,arguments)},i._calloc=function(){return(i._calloc=i.asm.calloc).apply(null,arguments)},i._lrintf=function(){return(i._lrintf=i.asm.lrintf).apply(null,arguments)},i._fmaxf=function(){return(i._fmaxf=i.asm.fmaxf).apply(null,arguments)},i._expf=function(){return(i._expf=i.asm.expf).apply(null,arguments)},i._strncmp=function(){return(i._strncmp=i.asm.strncmp).apply(null,arguments)},i._roundf=function(){return(i._roundf=i.asm.roundf).apply(null,arguments)},i._fminf=function(){return(i._fminf=i.asm.fminf).apply(null,arguments)},i._qsort=function(){return(i._qsort=i.asm.qsort).apply(null,arguments)},i._fopen=function(){return(i._fopen=i.asm.fopen).apply(null,arguments)},i._fclose=function(){return(i._fclose=i.asm.fclose).apply(null,arguments)},i._fwrite=function(){return(i._fwrite=i.asm.fwrite).apply(null,arguments)},i._fread=function(){return(i._fread=i.asm.fread).apply(null,arguments)},i._realloc=function(){return(i._realloc=i.asm.realloc).apply(null,arguments)},i.___getTypeName=function(){return(Hr=i.___getTypeName=i.asm.__getTypeName).apply(null,arguments)}),Yr=(i.__embind_initialize_bindings=function(){return(i.__embind_initialize_bindings=i.asm._embind_initialize_bindings).apply(null,arguments)},i.__exit=function(){return(i.__exit=i.asm._exit).apply(null,arguments)},i._aligned_alloc=function(){return(i._aligned_alloc=i.asm.aligned_alloc).apply(null,arguments)},i._atan2=function(){return(i._atan2=i.asm.atan2).apply(null,arguments)},i._bsearch=function(){return(i._bsearch=i.asm.bsearch).apply(null,arguments)},i._close=function(){return(i._close=i.asm.close).apply(null,arguments)},i._cos=function(){return(i._cos=i.asm.cos).apply(null,arguments)},i._vsnprintf=function(){return(i._vsnprintf=i.asm.vsnprintf).apply(null,arguments)},i.___dl_seterr=function(){return(Yr=i.___dl_seterr=i.asm.__dl_seterr).apply(null,arguments)}),$r=(i._erf=function(){return(i._erf=i.asm.erf).apply(null,arguments)},i._exp=function(){return(i._exp=i.asm.exp).apply(null,arguments)},i._expm1f=function(){return(i._expm1f=i.asm.expm1f).apply(null,arguments)},i._fileno=function(){return(i._fileno=i.asm.fileno).apply(null,arguments)},i._fmodf=function(){return(i._fmodf=i.asm.fmodf).apply(null,arguments)},i._fiprintf=function(){return(i._fiprintf=i.asm.fiprintf).apply(null,arguments)},i._fputc=function(){return(i._fputc=i.asm.fputc).apply(null,arguments)},i._frexp=function(){return(i._frexp=i.asm.frexp).apply(null,arguments)},i._fstat=function(){return(i._fstat=i.asm.fstat).apply(null,arguments)},i._getenv=function(){return(i._getenv=i.asm.getenv).apply(null,arguments)},i._hypot=function(){return(i._hypot=i.asm.hypot).apply(null,arguments)},i._hypotf=function(){return(i._hypotf=i.asm.hypotf).apply(null,arguments)},i._isspace=function(){return(i._isspace=i.asm.isspace).apply(null,arguments)},i._ldexp=function(){return(i._ldexp=i.asm.ldexp).apply(null,arguments)},i._emscripten_num_logical_cores=function(){return(i._emscripten_num_logical_cores=i.asm.emscripten_num_logical_cores).apply(null,arguments)},i._pthread_mutex_init=function(){return(i._pthread_mutex_init=i.asm.pthread_mutex_init).apply(null,arguments)},i._pthread_mutex_destroy=function(){return(i._pthread_mutex_destroy=i.asm.pthread_mutex_destroy).apply(null,arguments)},i._pthread_setspecific=function(){return(i._pthread_setspecific=i.asm.pthread_setspecific).apply(null,arguments)},i._pthread_cond_wait=function(){return(i._pthread_cond_wait=i.asm.pthread_cond_wait).apply(null,arguments)},i._pthread_cond_broadcast=function(){return(i._pthread_cond_broadcast=i.asm.pthread_cond_broadcast).apply(null,arguments)},i._pthread_cond_init=function(){return(i._pthread_cond_init=i.asm.pthread_cond_init).apply(null,arguments)},i._pthread_cond_destroy=function(){return(i._pthread_cond_destroy=i.asm.pthread_cond_destroy).apply(null,arguments)},i._pthread_mutex_lock=function(){return(i._pthread_mutex_lock=i.asm.pthread_mutex_lock).apply(null,arguments)},i._pthread_mutex_unlock=function(){return(i._pthread_mutex_unlock=i.asm.pthread_mutex_unlock).apply(null,arguments)},i._pthread_create=function(){return(i._pthread_create=i.asm.pthread_create).apply(null,arguments)},i._pthread_join=function(){return(i._pthread_join=i.asm.pthread_join).apply(null,arguments)},i._pthread_once=function(){return(i._pthread_once=i.asm.pthread_once).apply(null,arguments)},i._log=function(){return(i._log=i.asm.log).apply(null,arguments)},i._log1p=function(){return(i._log1p=i.asm.log1p).apply(null,arguments)},i._logf=function(){return(i._logf=i.asm.logf).apply(null,arguments)},i._mmap=function(){return(i._mmap=i.asm.mmap).apply(null,arguments)},i._munmap=function(){return(i._munmap=i.asm.munmap).apply(null,arguments)},i._nanf=function(){return(i._nanf=i.asm.nanf).apply(null,arguments)},i._open=function(){return(i._open=i.asm.open).apply(null,arguments)},i._pow=function(){return(i._pow=i.asm.pow).apply(null,arguments)},i._vfprintf=function(){return(i._vfprintf=i.asm.vfprintf).apply(null,arguments)},i.___small_printf=function(){return(i.___small_printf=i.asm.__small_printf).apply(null,arguments)},i._putchar=function(){return(i._putchar=i.asm.putchar).apply(null,arguments)},i._puts=function(){return(i._puts=i.asm.puts).apply(null,arguments)},i._round=function(){return(i._round=i.asm.round).apply(null,arguments)},i._sin=function(){return(i._sin=i.asm.sin).apply(null,arguments)},i._sysconf=function(){return(i._sysconf=i.asm.sysconf).apply(null,arguments)},i._tanhf=function(){return(i._tanhf=i.asm.tanhf).apply(null,arguments)},i._write=function(){return(i._write=i.asm.write).apply(null,arguments)},i._posix_memalign=function(){return(i._posix_memalign=i.asm.posix_memalign).apply(null,arguments)},i._emscripten_builtin_memalign=function(){return($r=i._emscripten_builtin_memalign=i.asm.emscripten_builtin_memalign).apply(null,arguments)}),Zr=i._setThrew=function(){return(Zr=i._setThrew=i.asm.setThrew).apply(null,arguments)},qr=i.setTempRet0=function(){return(qr=i.setTempRet0=i.asm.setTempRet0).apply(null,arguments)},Xr=i.stackSave=function(){return(Xr=i.stackSave=i.asm.stackSave).apply(null,arguments)},Kr=i.stackRestore=function(){return(Kr=i.stackRestore=i.asm.stackRestore).apply(null,arguments)},Jr=i.stackAlloc=function(){return(Jr=i.stackAlloc=i.asm.stackAlloc).apply(null,arguments)};i.__ZNSt3__26__sortIRNS_6__lessIiiEEPiEEvT0_S5_T_=function(){return(i.__ZNSt3__26__sortIRNS_6__lessIiiEEPiEEvT0_S5_T_=i.asm._ZNSt3__26__sortIRNS_6__lessIiiEEPiEEvT0_S5_T_).apply(null,arguments)},i.__ZNSt3__220__throw_system_errorEiPKc=function(){return(i.__ZNSt3__220__throw_system_errorEiPKc=i.asm._ZNSt3__220__throw_system_errorEiPKc).apply(null,arguments)},i.__ZNSt3__218condition_variable10notify_oneEv=function(){return(i.__ZNSt3__218condition_variable10notify_oneEv=i.asm._ZNSt3__218condition_variable10notify_oneEv).apply(null,arguments)},i.__ZNSt3__218condition_variable4waitERNS_11unique_lockINS_5mutexEEE=function(){return(i.__ZNSt3__218condition_variable4waitERNS_11unique_lockINS_5mutexEEE=i.asm._ZNSt3__218condition_variable4waitERNS_11unique_lockINS_5mutexEEE).apply(null,arguments)},i.__ZNSt3__219__thread_local_dataEv=function(){return(i.__ZNSt3__219__thread_local_dataEv=i.asm._ZNSt3__219__thread_local_dataEv).apply(null,arguments)},i.__ZNSt3__215__thread_structC1Ev=function(){return(i.__ZNSt3__215__thread_structC1Ev=i.asm._ZNSt3__215__thread_structC1Ev).apply(null,arguments)},i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE17__assign_externalEPKc=function(){return(i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE17__assign_externalEPKc=i.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE17__assign_externalEPKc).apply(null,arguments)},i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE26__erase_external_with_moveEmm=function(){return(i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE26__erase_external_with_moveEmm=i.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE26__erase_external_with_moveEmm).apply(null,arguments)},i.__ZNKSt3__219__shared_weak_count13__get_deleterERKSt9type_info=function(){return(i.__ZNKSt3__219__shared_weak_count13__get_deleterERKSt9type_info=i.asm._ZNKSt3__219__shared_weak_count13__get_deleterERKSt9type_info).apply(null,arguments)},i.__ZNSt9bad_allocD1Ev=function(){return(i.__ZNSt9bad_allocD1Ev=i.asm._ZNSt9bad_allocD1Ev).apply(null,arguments)},i.__ZNSt9bad_allocC1Ev=function(){return(i.__ZNSt9bad_allocC1Ev=i.asm._ZNSt9bad_allocC1Ev).apply(null,arguments)},i.__ZnwmRKSt9nothrow_t=function(){return(i.__ZnwmRKSt9nothrow_t=i.asm._ZnwmRKSt9nothrow_t).apply(null,arguments)},i.__ZNSt3__213random_deviceC1ERKNS_12basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEEE=function(){return(i.__ZNSt3__213random_deviceC1ERKNS_12basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEEE=i.asm._ZNSt3__213random_deviceC1ERKNS_12basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEEE).apply(null,arguments)},i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE17__assign_externalEPKcm=function(){return(i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE17__assign_externalEPKcm=i.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE17__assign_externalEPKcm).apply(null,arguments)},i.__ZNSt3__24stoiERKNS_12basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEEEPmi=function(){return(i.__ZNSt3__24stoiERKNS_12basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEEEPmi=i.asm._ZNSt3__24stoiERKNS_12basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEEEPmi).apply(null,arguments)},i.__ZNSt3__211this_thread9sleep_forERKNS_6chrono8durationIxNS_5ratioILx1ELx1000000000EEEEE=function(){return(i.__ZNSt3__211this_thread9sleep_forERKNS_6chrono8durationIxNS_5ratioILx1ELx1000000000EEEEE=i.asm._ZNSt3__211this_thread9sleep_forERKNS_6chrono8durationIxNS_5ratioILx1ELx1000000000EEEEE).apply(null,arguments)},i.__ZNSt3__215__thread_structD1Ev=function(){return(i.__ZNSt3__215__thread_structD1Ev=i.asm._ZNSt3__215__thread_structD1Ev).apply(null,arguments)},i.___cxa_can_catch=function(){return(i.___cxa_can_catch=i.asm.__cxa_can_catch).apply(null,arguments)},i.___cxa_is_pointer_type=function(){return(i.___cxa_is_pointer_type=i.asm.__cxa_is_pointer_type).apply(null,arguments)},i.dynCall_vij=function(){return(i.dynCall_vij=i.asm.dynCall_vij).apply(null,arguments)},i.dynCall_iij=function(){return(i.dynCall_iij=i.asm.dynCall_iij).apply(null,arguments)},i.dynCall_jiji=function(){return(i.dynCall_jiji=i.asm.dynCall_jiji).apply(null,arguments)},i.dynCall_j=function(){return(i.dynCall_j=i.asm.dynCall_j).apply(null,arguments)},i.dynCall_ji=function(){return(i.dynCall_ji=i.asm.dynCall_ji).apply(null,arguments)},i.dynCall_jii=function(){return(i.dynCall_jii=i.asm.dynCall_jii).apply(null,arguments)},i.dynCall_iiiiij=function(){return(i.dynCall_iiiiij=i.asm.dynCall_iiiiij).apply(null,arguments)},i.dynCall_viijii=function(){return(i.dynCall_viijii=i.asm.dynCall_viijii).apply(null,arguments)},i.dynCall_jiiii=function(){return(i.dynCall_jiiii=i.asm.dynCall_jiiii).apply(null,arguments)},i.dynCall_iiiiijj=function(){return(i.dynCall_iiiiijj=i.asm.dynCall_iiiiijj).apply(null,arguments)},i.dynCall_iiiiiijj=function(){return(i.dynCall_iiiiiijj=i.asm.dynCall_iiiiiijj).apply(null,arguments)},i._orig$_ZNSt3__26chrono12steady_clock3nowEv=function(){return(i._orig$_ZNSt3__26chrono12steady_clock3nowEv=i.asm.orig$_ZNSt3__26chrono12steady_clock3nowEv).apply(null,arguments)},i._orig$strtoull=function(){return(i._orig$strtoull=i.asm.orig$strtoull).apply(null,arguments)},i._orig$strtoll=function(){return(i._orig$strtoll=i.asm.orig$strtoll).apply(null,arguments)},i._orig$mmap=function(){return(i._orig$mmap=i.asm.orig$mmap).apply(null,arguments)},i.___THREW__=407868,i.__ZTVSt12length_error=339288,i.__ZTVNSt3__217bad_function_callE=333160,i.__ZTVN10__cxxabiv120__si_class_type_infoE=338980,i.__ZTVN10__cxxabiv117__class_type_infoE=338940,i.__ZTVSt12out_of_range=339320,i._stderr=339584,i.__ZSt7nothrow=309827,i.UTF8ToString=R,i.addFunction=Ee,i.FS=ot,K=function e(){Ur||ei(),Ur||(K=e)};var Qr=!1;function ei(e){function t(){Ur||(Ur=!0,i.calledRun=!0,_||(Z=!0,se($),i.noFSInit||ot.init.initialized||ot.init(),ot.ignorePermissions=!1,nt.init(),se(G),se(H),n(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),ti&&function(e){var t=i._main;if(t){(e=e||[]).unshift(u);var n,r=e.length,o=Jr(4*(r+1)),a=o>>2;e.forEach((e=>{C[a++]=mt(e)})),C[a]=0;try{var s=t(r,o);y=n=s,Dr(n)}catch(e){return ue(e)}}}(e),function(){if(i.postRun)for("function"==typeof i.postRun&&(i.postRun=[i.postRun]);i.postRun.length;)e=i.postRun.shift(),Y.unshift(e);var e;se(Y)}()))}e=e||c,q>0||!Qr&&(m.length?(J(),m.reduce((function(e,t){return e.then((function(){return Pe(t,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})}))}),Promise.resolve()).then((function(){Ie(),Q()}))):Ie(),Qr=!0,q>0)||(function(){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;)e=i.preRun.shift(),W.unshift(e);var e;se(W)}(),q>0||(i.setStatus?(i.setStatus("Running..."),setTimeout((function(){setTimeout((function(){i.setStatus("")}),1),t()}),1)):t()))}if(i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();var ti=!0;return i.noInitialRun&&(ti=!1),ei(),e.ready});e.exports=n}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{"use strict";n.r(r),n.d(r,{AceMode:()=>o,DapmCreateError:()=>d,DnrStatus:()=>s,InternalError:()=>h,InvalidParamError:()=>l,LogSeverity:()=>u,SampleRate:()=>a,StateDumpMode:()=>c,getDapm:()=>f,getVersion:()=>p});var e=n(859),t=n.n(e);const i=Object.freeze("0.118.1-1184480-bf183dab"),o=Object.freeze({PASSTHROUGH:"PASSTHROUGH",STANDARD:"STANDARD",VOICEFONT_ONLY:"VOICEFONT_ONLY"}),a=Object.freeze({_16kHz:"_16kHz",_32kHz:"_32kHz",_48kHz:"_48kHz"}),s=Object.freeze({NOT_CONFIGURED:"NOT_CONFIGURED",CONFIGURED_DISABLED:"CONFIGURED_DISABLED",CONFIGURED_ENABLED:"CONFIGURED_ENABLED"}),c=Object.freeze({STANDARD:"STANDARD",LITE:"LITE"}),u=Object.freeze({DEBUG:"DBG",INFO:"INF",WARNING:"WRN",ERROR:"ERR"});class d extends Error{constructor(e){super(e),this.name="DapmCreateError"}}class l extends Error{constructor(e){super("Parameter "+e+" has invalid value"),this.name="InvalidParamError"}}class h extends Error{constructor(e){super(e),this.name="InternalError"}}function p(){return i}async function f(e,n=1e4){const r=e&&e.hasOwnProperty("wasmFake");let i=null;const p=await Promise.race([new Promise(((e,t)=>{i=setTimeout((()=>{t(new d("Timed out waiting for DAPM to load"))}),n)})),(()=>{try{if(r)return e.wasmFake();if(e&&e.wasmFilePath)return t()({locateFile:()=>e.wasmFilePath});throw new d("Parameter 'wasmFilePath' is not defined")}catch(e){throw new d(e.message)}})().catch((e=>{throw new d(e.message)})).finally((()=>{null!==i&&clearTimeout(i)}))]);function f(e,t,n){if(typeof e!==t)throw new l(n)}function m(e){switch(e){case o.PASSTHROUGH:return p.AceMode.PASSTHROUGH;case o.STANDARD:return p.AceMode.STANDARD;case o.VOICEFONT_ONLY:return p.AceMode.VOICEFONT_ONLY;default:throw new l("aceMode")}}function g(e){switch(e){case u.DEBUG:return p.LogSeverity.Debug;case u.INFO:return p.LogSeverity.Info;case u.WARNING:return p.LogSeverity.Warning;case u.ERROR:return p.LogSeverity.Error;default:throw new l("log_severity")}}function v(e){switch(e){case a._16kHz:return p.SampleRate._16kHz;case a._32kHz:return p.SampleRate._32kHz;case a._48kHz:return p.SampleRate._48kHz;default:throw new l("sampleRate")}}class y{constructor(e,t){return(async()=>{this.wasDnrConfigurationCallbackAlreadyExecuted=!1;let n=null,r=new Promise(((e,t)=>{n=e})),i=p.addFunction((e=>{t&&t(function(e){switch(e){case p.DnrStatus.NOT_CONFIGURED.value:return s.NOT_CONFIGURED;case p.DnrStatus.CONFIGURED_DISABLED.value:return s.CONFIGURED_DISABLED;case p.DnrStatus.CONFIGURED_ENABLED.value:return s.CONFIGURED_ENABLED;default:throw new l("wasm_dnr_status")}}(e)),this.wasDnrConfigurationCallbackAlreadyExecuted||n()}).bind(this),"vi");if(this.audioProcessingImpl=p.AudioProcessing.Create({sample_rate:v(e.sample_rate),num_channels:e.num_channels,input_scaling:e.input_scaling,enable_audio_logging:e.enable_audio_logging,audio_logging_length:e.audio_logging_length,mode:m(e.mode),dnr_lib_path:e.dnr_lib_path,dnr_model_path:e.dnr_model_path,access_token:e.access_token,log_severity:g(e.log_severity)},i),this.numberOfChannels=e.num_channels,this.audioProcessingArrayPtr=null,this.procArrayNumberOfFramesCapacity=null,!this.audioProcessingImpl)throw new h("Failed to create AudioProcessing");return await r,this.wasDnrConfigurationCallbackAlreadyExecuted=!0,r=n=null,this})()}#e(){if(this.audioProcessingArrayPtr)return new Uint32Array(p.HEAPU8.buffer,this.audioProcessingArrayPtr,this.numberOfChannels)}#t(e){if(!this.audioProcessingArrayPtr){const t=4*this.numberOfChannels,n=this.numberOfChannels*e*4;this.audioProcessingArrayPtr=p._malloc(t+n);const r=this.#e();for(let n=0;n<this.numberOfChannels;n++)r[n]=this.audioProcessingArrayPtr+t+n*e*4;this.procArrayNumberOfFramesCapacity=e}}#n(){this.audioProcessingArrayPtr&&(p._free(this.audioProcessingArrayPtr),this.audioProcessingArrayPtr=null)}#r(e){this.procArrayNumberOfFramesCapacity&&e==this.procArrayNumberOfFramesCapacity||(this.#n(),this.#t(e))}#i(e){for(let t=0;t<e.numberOfChannels;t++){const n=new Float32Array(p.HEAPU8.buffer,this.#e()[t],e.numberOfFrames);e.copyTo(n,{planeIndex:t})}}process(e){if(!(e instanceof AudioData))throw new l("audioData");this.#r(e.numberOfFrames),this.#i(e),this.audioProcessingImpl.process(this.audioProcessingArrayPtr,e.numberOfFrames);const t=e.numberOfChannels*e.numberOfFrames;return new Float32Array(p.HEAPU8.buffer,this.#e()[0],t)}getAvailableVoiceFonts(){return this.audioProcessingImpl.getAvailableVoiceFonts()}setVoiceFont(e){return f(e,"string","font"),this.audioProcessingImpl.setVoiceFont(e)}isAgcEnabled(){return this.audioProcessingImpl.isAgcEnabled()}setAgcEnable(e){return f(e,"boolean","enable"),this.audioProcessingImpl.setAgcEnable(e)}isNoiseSupressionEnabled(){return this.audioProcessingImpl.isNoiseSupressionEnabled()}isDnrEnabled(){return this.audioProcessingImpl.isDnrEnabled()}setNoiseSupressionEnable(e){return f(e,"boolean","enable"),this.audioProcessingImpl.setNoiseSupressionEnable(e)}messageForFsError(e){const t=void 0!==e.name?e.name+": ":"",n=void 0!==e.errno?` (errno: ${e.errno})`:"";return t+e.message+n}getStateDump(e,t){let n=e===c.STANDARD,r=0;const i="state_dump.zip";if(t){f(t,"object","additionalFiles");let e=t;e instanceof Map||(e=new Map(Object.entries(t)));const o=p.convertMapStringToString(e);r=this.audioProcessingImpl.saveStateDumpWithCustomData(i,n,o)}else r=this.audioProcessingImpl.saveStateDump(i,n);if(0==r)throw new h(`Failed to create state dump (${r})`);if(p.FS.analyzePath(i).exists){let t=null;try{t=p.FS.readFile(i)}catch(e){throw new h(messageForFsError(e))}try{p.FS.unlink(i)}catch(e){console.warning("Failed to unlink state dump: "+messageForFsError(e))}return{type:"zip",content:new Blob([t.buffer],{type:"application/zip"})}}throw new h(`Failed to create state dump. File '${i}' does not exist.`)}setAudioLoggingLength(e){if(f(e,"number","audioLoggingLength"),!this.audioProcessingImpl.setAudioLoggingLength(e))throw new h("Failed to set audio logging length, make sure if dapm is configured with audio logging enabled.")}getAudioLoggingLength(){return this.audioProcessingImpl.getAudioLoggingLength()}setTimetracingLength(e){return f(e,"number","timeTracingLength"),this.audioProcessingImpl.setTimetracingLength(e)}getTimetracingLength(){return this.audioProcessingImpl.getTimetracingLength()}getStats(){return this.audioProcessingImpl.getStats()}destroy(){this.#n(),this.audioProcessingImpl.delete()}}return new class{constructor(){this.audioProcessing=null}async createAudioProcessing(e,t,n){const r=this.audioProcessing;return this.audioProcessing=await new y(e,t,n),r&&r.destroy(),this.audioProcessing}createMemoryManager(){return new MemoryManager}clean(){this.audioProcessing&&this.audioProcessing.destroy()}registerLoggerCallback(e){p.AudioProcessing.RegisterLoggerCb(p.addFunction(((t,n,r,i)=>{e&&e(function(e){switch(e){case p.LogSeverity.Debug.value:return u.DEBUG;case p.LogSeverity.Info.value:return u.INFO;case p.LogSeverity.Warning.value:return u.WARNING;case p.LogSeverity.Error.value:return u.ERROR;default:throw new l("wasm_log_severity")}}(t),p.UTF8ToString(n),p.UTF8ToString(r),i)}),"viiii"))}unregisterLoggerCallback(){p.AudioProcessing.UnregisterLoggerCb()}}}})(),r})(),e.exports=t()},7806:function(e,t){!function(e){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e){var n=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n);if("object"!==t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===t(n)?n:String(n)}function r(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function o(e){var t={exports:{}};return e(t,t.exports),t.exports}var a,s,c=function(e){return e&&e.Math==Math&&e},u=c("object"==typeof globalThis&&globalThis)||c("object"==typeof window&&window)||c("object"==typeof self&&self)||c("object"==typeof i&&i)||function(){return this}()||Function("return this")(),d=function(e){try{return!!e()}catch(e){return!0}},l=!d((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),h=!d((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),p=Function.prototype.call,f=h?p.bind(p):function(){return p.apply(p,arguments)},m={}.propertyIsEnumerable,g=Object.getOwnPropertyDescriptor,v=g&&!m.call({1:2},1)?function(e){var t=g(this,e);return!!t&&t.enumerable}:m,y={f:v},_=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},w=Function.prototype,b=w.call,k=h&&w.bind.bind(b,b),S=h?k:function(e){return function(){return b.apply(e,arguments)}},E=S({}.toString),T=S("".slice),C=function(e){return T(E(e),8,-1)},j=Object,x=S("".split),P=d((function(){return!j("z").propertyIsEnumerable(0)}))?function(e){return"String"==C(e)?x(e,""):j(e)}:j,I=function(e){return null==e},M=TypeError,R=function(e){if(I(e))throw M("Can't call method on "+e);return e},A=function(e){return P(R(e))},D="object"==typeof document&&document.all,O={all:D,IS_HTMLDDA:void 0===D&&void 0!==D},N=O.all,F=O.IS_HTMLDDA?function(e){return"function"==typeof e||e===N}:function(e){return"function"==typeof e},L=O.all,z=O.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:F(e)||e===L}:function(e){return"object"==typeof e?null!==e:F(e)},U=function(e){return F(e)?e:void 0},V=function(e,t){return arguments.length<2?U(u[e]):u[e]&&u[e][t]},B=S({}.isPrototypeOf),W=V("navigator","userAgent")||"",G=u.process,H=u.Deno,Y=G&&G.versions||H&&H.version,Z=Y&&Y.v8;Z&&(s=(a=Z.split("."))[0]>0&&a[0]<4?1:+(a[0]+a[1])),!s&&W&&(!(a=W.match(/Edge\/(\d+)/))||a[1]>=74)&&(a=W.match(/Chrome\/(\d+)/))&&(s=+a[1]);var q=s,X=!!Object.getOwnPropertySymbols&&!d((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&q&&q<41})),K=X&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,J=Object,Q=K?function(e){return"symbol"==typeof e}:function(e){var t=V("Symbol");return F(t)&&B(t.prototype,J(e))},ee=String,te=function(e){try{return ee(e)}catch(e){return"Object"}},ne=TypeError,re=function(e){if(F(e))return e;throw ne(te(e)+" is not a function")},ie=function(e,t){var n=e[t];return I(n)?void 0:re(n)},oe=TypeError,ae=Object.defineProperty,se=function(e,t){try{ae(u,e,{value:t,configurable:!0,writable:!0})}catch(n){u[e]=t}return t},ce="__core-js_shared__",ue=u[ce]||se(ce,{}),de=o((function(e){(e.exports=function(e,t){return ue[e]||(ue[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.26.1",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.26.1/LICENSE",source:"https://github.com/zloirock/core-js"})})),le=Object,he=function(e){return le(R(e))},pe=S({}.hasOwnProperty),fe=Object.hasOwn||function(e,t){return pe(he(e),t)},me=0,ge=Math.random(),ve=S(1..toString),ye=function(e){return"Symbol("+(void 0===e?"":e)+")_"+ve(++me+ge,36)},_e=de("wks"),we=u.Symbol,be=we&&we.for,ke=K?we:we&&we.withoutSetter||ye,Se=function(e){if(!fe(_e,e)||!X&&"string"!=typeof _e[e]){var t="Symbol."+e;X&&fe(we,e)?_e[e]=we[e]:_e[e]=K&&be?be(t):ke(t)}return _e[e]},Ee=TypeError,Te=Se("toPrimitive"),Ce=function(e){var t=function(e,t){if(!z(e)||Q(e))return e;var n,r=ie(e,Te);if(r){if(void 0===t&&(t="default"),n=f(r,e,t),!z(n)||Q(n))return n;throw Ee("Can't convert object to primitive value")}return void 0===t&&(t="number"),function(e,t){var n,r;if("string"===t&&F(n=e.toString)&&!z(r=f(n,e)))return r;if(F(n=e.valueOf)&&!z(r=f(n,e)))return r;if("string"!==t&&F(n=e.toString)&&!z(r=f(n,e)))return r;throw oe("Can't convert object to primitive value")}(e,t)}(e,"string");return Q(t)?t:t+""},je=u.document,xe=z(je)&&z(je.createElement),Pe=function(e){return xe?je.createElement(e):{}},Ie=!l&&!d((function(){return 7!=Object.defineProperty(Pe("div"),"a",{get:function(){return 7}}).a})),Me=Object.getOwnPropertyDescriptor,Re={f:l?Me:function(e,t){if(e=A(e),t=Ce(t),Ie)try{return Me(e,t)}catch(e){}if(fe(e,t))return _(!f(y.f,e,t),e[t])}},Ae=l&&d((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),De=String,Oe=TypeError,Ne=function(e){if(z(e))return e;throw Oe(De(e)+" is not an object")},Fe=TypeError,Le=Object.defineProperty,ze=Object.getOwnPropertyDescriptor,Ue="enumerable",Ve="configurable",Be="writable",We={f:l?Ae?function(e,t,n){if(Ne(e),t=Ce(t),Ne(n),"function"==typeof e&&"prototype"===t&&"value"in n&&Be in n&&!n[Be]){var r=ze(e,t);r&&r[Be]&&(e[t]=n.value,n={configurable:Ve in n?n[Ve]:r[Ve],enumerable:Ue in n?n[Ue]:r[Ue],writable:!1})}return Le(e,t,n)}:Le:function(e,t,n){if(Ne(e),t=Ce(t),Ne(n),Ie)try{return Le(e,t,n)}catch(e){}if("get"in n||"set"in n)throw Fe("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},Ge=l?function(e,t,n){return We.f(e,t,_(1,n))}:function(e,t,n){return e[t]=n,e},He=Function.prototype,Ye=l&&Object.getOwnPropertyDescriptor,$e=fe(He,"name"),Ze={EXISTS:$e,PROPER:$e&&"something"===function(){}.name,CONFIGURABLE:$e&&(!l||l&&Ye(He,"name").configurable)},qe=S(Function.toString);F(ue.inspectSource)||(ue.inspectSource=function(e){return qe(e)});var Xe,Ke,Je,Qe=ue.inspectSource,et=u.WeakMap,tt=F(et)&&/native code/.test(String(et)),nt=de("keys"),rt=function(e){return nt[e]||(nt[e]=ye(e))},it={},ot="Object already initialized",at=u.TypeError,st=u.WeakMap;if(tt||ue.state){var ct=ue.state||(ue.state=new st);ct.get=ct.get,ct.has=ct.has,ct.set=ct.set,Xe=function(e,t){if(ct.has(e))throw at(ot);return t.facade=e,ct.set(e,t),t},Ke=function(e){return ct.get(e)||{}},Je=function(e){return ct.has(e)}}else{var ut=rt("state");it[ut]=!0,Xe=function(e,t){if(fe(e,ut))throw at(ot);return t.facade=e,Ge(e,ut,t),t},Ke=function(e){return fe(e,ut)?e[ut]:{}},Je=function(e){return fe(e,ut)}}var dt={set:Xe,get:Ke,has:Je,enforce:function(e){return Je(e)?Ke(e):Xe(e,{})},getterFor:function(e){return function(t){var n;if(!z(t)||(n=Ke(t)).type!==e)throw at("Incompatible receiver, "+e+" required");return n}}},lt=o((function(e){var t=Ze.CONFIGURABLE,n=dt.enforce,r=dt.get,i=Object.defineProperty,o=l&&!d((function(){return 8!==i((function(){}),"length",{value:8}).length})),a=String(String).split("String"),s=e.exports=function(e,r,s){"Symbol("===String(r).slice(0,7)&&(r="["+String(r).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),s&&s.getter&&(r="get "+r),s&&s.setter&&(r="set "+r),(!fe(e,"name")||t&&e.name!==r)&&(l?i(e,"name",{value:r,configurable:!0}):e.name=r),o&&s&&fe(s,"arity")&&e.length!==s.arity&&i(e,"length",{value:s.arity});try{s&&fe(s,"constructor")&&s.constructor?l&&i(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var c=n(e);return fe(c,"source")||(c.source=a.join("string"==typeof r?r:"")),e};Function.prototype.toString=s((function(){return F(this)&&r(this).source||Qe(this)}),"toString")})),ht=function(e,t,n,r){r||(r={});var i=r.enumerable,o=void 0!==r.name?r.name:t;if(F(n)&&lt(n,o,r),r.global)i?e[t]=n:se(t,n);else{try{r.unsafe?e[t]&&(i=!0):delete e[t]}catch(e){}i?e[t]=n:We.f(e,t,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return e},pt=Math.ceil,ft=Math.floor,mt=Math.trunc||function(e){var t=+e;return(t>0?ft:pt)(t)},gt=function(e){var t=+e;return t!=t||0===t?0:mt(t)},vt=Math.max,yt=Math.min,_t=Math.min,wt=function(e){return e>0?_t(gt(e),9007199254740991):0},bt=function(e){return wt(e.length)},kt=function(e){return function(t,n,r){var i,o=A(t),a=bt(o),s=function(e,t){var n=gt(e);return n<0?vt(n+t,0):yt(n,t)}(r,a);if(e&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((e||s in o)&&o[s]===n)return e||s||0;return!e&&-1}},St={includes:kt(!0),indexOf:kt(!1)},Et=St.indexOf,Tt=S([].push),Ct=function(e,t){var n,r=A(e),i=0,o=[];for(n in r)!fe(it,n)&&fe(r,n)&&Tt(o,n);for(;t.length>i;)fe(r,n=t[i++])&&(~Et(o,n)||Tt(o,n));return o},jt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],xt=jt.concat("length","prototype"),Pt={f:Object.getOwnPropertyNames||function(e){return Ct(e,xt)}},It={f:Object.getOwnPropertySymbols},Mt=S([].concat),Rt=V("Reflect","ownKeys")||function(e){var t=Pt.f(Ne(e)),n=It.f;return n?Mt(t,n(e)):t},At=function(e,t,n){for(var r=Rt(t),i=We.f,o=Re.f,a=0;a<r.length;a++){var s=r[a];fe(e,s)||n&&fe(n,s)||i(e,s,o(t,s))}},Dt=/#|\.prototype\./,Ot=function(e,t){var n=Ft[Nt(e)];return n==zt||n!=Lt&&(F(t)?d(t):!!t)},Nt=Ot.normalize=function(e){return String(e).replace(Dt,".").toLowerCase()},Ft=Ot.data={},Lt=Ot.NATIVE="N",zt=Ot.POLYFILL="P",Ut=Ot,Vt=Re.f,Bt=function(e,t){var n,r,i,o,a,s=e.target,c=e.global,d=e.stat;if(n=c?u:d?u[s]||se(s,{}):(u[s]||{}).prototype)for(r in t){if(o=t[r],i=e.dontCallGetSet?(a=Vt(n,r))&&a.value:n[r],!Ut(c?r:s+(d?".":"#")+r,e.forced)&&void 0!==i){if(typeof o==typeof i)continue;At(o,i)}(e.sham||i&&i.sham)&&Ge(o,"sham",!0),ht(n,r,o,e)}},Wt=Function.prototype,Gt=Wt.apply,Ht=Wt.call,Yt="object"==typeof Reflect&&Reflect.apply||(h?Ht.bind(Gt):function(){return Ht.apply(Gt,arguments)}),$t=Array.isArray||function(e){return"Array"==C(e)},Zt=S([].slice),qt=V("JSON","stringify"),Xt=S(/./.exec),Kt=S("".charAt),Jt=S("".charCodeAt),Qt=S("".replace),en=S(1..toString),tn=/[\uD800-\uDFFF]/g,nn=/^[\uD800-\uDBFF]$/,rn=/^[\uDC00-\uDFFF]$/,on=!X||d((function(){var e=V("Symbol")();return"[null]"!=qt([e])||"{}"!=qt({a:e})||"{}"!=qt(Object(e))})),an=d((function(){return'"\\udf06\\ud834"'!==qt("\udf06\ud834")||'"\\udead"'!==qt("\udead")})),sn=function(e,t){var n=Zt(arguments),r=t;if((z(t)||void 0!==e)&&!Q(e))return $t(t)||(t=function(e,t){if(F(r)&&(t=f(r,this,e,t)),!Q(t))return t}),n[1]=t,Yt(qt,null,n)},cn=function(e,t,n){var r=Kt(n,t-1),i=Kt(n,t+1);return Xt(nn,e)&&!Xt(rn,i)||Xt(rn,e)&&!Xt(nn,r)?"\\u"+en(Jt(e,0),16):e};qt&&Bt({target:"JSON",stat:!0,arity:3,forced:on||an},{stringify:function(e,t,n){var r=Zt(arguments),i=Yt(on?sn:qt,null,r);return an&&"string"==typeof i?Qt(i,tn,cn):i}});var un,dn={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},ln=Pe("span").classList,hn=ln&&ln.constructor&&ln.constructor.prototype,pn=hn===Object.prototype?void 0:hn,fn=Object.keys||function(e){return Ct(e,jt)},mn=l&&!Ae?Object.defineProperties:function(e,t){Ne(e);for(var n,r=A(t),i=fn(t),o=i.length,a=0;o>a;)We.f(e,n=i[a++],r[n]);return e},gn={f:mn},vn=V("document","documentElement"),yn="prototype",_n="script",wn=rt("IE_PROTO"),bn=function(){},kn=function(e){return"<script>"+e+"</"+_n+">"},Sn=function(e){e.write(kn("")),e.close();var t=e.parentWindow.Object;return e=null,t},En=function(){try{un=new ActiveXObject("htmlfile")}catch(e){}var e,t;En="undefined"!=typeof document?document.domain&&un?Sn(un):("javascript:",(t=Pe("iframe")).style.display="none",vn.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(kn("document.F=Object")),e.close(),e.F):Sn(un);for(var n=jt.length;n--;)delete En[yn][jt[n]];return En()};it[wn]=!0;var Tn=Object.create||function(e,t){var n;return null!==e?(bn[yn]=Ne(e),n=new bn,bn[yn]=null,n[wn]=e):n=En(),void 0===t?n:gn.f(n,t)},Cn=We.f,jn=Se("unscopables"),xn=Array.prototype;null==xn[jn]&&Cn(xn,jn,{configurable:!0,value:Tn(null)});var Pn,In,Mn,Rn=function(e){xn[jn][e]=!0},An={},Dn=!d((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),On=rt("IE_PROTO"),Nn=Object,Fn=Nn.prototype,Ln=Dn?Nn.getPrototypeOf:function(e){var t=he(e);if(fe(t,On))return t[On];var n=t.constructor;return F(n)&&t instanceof n?n.prototype:t instanceof Nn?Fn:null},zn=Se("iterator"),Un=!1;[].keys&&("next"in(Mn=[].keys())?(In=Ln(Ln(Mn)))!==Object.prototype&&(Pn=In):Un=!0);var Vn=!z(Pn)||d((function(){var e={};return Pn[zn].call(e)!==e}));Vn&&(Pn={}),F(Pn[zn])||ht(Pn,zn,(function(){return this}));var Bn={IteratorPrototype:Pn,BUGGY_SAFARI_ITERATORS:Un},Wn=We.f,Gn=Se("toStringTag"),Hn=function(e,t,n){e&&!n&&(e=e.prototype),e&&!fe(e,Gn)&&Wn(e,Gn,{configurable:!0,value:t})},Yn=Bn.IteratorPrototype,$n=function(){return this},Zn=function(e,t,n,r){var i=t+" Iterator";return e.prototype=Tn(Yn,{next:_(+!r,n)}),Hn(e,i,!1),An[i]=$n,e},qn=String,Xn=TypeError,Kn=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=S(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return Ne(n),function(e){if("object"==typeof e||F(e))return e;throw Xn("Can't set "+qn(e)+" as a prototype")}(r),t?e(n,r):n.__proto__=r,n}}():void 0),Jn=Ze.PROPER,Qn=Ze.CONFIGURABLE,er=Bn.IteratorPrototype,tr=Bn.BUGGY_SAFARI_ITERATORS,nr=Se("iterator"),rr="keys",ir="values",or="entries",ar=function(){return this},sr=function(e,t){return{value:e,done:t}},cr=We.f,ur="Array Iterator",dr=dt.set,lr=dt.getterFor(ur),hr=function(e,t,n,r,i,o,a){Zn(n,t,(function(){var e=lr(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,sr(void 0,!0)):sr("keys"==n?r:"values"==n?t[r]:[r,t[r]],!1)}));var s,c,u,d=function(e){if(e===i&&m)return m;if(!tr&&e in h)return h[e];switch(e){case rr:case ir:case or:return function(){return new n(this,e)}}return function(){return new n(this)}},l=!1,h=e.prototype,p=h[nr]||h["@@iterator"]||h[i],m=!tr&&p||d(i),g=h.entries||p;if(g&&(s=Ln(g.call(new e)))!==Object.prototype&&s.next&&(Ln(s)!==er&&(Kn?Kn(s,er):F(s[nr])||ht(s,nr,ar)),Hn(s,"Array Iterator",!0)),Jn&&p&&p.name!==ir&&(Qn?Ge(h,"name",ir):(l=!0,m=function(){return f(p,this)})),void(c={values:d(ir),keys:d(rr),entries:d(or)}))for(u in c)(tr||l||!(u in h))&&ht(h,u,c[u]);else Bt({target:t,proto:!0,forced:tr||l},c);return h[nr]!==m&&ht(h,nr,m,{name:i}),An[t]=m,c}(Array,"Array",(function(e,t){dr(this,{type:ur,target:A(e),index:0,kind:t})}),0,"values"),pr=An.Arguments=An.Array;if(Rn("keys"),Rn("values"),Rn("entries"),l&&"values"!==pr.name)try{cr(pr,"name",{value:"values"})}catch(e){}var fr=Se("iterator"),mr=Se("toStringTag"),gr=hr.values,vr=function(e,t){if(e){if(e[fr]!==gr)try{Ge(e,fr,gr)}catch(t){e[fr]=gr}if(e[mr]||Ge(e,mr,t),dn[t])for(var n in hr)if(e[n]!==hr[n])try{Ge(e,n,hr[n])}catch(t){e[n]=hr[n]}}};for(var yr in dn)vr(u[yr]&&u[yr].prototype,yr);vr(pn,"DOMTokenList");var _r=o((function(e){!function(t){var n,r={VERSION:"1.6.1"},i={},o=function(e,t){return function(){return t.apply(e,arguments)}},a=function(){var e,t,n=arguments,r=n[0];for(t=1;t<n.length;t++)for(e in n[t])!(e in r)&&n[t].hasOwnProperty(e)&&(r[e]=n[t][e]);return r},s=function(e,t){return{value:e,name:t}};r.TRACE=s(1,"TRACE"),r.DEBUG=s(2,"DEBUG"),r.INFO=s(3,"INFO"),r.TIME=s(4,"TIME"),r.WARN=s(5,"WARN"),r.ERROR=s(8,"ERROR"),r.OFF=s(99,"OFF");var c=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};c.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},getLevel:function(){return this.context.filterLevel},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},trace:function(){this.invoke(r.TRACE,arguments)},debug:function(){this.invoke(r.DEBUG,arguments)},info:function(){this.invoke(r.INFO,arguments)},warn:function(){this.invoke(r.WARN,arguments)},error:function(){this.invoke(r.ERROR,arguments)},time:function(e){"string"==typeof e&&e.length>0&&this.invoke(r.TIME,[e,"start"])},timeEnd:function(e){"string"==typeof e&&e.length>0&&this.invoke(r.TIME,[e,"end"])},invoke:function(e,t){n&&this.enabledFor(e)&&n(t,a({level:e},this.context))}};var u,d=new c({filterLevel:r.OFF});(u=r).enabledFor=o(d,d.enabledFor),u.trace=o(d,d.trace),u.debug=o(d,d.debug),u.time=o(d,d.time),u.timeEnd=o(d,d.timeEnd),u.info=o(d,d.info),u.warn=o(d,d.warn),u.error=o(d,d.error),u.log=u.info,r.setHandler=function(e){n=e},r.setLevel=function(e){for(var t in d.setLevel(e),i)i.hasOwnProperty(t)&&i[t].setLevel(e)},r.getLevel=function(){return d.getLevel()},r.get=function(e){return i[e]||(i[e]=new c(a({name:e},d.context)))},r.createDefaultHandler=function(e){(e=e||{}).formatter=e.formatter||function(e,t){t.name&&e.unshift("["+t.name+"]")};var t={},n=function(e,t){Function.prototype.apply.call(e,console,t)};return"undefined"==typeof console?function(){}:function(i,o){i=Array.prototype.slice.call(i);var a,s=console.log;o.level===r.TIME?(a=(o.name?"["+o.name+"] ":"")+i[0],"start"===i[1]?console.time?console.time(a):t[a]=(new Date).getTime():console.timeEnd?console.timeEnd(a):n(s,[a+": "+((new Date).getTime()-t[a])+"ms"])):(o.level===r.WARN&&console.warn?s=console.warn:o.level===r.ERROR&&console.error?s=console.error:o.level===r.INFO&&console.info?s=console.info:o.level===r.DEBUG&&console.debug?s=console.debug:o.level===r.TRACE&&console.trace&&(s=console.trace),e.formatter(i,o),n(s,i))}},r.useDefaults=function(e){r.setLevel(e&&e.defaultLevel||r.DEBUG),r.setHandler(r.createDefaultHandler(e))},r.setDefaults=r.useDefaults,e.exports?e.exports=r:(r._prevLogger=t.Logger,r.noConflict=function(){return t.Logger=r._prevLogger,r},t.Logger=r)}(i)}));function wr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function br(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wr(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}_r.useDefaults({defaultLevel:_r.TRACE});const kr=(e,t)=>{e.unshift("[".concat(t.name||"Global","] ").concat((new Date).toISOString()," - ").concat(t.level.name," -"))},Sr=(e,t)=>t?e.value>=xr[t].value:e.value>=jr.value,Er=_r.createDefaultHandler({formatter:kr});_r.setHandler(((e,t)=>{((e,t)=>{e=(e=Array.prototype.slice.call(e)).map((e=>"object"==typeof e?JSON.stringify(e):e)),kr(e,t),0!==Tr?(Cr.push(e.join(" ")),Cr.length>=Tr&&(Cr=Cr.slice(-Tr))):Cr=[]})(e,t),Sr(t.level,t.name)&&Er(e,t);for(const{handler:n,level:r}of Pr)t.level.value>=r.value&&n(e,t)}));let Tr=1e4,Cr=[],jr=_r.OFF;const xr={},Pr=[],Ir=br(br({},_r),{},{enabledFor:Sr,getHistory:()=>Cr,getHistoryMaxSize:()=>Tr,setHistoryMaxSize:e=>{Tr=e},setLevel:e=>{jr=e;for(const t in xr)xr[t]=e},getLevel:()=>jr,get:e=>{xr[e]||(xr[e]=jr);const t=_r.get(e);return t.setLevel=t=>{xr[e]=t},t.getLevel=()=>xr[e],t},setHandler:(e,t)=>{Pr.push({handler:e,level:t})}});var Mr="process"==C(u.process),Rr=Se("species"),Ar=function(e){var t=V(e),n=We.f;l&&t&&!t[Rr]&&n(t,Rr,{configurable:!0,get:function(){return this}})},Dr=TypeError,Or={};Or[Se("toStringTag")]="z";var Nr="[object z]"===String(Or),Fr=Se("toStringTag"),Lr=Object,zr="Arguments"==C(function(){return arguments}()),Ur=Nr?C:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Lr(e),Fr))?n:zr?C(t):"Object"==(r=C(t))&&F(t.callee)?"Arguments":r},Vr=function(){},Br=[],Wr=V("Reflect","construct"),Gr=/^\s*(?:class|function)\b/,Hr=S(Gr.exec),Yr=!Gr.exec(Vr),$r=function(e){if(!F(e))return!1;try{return Wr(Vr,Br,e),!0}catch(e){return!1}},Zr=function(e){if(!F(e))return!1;switch(Ur(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Yr||!!Hr(Gr,Qe(e))}catch(e){return!0}};Zr.sham=!0;var qr,Xr,Kr,Jr,Qr=!Wr||d((function(){var e;return $r($r.call)||!$r(Object)||!$r((function(){e=!0}))||e}))?Zr:$r,ei=TypeError,ti=Se("species"),ni=function(e,t){var n,r=Ne(e).constructor;return void 0===r||I(n=Ne(r)[ti])?t:function(e){if(Qr(e))return e;throw ei(te(e)+" is not a constructor")}(n)},ri=function(e){if("Function"===C(e))return S(e)},ii=ri(ri.bind),oi=function(e,t){return re(e),void 0===t?e:h?ii(e,t):function(){return e.apply(t,arguments)}},ai=TypeError,si=function(e,t){if(e<t)throw ai("Not enough arguments");return e},ci=/(?:ipad|iphone|ipod).*applewebkit/i.test(W),ui=u.setImmediate,di=u.clearImmediate,li=u.process,hi=u.Dispatch,pi=u.Function,fi=u.MessageChannel,mi=u.String,gi=0,vi={},yi="onreadystatechange";try{qr=u.location}catch(e){}var _i=function(e){if(fe(vi,e)){var t=vi[e];delete vi[e],t()}},wi=function(e){return function(){_i(e)}},bi=function(e){_i(e.data)},ki=function(e){u.postMessage(mi(e),qr.protocol+"//"+qr.host)};ui&&di||(ui=function(e){si(arguments.length,1);var t=F(e)?e:pi(e),n=Zt(arguments,1);return vi[++gi]=function(){Yt(t,void 0,n)},Xr(gi),gi},di=function(e){delete vi[e]},Mr?Xr=function(e){li.nextTick(wi(e))}:hi&&hi.now?Xr=function(e){hi.now(wi(e))}:fi&&!ci?(Jr=(Kr=new fi).port2,Kr.port1.onmessage=bi,Xr=oi(Jr.postMessage,Jr)):u.addEventListener&&F(u.postMessage)&&!u.importScripts&&qr&&"file:"!==qr.protocol&&!d(ki)?(Xr=ki,u.addEventListener("message",bi,!1)):Xr=yi in Pe("script")?function(e){vn.appendChild(Pe("script"))[yi]=function(){vn.removeChild(this),_i(e)}}:function(e){setTimeout(wi(e),0)});var Si,Ei,Ti,Ci,ji,xi,Pi,Ii,Mi={set:ui,clear:di},Ri=/ipad|iphone|ipod/i.test(W)&&void 0!==u.Pebble,Ai=/web0s(?!.*chrome)/i.test(W),Di=Re.f,Oi=Mi.set,Ni=u.MutationObserver||u.WebKitMutationObserver,Fi=u.document,Li=u.process,zi=u.Promise,Ui=Di(u,"queueMicrotask"),Vi=Ui&&Ui.value;Vi||(Si=function(){var e,t;for(Mr&&(e=Li.domain)&&e.exit();Ei;){t=Ei.fn,Ei=Ei.next;try{t()}catch(e){throw Ei?Ci():Ti=void 0,e}}Ti=void 0,e&&e.enter()},ci||Mr||Ai||!Ni||!Fi?!Ri&&zi&&zi.resolve?((Pi=zi.resolve(void 0)).constructor=zi,Ii=oi(Pi.then,Pi),Ci=function(){Ii(Si)}):Mr?Ci=function(){Li.nextTick(Si)}:(Oi=oi(Oi,u),Ci=function(){Oi(Si)}):(ji=!0,xi=Fi.createTextNode(""),new Ni(Si).observe(xi,{characterData:!0}),Ci=function(){xi.data=ji=!ji}));var Bi=Vi||function(e){var t={fn:e,next:void 0};Ti&&(Ti.next=t),Ei||(Ei=t,Ci()),Ti=t},Wi=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Gi=function(){this.head=null,this.tail=null};Gi.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}};var Hi=Gi,Yi=u.Promise,$i="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,Zi=!$i&&!Mr&&"object"==typeof window&&"object"==typeof document;Yi&&Yi.prototype;var qi,Xi,Ki,Ji=Se("species"),Qi=!1,eo=F(u.PromiseRejectionEvent),to=Ut("Promise",(function(){var e=Qe(Yi),t=e!==String(Yi);if(!t&&66===q)return!0;if(!q||q<51||!/native code/.test(e)){var n=new Yi((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};if((n.constructor={})[Ji]=r,!(Qi=n.then((function(){}))instanceof r))return!0}return!t&&(Zi||$i)&&!eo})),no={CONSTRUCTOR:to,REJECTION_EVENT:eo,SUBCLASSING:Qi},ro=TypeError,io=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw ro("Bad Promise constructor");t=e,n=r})),this.resolve=re(t),this.reject=re(n)},oo={f:function(e){return new io(e)}},ao=Mi.set,so="Promise",co=no.CONSTRUCTOR,uo=no.REJECTION_EVENT,lo=no.SUBCLASSING,ho=dt.getterFor(so),po=dt.set,fo=Yi&&Yi.prototype,mo=Yi,go=fo,vo=u.TypeError,yo=u.document,_o=u.process,wo=oo.f,bo=wo,ko=!!(yo&&yo.createEvent&&u.dispatchEvent),So="unhandledrejection",Eo=function(e){var t;return!(!z(e)||!F(t=e.then))&&t},To=function(e,t){var n,r,i,o=t.value,a=1==t.state,s=a?e.ok:e.fail,c=e.resolve,u=e.reject,d=e.domain;try{s?(a||(2===t.rejection&&Io(t),t.rejection=1),!0===s?n=o:(d&&d.enter(),n=s(o),d&&(d.exit(),i=!0)),n===e.promise?u(vo("Promise-chain cycle")):(r=Eo(n))?f(r,n,c,u):c(n)):u(o)}catch(e){d&&!i&&d.exit(),u(e)}},Co=function(e,t){e.notified||(e.notified=!0,Bi((function(){for(var n,r=e.reactions;n=r.get();)To(n,e);e.notified=!1,t&&!e.rejection&&xo(e)})))},jo=function(e,t,n){var r,i;ko?((r=yo.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),u.dispatchEvent(r)):r={promise:t,reason:n},!uo&&(i=u["on"+e])?i(r):e===So&&function(e,t){var n=u.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},xo=function(e){f(ao,u,(function(){var t,n=e.facade,r=e.value;if(Po(e)&&(t=Wi((function(){Mr?_o.emit("unhandledRejection",r,n):jo(So,n,r)})),e.rejection=Mr||Po(e)?2:1,t.error))throw t.value}))},Po=function(e){return 1!==e.rejection&&!e.parent},Io=function(e){f(ao,u,(function(){var t=e.facade;Mr?_o.emit("rejectionHandled",t):jo("rejectionhandled",t,e.value)}))},Mo=function(e,t,n){return function(r){e(t,r,n)}},Ro=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Co(e,!0))},Ao=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw vo("Promise can't be resolved itself");var r=Eo(t);r?Bi((function(){var n={done:!1};try{f(r,t,Mo(Ao,n,e),Mo(Ro,n,e))}catch(t){Ro(n,t,e)}})):(e.value=t,e.state=1,Co(e,!1))}catch(t){Ro({done:!1},t,e)}}};if(co&&(go=(mo=function(e){!function(e,t){if(B(t,e))return e;throw Dr("Incorrect invocation")}(this,go),re(e),f(qi,this);var t=ho(this);try{e(Mo(Ao,t),Mo(Ro,t))}catch(e){Ro(t,e)}}).prototype,(qi=function(e){po(this,{type:so,done:!1,notified:!1,parent:!1,reactions:new Hi,rejection:!1,state:0,value:void 0})}).prototype=ht(go,"then",(function(e,t){var n=ho(this),r=wo(ni(this,mo));return n.parent=!0,r.ok=!F(e)||e,r.fail=F(t)&&t,r.domain=Mr?_o.domain:void 0,0==n.state?n.reactions.add(r):Bi((function(){To(r,n)})),r.promise})),Xi=function(){var e=new qi,t=ho(e);this.promise=e,this.resolve=Mo(Ao,t),this.reject=Mo(Ro,t)},oo.f=wo=function(e){return e===mo||void 0===e?new Xi(e):bo(e)},F(Yi)&&fo!==Object.prototype)){Ki=fo.then,lo||ht(fo,"then",(function(e,t){var n=this;return new mo((function(e,t){f(Ki,n,e,t)})).then(e,t)}),{unsafe:!0});try{delete fo.constructor}catch(e){}Kn&&Kn(fo,go)}Bt({global:!0,constructor:!0,wrap:!0,forced:co},{Promise:mo}),Hn(mo,so,!1),Ar(so);var Do=Se("iterator"),Oo=Array.prototype,No=Se("iterator"),Fo=function(e){if(!I(e))return ie(e,No)||ie(e,"@@iterator")||An[Ur(e)]},Lo=TypeError,zo=function(e,t,n){var r,i;Ne(e);try{if(!(r=ie(e,"return"))){if("throw"===t)throw n;return n}r=f(r,e)}catch(e){i=!0,r=e}if("throw"===t)throw n;if(i)throw r;return Ne(r),n},Uo=TypeError,Vo=function(e,t){this.stopped=e,this.result=t},Bo=Vo.prototype,Wo=function(e,t,n){var r,i,o,a,s,c,u,d,l=n&&n.that,h=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_RECORD),m=!(!n||!n.IS_ITERATOR),g=!(!n||!n.INTERRUPTED),v=oi(t,l),y=function(e){return r&&zo(r,"normal",e),new Vo(!0,e)},_=function(e){return h?(Ne(e),g?v(e[0],e[1],y):v(e[0],e[1])):g?v(e,y):v(e)};if(p)r=e.iterator;else if(m)r=e;else{if(!(i=Fo(e)))throw Uo(te(e)+" is not iterable");if(void 0!==(d=i)&&(An.Array===d||Oo[Do]===d)){for(o=0,a=bt(e);a>o;o++)if((s=_(e[o]))&&B(Bo,s))return s;return new Vo(!1)}r=function(e,t){var n=arguments.length<2?Fo(e):t;if(re(n))return Ne(f(n,e));throw Lo(te(e)+" is not iterable")}(e,i)}for(c=p?e.next:r.next;!(u=f(c,r)).done;){try{s=_(u.value)}catch(e){zo(r,"throw",e)}if("object"==typeof s&&s&&B(Bo,s))return s}return new Vo(!1)},Go=Se("iterator"),Ho=!1;try{var Yo=0,$o={next:function(){return{done:!!Yo++}},return:function(){Ho=!0}};$o[Go]=function(){return this},Array.from($o,(function(){throw 2}))}catch(e){}var Zo=no.CONSTRUCTOR||!function(e,t){if(!Ho)return!1;var n=!1;try{var r={};r[Go]=function(){return{next:function(){return{done:n=!0}}}},function(e){Yi.all(e).then(void 0,(function(){}))}(r)}catch(e){}return n}();Bt({target:"Promise",stat:!0,forced:Zo},{all:function(e){var t=this,n=oo.f(t),r=n.resolve,i=n.reject,o=Wi((function(){var n=re(t.resolve),o=[],a=0,s=1;Wo(e,(function(e){var c=a++,u=!1;s++,f(n,t,e).then((function(e){u||(u=!0,o[c]=e,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise}});var qo=no.CONSTRUCTOR,Xo=Yi&&Yi.prototype;if(Bt({target:"Promise",proto:!0,forced:qo,real:!0},{catch:function(e){return this.then(void 0,e)}}),F(Yi)){var Ko=V("Promise").prototype.catch;Xo.catch!==Ko&&ht(Xo,"catch",Ko,{unsafe:!0})}Bt({target:"Promise",stat:!0,forced:Zo},{race:function(e){var t=this,n=oo.f(t),r=n.reject,i=Wi((function(){var i=re(t.resolve);Wo(e,(function(e){f(i,t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}}),Bt({target:"Promise",stat:!0,forced:no.CONSTRUCTOR},{reject:function(e){var t=oo.f(this);return f(t.reject,void 0,e),t.promise}});var Jo=no.CONSTRUCTOR;V("Promise"),Bt({target:"Promise",stat:!0,forced:Jo},{resolve:function(e){return function(e,t){if(Ne(e),z(t)&&t.constructor===e)return t;var n=oo.f(e);return(0,n.resolve)(t),n.promise}(this,e)}});var Qo=We.f,ea=function(e,t,n){n in e||Qo(e,n,{configurable:!0,get:function(){return t[n]},set:function(e){t[n]=e}})},ta=function(e,t,n){var r,i;return Kn&&F(r=t.constructor)&&r!==n&&z(i=r.prototype)&&i!==n.prototype&&Kn(e,i),e},na=String,ra=function(e){if("Symbol"===Ur(e))throw TypeError("Cannot convert a Symbol value to a string");return na(e)},ia=function(e,t){return void 0===e?arguments.length<2?"":t:ra(e)},oa=function(e,t){z(t)&&"cause"in t&&Ge(e,"cause",t.cause)},aa=Error,sa=S("".replace),ca=String(aa("zxcasd").stack),ua=/\n\s*at [^:]*:[^\n]*/,da=ua.test(ca),la=function(e,t){if(da&&"string"==typeof e&&!aa.prepareStackTrace)for(;t--;)e=sa(e,ua,"");return e},ha=!d((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",_(1,7)),7!==e.stack)})),pa=function(e,t,n,r){var i="stackTraceLimit",o=r?2:1,a=e.split("."),s=a[a.length-1],c=V.apply(null,a);if(c){var u=c.prototype;if(fe(u,"cause")&&delete u.cause,!n)return c;var d=V("Error"),h=t((function(e,t){var n=ia(r?t:e,void 0),i=r?new c(e):new c;return void 0!==n&&Ge(i,"message",n),ha&&Ge(i,"stack",la(i.stack,2)),this&&B(u,this)&&ta(i,this,h),arguments.length>o&&oa(i,arguments[o]),i}));h.prototype=u,"Error"!==s?Kn?Kn(h,d):At(h,d,{name:!0}):l&&i in c&&(ea(h,c,i),ea(h,c,"prepareStackTrace")),At(h,c);try{u.name!==s&&Ge(u,"name",s),u.constructor=h}catch(e){}return h}},fa="WebAssembly",ma=u[fa],ga=7!==Error("e",{cause:7}).cause,va=function(e,t){var n={};n[e]=pa(e,t,ga),Bt({global:!0,constructor:!0,arity:1,forced:ga},n)},ya=function(e,t){if(ma&&ma[e]){var n={};n[e]=pa(fa+"."+e,t,ga),Bt({target:fa,stat:!0,constructor:!0,arity:1,forced:ga},n)}};va("Error",(function(e){return function(t){return Yt(e,this,arguments)}})),va("EvalError",(function(e){return function(t){return Yt(e,this,arguments)}})),va("RangeError",(function(e){return function(t){return Yt(e,this,arguments)}})),va("ReferenceError",(function(e){return function(t){return Yt(e,this,arguments)}})),va("SyntaxError",(function(e){return function(t){return Yt(e,this,arguments)}})),va("TypeError",(function(e){return function(t){return Yt(e,this,arguments)}})),va("URIError",(function(e){return function(t){return Yt(e,this,arguments)}})),ya("CompileError",(function(e){return function(t){return Yt(e,this,arguments)}})),ya("LinkError",(function(e){return function(t){return Yt(e,this,arguments)}})),ya("RuntimeError",(function(e){return function(t){return Yt(e,this,arguments)}}));var _a=Se("match"),wa=function(e){var t;return z(e)&&(void 0!==(t=e[_a])?!!t:"RegExp"==C(e))},ba=function(){var e=Ne(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},ka=RegExp.prototype,Sa=function(e){var t=e.flags;return void 0!==t||"flags"in ka||fe(e,"flags")||!B(ka,e)?t:f(ba,e)},Ea=u.RegExp,Ta=d((function(){var e=Ea("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),Ca=Ta||d((function(){return!Ea("a","y").sticky})),ja={BROKEN_CARET:Ta||d((function(){var e=Ea("^r","gy");return e.lastIndex=2,null!=e.exec("str")})),MISSED_STICKY:Ca,UNSUPPORTED_Y:Ta},xa=u.RegExp,Pa=d((function(){var e=xa(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)})),Ia=u.RegExp,Ma=d((function(){var e=Ia("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),Ra=Pt.f,Aa=dt.enforce,Da=Se("match"),Oa=u.RegExp,Na=Oa.prototype,Fa=u.SyntaxError,La=S(Na.exec),za=S("".charAt),Ua=S("".replace),Va=S("".indexOf),Ba=S("".slice),Wa=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,Ga=/a/g,Ha=/a/g,Ya=new Oa(Ga)!==Ga,$a=ja.MISSED_STICKY,Za=ja.UNSUPPORTED_Y,qa=l&&(!Ya||$a||Pa||Ma||d((function(){return Ha[Da]=!1,Oa(Ga)!=Ga||Oa(Ha)==Ha||"/a/i"!=Oa(Ga,"i")})));if(Ut("RegExp",qa)){for(var Xa=function(e,t){var n,r,i,o,a,s,c=B(Na,this),u=wa(e),d=void 0===t,l=[],h=e;if(!c&&u&&d&&e.constructor===Xa)return e;if((u||B(Na,e))&&(e=e.source,d&&(t=Sa(h))),e=void 0===e?"":ra(e),t=void 0===t?"":ra(t),h=e,Pa&&"dotAll"in Ga&&(r=!!t&&Va(t,"s")>-1)&&(t=Ua(t,/s/g,"")),n=t,$a&&"sticky"in Ga&&(i=!!t&&Va(t,"y")>-1)&&Za&&(t=Ua(t,/y/g,"")),Ma&&(o=function(e){for(var t,n=e.length,r=0,i="",o=[],a={},s=!1,c=!1,u=0,d="";r<=n;r++){if("\\"===(t=za(e,r)))t+=za(e,++r);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:La(Wa,Ba(e,r+1))&&(r+=2,c=!0),i+=t,u++;continue;case">"===t&&c:if(""===d||fe(a,d))throw new Fa("Invalid capture group name");a[d]=!0,o[o.length]=[d,u],c=!1,d="";continue}c?d+=t:i+=t}return[i,o]}(e),e=o[0],l=o[1]),a=ta(Oa(e,t),c?this:Na,Xa),(r||i||l.length)&&(s=Aa(a),r&&(s.dotAll=!0,s.raw=Xa(function(e){for(var t,n=e.length,r=0,i="",o=!1;r<=n;r++)"\\"!==(t=za(e,r))?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),i+=t):i+="[\\s\\S]":i+=t+za(e,++r);return i}(e),n)),i&&(s.sticky=!0),l.length&&(s.groups=l)),e!==h)try{Ge(a,"source",""===h?"(?:)":h)}catch(e){}return a},Ka=Ra(Oa),Ja=0;Ka.length>Ja;)ea(Xa,Oa,Ka[Ja++]);Na.constructor=Xa,Xa.prototype=Na,ht(u,"RegExp",Xa,{constructor:!0})}Ar("RegExp");var Qa,es,ts,ns=dt.get,rs=RegExp.prototype,is=TypeError;l&&Pa&&(Qa=rs,es="dotAll",(ts={configurable:!0,get:function(){if(this!==rs){if("RegExp"===C(this))return!!ns(this).dotAll;throw is("Incompatible receiver, RegExp required")}}}).get&&lt(ts.get,es,{getter:!0}),ts.set&&lt(ts.set,es,{setter:!0}),We.f(Qa,es,ts));var os=dt.get,as=de("native-string-replace",String.prototype.replace),ss=RegExp.prototype.exec,cs=ss,us=S("".charAt),ds=S("".indexOf),ls=S("".replace),hs=S("".slice),ps=function(){var e=/a/,t=/b*/g;return f(ss,e,"a"),f(ss,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),fs=ja.BROKEN_CARET,ms=void 0!==/()??/.exec("")[1];(ps||ms||fs||Pa||Ma)&&(cs=function(e){var t,n,r,i,o,a,s,c=this,u=os(c),d=ra(e),l=u.raw;if(l)return l.lastIndex=c.lastIndex,t=f(cs,l,d),c.lastIndex=l.lastIndex,t;var h=u.groups,p=fs&&c.sticky,m=f(ba,c),g=c.source,v=0,y=d;if(p&&(m=ls(m,"y",""),-1===ds(m,"g")&&(m+="g"),y=hs(d,c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==us(d,c.lastIndex-1))&&(g="(?: "+g+")",y=" "+y,v++),n=new RegExp("^(?:"+g+")",m)),ms&&(n=new RegExp("^"+g+"$(?!\\s)",m)),ps&&(r=c.lastIndex),i=f(ss,p?n:c,y),p?i?(i.input=hs(i.input,v),i[0]=hs(i[0],v),i.index=c.lastIndex,c.lastIndex+=i[0].length):c.lastIndex=0:ps&&i&&(c.lastIndex=c.global?i.index+i[0].length:r),ms&&i&&i.length>1&&f(as,i[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)})),i&&h)for(i.groups=a=Tn(null),o=0;o<h.length;o++)a[(s=h[o])[0]]=i[s[1]];return i});var gs=cs;Bt({target:"RegExp",proto:!0,forced:/./.exec!==gs},{exec:gs});var vs=St.includes,ys=d((function(){return!Array(1).includes()}));Bt({target:"Array",proto:!0,forced:ys},{includes:function(e){return vs(this,e,arguments.length>1?arguments[1]:void 0)}}),Rn("includes");var _s,ws="object"==typeof Reflect?Reflect:null,bs=ws&&"function"==typeof ws.apply?ws.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};_s=ws&&"function"==typeof ws.ownKeys?ws.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var ks=Number.isNaN||function(e){return e!=e};function Ss(){Ss.init.call(this)}var Es=Ss;Ss.EventEmitter=Ss,Ss.prototype._events=void 0,Ss.prototype._eventsCount=0,Ss.prototype._maxListeners=void 0;var Ts=10;function Cs(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function js(e){return void 0===e._maxListeners?Ss.defaultMaxListeners:e._maxListeners}function xs(e,t,n,r){var i,o,a,s;if(Cs(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=js(e))>0&&a.length>i&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=a.length,s=c,console&&console.warn&&console.warn(s)}return e}function Ps(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Is(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=Ps.bind(r);return i.listener=n,r.wrapFn=i,i}function Ms(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):As(i,i.length)}function Rs(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function As(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function Ds(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}Object.defineProperty(Ss,"defaultMaxListeners",{enumerable:!0,get:function(){return Ts},set:function(e){if("number"!=typeof e||e<0||ks(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Ts=e}}),Ss.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Ss.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||ks(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},Ss.prototype.getMaxListeners=function(){return js(this)},Ss.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var s=i[e];if(void 0===s)return!1;if("function"==typeof s)bs(s,this,t);else{var c=s.length,u=As(s,c);for(n=0;n<c;++n)bs(u[n],this,t)}return!0},Ss.prototype.addListener=function(e,t){return xs(this,e,t,!1)},Ss.prototype.on=Ss.prototype.addListener,Ss.prototype.prependListener=function(e,t){return xs(this,e,t,!0)},Ss.prototype.once=function(e,t){return Cs(t),this.on(e,Is(this,e,t)),this},Ss.prototype.prependOnceListener=function(e,t){return Cs(t),this.prependListener(e,Is(this,e,t)),this},Ss.prototype.removeListener=function(e,t){var n,r,i,o,a;if(Cs(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},Ss.prototype.off=Ss.prototype.removeListener,Ss.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},Ss.prototype.listeners=function(e){return Ms(this,e,!0)},Ss.prototype.rawListeners=function(e){return Ms(this,e,!1)},Ss.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):Rs.call(e,t)},Ss.prototype.listenerCount=Rs,Ss.prototype.eventNames=function(){return this._eventsCount>0?_s(this._events):[]},Es.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}Ds(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&Ds(e,"error",t,{once:!0})}(e,i)}))};var Os=Fs,Ns=Es.EventEmitter;function Fs(e,t,n){Array.isArray(n)||(n=[n]);var r=[];return n.forEach((function(n){var i=function(){var e=[].slice.call(arguments);e.unshift(n),t.emit.apply(t,e)};r.push(i),e.on(n,i)})),function(){n.forEach((function(t,n){e.removeListener(t,r[n])}))}}function Ls(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ls(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ls(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Os.filter=function(e,t){var n=new Ns;return Fs(e,n,t),n};const Us=Ir.get("PeerConnectionStats"),Vs="stats";class Bs extends Es{constructor(e){super(),this.peer=e,this.stats=null,this.emitInterval=null,this.previousStats=null}init(){Us.info("Initializing peer connection stats"),this.emitInterval=setInterval((async()=>{const e=await this.peer.getStats();this.parseStats(e),this.emit(Vs,this.stats)}),1e3)}parseStats(e){this.previousStats=this.stats;const t={audio:{inbounds:[],outbounds:[]},video:{inbounds:[],outbounds:[]},raw:e};for(const n of e.values())switch(n.type){case"outbound-rtp":Ws(n,this.previousStats,t);break;case"inbound-rtp":Gs(n,this.previousStats,t);break;case"candidate-pair":n.nominated&&Hs(n,t)}this.stats=t}stop(){Us.info("Stopping peer connection stats"),clearInterval(this.emitInterval)}}const Ws=(e,t,n)=>{var r,i;const o=Ys(e),a=$s(e.codecId,n.raw),s=Zs(e,o);s.totalBytesSent=e.bytesSent,s.id=e.id,s.mid=e.mid;const c=t?null!==(r=null===(i=t[o].outbounds.find((e=>e.id===s.id)))||void 0===i?void 0:i.totalBytesSent)&&void 0!==r?r:0:null;s.bitrate=c?8*(e.bytesSent-c):0,"video"===o&&(s.qualityLimitationReason=e.qualityLimitationReason),n[o].outbounds.push(zs(zs({},a),s))},Gs=(e,t,n)=>{let r=Ys(e);const i=$s(e.codecId,n.raw);["audio","video"].includes(r)||(r=e.id.includes("Video")?"video":"audio");const o=Zs(e,r);if(o.totalBytesReceived=e.bytesReceived,o.totalPacketsReceived=e.packetsReceived,o.totalPacketsLost=e.packetsLost,o.jitter=e.jitter,o.id=e.id,o.mid=e.mid,o.bitrate=0,o.packetsLostRatioPerSecond=0,o.packetsLostDeltaPerSecond=0,t){const n=t[r].inbounds.find((e=>e.id===o.id));if(n){const t=n.totalBytesReceived;o.bitrate=8*(e.bytesReceived-t),o.packetsLostRatioPerSecond=qs(o,n),o.packetsLostDeltaPerSecond=Xs(o,n)}}n[r].inbounds.push(zs(zs({},i),o))},Hs=(e,t)=>{t.totalRoundTripTime=e.totalRoundTripTime,t.currentRoundTripTime=e.currentRoundTripTime,t.availableOutgoingBitrate=e.availableOutgoingBitrate,t.candidateType=t.raw.get(e.localCandidateId).candidateType},Ys=e=>e.mediaType||e.kind,$s=(e,t)=>{var n;const{mimeType:r}=e&&null!==(n=t.get(e))&&void 0!==n?n:{};return{mimeType:r}},Zs=(e,t)=>{const n={};return"video"===t&&(n.framesPerSecond=e.framesPerSecond,n.frameHeight=e.frameHeight,n.frameWidth=e.frameWidth),n.timestamp=e.timestamp,n},qs=(e,t)=>Xs(e,t)/(e.totalPacketsReceived-t.totalPacketsReceived),Xs=(e,t)=>e.totalPacketsLost-t.totalPacketsLost;Se("species");var Ks=RegExp.prototype,Js=S("".charAt),Qs=S("".charCodeAt),ec=S("".slice),tc=function(e){return function(t,n){var r,i,o=ra(R(t)),a=gt(n),s=o.length;return a<0||a>=s?e?"":void 0:(r=Qs(o,a))<55296||r>56319||a+1===s||(i=Qs(o,a+1))<56320||i>57343?e?Js(o,a):r:e?ec(o,a,a+2):i-56320+(r-55296<<10)+65536}},nc=(tc(!1),tc(!0)),rc=function(e,t,n){return t+(n?nc(e,t).length:1)},ic=Math.floor,oc=S("".charAt),ac=S("".replace),sc=S("".slice),cc=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,uc=/\$([$&'`]|\d{1,2})/g,dc=function(e,t,n,r,i,o){var a=n+e.length,s=r.length,c=uc;return void 0!==i&&(i=he(i),c=cc),ac(o,c,(function(o,c){var u;switch(oc(c,0)){case"$":return"$";case"&":return e;case"`":return sc(t,0,n);case"'":return sc(t,a);case"<":u=i[sc(c,1,-1)];break;default:var d=+c;if(0===d)return o;if(d>s){var l=ic(d/10);return 0===l?o:l<=s?void 0===r[l-1]?oc(c,1):r[l-1]+oc(c,1):o}u=r[d-1]}return void 0===u?"":u}))},lc=TypeError,hc=function(e,t){var n=e.exec;if(F(n)){var r=f(n,e,t);return null!==r&&Ne(r),r}if("RegExp"===C(e))return f(gs,e,t);throw lc("RegExp#exec called on incompatible receiver")},pc=Se("replace"),fc=Math.max,mc=Math.min,gc=S([].concat),vc=S([].push),yc=S("".indexOf),_c=S("".slice),wc="$0"==="a".replace(/./,"$0"),bc=!!/./[pc]&&""===/./[pc]("a","$0");!function(e,t,n,r){var i=Se(e),o=!d((function(){var t={};return t[i]=function(){return 7},7!=""[e](t)})),a=o&&!d((function(){var e=!1,t=/a/;return t.exec=function(){return e=!0,null},t[i](""),!e}));if(!o||!a||n){var s=ri(/./[i]),c=function(e,t,n){var r=bc?"$":"$0";return[function(e,n){var r=R(this),i=I(e)?void 0:ie(e,pc);return i?f(i,e,r,n):f(t,ra(r),e,n)},function(e,i){var o=Ne(this),a=ra(e);if("string"==typeof i&&-1===yc(i,r)&&-1===yc(i,"$<")){var s=n(t,o,a,i);if(s.done)return s.value}var c=F(i);c||(i=ra(i));var u=o.global;if(u){var d=o.unicode;o.lastIndex=0}for(var l=[];;){var h=hc(o,a);if(null===h)break;if(vc(l,h),!u)break;""===ra(h[0])&&(o.lastIndex=rc(a,wt(o.lastIndex),d))}for(var p,f="",m=0,g=0;g<l.length;g++){for(var v=ra((h=l[g])[0]),y=fc(mc(gt(h.index),a.length),0),_=[],w=1;w<h.length;w++)vc(_,void 0===(p=h[w])?p:String(p));var b=h.groups;if(c){var k=gc([v],_,y,a);void 0!==b&&vc(k,b);var S=ra(Yt(i,void 0,k))}else S=dc(v,a,y,_,b,i);y>=m&&(f+=_c(a,m,y)+S,m=y+v.length)}return f+_c(a,m)}]}(0,""[e],(function(e,t,n,r,i){var a=ri(e),c=t.exec;return c===gs||c===Ks.exec?o&&!i?{done:!0,value:s(t,n,r)}:{done:!0,value:a(n,t,r)}:{done:!1}}));ht(String.prototype,e,c[0]),ht(Ks,i,c[1])}}("replace",0,!!d((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!wc||bc);var kc,Sc="\t\n\v\f\r                　\u2028\u2029\ufeff",Ec=S("".replace),Tc="["+Sc+"]",Cc=RegExp("^"+Tc+Tc+"*"),jc=RegExp(Tc+Tc+"*$"),xc=function(e){return function(t){var n=ra(R(t));return 1&e&&(n=Ec(n,Cc,"")),2&e&&(n=Ec(n,jc,"")),n}},Pc={start:xc(1),end:xc(2),trim:xc(3)},Ic=Ze.PROPER,Mc=Pc.trim;Bt({target:"String",proto:!0,forced:(kc="trim",d((function(){return!!Sc[kc]()||"​᠎"!=="​᠎"[kc]()||Ic&&Sc[kc].name!==kc})))},{trim:function(){return Mc(this)}});var Rc=Se("matchAll"),Ac="RegExp String",Dc=Ac+" Iterator",Oc=dt.set,Nc=dt.getterFor(Dc),Fc=RegExp.prototype,Lc=TypeError,zc=ri("".indexOf),Uc=ri("".matchAll),Vc=!!Uc&&!d((function(){Uc("a",/./)})),Bc=Zn((function(e,t,n,r){Oc(this,{type:Dc,regexp:e,string:t,global:n,unicode:r,done:!1})}),Ac,(function(){var e=Nc(this);if(e.done)return sr(void 0,!0);var t=e.regexp,n=e.string,r=hc(t,n);return null===r?(e.done=!0,sr(void 0,!0)):e.global?(""===ra(r[0])&&(t.lastIndex=rc(n,wt(t.lastIndex),e.unicode)),sr(r,!1)):(e.done=!0,sr(r,!1))}));Bt({target:"String",proto:!0,forced:Vc},{matchAll:function(e){var t,n,r,i=R(this);if(I(e)){if(Vc)return Uc(i,e)}else{if(wa(e)&&(t=ra(R(Sa(e))),!~zc(t,"g")))throw Lc("`.matchAll` does not allow non-global regexes");if(Vc)return Uc(i,e);if(r=ie(e,Rc))return f(r,e,i)}return n=ra(i),new RegExp(e,"g")[Rc](n)}}),Rc in Fc||ht(Fc,Rc,(function(e){var t,n,r,i=Ne(this),o=ra(e),a=ni(i,RegExp),s=ra(Sa(i));return t=new a(a===RegExp?i.source:i,s),n=!!~zc(s,"g"),r=!!~zc(s,"u"),t.lastIndex=wt(i.lastIndex),new Bc(t,o,n,r)}));var Wc=S([].reverse),Gc=[1,2];Bt({target:"Array",proto:!0,forced:String(Gc)===String(Gc.reverse())},{reverse:function(){return $t(this)&&(this.length=this.length),Wc(this)}});var Hc=o((function(e){var t=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),(t+=null!=e["network-id"]?" network-id %d":"%v")+(null!=e["network-cost"]?" network-cost %d":"%v")}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=null!=e.id?"id=%s %s":"%v%s",t+=null!=e.mediaClockValue?"=%s":"",(t+=null!=e.rateNumerator?" rate=%s":"")+(null!=e.rateDenominator?"/%s":"")}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(t).forEach((function(e){t[e].forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))}))})),Yc=o((function(e,t){var n=function(e){return String(Number(e))===e?Number(e):e},r=function(e,t,r){var i=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:i&&!t[e.name]&&(t[e.name]={});var o=e.push?{}:i?t[e.name]:t;!function(e,t,r,i){if(i&&!r)t[i]=n(e[1]);else for(var o=0;o<r.length;o+=1)null!=e[o+1]&&(t[r[o]]=n(e[o+1]))}(r.match(e.reg),o,e.names,e.name),e.push&&t[e.push].push(o)},i=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},n=[],o=t;return e.split(/(\r\n|\r|\n)/).filter(i).forEach((function(e){var t=e[0],i=e.slice(2);"m"===t&&(n.push({rtp:[],fmtp:[]}),o=n[n.length-1]);for(var a=0;a<(Hc[t]||[]).length;a+=1){var s=Hc[t][a];if(s.reg.test(i))return r(s,o,i)}})),t.media=n,t};var o=function(e,t){var r=t.split(/=(.+)/,2);return 2===r.length?e[r[0]]=n(r[1]):1===r.length&&t.length>1&&(e[r[0]]=void 0),e};t.parseParams=function(e){return e.split(/;\s?/).reduce(o,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],r=e.split(" ").map(n),i=0;i<r.length;i+=3)t.push({component:r[i],ip:r[i+1],port:r[i+2]});return t},t.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(o,{})}))},t.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var t,r=!1;return"~"!==e[0]?t=n(e):(t=n(e.substring(1,e.length)),r=!0),{scid:t,paused:r}}))}))}})),$c=/%[sdv%]/g,Zc=function(e){var t=1,n=arguments,r=n.length;return e.replace($c,(function(e){if(t>=r)return e;var i=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}}))},qc=function(e,t,n){var r=[e+"="+(t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format)];if(t.names)for(var i=0;i<t.names.length;i+=1){var o=t.names[i];t.name?r.push(n[t.name][o]):r.push(n[t.names[i]])}else r.push(n[t.name]);return Zc.apply(null,r)},Xc=["v","o","s","i","u","e","p","c","b","t","r","z","a"],Kc=["i","c","b","a"],Jc={write:function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var n=t.outerOrder||Xc,r=t.innerOrder||Kc,i=[];return n.forEach((function(t){Hc[t].forEach((function(n){n.name in e&&null!=e[n.name]?i.push(qc(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){i.push(qc(t,n,e))}))}))})),e.media.forEach((function(e){i.push(qc("m",Hc.m[0],e)),r.forEach((function(t){Hc[t].forEach((function(n){n.name in e&&null!=e[n.name]?i.push(qc(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){i.push(qc(t,n,e))}))}))}))})),i.join("\r\n")+"\r\n"},parse:Yc.parse,parseParams:Yc.parseParams,parseFmtpConfig:Yc.parseFmtpConfig,parsePayloads:Yc.parsePayloads,parseRemoteCandidates:Yc.parseRemoteCandidates,parseImageAttributes:Yc.parseImageAttributes,parseSimulcastStreamList:Yc.parseSimulcastStreamList};class Qc{constructor(e,t,n,r,i,o,a,s,c){this.foundation=e,this.componentId=t,this.transport=n,this.priority=r,this.address=i,this.port=o,this.type=a,this.relAddr=s,this.relPort=c}equals(e){return e.foundation===this.foundation&&e.componentId===this.componentId&&e.transport===this.transport&&e.priority===this.priority&&e.address===this.address&&e.port===this.port&&e.type===this.type&&e.relAddr===this.relAddr&&e.relPort===this.relPort}clone(){return new Qc(this.foundation,this.componentId,this.transport,this.priority,this.address,this.port,this.type,this.relAddr,this.relPort)}plain(){const e={foundation:this.foundation,componentId:this.componentId,transport:this.transport,priority:this.priority,address:this.address,port:this.port,type:this.type};return this.relAddr&&(e.relAddr=this.relAddr),this.relPort&&(e.relPort=this.relPort),e}getFoundation(){return this.foundation}getComponentId(){return this.componentId}getTransport(){return this.transport}getPriority(){return this.priority}getAddress(){return this.address}getPort(){return this.port}getType(){return this.type}getRelAddr(){return this.relAddr}getRelPort(){return this.relPort}}Qc.expand=function(e){return new Qc(e.foundation,e.componentId,e.transport,e.priority,e.address,e.port,e.type,e.relAddr,e.relPort)};var eu=Qc;class tu{constructor(e,t){this.id=e,this.params=t||[]}clone(){return new tu(this.id,this.params)}plain(){return this.params.length?{id:this.id,params:this.params}:{id:this.id}}getId(){return this.id}getParams(){return this.params}}tu.expand=function(e){return new tu(e.id,e.params)};var nu=tu;class ru{constructor(e,t,n){this.codec=e,this.type=t,this.params={},this.rtcpfbs=new Set,n&&this.addParams(n)}clone(){const e=new ru(this.codec,this.type,this.params);this.hasRTX()&&e.setRTX(this.getRTX());for(const t of this.rtcpfbs)e.addRTCPFeedback(t.clone());return this.hasChannels()&&e.setChannels(this.getChannels()),e}plain(){const e={codec:this.codec,type:this.type};this.rtx&&(e.rtx=this.rtx),this.channels&&(e.channels=this.channels),Object.keys(this.params).length&&(e.params=this.params);for(const t of this.rtcpfbs)e.rtcpfbs||(e.rtcpfbs=[]),e.rtcpfbs.push(t.plain());return e}setRTX(e){this.rtx=e}getType(){return this.type}setType(e){this.type=e}getCodec(){return this.codec}getParams(){return this.params}addParams(e){for(const t in e)this.params[t]=e[t]}addParam(e,t){this.params[e]=t}hasParam(e){return this.params.hasOwnProperty(e)}getParam(e,t){return this.hasParam(e)?this.params[e]:""+t}hasRTX(){return this.rtx}getRTX(){return this.rtx}hasChannels(){return this.channels}getChannels(){return this.channels}setChannels(e){this.channels=e}addRTCPFeedback(e){this.rtcpfbs.add(e)}getRTCPFeedbacks(){return this.rtcpfbs}}ru.expand=function(e){const t=new ru(e.codec,e.type,e.params);e.rtx&&t.setRTX(e.rtx),e.channels&&t.setChannels(e.channels);for(let n=0;e.rtcpfbs&&n<e.rtcpfbs.length;++n){const r=nu.expand(e.rtcpfbs[n]);t.addRTCPFeedback(r)}return t},ru.MapFromNames=function(e,t,n){const r=new Map;let i=96;for(let o=0;o<e.length;++o){let a;const s=e[o].split(";"),c=s[0].toLowerCase().trim();a="pcmu"===c?0:"pcma"===c?8:++i;const u=new ru(c,a);"opus"===c?u.setChannels(2):"multiopus"===c&&u.setChannels(6),t&&"ulpfec"!==c&&"flexfec-03"!==c&&"red"!==c&&u.setRTX(++i);for(let e=0;n&&e<n.length;++e)u.addRTCPFeedback(new nu(n[e].id,n[e].params));for(let e=1;e<s.length;++e){let t=s[e].split("=");u.addParam(t[0].trim(),t[1].trim())}r.set(u.getCodec().toLowerCase(),u)}return r};var iu=ru,ou=function e(){var t=this;if(!(this instanceof e))return new(Function.prototype.bind.apply(e,[null].concat(Array.prototype.slice.call(arguments))));Array.from(arguments).forEach((function(e){t[e]=Symbol.for("MEDOOZE_SEMANTIC_SDP_"+e)}))};const au=ou("ACTIVE","PASSIVE","ACTPASS","INACTIVE");au.byValue=function(e){switch(e){case au.ACTIVE:case au.PASSIVE:case au.ACTPASS:case au.INACTIVE:return e}return au[e.toUpperCase()]},au.toString=function(e){switch(e){case au.ACTIVE:return"active";case au.PASSIVE:return"passive";case au.ACTPASS:return"actpass";case au.INACTIVE:return"inactive"}},au.reverse=function(e){switch(e){case au.ACTIVE:return au.PASSIVE;case au.PASSIVE:return au.ACTIVE;case au.ACTPASS:return au.PASSIVE;case au.INACTIVE:return au.INACTIVE}};var su=au;class cu{constructor(e,t,n){this.setup=e,this.hash=t,this.fingerprint=n}clone(){return new cu(this.setup,this.hash,this.fingerprint)}plain(){return{setup:su.toString(this.setup),hash:this.hash,fingerprint:this.fingerprint}}getFingerprint(){return this.fingerprint}getHash(){return this.hash}getSetup(){return this.setup}setSetup(e){this.setup=e}}cu.expand=function(e){return new cu(e.setup?su.byValue(e.setup):su.ACTPASS,e.hash,e.fingerprint)};var uu=cu;class du{constructor(e,t,n,r){this.tag=e,this.suite=t,this.keyParams=n,this.sessionParams=r}clone(){return new du(this.tag,this.suite,this.keyParams,this.sessionParams)}plain(){return{tag:this.tag,suite:this.suite,keyParams:this.keyParams,sessionParams:this.sessionParams}}getSessionParams(){return this.sessionParams}getKeyParams(){return this.keyParams}getSuite(){return this.suite}getTag(){return this.tag}}du.expand=function(e){return new du(e.tag,e.suite,e.keyParams,e.sessionParams)};for(var lu=du,hu=[],pu=[],fu="undefined"!=typeof Uint8Array?Uint8Array:Array,mu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",gu=0,vu=mu.length;gu<vu;++gu)hu[gu]=mu[gu],pu[mu.charCodeAt(gu)]=gu;function yu(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function _u(e,t,n){for(var r,i,o=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(hu[(i=r)>>18&63]+hu[i>>12&63]+hu[i>>6&63]+hu[63&i]);return o.join("")}pu["-".charCodeAt(0)]=62,pu["_".charCodeAt(0)]=63;var wu=function(e){var t,n,r=yu(e),i=r[0],o=r[1],a=new fu(function(e,t,n){return 3*(t+n)/4-n}(0,i,o)),s=0,c=o>0?i-4:i;for(n=0;n<c;n+=4)t=pu[e.charCodeAt(n)]<<18|pu[e.charCodeAt(n+1)]<<12|pu[e.charCodeAt(n+2)]<<6|pu[e.charCodeAt(n+3)],a[s++]=t>>16&255,a[s++]=t>>8&255,a[s++]=255&t;return 2===o&&(t=pu[e.charCodeAt(n)]<<2|pu[e.charCodeAt(n+1)]>>4,a[s++]=255&t),1===o&&(t=pu[e.charCodeAt(n)]<<10|pu[e.charCodeAt(n+1)]<<4|pu[e.charCodeAt(n+2)]>>2,a[s++]=t>>8&255,a[s++]=255&t),a},bu=function(e){for(var t,n=e.length,r=n%3,i=[],o=16383,a=0,s=n-r;a<s;a+=o)i.push(_u(e,a,a+o>s?s:a+o));return 1===r?(t=e[n-1],i.push(hu[t>>2]+hu[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(hu[t>>10]+hu[t>>4&63]+hu[t<<2&63]+"=")),i.join("")},ku=function(e,t,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,u=c>>1,d=-7,l=n?i-1:0,h=n?-1:1,p=e[t+l];for(l+=h,o=p&(1<<-d)-1,p>>=-d,d+=s;d>0;o=256*o+e[t+l],l+=h,d-=8);for(a=o&(1<<-d)-1,o>>=-d,d+=r;d>0;a=256*a+e[t+l],l+=h,d-=8);if(0===o)o=1-u;else{if(o===c)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=u}return(p?-1:1)*a*Math.pow(2,o-r)},Su=function(e,t,n,r,i,o){var a,s,c,u=8*o-i-1,d=(1<<u)-1,l=d>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,f=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=d):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+l>=1?h/c:h*Math.pow(2,1-l))*c>=2&&(a++,c/=2),a+l>=d?(s=0,a=d):a+l>=1?(s=(t*c-1)*Math.pow(2,i),a+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=f,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+p]=255&a,p+=f,a/=256,u-=8);e[n+p-f]|=128*m},Eu=o((function(e,t){const n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=o,t.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},t.INSPECT_MAX_BYTES=50;const r=2147483647;function i(e){if(e>r)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,o.prototype),t}function o(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}return a(e,t,n)}function a(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!o.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|h(e,t);let r=i(n);const a=r.write(e,t);return a!==n&&(r=r.slice(0,a)),r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Y(e,Uint8Array)){const t=new Uint8Array(e);return d(t.buffer,t.byteOffset,t.byteLength)}return u(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Y(e,ArrayBuffer)||e&&Y(e.buffer,ArrayBuffer))return d(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(Y(e,SharedArrayBuffer)||e&&Y(e.buffer,SharedArrayBuffer)))return d(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return o.from(r,t,n);const a=function(e){if(o.isBuffer(e)){const t=0|l(e.length),n=i(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||$(e.length)?i(0):u(e):"Buffer"===e.type&&Array.isArray(e.data)?u(e.data):void 0}(e);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return s(e),i(e<0?0:0|l(e))}function u(e){const t=e.length<0?0:0|l(e.length),n=i(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function d(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,o.prototype),r}function l(e){if(e>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return 0|e}function h(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Y(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(e).length;default:if(i)return r?-1:W(e).length;t=(""+t).toLowerCase(),i=!0}}function p(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return j(this,t,n);case"utf8":case"utf-8":return S(this,t,n);case"ascii":return T(this,t,n);case"latin1":case"binary":return C(this,t,n);case"base64":return k(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function f(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),$(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:g(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,r,i){let o,a=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){let r=-1;for(o=n;o<s;o++)if(u(e,o)===u(t,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===c)return r*a}else-1!==r&&(o-=o-r),r=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){let n=!0;for(let r=0;r<c;r++)if(u(e,o+r)!==u(t,r)){n=!1;break}if(n)return o}return-1}function v(e,t,n,r){n=Number(n)||0;const i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;const o=t.length;let a;for(r>o/2&&(r=o/2),a=0;a<r;++a){const r=parseInt(t.substr(2*a,2),16);if($(r))return a;e[n+a]=r}return a}function y(e,t,n,r){return H(W(t,e.length-n),e,n,r)}function _(e,t,n,r){return H(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function w(e,t,n,r){return H(G(t),e,n,r)}function b(e,t,n,r){return H(function(e,t){let n,r,i;const o=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function k(e,t,n){return 0===t&&n===e.length?bu(e):bu(e.slice(t,n))}function S(e,t,n){n=Math.min(e.length,n);const r=[];let i=t;for(;i<n;){const t=e[i];let o=null,a=t>239?4:t>223?3:t>191?2:1;if(i+a<=n){let n,r,s,c;switch(a){case 1:t<128&&(o=t);break;case 2:n=e[i+1],128==(192&n)&&(c=(31&t)<<6|63&n,c>127&&(o=c));break;case 3:n=e[i+1],r=e[i+2],128==(192&n)&&128==(192&r)&&(c=(15&t)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:n=e[i+1],r=e[i+2],s=e[i+3],128==(192&n)&&128==(192&r)&&128==(192&s)&&(c=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&s,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=a}return function(e){const t=e.length;if(t<=E)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=E));return n}(r)}t.kMaxLength=r,o.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(e,t,n){return a(e,t,n)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(e,t,n){return function(e,t,n){return s(e),e<=0?i(e):void 0!==t?"string"==typeof n?i(e).fill(t,n):i(e).fill(t):i(e)}(e,t,n)},o.allocUnsafe=function(e){return c(e)},o.allocUnsafeSlow=function(e){return c(e)},o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if(Y(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),Y(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=o.allocUnsafe(t);let i=0;for(n=0;n<e.length;++n){let t=e[n];if(Y(t,Uint8Array))i+t.length>r.length?(o.isBuffer(t)||(t=o.from(t)),t.copy(r,i)):Uint8Array.prototype.set.call(r,t,i);else{if(!o.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,i)}i+=t.length}return r},o.byteLength=h,o.prototype._isBuffer=!0,o.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)f(this,t,t+1);return this},o.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)f(this,t,t+3),f(this,t+1,t+2);return this},o.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)f(this,t,t+7),f(this,t+1,t+6),f(this,t+2,t+5),f(this,t+3,t+4);return this},o.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?S(this,0,e):p.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(e,t,n,r,i){if(Y(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;let a=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0);const c=Math.min(a,s),u=this.slice(r,i),d=e.slice(t,n);for(let e=0;e<c;++e)if(u[e]!==d[e]){a=u[e],s=d[e];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let o=!1;for(;;)switch(r){case"hex":return v(this,e,t,n);case"utf8":case"utf-8":return y(this,e,t,n);case"ascii":case"latin1":case"binary":return _(this,e,t,n);case"base64":return w(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const E=4096;function T(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function C(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function j(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=t;r<n;++r)i+=Z[e[r]];return i}function x(e,t,n){const r=e.slice(t,n);let i="";for(let e=0;e<r.length-1;e+=2)i+=String.fromCharCode(r[e]+256*r[e+1]);return i}function P(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function I(e,t,n,r,i,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function M(e,t,n,r,i){z(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function R(e,t,n,r,i){z(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function A(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(e,t,n,r,i){return t=+t,n>>>=0,i||A(e,0,n,4),Su(e,t,n,r,23,4),n+4}function O(e,t,n,r,i){return t=+t,n>>>=0,i||A(e,0,n,8),Su(e,t,n,r,52,8),n+8}o.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,o.prototype),r},o.prototype.readUintLE=o.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||P(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return r},o.prototype.readUintBE=o.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||P(e,t,this.length);let r=this[e+--t],i=1;for(;t>0&&(i*=256);)r+=this[e+--t]*i;return r},o.prototype.readUint8=o.prototype.readUInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),this[e]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readBigUInt64LE=q((function(e){U(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||V(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))})),o.prototype.readBigUInt64BE=q((function(e){U(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||V(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),o.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||P(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||P(e,t,this.length);let r=t,i=1,o=this[e+--r];for(;r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||P(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){e>>>=0,t||P(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readBigInt64LE=q((function(e){U(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||V(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),o.prototype.readBigInt64BE=q((function(e){U(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||V(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),o.prototype.readFloatLE=function(e,t){return e>>>=0,t||P(e,4,this.length),ku(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||P(e,4,this.length),ku(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||P(e,8,this.length),ku(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||P(e,8,this.length),ku(this,e,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||I(this,e,t,n,Math.pow(2,8*n)-1,0);let i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||I(this,e,t,n,Math.pow(2,8*n)-1,0);let i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},o.prototype.writeUint8=o.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeBigUInt64LE=q((function(e,t=0){return M(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),o.prototype.writeBigUInt64BE=q((function(e,t=0){return R(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);I(this,e,t,n,r-1,-r)}let i=0,o=1,a=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);I(this,e,t,n,r-1,-r)}let i=n-1,o=1,a=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeBigInt64LE=q((function(e,t=0){return M(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),o.prototype.writeBigInt64BE=q((function(e,t=0){return R(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),o.prototype.writeFloatLE=function(e,t,n){return D(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return D(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return O(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return O(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(!o.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},o.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{const a=o.isBuffer(e)?e:o.from(e,r),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=a[i%s]}return this};const N={};function F(e,t,n){N[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function L(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function z(e,t,n,r,i,o){if(e>n||e<t){const r="bigint"==typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(o+1)}${r}`:`>= -(2${r} ** ${8*(o+1)-1}${r}) and < 2 ** ${8*(o+1)-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new N.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,n){U(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||V(t,e.length-(n+1))}(r,i,o)}function U(e,t){if("number"!=typeof e)throw new N.ERR_INVALID_ARG_TYPE(t,"number",e)}function V(e,t,n){if(Math.floor(e)!==e)throw U(e,n),new N.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new N.ERR_BUFFER_OUT_OF_BOUNDS;throw new N.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}F("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),F("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),F("ERR_OUT_OF_RANGE",(function(e,t,n){let r=`The value of "${e}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=L(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=L(i)),i+="n"),r+=` It must be ${t}. Received ${i}`,r}),RangeError);const B=/[^+/0-9A-Za-z-_]/g;function W(e,t){let n;t=t||1/0;const r=e.length;let i=null;const o=[];for(let a=0;a<r;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function G(e){return wu(function(e){if((e=(e=e.split("=")[0]).trim().replace(B,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function H(e,t,n,r){let i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function Y(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function $(e){return e!=e}const Z=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t}();function q(e){return"undefined"==typeof BigInt?X:e}function X(){throw new Error("BigInt not supported")}})),Tu=o((function(e,t){var n=Eu.Buffer;function r(e,t){for(var n in e)t[n]=e[n]}function i(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=Eu:(r(Eu,t),t.Buffer=i),r(n,i),i.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return n(e,t,r)},i.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=n(e);return void 0!==t?"string"==typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return Eu.SlowBuffer(e)}})),Cu=o((function(e){var t=65536,n=Tu.Buffer,r=i.crypto||i.msCrypto;r&&r.getRandomValues?e.exports=function(e,i){if(e>4294967295)throw new RangeError("requested too many random bytes");var o=n.allocUnsafe(e);if(e>0)if(e>t)for(var a=0;a<e;a+=t)r.getRandomValues(o.slice(a,a+t));else r.getRandomValues(o);return"function"==typeof i?process.nextTick((function(){i(null,o)})):o}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}));class ju{constructor(e,t){this.ufrag=e,this.pwd=t,this.lite=!1,this.endOfCandidates=!1}clone(){const e=new ju(this.ufrag,this.pwd);return e.setLite(this.lite),e.setEndOfCandidates(this.endOfCandidates),e}plain(){const e={ufrag:this.ufrag,pwd:this.pwd};return this.lite&&(e.lite=this.lite),this.endOfCandidates&&(e.endOfCandidates=this.endOfCandidates),e}getUfrag(){return this.ufrag}getPwd(){return this.pwd}isLite(){return this.lite}setLite(e){this.lite=e}isEndOfCandidates(){return this.endOfCandidates}setEndOfCandidates(e){this.endOfCandidates=e}}ju.generate=function(e){const t=new ju,n=Cu(8),r=Cu(24);return t.ufrag=n.toString("hex"),t.pwd=r.toString("hex"),t.lite=e,t},ju.expand=function(e){const t=new ju(e.ufrag,e.pwd);return t.setLite(e.lite),t.setEndOfCandidates(e.endOfCandidates),t};var xu=ju;const Pu=ou("SEND","RECV");Pu.byValue=function(e){return Pu[e.toUpperCase()]},Pu.toString=function(e){switch(e){case Pu.SEND:return"send";case Pu.RECV:return"recv"}},Pu.reverse=function(e){switch(e){case Pu.SEND:return Pu.RECV;case Pu.RECV:return Pu.SEND}};var Iu=Pu;class Mu{constructor(e,t){this.id=e,this.direction=t,this.formats=[],this.params=new Map}clone(){var e=new Mu(this.id,this.direction);return e.setFormats(this.formats),e.setParams(this.params),e}plain(){var e={id:this.id,direction:Iu.toString(this.direction)};for(var[t,n]of(this.formats&&(e.formats=this.formats),this.params.entries()))e.params||(e.params={}),e.params[t]=n;return e}getId(){return this.id}getDirection(){return this.direction}setDirection(e){this.direction=e}getFormats(){return this.formats}setFormats(e){this.formats=[];for(let t=0;t<e.length;++t)this.formats.push(parseInt(e[t]))}getParams(){return this.params}setParams(e){this.params=new Map(e)}addParam(e,t){this.params.set(e,t)}getDirection(){return this.direction}setDirection(e){this.direction=e}}Mu.expand=function(e){const t=new Mu(e.id,Iu.byValue(e.direction));for(let n in e.params)t.addParam(n,e.params[n]);return e.formats&&t.setFormats(e.formats),t};var Ru=Mu;class Au{constructor(e,t){this.paused=t,this.id=e}clone(){return new Au(this.id,this.paused)}plain(){return{id:this.id,paused:this.paused}}isPaused(){return this.paused}getId(){return this.id}}Au.expand=function(e){return new Au(e.id,e.paused)};var Du=Au;class Ou{constructor(){this.send=[],this.recv=[]}clone(){const e=new Ou;for(let t=0;t<this.send.length;++t){let n=[];for(let e=0;t<this.send[e].length;++t)n.push(this.send[t][e].clone());e.addSimulcastAlternativeStreams(Iu.SEND,n)}for(let t=0;t<this.recv.length;++t){let n=[];for(let e=0;t<this.recv[e].length;++t)n.push(this.recv[t][e].clone());e.addSimulcastAlternativeStreams(Iu.RECV,n)}return e}plain(){const e={send:[],recv:[]};for(let t=0;t<this.send.length;++t){let n=[];for(let e=0;e<this.send[t].length;++e)n.push(this.send[t][e].plain());e.send.push(n)}for(let t=0;t<this.recv.length;++t){let n=[];for(let e=0;e<this.recv[t].length;++e)n.push(this.recv[t][e].plain());e.recv.push(n)}return e}addSimulcastAlternativeStreams(e,t){return e===Iu.SEND?this.send.push(t):this.recv.push(t)}addSimulcastStream(e,t){return e===Iu.SEND?this.send.push([t]):this.recv.push([t])}getSimulcastStreams(e){return e===Iu.SEND?this.send:this.recv}}Ou.expand=function(e){const t=new Ou;for(let n=0;n<e.send.length;++n){let r=[];for(let t=0;t<e.send[n].length;++t)r.push(Du.expand(e.send[n][t]));t.addSimulcastAlternativeStreams(Iu.SEND,r)}for(let n=0;n<e.recv.length;++n){let r=[];for(let t=0;t<e.recv[n].length;++t)r.push(Du.expand(e.recv[n][t]));t.addSimulcastAlternativeStreams(Iu.RECV,r)}return t};var Nu=Ou;const Fu=ou("SENDRECV","SENDONLY","RECVONLY","INACTIVE");Fu.byValue=function(e){return Fu[e.toUpperCase()]},Fu.toString=function(e){switch(e){case Fu.SENDRECV:return"sendrecv";case Fu.SENDONLY:return"sendonly";case Fu.RECVONLY:return"recvonly";case Fu.INACTIVE:return"inactive"}},Fu.reverse=function(e){switch(e){case Fu.SENDRECV:return Fu.SENDRECV;case Fu.SENDONLY:return Fu.RECVONLY;case Fu.RECVONLY:return Fu.SENDONLY;case Fu.INACTIVE:return Fu.INACTIVE}};var Lu=Fu;class zu{constructor(e,t){this.port=e,this.maxMessageSize=t}clone(){return new zu(this.port,this.maxMessageSize)}plain(){return{port:this.port,maxMessageSize:this.maxMessageSize}}getPort(){return this.port}getMaxMessageSize(){return this.maxMessageSize}}zu.expand=function(e){return new zu(e.port,e.maxMessageSize)};var Uu=zu;class Vu{constructor(e,t){this.id=e,this.type=t,this.direction=Lu.SENDRECV,this.extensions=new Map,this.codecs=new Map,this.rids=new Map,this.simulcast=null,this.bitrate=0,this.control=null,this.dataChannel=null}clone(){const e=new Vu(this.id,this.type);e.setDirection(this.direction),e.setBitrate(this.bitrate);for(const t of this.codecs.values())e.addCodec(t.clone());for(const[t,n]of this.extensions.entries())e.addExtension(t,n);for(const t of this.rids.values())e.addRID(t.clone());return this.simulcast&&e.setSimulcast(this.simulcast.clone()),this.control&&e.setControl(this.control),this.dataChannel&&e.setDatachannel(this.dataChannel.clone()),e}plain(){const e={id:this.id,type:this.type,direction:Lu.toString(this.direction),codecs:[]};this.dataChannel&&(e.dataChannel=this.dataChannel.plain()),this.bitrate&&(e.bitrate=this.bitrate);for(const t of this.codecs.values())e.codecs.push(t.plain());for(const[t,n]of this.extensions.entries())e.extensions||(e.extensions={}),e.extensions[t]=n;for(const t of this.rids.values())e.rids||(e.rids=[]),e.rids.push(t.plain());return this.simulcast&&(e.simulcast=this.simulcast.plain()),this.control&&(e.control=this.control),e}getType(){return this.type}getId(){return this.id}setId(e){this.id=e}addExtension(e,t){this.extensions.set(e,t)}addRID(e){this.rids.set(e.getId(),e)}addCodec(e){this.codecs.set(e.getType(),e)}setCodecs(e){this.codecs=e}getCodecForType(e){return this.codecs.get(e)}getCodec(e){for(const t of this.codecs.values())if(t.getCodec().toLowerCase()===e.toLowerCase())return t;return null}hasCodec(e){return null!==this.getCodec(e)}getCodecs(){return this.codecs}hasRTX(){for(const e of this.codecs.values())if(e.hasRTX())return!0;return!1}getExtensions(){return this.extensions}getRIDs(){return this.rids}getRID(e){return this.rids.get(e)}getBitrate(){return this.bitrate}setBitrate(e){this.bitrate=e}getDirection(){return this.direction}setDirection(e){this.direction=e}hasControl(){return!!this.control}getControl(){return this.control}setControl(e){this.control=e}hasDataChannel(){return!!this.dataChannel}getDataChannel(){return this.dataChannel}setDataChannel(e){this.dataChannel=e}answer(e){const t=new Vu(this.id,this.type);if(e){if(t.setDirection(Lu.reverse(this.direction)),e.codecs){let n;n=Array.isArray(e.codecs)?iu.MapFromNames(e.codecs,e.rtx,e.rtcpfbs):e.codecs;for(let e of this.codecs.values())if(n.has(e.getCodec().toLowerCase())){const r=n.get(e.getCodec().toLowerCase());if("h264"===r.getCodec()&&r.hasParam("packetization-mode")&&r.getParam("packetization-mode")!=e.getParam("packetization-mode","0"))continue;if("h264"===r.getCodec()&&r.hasParam("profile-level-id")&&e.hasParam("profile-level-id")&&r.getParam("profile-level-id")!=e.getParam("profile-level-id"))continue;if("multiopus"===r.getCodec()&&r.hasParam("num_streams")&&e.hasParam("num_streams")&&r.getParam("num_streams")!=e.getParam("num_streams"))continue;const i=r.clone();i.setType(e.getType()),i.hasRTX()&&i.setRTX(e.getRTX()),e.hasChannels()&&i.setChannels(e.getChannels()),i.addParams(e.getParams()),t.addCodec(i)}}const r=new Set(e.extensions);for(let[e,n]of this.extensions)r.has(n)&&t.addExtension(e,n);if(e.simulcast&&this.simulcast){const e=new Nu,r=this.simulcast.getSimulcastStreams(Iu.SEND);if(r)for(let t=0;t<r.length;++t){var n=[];for(let e=0;e<r[t].length;++e)n.push(r[t][e].clone());e.addSimulcastAlternativeStreams(Iu.RECV,n)}const i=this.simulcast.getSimulcastStreams(Iu.RECV);if(i)for(let t=0;t<i.length;++t){n=[];for(let e=0;e<i[t].length;++e)n.push(i[t][e].clone());e.addSimulcastAlternativeStreams(Iu.SEND,n)}for(const e of this.rids.values()){const n=e.clone();n.setDirection(Iu.reverse(e.getDirection())),t.addRID(n)}t.setSimulcast(e)}if(e.dataChannel&&this.dataChannel){const n=new Uu(this.dataChannel.getPort(),e.dataChannel.maxMessageSize?e.dataChannel.maxMessageSize:this.dataChannel.getMaxMessageSize());t.setDataChannel(n)}}else t.setDirection(Lu.INACTIVE);return t}getSimulcast(){return this.simulcast}setSimulcast(e){this.simulcast=e}}Vu.create=function(e,t){const n=new Vu(e,e);return t?t.codecs&&(Array.isArray(t.codecs)?n.setCodecs(iu.MapFromNames(t.codecs,t.rtx,t.rtcpfbs)):n.setCodecs(t.codecs)):n.setDirection(Lu.INACTIVE),n},Vu.expand=function(e){const t=new Vu(e.id,e.type);if(e.direction&&t.setDirection(Lu.byValue(e.direction)),t.setBitrate(e.bitrate),e.dataChannel){const n=Uu.expand(e.dataChannel);n&&t.setDataChannel(n)}for(let n in e.extensions)t.addExtension(n,e.extensions[n]);for(let n=0;e.codecs&&n<e.codecs.length;++n){const r=iu.expand(e.codecs[n]);r&&t.addCodec(r)}for(let n=0;e.rids&&n<e.rids.length;++n){const r=Ru.expand(e.rids[n]);t.addRID(r)}return e.simulcast&&t.setSimulcast(Nu.expand(e.simulcast)),e.control&&t.setControl(e.control),t};var Bu=Vu;class Wu{constructor(e,t){this.semantics=e,this.ssrcs=[];for(let e=0;e<t.length;++e)this.ssrcs.push(parseInt(t[e]))}clone(){return new Wu(this.semantics,this.ssrcs)}plain(){const e={semantics:this.semantics,ssrcs:[]};for(let t=0;t<this.ssrcs.length;++t)e.ssrcs.push(this.ssrcs[t]);return e}getSemantics(){return this.semantics}getSSRCs(){return this.ssrcs}}Wu.expand=function(e){return new Wu(e.semantics,e.ssrcs)};var Gu=Wu;class Hu{constructor(e){this.ssrc=e}clone(){const e=new Hu(this.ssrc);e.setCName(this.cname),e.setStreamId(this.streamId),e.setTrackId(this.trackId)}plain(){const e={ssrc:this.ssrc};return this.cname&&(e.cname=this.cname),this.streamId&&(e.streamId=this.streamId),this.trackId&&(e.trackid=this.trackId),e}getCName(){return this.cname}setCName(e){this.cname=e}getStreamId(){return this.streamId}setStreamId(e){this.streamId=e}getTrackId(){return this.trackId}setTrackId(e){this.trackId=e}getSSRC(){return this.ssrc}}Hu.expand=function(e){const t=new Hu(e.ssrc);return t.setCName(e.cname),t.setStreamId(e.streamId),t.setTrackId(e.trackId),t};var Yu=Hu;class $u{constructor(e,t){this.id=e,this.paused=t,this.codecs=new Map,this.params=new Map}clone(){var e=new $u(this.id,this.paused);for(let t of this.codecs.values())e.addCodec(t.clone());return e.setParams(this.params),e}plain(){var e={id:this.id,paused:this.paused,codecs:{},params:{}};for(var[t,n]of this.codecs.entries())e.codecs[t]=n.plain();for(var[t,r]of this.params.entries())e.params[t]=r;return e}getId(){return this.id}getCodecs(){return this.codecs}addCodec(e){this.codecs.set(e.getType(),e)}getParams(){return this.params}setParams(e){this.params=new Map(e)}addParam(e,t){this.params.set(e,t)}isPaused(){return this.paused}}$u.expand=function(e){const t=new $u(e.id,e.paused);for(let n in e.codecs)t.addCodec(iu.expand(e.codecs[n]));for(let n in e.params)t.addParam(n,e.params[n]);return t};var Zu=$u;class qu{constructor(e,t){this.media=e,this.id=t,this.ssrcs=[],this.groups=[],this.encodings=[]}clone(){const e=new qu(this.media,this.id);this.mediaId&&e.setMediaId(this.mediaId);for(let t=0;t<this.ssrcs.length;++t)e.addSSRC(this.ssrcs[t]);for(let t=0;t<this.groups.length;++t)e.addSourceGroup(this.groups[t].clone());for(let t=0;t<this.encodings.length;++t){const n=[];for(let e=0;e<this.encodings[t].length;++e)n.push(this.encodings[t][e].clone());e.addAlternativeEncodings(n)}return e}plain(){const e={media:this.media,id:this.id,ssrcs:[]};this.mediaId&&(e.mediaId=this.mediaId);for(let t=0;t<this.ssrcs.length;++t)e.ssrcs.push(this.ssrcs[t]);for(let t=0;t<this.groups.length;++t)e.groups||(e.groups=[]),e.groups.push(this.groups[t].plain());for(let t=0;t<this.encodings.length;++t){const n=[];for(let e=0;e<this.encodings[t].length;++e)n.push(this.encodings[t][e].plain());n.length&&(e.encodings||(e.encodings=[]),e.encodings.push(n))}return e}getMedia(){return this.media}setMediaId(e){this.mediaId=e}getMediaId(){return this.mediaId}getId(){return this.id}addSSRC(e){this.ssrcs.push(e)}getSSRCs(){return this.ssrcs}addSourceGroup(e){this.groups.push(e)}getSourceGroup(e){for(const t of this.groups)if(t.getSemantics().toLowerCase()===e.toLowerCase())return t;return null}getSourceGroups(){return this.groups}hasSourceGroup(e){for(const t of this.groups)if(t.getSemantics().toLowerCase()===e.toLowerCase())return!0;return!1}getEncodings(){return this.encodings}addEncoding(e){this.encodings.push([e])}addAlternativeEncodings(e){this.encodings.push(e)}setEncodings(e){this.encodings=e}}qu.expand=function(e){const t=new qu(e.media,e.id);e.mediaId&&t.setMediaId(e.mediaId);for(let n=0;e.ssrcs&&n<e.ssrcs.length;++n)t.addSSRC(e.ssrcs[n]);for(let n=0;e.groups&&n<e.groups.length;++n)t.addSourceGroup(Gu.expand(e.groups[n]));for(let n=0;e.encodings&&n<e.encodings.length;++n){const r=[];for(let t=0;t<e.encodings[n].length;++t)r.push(Zu.expand(e.encodings[n][t]));t.addAlternativeEncodings(r)}return t};var Xu=qu;class Ku{constructor(e){this.id=e,this.tracks=new Map}clone(){const e=new Ku(this.id);for(const t of this.tracks.values())e.addTrack(t.clone());return e}plain(){const e={id:this.id,tracks:[]};for(const t of this.tracks.values())e.tracks.push(t.plain());return e}getId(){return this.id}addTrack(e){this.tracks.set(e.getId(),e)}removeTrack(e){return this.tracks.delete(e.getId())}removeTrackById(e){return this.tracks.delete(e)}getFirstTrack(e){for(let t of this.tracks.values())if(t.getMedia().toLowerCase()===e.toLowerCase())return t;return null}getTracks(){return this.tracks}removeAllTracks(){this.tracks.clear()}getTrack(e){return this.tracks.get(e)}}Ku.expand=function(e){const t=new Ku(e.id,e.paused);for(let n=0;n<e.tracks.length;++n){const r=Xu.expand(e.tracks[n]);r&&t.addTrack(r)}return t};var Ju=Ku;class Qu{constructor(e){this.version=e||1,this.streams=new Map,this.medias=new Array,this.candidates=new Array,this.ice=null,this.dtls=null,this.crypto=null,this.extmapAllowMixed=!0}clone(){const e=new Qu(this.version);for(let t=0;t<this.medias.length;++t)e.addMedia(this.medias[t].clone());for(const t of this.streams.values())e.addStream(t.clone());for(let t=0;t<this.candidates.length;++t)e.addCandidate(this.candidates[t].clone());return e.setICE(this.ice.clone()),this.dtls&&e.setDTLS(this.dtls.clone()),this.crypto&&e.setCrypto(this.crypto.clone()),e.setExmapAllowMixed(this.extmapAllowMixed),e}plain(){const e={version:this.version,streams:[],medias:[],candidates:[]};for(let t=0;t<this.medias.length;++t)e.medias.push(this.medias[t].plain());for(const t of this.streams.values())e.streams.push(t.plain());for(let t=0;t<this.candidates.length;++t)e.candidates.push(this.candidates[t].plain());return this.ice&&(e.ice=this.ice.plain()),this.dtls&&(e.dtls=this.dtls.plain()),this.crypto&&(e.crypto=this.crypto.plain()),this.extmapAllowMixed||(e.extmapAllowMixedNotSupported=!this.extmapAllowMixed),e}unify(){const e=new Qu(this.version);for(let t=0;t<this.medias.length;++t)e.addMedia(this.medias[t].clone());const t={audio:e.getMediasByType("audio"),video:e.getMediasByType("video")};for(const n of this.streams.values()){const r=n.clone();for(const n of r.getTracks().values()){let r=t[n.getMedia()].pop();r||(r=this.getMedia(n.getMedia()).clone(),r.setId(n.getId()),e.addMedia(r)),n.setMediaId(r.getId())}e.addStream(r)}for(let t=0;t<this.candidates.length;++t)e.addCandidate(this.candidates[t].clone());return this.ice&&e.setICE(this.ice.clone()),this.dtls&&e.setDTLS(this.dtls.clone()),this.crypto&&e.setCrypto(this.crypto.clone()),e}setVersion(e){this.version=e}addMedia(e){this.medias.push(e)}getMedia(e){for(let t in this.medias){let n=this.medias[t];if(n.getType().toLowerCase()===e.toLowerCase())return n}return null}getMediasByType(e){var t=[];for(let n in this.medias){let r=this.medias[n];r.getType().toLowerCase()===e.toLowerCase()&&t.push(r)}return t}getMediaById(e){for(let t in this.medias){let n=this.medias[t];if(n.getId().toLowerCase()===e.toLowerCase())return n}return null}replaceMedia(e){for(let t in this.medias)if(this.medias[t].getId()==e.getId())return this.medias[t]=e,!0;return!1}getMedias(){return this.medias}getVersion(){return this.version}getDTLS(){return this.dtls}setDTLS(e){this.dtls=e}hasCrypto(){return!!this.crypto}getCrypto(){return this.crypto}setCrypto(e){this.crypto=e}hasICE(){return!!this.ice}getICE(){return this.ice}setICE(e){this.ice=e}addCandidate(e){for(let t=0;t<this.candidates.length;++t)if(this.candidates[t].equals(e))return;this.candidates.push(e)}addCandidates(e){for(let t=0;t<e.length;++t)this.addCandidate(e[t])}getCandidates(){return this.candidates}getStream(e){return this.streams.get(e)}getStreams(){return this.streams}getFirstStream(){for(let e of this.streams.values())return e;return null}addStream(e){this.streams.set(e.getId(),e)}removeStream(e){return this.streams.delete(e.getId())}removeAllStreams(){this.streams.clear()}getTrackByMediaId(e){for(let t of this.streams.values())for(let[n,r]of t.getTracks())if(r.getMediaId()==e)return r;return null}getStreamByMediaId(e){for(let t of this.streams.values())for(let[n,r]of t.getTracks())if(r.getMediaId()==e)return t;return null}getExtmapAllowMixed(){return this.extmapAllowMixed}setExtmapAllowMixed(e){this.extmapAllowMixed=e}answer(e){const t=new Qu;e.ice&&(e.ice instanceof xu?t.setICE(e.ice.clone()):t.setICE(xu.expand(e.ice))),e.dtls&&(e.dtls instanceof uu?t.setDTLS(e.dtls):t.setDTLS(uu.expand(e.dtls))),e.crypto&&(e.crypto instanceof lu?t.setCrypto(e.crypto):t.setCrypto(lu.expand(e.crypto)));for(let n=0;e.candidates&&n<e.candidates.length;++n)e.candidates[n]instanceof eu?t.addCandidate(e.candidates[n].clone()):t.addCandidate(eu.expand(e.candidates[n]));for(const n of this.medias){const r=e&&e.capabilities&&e.capabilities[n.getType()];t.addMedia(n.answer(r))}return t.setExtmapAllowMixed(this.extmapAllowMixed),t}toString(){let e={version:0,media:[]};e.version=0,e.origin={username:"-",sessionId:(new Date).getTime(),sessionVersion:this.version,netType:"IN",ipVer:4,address:"127.0.0.1"},e.name="semantic-sdp",e.connection={version:4,ip:"0.0.0.0"},e.timing={start:0,stop:0},this.hasICE()&&this.getICE().isLite()&&(e.icelite="ice-lite"),e.msidSemantic={semantic:"WMS",token:"*"},e.groups=[],this.extmapAllowMixed&&(e.extmapAllowMixed="extmap-allow-mixed");let t={type:"BUNDLE",mids:[]};for(let n in this.medias){let r=this.medias[n],i={type:r.getType(),port:9,protocol:"",fmtp:[],rtp:[],rtcpFb:[],ext:[],bandwidth:[],candidates:[],ssrcGroups:[],ssrcs:[],rids:[]};i.direction=Lu.toString(r.getDirection()),this.extmapAllowMixed&&(i.extmapAllowMixed="extmap-allow-mixed"),i.mid=r.getId(),t.mids.push(r.getId()),r.hasControl()&&(i.control=r.getControl()),r.getBitrate()>0&&(i.bandwidth.push({type:"AS",limit:r.getBitrate()}),i.bandwidth.push({type:"TIAS",limit:1e3*r.getBitrate()}));let o=this.getCandidates();for(let e=0;e<o.length;++e){let t=o[e];i.candidates.push({foundation:t.getFoundation(),component:t.getComponentId(),transport:t.getTransport(),priority:t.getPriority(),ip:t.getAddress(),port:t.getPort(),type:t.getType(),raddr:t.getRelAddr(),rport:t.getRelPort()})}if(this.getICE()&&(i.iceUfrag=this.getICE().getUfrag(),i.icePwd=this.getICE().getPwd()),["audio","video"].includes(r.getType().toLowerCase())){i.rtcpMux="rtcp-mux",i.rtcpRsize="rtcp-rsize",this.getDTLS()?(i.protocol="UDP/TLS/RTP/SAVPF",i.fingerprint={type:this.getDTLS().getHash(),hash:this.getDTLS().getFingerprint()},i.setup=su.toString(this.getDTLS().getSetup())):this.getCrypto()?(i.protocol="RTP/SAVPF",i.crypto=[{id:this.getCrypto().getTag(),suite:this.getCrypto().getSuite(),config:this.getCrypto().getKeyParams()}]):i.protocol="RTP/AVP";for(let e of r.getCodecs().values()){"video"===r.getType().toLowerCase()?i.rtp.push({payload:e.getType(),codec:e.getCodec().toUpperCase(),rate:9e4}):"opus"===e.getCodec().toLowerCase()||"multiopus"===e.getCodec().toLowerCase()?i.rtp.push({payload:e.getType(),codec:e.getCodec(),rate:48e3,encoding:e.getChannels()}):i.rtp.push({payload:e.getType(),codec:e.getCodec(),rate:8e3});for(const t of e.getRTCPFeedbacks())i.rtcpFb.push({payload:e.getType(),type:t.getId(),subtype:t.getParams().join(" ")});e.hasRTX()&&(i.rtp.push({payload:e.getRTX(),codec:"rtx",rate:9e4}),i.fmtp.push({payload:e.getRTX(),config:"apt="+e.getType()}));const t=e.getParams();if(Object.keys(t).length){const n={payload:e.getType(),config:""};for(const e in t)n.config.length&&(n.config+=";"),t.hasOwnProperty(e)?n.config+=e+"="+t[e]:n.config+=e;i.fmtp.push(n)}}const e=[];for(let t=0;t<i.rtp.length;++t)e.push(i.rtp[t].payload);i.payloads=e.join(" ");for(let[e,t]of r.getExtensions().entries())i.ext.push({value:e,uri:t});for(let e of r.getRIDs().values()){let t={id:e.getId(),direction:Iu.toString(e.getDirection()),params:""};e.getFormats().length&&(t.params="pt="+e.getFormats().join(","));for(let[n,r]of e.getParams().entries())t.params+=(t.params.length?";":"")+n+"="+r;i.rids.push(t)}const t=r.getSimulcast();if(t){let e=1;i.simulcast={};const n=t.getSimulcastStreams(Iu.SEND),r=t.getSimulcastStreams(Iu.RECV);if(n&&n.length){let t="";for(let e=0;e<n.length;++e){let r="";for(let t=0;t<n[e].length;++t)r+=(r.length?",":"")+(n[e][t].isPaused()?"~":"")+n[e][t].getId();t+=(t.length?";":"")+r}i.simulcast["dir"+e]="send",i.simulcast["list"+e]=t,e++}if(r&&r.length){let t=[];for(let e=0;e<r.length;++e){let n="";for(let t=0;t<r[e].length;++t)n+=(n.length?",":"")+(r[e][t].isPaused()?"~":"")+r[e][t].getId();t+=(t.length?";":"")+n}i.simulcast["dir"+e]="recv",i.simulcast["list"+e]=t,e++}}}else if(r.hasDataChannel()){i.protocol="UDP/DTLS/SCTP",i.payloads="webrtc-datachannel";const e=r.getDataChannel();i.sctpPort=e.getPort(),i.maxMessageSize=e.getMaxMessageSize()}e.media.push(i)}for(let t of this.streams.values())for(let n of t.getTracks().values())for(let r in e.media){let i=e.media[r];if(n.getMediaId()){if(n.getMediaId()==i.mid){let e=n.getSourceGroups();for(let t in e){let n=e[t];i.ssrcGroups.push({semantics:n.getSemantics(),ssrcs:n.getSSRCs().join(" ")})}let r=n.getSSRCs();for(let e in r)i.ssrcs.push({id:r[e],attribute:"cname",value:t.getId()}),i.ssrcs.push({id:r[e],attribute:"msid",value:t.getId()+" "+n.getId()});i.msid=t.getId()+" "+n.getId();break}}else if(i.type.toLowerCase()===n.getMedia().toLowerCase()){let e=n.getSourceGroups();for(let t in e){let n=e[t];i.ssrcGroups.push({semantics:n.getSemantics(),ssrcs:n.getSSRCs().join(" ")})}let r=n.getSSRCs();for(let e in r)i.ssrcs.push({id:r[e],attribute:"cname",value:t.getId()}),i.ssrcs.push({id:r[e],attribute:"msid",value:t.getId()+" "+n.getId()});break}}return t.mids=t.mids.join(" "),e.groups.push(t),Jc.write(e)}toIceFragmentString(){let e={version:0,media:[],candidates:[]};this.hasICE()&&this.getICE().isLite()&&(e.icelite="ice-lite"),this.getICE()&&(e.iceUfrag=this.getICE().getUfrag(),e.icePwd=this.getICE().getPwd());for(const t of this.getCandidates())e.candidates.push({foundation:t.getFoundation(),component:t.getComponentId(),transport:t.getTransport(),priority:t.getPriority(),ip:t.getAddress(),port:t.getPort(),type:t.getType(),raddr:t.getRelAddr(),rport:t.getRelPort()});return Jc.write(e).slice(10)}}Qu.create=function(e){const t=new Qu;e.ice&&(e.ice instanceof xu?t.setICE(e.ice.clone()):t.setICE(xu.expand(e.ice))),e.dtls&&(e.dtls instanceof uu?t.setDTLS(e.dtls):t.setDTLS(uu.expand(e.dtls))),e.crypto&&(e.crypto instanceof lu?t.setCrypto(e.crypto):t.setCrypto(lu.expand(e.crypto)));for(let n=0;e.candidates&&n<e.candidates.length;++n)e.candidates[n]instanceof eu?t.addCandidate(e.candidates[n].clone()):t.addCandidate(eu.expand(e.candidates[n]));let n=96,r=1;for(let i in e.capabilities){const o=Bu.create(i,e.capabilities[i]);for(const[e,t]of o.getCodecs())t.getType()>=96&&t.setType(n++),t.getRTX()&&t.setRTX(n++);if(e.capabilities[i].extensions)for(let t of e.capabilities[i].extensions)15===r&&r++,o.addExtension(r++,t);t.addMedia(o)}return t},Qu.expand=function(e){const t=new Qu(e.version);for(let n=0;e.medias&&n<e.medias.length;++n){const r=Bu.expand(e.medias[n]);r&&t.addMedia(r)}for(let n=0;e.streams&&n<e.streams.length;++n){const r=Ju.expand(e.streams[n]);r&&t.addStream(r)}for(let n=0;e.candidates&&n<e.candidates.length;++n){const r=eu.expand(e.candidates[n]);r&&t.addCandidate(r)}return e.ice&&t.setICE(xu.expand(e.ice)),e.dtls&&t.setDTLS(uu.expand(e.dtls)),e.crypto&&t.setCrypto(uu.expand(e.crypto)),e.extmapAllowMixedNotSupported&&(this.extmapAllowMixed=!e.extmapAllowMixedNotSupported),t},Qu.process=function(e){return Qu.parse(e)},Qu.parse=function(e){const t=Jc.parse(e),n=new Qu;if(n.setVersion(t.version),t.iceUfrag&&t.icePwd){const e=String(t.iceUfrag),r=String(t.icePwd),i=new xu(e,r);i.setLite("ice-lite"==t.icelite),i.setEndOfCandidates("end-of-candidates"==t.endOfCandidates),n.setICE(i)}for(let e in t.media){const r=t.media[e],i=r.type,o=r.mid?r.mid.toString():e,a=new Bu(o,i);if(r.iceUfrag&&r.icePwd){const e=String(r.iceUfrag),i=String(r.icePwd),o=new xu(e,i);o.setLite("ice-lite"==t.icelite),o.setEndOfCandidates("end-of-candidates"==r.endOfCandidates),n.setICE(o)}for(let e=0;r.candidates&&e<r.candidates.length;++e){const t=r.candidates[e],i=new eu(t.foundation,t.component,t.transport,t.priority,t.ip,t.port,t.type,t.raddr,t.rport);n.addCandidate(i)}const s=r.fingerprint||t.fingerprint;if(s){const e=s.type,t=s.hash;let i=su.ACTPASS;r.setup&&(i=su.byValue(r.setup)),n.setDTLS(new uu(i,e,t))}if(r.crypto){const e=r.crypto[0];n.setCrypto(new lu(e.id,e.suite,e.config,e.sessionConfig))}let c=Lu.SENDRECV;r.direction&&(c=Lu.byValue(r.direction),a.setDirection(c)),r.control&&a.setControl(r.control),n.setExtmapAllowMixed("extmap-allow-mixed"==r.extmapAllowMixed||"extmap-allow-mixed"==t.extmapAllowMixed);const u=new Map;for(let e in r.rtp){const t=r.rtp[e],n=t.payload,i=t.codec;if("RED"===i.toUpperCase()||"ULPFEC"===i.toUpperCase())continue;let o={};for(let e in r.fmtp){const t=r.fmtp[e];if(t.payload===n){const e=t.config.split(";");for(let t in e){const n=e[t].split("="),r=n[0].trim(),i=n.splice(1).join("=").trim();o[r]=i}}}if("RTX"===i.toUpperCase())u.set(parseInt(o.apt),n);else{const e=new iu(i,n,o);t.encoding>1&&e.setChannels(t.encoding),a.addCodec(e)}}for(let e of u.entries()){const t=a.getCodecForType(e[0]);t&&t.setRTX(e[1])}for(let e=0;r.rtcpFb&&e<r.rtcpFb.length;++e){const t=a.getCodecForType(r.rtcpFb[e].payload);if(t){const n=r.rtcpFb[e].type,i=r.rtcpFb[e].subtype?r.rtcpFb[e].subtype.split(" "):null;t.addRTCPFeedback(new nu(n,i))}}const d=r.ext;for(let e in d){const t=d[e];a.addExtension(t.value,t.uri)}const l=r.rids;for(let e in l){const t=l[e],n=new Ru(t.id,Iu.byValue(t.direction));let r=[];const i=new Map;if(t.params){const e=Jc.parseParams(t.params);for(let t in e)"pt"===t?r=e[t].split(","):i.set(t,e[t]);n.setFormats(r),n.setParams(i)}a.addRID(n)}const h=[];if(r.simulcast){const e=new Nu;if(r.simulcast.dir1){const t=Iu.byValue(r.simulcast.dir1),n=Jc.parseSimulcastStreamList(r.simulcast.list1);for(let r=0;r<n.length;++r){const i=[];for(let e=0;e<n[r].length;++e)i.push(new Du(n[r][e].scid,n[r][e].paused));e.addSimulcastAlternativeStreams(t,i)}}if(r.simulcast.dir2){const t=Iu.byValue(r.simulcast.dir2),n=Jc.parseSimulcastStreamList(r.simulcast.list2);for(let r=0;r<n.length;++r){const i=[];for(let e=0;e<n[r].length;++e)i.push(new Du(n[r][e].scid,n[r][e].paused));e.addSimulcastAlternativeStreams(t,i)}}for(let t of e.getSimulcastStreams(Iu.SEND)){const e=[];for(let n=0;n<t.length;n++){const r=new Zu(t[n].getId(),t[n].isPaused()),i=a.getRID(r.getId());if(i){const t=i.getFormats();for(let e=0;t&&e<t.length;++e){const n=a.getCodecForType(t[e]);n&&r.addCodec(n)}r.setParams(i.getParams()),e.push(r)}}e.length&&h.push(e)}a.setSimulcast(e)}const p=new Map;if(r.ssrcs)for(let e in r.ssrcs){let t=r.ssrcs[e],a=t.id,s=t.attribute,c=t.value,u=p.get(a);if(u||(u=new Yu(a),p.set(u.getSSRC(),u)),"cname"===s.toLowerCase())u.setCName(c);else if("msid"===s.toLowerCase()){let e=c.split(" "),t=e[0],r=e[1];u.setStreamId(t),u.setTrackId(r);let s=n.getStream(t);s||(s=new Ju(t),n.addStream(s));let d=s.getTrack(r);d||(d=new Xu(i,r),d.setMediaId(o),d.setEncodings(h),s.addTrack(d)),d.addSSRC(a)}}if(r.msid){let e=r.msid.split(" "),t=e[0],a=e[1],s=n.getStream(t);s||(s=new Ju(t),n.addStream(s));let c=s.getTrack(a);c||(c=new Xu(i,a),c.setMediaId(o),c.setEncodings(h),s.addTrack(c));for(let[e,n]of p.entries())n.getStreamId()||(n.setStreamId(t),n.setTrackId(a),c.addSSRC(e))}for(let[e,t]of p.entries())if(!t.getStreamId()){let r=t.getCName(),a=o;t.setStreamId(r),t.setTrackId(a);let s=n.getStream(r);s||(s=new Ju(r),n.addStream(s));let c=s.getTrack(a);c||(c=new Xu(i,a),c.setMediaId(o),c.setEncodings(h),s.addTrack(c)),c.addSSRC(e)}if(r.ssrcGroups)for(let e in r.ssrcGroups){let t=r.ssrcGroups[e],i=t.ssrcs.split(" "),o=new Gu(t.semantics,i),a=p.get(parseInt(i[0]));a&&n.getStream(a.getStreamId()).getTrack(a.getTrackId()).addSourceGroup(o)}if("application"==r.type&&"webrtc-datachannel"==r.payloads){const e=new Uu(r.sctpPort,r.maxMessageSize);a.setDataChannel(e)}n.addMedia(a)}return n};var ed={SDPInfo:Qu,CandidateInfo:eu,CodecInfo:iu,DTLSInfo:uu,CryptoInfo:lu,ICEInfo:xu,MediaInfo:Bu,Setup:su,SourceGroupInfo:Gu,SourceInfo:Yu,StreamInfo:Ju,TrackInfo:Xu,RTCPFeedbackInfo:nu,TrackEncodingInfo:Zu,Direction:Lu},td=o((function(e,t){!function(n,r){var i="function",o="undefined",a="object",s="string",c="model",u="name",d="type",l="vendor",h="version",p="architecture",f="console",m="mobile",g="tablet",v="smarttv",y="wearable",_="embedded",w="Amazon",b="Apple",k="ASUS",S="BlackBerry",E="Browser",T="Chrome",C="Firefox",j="Google",x="Huawei",P="LG",I="Microsoft",M="Motorola",R="Opera",A="Samsung",D="Sharp",O="Sony",N="Xiaomi",F="Zebra",L="Facebook",z=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},U=function(e,t){return typeof e===s&&-1!==V(t).indexOf(V(e))},V=function(e){return e.toLowerCase()},B=function(e,t){if(typeof e===s)return e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,""),typeof t===o?e:e.substring(0,350)},W=function(e,t){for(var n,o,s,c,u,d,l=0;l<t.length&&!u;){var h=t[l],p=t[l+1];for(n=o=0;n<h.length&&!u;)if(u=h[n++].exec(e))for(s=0;s<p.length;s++)d=u[++o],typeof(c=p[s])===a&&c.length>0?2===c.length?typeof c[1]==i?this[c[0]]=c[1].call(this,d):this[c[0]]=c[1]:3===c.length?typeof c[1]!==i||c[1].exec&&c[1].test?this[c[0]]=d?d.replace(c[1],c[2]):r:this[c[0]]=d?c[1].call(this,d,c[2]):r:4===c.length&&(this[c[0]]=d?c[3].call(this,d.replace(c[1],c[2])):r):this[c]=d||r;l+=2}},G=function(e,t){for(var n in t)if(typeof t[n]===a&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(U(t[n][i],e))return"?"===n?r:n}else if(U(t[n],e))return"?"===n?r:n;return e},H={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Y={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[h,[u,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[h,[u,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[u,h],[/opios[\/ ]+([\w\.]+)/i],[h,[u,R+" Mini"]],[/\bopr\/([\w\.]+)/i],[h,[u,R]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[u,h],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[h,[u,"UC"+E]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[h,[u,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[h,[u,"WeChat"]],[/konqueror\/([\w\.]+)/i],[h,[u,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[h,[u,"IE"]],[/yabrowser\/([\w\.]+)/i],[h,[u,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[u,/(.+)/,"$1 Secure "+E],h],[/\bfocus\/([\w\.]+)/i],[h,[u,C+" Focus"]],[/\bopt\/([\w\.]+)/i],[h,[u,R+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[h,[u,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[h,[u,"Dolphin"]],[/coast\/([\w\.]+)/i],[h,[u,R+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[h,[u,"MIUI "+E]],[/fxios\/([-\w\.]+)/i],[h,[u,C]],[/\bqihu|(qi?ho?o?|360)browser/i],[[u,"360 "+E]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[u,/(.+)/,"$1 "+E],h],[/(comodo_dragon)\/([\w\.]+)/i],[[u,/_/g," "],h],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[u,h],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[u],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[u,L],h],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[u,h],[/\bgsa\/([\w\.]+) .*safari\//i],[h,[u,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[h,[u,T+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[u,T+" WebView"],h],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[h,[u,"Android "+E]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[u,h],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[h,[u,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[h,u],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[u,[h,G,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[u,h],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[u,"Netscape"],h],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[h,[u,C+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[u,h]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[p,"amd64"]],[/(ia32(?=;))/i],[[p,V]],[/((?:i[346]|x)86)[;\)]/i],[[p,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[p,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[p,"armhf"]],[/windows (ce|mobile); ppc;/i],[[p,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[p,/ower/,"",V]],[/(sun4\w)[;\)]/i],[[p,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[p,V]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[c,[l,A],[d,g]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[c,[l,A],[d,m]],[/\((ip(?:hone|od)[\w ]*);/i],[c,[l,b],[d,m]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[c,[l,b],[d,g]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[c,[l,x],[d,g]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[c,[l,x],[d,m]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[c,/_/g," "],[l,N],[d,m]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[c,/_/g," "],[l,N],[d,g]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[c,[l,"OPPO"],[d,m]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[c,[l,"Vivo"],[d,m]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[c,[l,"Realme"],[d,m]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[c,[l,M],[d,m]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[c,[l,M],[d,g]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[c,[l,P],[d,g]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[c,[l,P],[d,m]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[c,[l,"Lenovo"],[d,g]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[c,/_/g," "],[l,"Nokia"],[d,m]],[/(pixel c)\b/i],[c,[l,j],[d,g]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[c,[l,j],[d,m]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[c,[l,O],[d,m]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[c,"Xperia Tablet"],[l,O],[d,g]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[c,[l,"OnePlus"],[d,m]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[c,[l,w],[d,g]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[c,/(.+)/g,"Fire Phone $1"],[l,w],[d,m]],[/(playbook);[-\w\),; ]+(rim)/i],[c,l,[d,g]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[c,[l,S],[d,m]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[c,[l,k],[d,g]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[c,[l,k],[d,m]],[/(nexus 9)/i],[c,[l,"HTC"],[d,g]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[l,[c,/_/g," "],[d,m]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[c,[l,"Acer"],[d,g]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[c,[l,"Meizu"],[d,m]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[c,[l,D],[d,m]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[l,c,[d,m]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[l,c,[d,g]],[/(surface duo)/i],[c,[l,I],[d,g]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[c,[l,"Fairphone"],[d,m]],[/(u304aa)/i],[c,[l,"AT&T"],[d,m]],[/\bsie-(\w*)/i],[c,[l,"Siemens"],[d,m]],[/\b(rct\w+) b/i],[c,[l,"RCA"],[d,g]],[/\b(venue[\d ]{2,7}) b/i],[c,[l,"Dell"],[d,g]],[/\b(q(?:mv|ta)\w+) b/i],[c,[l,"Verizon"],[d,g]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[c,[l,"Barnes & Noble"],[d,g]],[/\b(tm\d{3}\w+) b/i],[c,[l,"NuVision"],[d,g]],[/\b(k88) b/i],[c,[l,"ZTE"],[d,g]],[/\b(nx\d{3}j) b/i],[c,[l,"ZTE"],[d,m]],[/\b(gen\d{3}) b.+49h/i],[c,[l,"Swiss"],[d,m]],[/\b(zur\d{3}) b/i],[c,[l,"Swiss"],[d,g]],[/\b((zeki)?tb.*\b) b/i],[c,[l,"Zeki"],[d,g]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[l,"Dragon Touch"],c,[d,g]],[/\b(ns-?\w{0,9}) b/i],[c,[l,"Insignia"],[d,g]],[/\b((nxa|next)-?\w{0,9}) b/i],[c,[l,"NextBook"],[d,g]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[l,"Voice"],c,[d,m]],[/\b(lvtel\-)?(v1[12]) b/i],[[l,"LvTel"],c,[d,m]],[/\b(ph-1) /i],[c,[l,"Essential"],[d,m]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[c,[l,"Envizen"],[d,g]],[/\b(trio[-\w\. ]+) b/i],[c,[l,"MachSpeed"],[d,g]],[/\btu_(1491) b/i],[c,[l,"Rotor"],[d,g]],[/(shield[\w ]+) b/i],[c,[l,"Nvidia"],[d,g]],[/(sprint) (\w+)/i],[l,c,[d,m]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[l,I],[d,m]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[c,[l,F],[d,g]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[c,[l,F],[d,m]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[l,c,[d,f]],[/droid.+; (shield) bui/i],[c,[l,"Nvidia"],[d,f]],[/(playstation [345portablevi]+)/i],[c,[l,O],[d,f]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[c,[l,I],[d,f]],[/smart-tv.+(samsung)/i],[l,[d,v]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[l,A],[d,v]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[l,P],[d,v]],[/(apple) ?tv/i],[l,[c,b+" TV"],[d,v]],[/crkey/i],[[c,T+"cast"],[l,j],[d,v]],[/droid.+aft(\w)( bui|\))/i],[c,[l,w],[d,v]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[c,[l,D],[d,v]],[/(bravia[\w ]+)( bui|\))/i],[c,[l,O],[d,v]],[/(mitv-\w{5}) bui/i],[c,[l,N],[d,v]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[l,B],[c,B],[d,v]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[d,v]],[/((pebble))app/i],[l,c,[d,y]],[/droid.+; (glass) \d/i],[c,[l,j],[d,y]],[/droid.+; (wt63?0{2,3})\)/i],[c,[l,F],[d,y]],[/(quest( 2)?)/i],[c,[l,L],[d,y]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[l,[d,_]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[c,[d,m]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[c,[d,g]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,g]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[d,m]],[/(android[-\w\. ]{0,9});.+buil/i],[c,[l,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[h,[u,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[h,[u,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[u,h],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[h,u]],os:[[/microsoft (windows) (vista|xp)/i],[u,h],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[u,[h,G,H]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[u,"Windows"],[h,G,H]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[h,/_/g,"."],[u,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[u,"Mac OS"],[h,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[h,u],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[u,h],[/\(bb(10);/i],[h,[u,S]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[h,[u,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[h,[u,C+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[h,[u,"webOS"]],[/crkey\/([\d\.]+)/i],[h,[u,T+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[u,"Chromium OS"],h],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[u,h],[/(sunos) ?([\w\.\d]*)/i],[[u,"Solaris"],h],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[u,h]]},$=function(e,t){if(typeof e===a&&(t=e,e=r),!(this instanceof $))return new $(e,t).getResult();var i=e||(typeof n!==o&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:""),f=t?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(Y,t):Y;return this.getBrowser=function(){var e={};return e[u]=r,e[h]=r,W.call(e,i,f.browser),e.major=function(e){return typeof e===s?e.replace(/[^\d\.]/g,"").split(".")[0]:r}(e.version),e},this.getCPU=function(){var e={};return e[p]=r,W.call(e,i,f.cpu),e},this.getDevice=function(){var e={};return e[l]=r,e[c]=r,e[d]=r,W.call(e,i,f.device),e},this.getEngine=function(){var e={};return e[u]=r,e[h]=r,W.call(e,i,f.engine),e},this.getOS=function(){var e={};return e[u]=r,e[h]=r,W.call(e,i,f.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=typeof e===s&&e.length>350?B(e,350):e,this},this.setUA(i),this};$.VERSION="0.7.32",$.BROWSER=z([u,h,"major"]),$.CPU=z([p]),$.DEVICE=z([c,l,d,f,m,v,g,y,_]),$.ENGINE=$.OS=z([u,h]),e.exports&&(t=e.exports=$),t.UAParser=$;var Z=typeof n!==o&&(n.jQuery||n.Zepto);if(Z&&!Z.ua){var q=new $;Z.ua=q.getResult(),Z.ua.get=function(){return q.getUA()},Z.ua.set=function(e){q.setUA(e);var t=q.getResult();for(var n in t)Z.ua[n]=t[n]}}}("object"==typeof window?window:i)}));const nd=["iOS"];class rd extends td{constructor(){super(window.navigator.userAgent)}isChrome(){const e=this.getBrowser();if(!e.name)return!1;const t=this.getOS();let n=!0;return n=!new RegExp(nd.join("|"),"i").test(t.name),e.name.match(/Chrome/i)&&n}isFirefox(){const e=this.getBrowser();return!!e.name&&e.name.match(/Firefox/i)}isOpera(){const e=this.getBrowser();return!!e.name&&e.name.match(/Opera/i)}}const id=Ir.get("SdpParser"),od=Array.from({length:31},((e,t)=>t+35)),ad=Array.from({length:32},((e,t)=>t+96)),sd=Array.from({length:14},((e,t)=>t+1)),cd=Array.from({length:240},((e,t)=>t+16));class ud{static setSimulcast(e,t){if(id.info("Setting simulcast. Codec: ",t),!(new rd).isChrome())return id.warn("Simulcast is only available in Google Chrome browser"),e;if("h264"!==t&&"vp8"!==t)return id.warn("Simulcast is only available in h264 and vp8 codecs"),e;try{const t=/m=video[\s\S]*?a=ssrc:(\d*) msid:([\s\S]+?)\r\n/,n=/m=video[\s\S]*?a=ssrc:(\d*) cname:([\s\S]+?)\r\n/.exec(e),r=n[1],i=n[2],o=t.exec(e)[2],a=2,s=[r];for(let t=0;t<a;++t){const n=100+2*t,r=n+1;s.push(n),e+="a=ssrc-group:FID "+n+" "+r+"\r\na=ssrc:"+n+" cname:"+i+"\r\na=ssrc:"+n+" msid:"+o+"\r\na=ssrc:"+r+" cname:"+i+"\r\na=ssrc:"+r+" msid:"+o+"\r\n"}return e+="a=ssrc-group:SIM "+s.join(" ")+"\r\n",id.info("Simulcast setted"),id.debug("Simulcast SDP: ",e),e}catch(e){throw id.error("Error setting SDP for simulcast: ",e),e}}static setStereo(e){return id.info("Replacing SDP response for support stereo"),e=e.replace(/useinbandfec=1/g,"useinbandfec=1; stereo=1"),id.info("Replaced SDP response for support stereo"),id.debug("New SDP value: ",e),e}static setDTX(e){return id.info("Replacing SDP response for support dtx"),e=e.replace("useinbandfec=1","useinbandfec=1; usedtx=1"),id.info("Replaced SDP response for support dtx"),id.debug("New SDP value: ",e),e}static setAbsoluteCaptureTime(e){const t="a=extmap:"+ud.getAvailableHeaderExtensionIdRange(e)[0]+" http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time\r\n";return e=e.replace(/(m=.*\r\n(?:.*\r\n)*?)(a=extmap.*\r\n)/gm,((e,n,r)=>n+t+r)),id.info("Replaced SDP response for setting absolute capture time"),id.debug("New SDP value: ",e),e}static setDependencyDescriptor(e){const t="a=extmap:"+ud.getAvailableHeaderExtensionIdRange(e)[0]+" https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension\r\n";return e=e.replace(/(m=.*\r\n(?:.*\r\n)*?)(a=extmap.*\r\n)/gm,((e,n,r)=>n+t+r)),id.info("Replaced SDP response for setting depency descriptor"),id.debug("New SDP value: ",e),e}static setVideoBitrate(e,t){if(t<1)id.info("Remove bitrate restrictions"),e=e.replace(/b=AS:.*\r\n/,"").replace(/b=TIAS:.*\r\n/,"");else{const n=ed.SDPInfo.parse(e),r=n.getMedia("video");id.info("Setting video bitrate"),r.setBitrate(t),e=n.toString()}return e}static removeSdpLine(e,t){return id.debug("SDP before trimming: ",e),e=e.split("\n").filter((e=>e.trim()!==t)).join("\n"),id.debug("SDP trimmed result: ",e),e}static adaptCodecName(e,t,n){if(!e)return e;const r=new RegExp("".concat(t),"i");return e.replace(r,n)}static setMultiopus(e,t){if(!(new rd).isFirefox()&&(!t||dd(t)))if(e.includes("multiopus/48000/6"))id.info("Multiopus already setted");else{id.info("Setting multiopus");const t=/m=audio 9 UDP\/TLS\/RTP\/SAVPF (.*)\r\n/.exec(e)[0],n=ud.getAvailablePayloadTypeRange(e)[0],r=t.replace("\r\n"," ")+n+"\r\na=rtpmap:"+n+" multiopus/48000/6\r\na=fmtp:"+n+" channel_mapping=0,4,1,2,3,5;coupled_streams=2;minptime=10;num_streams=4;useinbandfec=1\r\n";e=e.replace(t,r),id.info("Multiopus offer created"),id.debug("SDP parsed for multioups: ",e)}return e}static getAvailablePayloadTypeRange(e){const t=e.matchAll(/m=(?:.*) (?:.*) UDP\/TLS\/RTP\/SAVPF (.*)\r\n/gm);let n=ad.concat(od);for(const e of t){const t=e[1].split(" ").map((e=>parseInt(e)));n=n.filter((e=>!t.includes(e)))}return n}static getAvailableHeaderExtensionIdRange(e){const t=e.matchAll(/a=extmap:(\d+)(?:.*)\r\n/gm);let n=sd.concat(cd);for(const e of t){const t=e[1].split(" ").map((e=>parseInt(e)));n=n.filter((e=>!t.includes(e)))}return n}static renegotiate(e,t){const n=ed.SDPInfo.parse(e),r=ed.SDPInfo.parse(t);for(const e of n.getMedias()){let t=r.getMediaById(e.getId());if(!t){t=new ed.MediaInfo(e.getId(),e.getType()),t.setDirection(ed.Direction.reverse(e.getDirection()));const n=r.getMedia(e.getType());if(n){t.setCodecs(n.getCodecs());for(const[e,r]of n.getExtensions())t.addExtension(e,r)}r.addMedia(t)}}return r.toString()}static updateMissingVideoExtensions(e,t){var n;const r=ed.SDPInfo.parse(e),i=null===(n=ed.SDPInfo.parse(t).getMediasByType("video")[0])||void 0===n?void 0:n.getExtensions();if(i||i.length){for(const t of r.getMediasByType("video")){const n=t.getExtensions();i.forEach(((r,i)=>{if(!n.get(i)){const n=t.getId(),o="a=extmap:"+i+" "+r+"\r\n",a=new RegExp("(a=mid:"+n+"\r\n(?:.*\r\n)*?)","g");e=e.replace(a,((e,t,n)=>t+o))}}))}return e}}}const dd=e=>e.getAudioTracks().some((e=>e.getSettings().channelCount>2));class ld extends Es{constructor(e,t){super(),this.namespace=e,this.tm=t}cmd(e,t){return this.tm.cmd(e,t,this.namespace)}event(e,t){return this.tm.event(e,t,this.namespace)}close(){return this.tm.namespaces.delete(this.namespace)}}var hd=class extends Es{constructor(e){super(),this.maxId=0,this.namespaces=new Map,this.transactions=new Map,this.transport=e,this.listener=t=>{let n;try{n=JSON.parse(t.utf8Data||t.data||t)}catch(e){return}switch(n.type){case"cmd":const t={name:n.name,data:n.data,namespace:n.namespace,accept:t=>{e.send(JSON.stringify({type:"response",transId:n.transId,data:t}))},reject:t=>{e.send(JSON.stringify({type:"error",transId:n.transId,data:t}))}};if(t.namespace){const e=this.namespaces.get(t.namespace);e?e.emit("cmd",t):this.emit("cmd",t)}else this.emit("cmd",t);break;case"response":{const e=this.transactions.get(n.transId);if(!e)return;this.transactions.delete(n.transId),e.resolve(n.data);break}case"error":{const e=this.transactions.get(n.transId);if(!e)return;this.transactions.delete(n.transId),e.reject(n.data);break}case"event":const i={name:n.name,data:n.data,namespace:n.namespace};if(i.namespace){var r=this.namespaces.get(i.namespace);r?r.emit("event",i):this.emit("event",i)}else this.emit("event",i)}},this.transport.addListener?this.transport.addListener("message",this.listener):this.transport.addEventListener("message",this.listener)}cmd(e,t,n){return new Promise(((r,i)=>{if(!e||0===e.length)throw new Error("Bad command name");const o={type:"cmd",transId:this.maxId++,name:e,data:t};n&&(o.namespace=n);const a=JSON.stringify(o);o.resolve=r,o.reject=i,this.transactions.set(o.transId,o);try{this.transport.send(a)}catch(e){throw this.transactions.delete(o.transId),e}}))}event(e,t,n){if(!e||0===e.length)throw new Error("Bad event name");const r={type:"event",name:e,data:t};n&&(r.namespace=n);const i=JSON.stringify(r);this.transport.send(i)}namespace(e){let t=this.namespaces.get(e);return t||(t=new ld(e,this),this.namespaces.set(e,t),t)}close(){for(const e of this.namespaces.values())e.close();this.transport.removeListener?this.transport.removeListener("message",this.listener):this.transport.removeEventListener("message",this.listener)}};const pd=Ir.get("Signaling"),fd="wsConnectionSuccess",md="wsConnectionError",gd="broadcastEvent",vd={VP8:"vp8",VP9:"vp9",H264:"h264",AV1:"av1"},yd={OPUS:"opus",MULTIOPUS:"multiopus"};class _d extends Es{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{streamName:null,url:"ws://localhost:8080/"};super(),this.streamName=e.streamName,this.wsUrl=e.url,this.webSocket=null,this.transactionManager=null,this.serverId=null,this.clusterId=null}async connect(){var e;return pd.info("Connecting to Signaling Server"),this.transactionManager&&(null===(e=this.webSocket)||void 0===e?void 0:e.readyState)===WebSocket.OPEN?(pd.info("Connected to server: ",this.webSocket.url),pd.debug("WebSocket value: ",{url:this.webSocket.url,protocol:this.webSocket.protocol,readyState:this.webSocket.readyState,binaryType:this.webSocket.binaryType,extensions:this.webSocket.extensions}),this.emit(fd,{ws:this.webSocket,tm:this.transactionManager}),this.webSocket):new Promise(((e,t)=>{this.webSocket=new WebSocket(this.wsUrl),this.transactionManager=new hd(this.webSocket),this.webSocket.onopen=()=>{pd.info("WebSocket opened"),this.transactionManager.on("event",(e=>{this.emit(gd,e)})),pd.info("Connected to server: ",this.webSocket.url),pd.debug("WebSocket value: ",{url:this.webSocket.url,protocol:this.webSocket.protocol,readyState:this.webSocket.readyState,binaryType:this.webSocket.binaryType,extensions:this.webSocket.extensions}),this.emit(fd,{ws:this.webSocket,tm:this.transactionManager}),e(this.webSocket)},this.webSocket.onerror=()=>{pd.error("WebSocket not connected: ",this.webSocket.url),this.emit(md,this.webSocket.url),t(this.webSocket.url)},this.webSocket.onclose=()=>{this.webSocket=null,this.transactionManager=null,pd.info("Connection closed with Signaling Server."),this.emit("wsConnectionClose")}}))}close(){var e;pd.info("Closing connection with Signaling Server."),null===(e=this.webSocket)||void 0===e||e.close()}async subscribe(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;pd.info("Starting subscription to streamName: ",this.streamName),pd.debug("Subcription local description: ",e);const i=wd(t,n,r),o={sdp:e=ud.adaptCodecName(e,"AV1X",vd.AV1),streamId:this.streamName,pinnedSourceId:i.pinnedSourceId,excludedSourceIds:i.excludedSourceIds};i.vad&&(o.vad=!0),Array.isArray(i.events)&&(o.events=i.events);try{var a,s,c,u,d;await this.connect(),pd.info("Sending view command");const e=await this.transactionManager.cmd("view",o),t=null===(a=(s=RTCRtpReceiver).getCapabilities)||void 0===a||null===(c=a.call(s,"video"))||void 0===c||null===(u=c.codecs)||void 0===u||null===(d=u.find)||void 0===d?void 0:d.call(u,(e=>"video/AV1X"===e.mimeType));return e.sdp=t?ud.adaptCodecName(e.sdp,vd.AV1,"AV1X"):e.sdp,pd.info("Command sent, subscriberId: ",e.subscriberId),pd.debug("Command result: ",e),this.serverId=e.subscriberId,this.clusterId=e.clusterId,e.sdp}catch(e){throw pd.error("Error sending view command, error: ",e),e}}async publish(e,t){const n=bd(t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null);pd.info("Starting publishing to streamName: ".concat(this.streamName,", codec: ").concat(n.codec)),pd.debug("Publishing local description: ",e);const r=Object.values(vd);if(-1===r.indexOf(n.codec))throw pd.error("Invalid codec. Possible values are: ",r),new Error("Invalid codec. Possible values are: ".concat(r));n.codec===vd.AV1&&(e=ud.adaptCodecName(e,"AV1X",vd.AV1));const i={name:this.streamName,sdp:e,codec:n.codec,sourceId:n.sourceId};null!==n.record&&(i.record=n.record),Array.isArray(n.events)&&(i.events=n.events);try{await this.connect(),pd.info("Sending publish command");const e=await this.transactionManager.cmd("publish",i);if(n.codec===vd.AV1){var o,a,s,c,u;const t=null===(o=(a=RTCRtpSender).getCapabilities)||void 0===o||null===(s=o.call(a,"video"))||void 0===s||null===(c=s.codecs)||void 0===c||null===(u=c.find)||void 0===u?void 0:u.call(c,(e=>"video/AV1X"===e.mimeType));e.sdp=t?ud.adaptCodecName(e.sdp,vd.AV1,"AV1X"):e.sdp}return pd.info("Command sent, publisherId: ",e.publisherId),pd.debug("Command result: ",e),this.serverId=e.publisherId,this.clusterId=e.clusterId,e.sdp}catch(e){throw pd.error("Error sending publish command, error: ",e),e}}async cmd(e,t){return pd.info("Sending cmd: ".concat(e)),this.transactionManager.cmd(e,t)}}const wd=(e,t,n)=>{let r="object"==typeof e?e:{};return 0===Object.keys(r).length&&(r={vad:e,pinnedSourceId:t,excludedSourceIds:n}),r},bd=(e,t,n)=>{let r="object"==typeof e?e:{};return 0===Object.keys(r).length&&(r={codec:null!=e?e:vd.H264,record:t,sourceId:n}),r};function kd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kd(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Ed=Ir.get("PeerConnection"),Td={track:"track",connectionStateChange:"connectionStateChange"},Cd={stereo:!1,mediaStream:null,codec:"h264",simulcast:!1,scalabilityMode:null,disableAudio:!1,disableVideo:!1,setSDPToPeer:!0};class jd extends Es{constructor(){super(),this.sessionDescription=null,this.peer=null,this.peerConnectionStats=null}async createRTCPeer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Ed.info("Creating new RTCPeerConnection"),Ed.debug("RTC configuration provided by user: ",e),this.peer=Id(this,e)}getRTCPeer(){return Ed.info("Getting RTC Peer"),this.peer}async closeRTCPeer(){var e;Ed.info("Closing RTCPeerConnection"),null===(e=this.peer)||void 0===e||e.close(),this.peer=null,this.stopStats(),this.emit(Td.connectionStateChange,"closed")}async setRTCRemoteSDP(e){Ed.info("Setting RTC Remote SDP");const t={type:"answer",sdp:e};try{await this.peer.setRemoteDescription(t),Ed.info("RTC Remote SDP was set successfully."),Ed.debug("RTC Remote SDP new value: ",e)}catch(e){throw Ed.error("Error while setting RTC Remote SDP: ",e),e}}async getRTCLocalSDP(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cd;Ed.info("Getting RTC Local SDP"),e=Sd(Sd({},Cd),e),Ed.debug("Options: ",e);const t=Pd(e.mediaStream);t?Rd(this.peer,t,e):Ad(this.peer,e),Ed.info("Creating peer offer");const n=await this.peer.createOffer();return Ed.info("Peer offer created"),Ed.debug("Peer offer response: ",n.sdp),this.sessionDescription=n,e.disableAudio||(e.stereo&&(this.sessionDescription.sdp=ud.setStereo(this.sessionDescription.sdp)),e.dtx&&(this.sessionDescription.sdp=ud.setDTX(this.sessionDescription.sdp)),this.sessionDescription.sdp=ud.setMultiopus(this.sessionDescription.sdp,t)),!e.disableVideo&&e.simulcast&&(this.sessionDescription.sdp=ud.setSimulcast(this.sessionDescription.sdp,e.codec)),e.absCaptureTime&&(this.sessionDescription.sdp=ud.setAbsoluteCaptureTime(this.sessionDescription.sdp)),e.dependencyDescriptor&&(this.sessionDescription.sdp=ud.setDependencyDescriptor(this.sessionDescription.sdp)),e.setSDPToPeer&&(await this.peer.setLocalDescription(this.sessionDescription),Ed.info("Peer local description set")),this.sessionDescription.sdp}async addRemoteTrack(e,t){const n=await new Promise(((n,r)=>{try{const r=this.peer.addTransceiver(e,{direction:"recvonly"});r.resolve=n,r.streams=t}catch(e){r(e)}}));for(const e of t)e.addTrack(n.receiver.track);return n}updateBandwidthRestriction(e,t){return Ed.info("Updating bandwidth restriction, bitrate value: ",t),Ed.debug("SDP value: ",e),ud.setVideoBitrate(e,t)}async updateBitrate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.peer)throw Ed.error("Cannot update bitrate. No peer found."),new Error("Cannot update bitrate. No peer found.");Ed.info("Updating bitrate to value: ",e),this.sessionDescription=await this.peer.createOffer(),await this.peer.setLocalDescription(this.sessionDescription);const t=this.updateBandwidthRestriction(this.peer.remoteDescription.sdp,e);await this.setRTCRemoteSDP(t),Ed.info("Bitrate restirctions updated: ","".concat(e>0?e:"unlimited"," kbps"))}getRTCPeerStatus(){if(Ed.info("Getting RTC peer status"),!this.peer)return null;const e=Dd(this.peer);return Ed.info("RTC peer status getted, value: ",e),e}replaceTrack(e){if(!this.peer)return void Ed.error("Could not change track if there is not an active connection.");const t=this.peer.getSenders().find((t=>t.track.kind===e.kind));t?t.replaceTrack(e):Ed.error("There is no ".concat(e.kind," track in active broadcast."))}static getCapabilities(e){const t=new rd;if(t.isFirefox())return(e=>"video"===e?{codecs:[{codec:"vp8",mimeType:"video/VP8"},{codec:"vp9",mimeType:"video/VP9"},{codec:"h264",mimeType:"video/H264"}],headerExtensions:[]}:"audio"===e?{codecs:[{codec:"opus",mimeType:"audio/opus",channels:2}],headerExtensions:[]}:null)(e);const n=RTCRtpSender.getCapabilities(e);if(n){const r={};let i=new RegExp("^video/(".concat(Object.values(vd).join("|"),")x?$"),"i");"audio"===e&&(i=new RegExp("^audio/(".concat(Object.values(yd).join("|"),")$"),"i"),t.isChrome()&&(r.multiopus={mimeType:"audio/multiopus",channels:6}));for(const e of n.codecs){const t=e.mimeType.match(i);if(t){const n=t[1].toLowerCase();if(r[n]=Sd(Sd({},r[n]),{},{mimeType:e.mimeType}),e.scalabilityModes){let t=r[n].scalabilityModes||[];t=[...t,...e.scalabilityModes],r[n].scalabilityModes=[...new Set(t)]}e.channels&&(r[n].channels=e.channels)}}n.codecs=Object.keys(r).map((e=>Sd({codec:e},r[e])))}return n}getTracks(){var e,t;return null===(e=this.peer)||void 0===e||null===(t=e.getSenders())||void 0===t?void 0:t.map((e=>e.track))}initStats(){this.peerConnectionStats?Ed.warn("Cannot init peer stats: Already initialized"):this.peer?(this.peerConnectionStats=new Bs(this.peer),this.peerConnectionStats.init(),Os(this.peerConnectionStats,this,[Vs])):Ed.warn("Cannot init peer stats: RTCPeerConnection not initialized")}stopStats(){var e;null===(e=this.peerConnectionStats)||void 0===e||e.stop(),this.peerConnectionStats=null}}const xd=e=>(null==e?void 0:e.getAudioTracks().length)<=1&&(null==e?void 0:e.getVideoTracks().length)<=1,Pd=e=>{if(!e)return null;if(e instanceof MediaStream&&xd(e))return e;if(!(e instanceof MediaStream)){Ed.info("Creating MediaStream to add received tracks.");const t=new MediaStream;for(const n of e)t.addTrack(n);if(xd(t))return t}throw Ed.error("MediaStream must have 1 audio track and 1 video track, or at least one of them."),new Error("MediaStream must have 1 audio track and 1 video track, or at least one of them.")},Id=(e,t)=>{const n=new RTCPeerConnection(t);return Md(e,n),n},Md=(e,t)=>{t.ontrack=t=>{var n;if(Ed.info("New track from peer."),Ed.debug("Track event value: ",t),null!=t&&null!==(n=t.transceiver)&&void 0!==n&&n.resolve){const e=t.transceiver.resolve;delete t.transceiver.resolve,e(t.transceiver)}e.emit(Td.track,t)},t.connectionState?t.onconnectionstatechange=n=>{Ed.info("Peer connection state change: ",t.connectionState),e.emit(Td.connectionStateChange,t.connectionState)}:t.oniceconnectionstatechange=n=>{Ed.info("Peer ICE connection state change: ",t.iceConnectionState),e.emit(Td.connectionStateChange,t.iceConnectionState)},t.onnegotiationneeded=async e=>{if(!t.remoteDescription)return;Ed.info("Peer onnegotiationneeded, updating local description");const n=await t.createOffer();Ed.info("Peer onnegotiationneeded, got local offer",n.sdp),n.sdp=ud.updateMissingVideoExtensions(n.sdp,t.remoteDescription.sdp),await t.setLocalDescription(n);const r=ud.renegotiate(n.sdp,t.remoteDescription.sdp);Ed.info("Peer onnegotiationneeded, updating remote description",r),await t.setRemoteDescription({type:"answer",sdp:r}),Ed.info("Peer onnegotiationneeded, renegotiation done")}},Rd=(e,t,n)=>{Ed.info("Adding mediaStream tracks to RTCPeerConnection");for(const r of t.getTracks()){const i={streams:[t]};"audio"===r.kind&&(i.direction=n.disableAudio?"inactive":"sendonly"),"video"===r.kind&&(i.direction=n.disableVideo?"inactive":"sendonly",n.scalabilityMode&&(new rd).isChrome()?(Ed.debug("Video track with scalability mode: ".concat(n.scalabilityMode,".")),i.sendEncodings=[{scalabilityMode:n.scalabilityMode}]):n.scalabilityMode&&Ed.warn("SVC is only supported in Google Chrome")),e.addTransceiver(r,i),Ed.info("Track '".concat(r.label,"' added: "),"id: ".concat(r.id),"kind: ".concat(r.kind))}},Ad=(e,t)=>{const n=new rd;if(!t.disableVideo){const t=e.addTransceiver("video",{direction:"recvonly"});n.isOpera()&&t.setCodecPreferences(RTCRtpReceiver.getCapabilities("video").codecs.filter((e=>"video/H264"!==e.mimeType||e.sdpFmtpLine.includes("profile-level-id=4"))))}t.disableAudio||e.addTransceiver("audio",{direction:"recvonly"});for(let n=0;n<t.multiplexedAudioTracks;n++)e.addTransceiver("audio",{direction:"recvonly"})},Dd=e=>{var t;const n=null!==(t=e.connectionState)&&void 0!==t?t:e.iceConnectionState;switch(n){case"checking":return"connecting";case"completed":return"connected";default:return n}};function Od(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Od(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Od(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Fd=Ir.get("Director");let Ld="",zd="https://director.millicast.com";class Ud{static setEndpoint(e){zd=e.replace(/\/$/,"")}static getEndpoint(){return zd}static setLiveDomain(e){Ld=e.replace(/\/$/,"")}static getLiveDomain(){return Ld}static async getPublisher(e){const t=Vd(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"WebRtc");Fd.info("Getting publisher connection path for stream name: ",t.streamName);const n={streamName:t.streamName,streamType:t.streamType},r={"Content-Type":"application/json",Authorization:"Bearer ".concat(t.token)},i="".concat(this.getEndpoint(),"/api/director/publish");try{let e=await fetch(i,{method:"POST",headers:r,body:JSON.stringify(n)});if(e=await e.json(),"fail"===e.status)throw new Error(e.data.message);return e=Wd(e),Fd.debug("Getting publisher response: ",e),e.data}catch(e){throw Fd.error("Error while getting publisher connection path. ",e),e}}static async getSubscriber(e){const t=Bd(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);Fd.info("Getting subscriber connection data for stream name: ".concat(t.streamName," and account id: ").concat(t.streamAccountId));const n={streamAccountId:t.streamAccountId,streamName:t.streamName};let r={"Content-Type":"application/json"};t.subscriberToken&&(r=Nd(Nd({},r),{},{Authorization:"Bearer ".concat(t.subscriberToken)}));const i="".concat(this.getEndpoint(),"/api/director/subscribe");try{let e=await fetch(i,{method:"POST",headers:r,body:JSON.stringify(n)});if(e=await e.json(),"fail"===e.status)throw new Error(e.data.message);return e=Wd(e),Fd.debug("Getting subscriber response: ",e),e.data}catch(e){throw Fd.error("Error while getting subscriber connection path. ",e),e}}}const Vd=(e,t,n)=>{let r="object"==typeof e?e:{};return 0===Object.keys(r).length&&(r={token:e,streamName:t,streamType:n}),r},Bd=(e,t,n)=>{let r="object"==typeof e?e:{};return 0===Object.keys(r).length&&(r={streamName:e,streamAccountId:t,subscriberToken:n}),r},Wd=e=>{if(Ud.getLiveDomain()){const t=/\/\/(.*?)\//,n=e.data.urls.map((e=>{const n=t.exec(e);return e.replace(n[1],Ud.getLiveDomain())}));e.data.urls=n}return e};function Gd(e){this.message=e}Gd.prototype=new Error,Gd.prototype.name="InvalidCharacterError";var Hd="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new Gd("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,i=0,o=0,a="";r=t.charAt(o++);~r&&(n=i%4?64*n+r:r,i++%4)?a+=String.fromCharCode(255&n>>(-2*i&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return a};function Yd(e){this.message=e}Yd.prototype=new Error,Yd.prototype.name="InvalidTokenError";var $d=o((function(e,t){!function(n){if(null!=t&&"number"!=typeof t.nodeType)e.exports=n();else{var r=n(),i="undefined"!=typeof self?self:$.global;"function"!=typeof i.btoa&&(i.btoa=r.btoa),"function"!=typeof i.atob&&(i.atob=r.atob)}}((function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function t(e){this.message=e}return t.prototype=new Error,t.prototype.name="InvalidCharacterError",{btoa:function(n){for(var r,i,o=String(n),a=0,s=e,c="";o.charAt(0|a)||(s="=",a%1);c+=s.charAt(63&r>>8-a%1*8)){if((i=o.charCodeAt(a+=3/4))>255)throw new t("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");r=r<<8|i}return c},atob:function(n){var r=String(n).replace(/[=]+$/,"");if(r.length%4==1)throw new t("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,o,a=0,s=0,c="";o=r.charAt(s++);~o&&(i=a%4?64*i+o:o,a++%4)?c+=String.fromCharCode(255&i>>(-2*a&6)):0)o=e.indexOf(o);return c}}}))}));let Zd;class qd extends Es{constructor(e,t,n,r){if(super(),Zd=n,!e)throw Zd.error("Stream Name is required to construct this module."),new Error("Stream Name is required to construct this module.");if(!t)throw Zd.error("Token generator is required to construct this module."),new Error("Token generator is required to construct this module.");this.webRTCPeer=new jd,this.signaling=null,this.streamName=e,this.autoReconnect=r,this.reconnectionInterval=1e3,this.alreadyDisconnected=!1,this.firstReconnection=!0,this.stopReconnection=!1,this.tokenGenerator=t,this.options=null}getRTCPeerConnection(){return this.webRTCPeer?this.webRTCPeer.getRTCPeer():null}stop(){var e;Zd.info("Stopping"),this.webRTCPeer.closeRTCPeer(),null===(e=this.signaling)||void 0===e||e.close(),this.signaling=null,this.stopReconnection=!0,this.webRTCPeer=new jd}isActive(){const e=this.webRTCPeer.getRTCPeerStatus();return Zd.info("Broadcast status: ",e||"not_established"),"connected"===e}setReconnect(){this.signaling.on("migrate",(()=>this.replaceConnection())),this.autoReconnect&&(this.signaling.on(md,(()=>{!this.firstReconnection&&this.alreadyDisconnected||(this.firstReconnection=!1,this.reconnect())})),this.webRTCPeer.on(Td.connectionStateChange,(e=>{("failed"===e||"disconnected"===e&&this.alreadyDisconnected)&&this.firstReconnection?(this.firstReconnection=!1,this.reconnect()):"disconnected"===e?(this.alreadyDisconnected=!0,setTimeout((()=>this.reconnect()),1500)):this.alreadyDisconnected=!1})))}async reconnect(){try{this.isActive()||this.stopReconnection||(this.stop(),await this.connect(this.options),this.alreadyDisconnected=!1,this.reconnectionInterval=1e3,this.firstReconnection=!0)}catch(e){this.reconnectionInterval=Xd(this.reconnectionInterval),Zd.error("Reconnection failed, retrying in ".concat(this.reconnectionInterval,"ms. "),e),this.emit("reconnect",{timeout:this.reconnectionInterval,error:e}),setTimeout((()=>this.reconnect()),this.reconnectionInterval)}}}const Xd=e=>e<32e3?2*e:e;function Kd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kd(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Qd=Ir.get("Publish"),el={mediaStream:null,bandwidth:0,disableVideo:!1,disableAudio:!1,codec:vd.H264,simulcast:!1,scalabilityMode:null,peerConfig:{}};function tl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tl(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const rl=Ir.get("View"),il={disableVideo:!1,disableAudio:!1,peerConfig:{}};e.Director=Ud,e.Logger=Ir,e.PeerConnection=jd,e.Publish=class extends qd{constructor(e,t){super(e,t,Qd,!(arguments.length>2&&void 0!==arguments[2])||arguments[2])}async connect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:el;this.options=Jd(Jd(Jd({},el),e),{},{setSDPToPeer:!1}),await this.initConnection({migrate:!1})}async reconnect(){var e,t;this.options.mediaStream=null!==(e=null===(t=this.webRTCPeer)||void 0===t?void 0:t.getTracks())&&void 0!==e?e:this.options.mediaStream,super.reconnect()}async replaceConnection(){var e,t;Qd.info("Migrating current connection"),this.options.mediaStream=null!==(e=null===(t=this.webRTCPeer)||void 0===t?void 0:t.getTracks())&&void 0!==e?e:this.options.mediaStream,await this.initConnection({migrate:!0})}async record(){var e;this.recordingAvailable?(this.options.record=!0,await(null===(e=this.signaling)||void 0===e?void 0:e.cmd("record")),Qd.info("Broadcaster start recording")):Qd.error("Record not available")}async unrecord(){var e;this.recordingAvailable?(this.options.record=!1,await(null===(e=this.signaling)||void 0===e?void 0:e.cmd("unrecord")),Qd.info("Broadcaster stop recording")):Qd.error("Unrecord not available")}async initConnection(e){var t,n;let r,i;if(Qd.debug("Broadcast option values: ",this.options),this.stopReconnection=!1,!this.options.mediaStream)throw Qd.error("Error while broadcasting. MediaStream required"),new Error("MediaStream required");if(!e.migrate&&this.isActive())throw Qd.warn("Broadcast currently working"),new Error("Broadcast currently working");try{var o;i=await this.tokenGenerator(),this.options.peerConfig.iceServers=null===(o=i)||void 0===o?void 0:o.iceServers}catch(e){throw Qd.error("Error generating token."),e}if(!i)throw Qd.error("Error while broadcasting. Publisher data required"),new Error("Publisher data required");if(this.recordingAvailable=function(e,t){if("string"!=typeof e)throw new Yd("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(Hd(e).replace(/(.)/g,(function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(e){return Hd(t)}}(e.split(".")[n]))}catch(e){throw new Yd("Invalid token specified: "+e.message)}}(i.jwt)[$d.atob("bWlsbGljYXN0")].record,this.options.record&&!this.recordingAvailable)throw Qd.error("Error while broadcasting. Record option detected but recording is not available"),new Error("Record option detected but recording is not available");const a=new _d({streamName:this.streamName,url:"".concat(i.urls[0],"?token=").concat(i.jwt)}),s=e.migrate?new jd:this.webRTCPeer;await s.createRTCPeer(this.options.peerConfig),null===(t=this.stopReemitingWebRTCPeerInstanceEvents)||void 0===t||t.call(this),null===(n=this.stopReemitingSignalingInstanceEvents)||void 0===n||n.call(this),this.stopReemitingWebRTCPeerInstanceEvents=Os(s,this,[Td.connectionStateChange]),this.stopReemitingSignalingInstanceEvents=Os(a,this,[gd]);const c=s.getRTCLocalSDP(this.options),u=a.connect();r=await Promise.all([c,u]);const d=r[0];let l=this.signaling;this.signaling=a;const h=this.signaling.publish(d,this.options),p=s.peer.setLocalDescription(s.sessionDescription);r=await Promise.all([h,p]);let f=r[0];!this.options.disableVideo&&this.options.bandwidth>0&&(f=s.updateBandwidthRestriction(f,this.options.bandwidth)),await s.setRTCRemoteSDP(f),Qd.info("Broadcasting to streamName: ",this.streamName);let m=this.webRTCPeer;this.webRTCPeer=s,this.setReconnect(),e.migrate&&this.webRTCPeer.on(Td.connectionStateChange,(e=>{var t,n,r,i;["connected","disconnected","failed","closed"].includes(e)&&(null===(t=l)||void 0===t||null===(n=t.close)||void 0===n||n.call(t),null===(r=m)||void 0===r||null===(i=r.closeRTCPeer)||void 0===i||i.call(r),l=m=null)}))}},e.Signaling=_d,e.View=class extends qd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(e,t,rl,!(arguments.length>3&&void 0!==arguments[3])||arguments[3]),n&&this.on(Td.track,(e=>{n.srcObject=e.streams[0]}))}async connect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:il;this.options=nl(nl(nl({},il),e),{},{setSDPToPeer:!1}),await this.initConnection({migrate:!1})}async select(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};rl.debug("Viewer select layer values: ",e),await this.signaling.cmd("select",{layer:e}),rl.info("Connected to streamName: ",this.streamName)}async addRemoteTrack(e,t){return rl.info("Viewer adding remote % track",e),this.webRTCPeer.addRemoteTrack(e,t)}async project(e,t){for(const e of t){if(!e.trackId&&!e.media)throw rl.error("Error in projection mapping, trackId or mediaId must be set"),new Error("Error in projection mapping, trackId or mediaId must be set");const t=this.webRTCPeer.getRTCPeer();if(e.mediaId&&!t.getTransceivers().find((t=>t.mid===e.mediaId.toString())))throw rl.error("Error in projection mapping, ".concat(e.mediaId," mid not found in local transceivers")),new Error("Error in projection mapping, ".concat(e.mediaId," mid not found in local transceivers"))}rl.debug("Viewer project source: layer mappings: ",e,t),await this.signaling.cmd("project",{sourceId:e,mapping:t}),rl.info("Projection done")}async unproject(e){rl.debug("Viewer unproject mediaIds: ",e),await this.signaling.cmd("unproject",{mediaIds:e}),rl.info("Unprojection done")}async replaceConnection(){rl.info("Migrating current connection"),await this.initConnection({migrate:!0})}async initConnection(e){var t,n;let r,i;if(rl.debug("Viewer connect options values: ",this.options),this.stopReconnection=!1,!e.migrate&&this.isActive())throw rl.warn("Viewer currently subscribed"),new Error("Viewer currently subscribed");try{var o;i=await this.tokenGenerator(),this.options.peerConfig.iceServers=null===(o=i)||void 0===o?void 0:o.iceServers}catch(e){throw rl.error("Error generating token."),e}if(!i)throw rl.error("Error while subscribing. Subscriber data required"),new Error("Subscriber data required");const a=new _d({streamName:this.streamName,url:"".concat(i.urls[0],"?token=").concat(i.jwt)}),s=e.migrate?new jd:this.webRTCPeer;await s.createRTCPeer(this.options.peerConfig),null===(t=this.stopReemitingWebRTCPeerInstanceEvents)||void 0===t||t.call(this),null===(n=this.stopReemitingSignalingInstanceEvents)||void 0===n||n.call(this),this.stopReemitingWebRTCPeerInstanceEvents=Os(s,this,Object.values(Td)),this.stopReemitingSignalingInstanceEvents=Os(a,this,[gd]);const c=s.getRTCLocalSDP(nl(nl({},this.options),{},{stereo:!0})),u=a.connect();r=await Promise.all([c,u]);const d=r[0];let l=this.signaling;this.signaling=a;const h=this.signaling.subscribe(d,nl(nl({},this.options),{},{vad:this.options.multiplexedAudioTracks>0})),p=s.peer.setLocalDescription(s.sessionDescription);r=await Promise.all([h,p]);const f=r[0];await s.setRTCRemoteSDP(f),rl.info("Connected to streamName: ",this.streamName);let m=this.webRTCPeer;this.webRTCPeer=s,this.setReconnect(),e.migrate&&this.webRTCPeer.on(Td.connectionStateChange,(e=>{if("connected"===e)setTimeout((()=>{var e,t,n,r;null===(e=l)||void 0===e||null===(t=e.close)||void 0===t||t.call(e),null===(n=m)||void 0===n||null===(r=n.closeRTCPeer)||void 0===r||r.call(n),l=m=null,rl.info("Current connection migrated")}),1e3);else if(["disconnected","failed","closed"].includes(e)){var t,n,r,i;null===(t=l)||void 0===t||null===(n=t.close)||void 0===n||n.call(t),null===(r=m)||void 0===r||null===(i=r.closeRTCPeer)||void 0===i||i.call(r),l=m=null}}))}},Object.defineProperty(e,"__esModule",{value:!0})}(t)},9644:function(e,t,n){e.exports=n(5644)},353:function(e,t,n){"use strict";var r=n(3044),i=n(6955),o=n(2233),a=n(8030),s=n(7948),c=n(1875),u=n(842),d=n(8560),l=n(1218),h=n(8047),p=n(738),f=n(7721);e.exports=function(e){return new Promise((function(t,n){var m,g=e.data,v=e.headers,y=e.responseType,_=e.withXSRFToken;function w(){e.cancelToken&&e.cancelToken.unsubscribe(m),e.signal&&e.signal.removeEventListener("abort",m)}r.isFormData(g)&&r.isStandardBrowserEnv()&&delete v["Content-Type"];var b=new XMLHttpRequest;if(e.auth){var k=e.auth.username||"",S=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";v.Authorization="Basic "+btoa(k+":"+S)}var E=s(e.baseURL,e.url);function T(){if(b){var r="getAllResponseHeaders"in b?c(b.getAllResponseHeaders()):null,o={data:y&&"text"!==y&&"json"!==y?b.response:b.responseText,status:b.status,statusText:b.statusText,headers:r,config:e,request:b};i((function(e){t(e),w()}),(function(e){n(e),w()}),o),b=null}}if(b.open(e.method.toUpperCase(),a(E,e.params,e.paramsSerializer),!0),b.timeout=e.timeout,"onloadend"in b?b.onloadend=T:b.onreadystatechange=function(){b&&4===b.readyState&&(0!==b.status||b.responseURL&&0===b.responseURL.indexOf("file:"))&&setTimeout(T)},b.onabort=function(){b&&(n(new l("Request aborted",l.ECONNABORTED,e,b)),b=null)},b.onerror=function(){n(new l("Network Error",l.ERR_NETWORK,e,b)),b=null},b.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||d;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new l(t,r.clarifyTimeoutError?l.ETIMEDOUT:l.ECONNABORTED,e,b)),b=null},r.isStandardBrowserEnv()&&(_&&r.isFunction(_)&&(_=_(e)),_||!1!==_&&u(E))){var C=e.xsrfHeaderName&&e.xsrfCookieName&&o.read(e.xsrfCookieName);C&&(v[e.xsrfHeaderName]=C)}"setRequestHeader"in b&&r.forEach(v,(function(e,t){void 0===g&&"content-type"===t.toLowerCase()?delete v[t]:b.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(b.withCredentials=!!e.withCredentials),y&&"json"!==y&&(b.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&b.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&b.upload&&b.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(m=function(t){b&&(n(!t||t.type?new h(null,e,req):t),b.abort(),b=null)},e.cancelToken&&e.cancelToken.subscribe(m),e.signal&&(e.signal.aborted?m():e.signal.addEventListener("abort",m))),g||!1===g||0===g||""===g||(g=null);var j=p(E);j&&-1===f.protocols.indexOf(j)?n(new l("Unsupported protocol "+j+":",l.ERR_BAD_REQUEST,e)):b.send(g)}))}},5644:function(e,t,n){"use strict";var r=n(3044),i=n(3644),o=n(2215),a=n(2937),s=n(663),c=n(9468),u=function e(t){var n=new o(t),s=i(o.prototype.request,n);return r.extend(s,o.prototype,n),r.extend(s,n),s.create=function(n){return e(a(t,n))},s}(s);u.Axios=o,u.CanceledError=n(8047),u.CancelToken=n(4089),u.isCancel=n(8041),u.VERSION=n(9241).version,u.toFormData=n(9027),u.AxiosError=n(1218),u.Cancel=u.CanceledError,u.all=function(e){return Promise.all(e)},u.spread=n(783),u.isAxiosError=n(5587),u.formToJSON=function(e){return c(r.isHTMLForm(e)?new FormData(e):e)},e.exports=u,e.exports.default=u},4089:function(e,t,n){"use strict";var r=n(8047);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){for(var t=n._listeners.length;t-- >0;)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,i,o){n.reason||(n.reason=new r(e,i,o),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},i.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},8047:function(e,t,n){"use strict";var r=n(1218);function i(e,t,n){r.call(this,null==e?"canceled":e,r.ERR_CANCELED,t,n),this.name="CanceledError"}n(3044).inherits(i,r,{__CANCEL__:!0}),e.exports=i},8041:function(e){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},2215:function(e,t,n){"use strict";var r=n(3044),i=n(8030),o=n(946),a=n(6895),s=n(2937),c=n(7948),u=n(7525),d=u.validators;function l(e){this.defaults=e,this.interceptors={request:new o,response:new o}}l.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=s(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&u.assertOptions(n,{silentJSONParsing:d.transitional(d.boolean),forcedJSONParsing:d.transitional(d.boolean),clarifyTimeoutError:d.transitional(d.boolean)},!1);var i=t.paramsSerializer;r.isFunction(i)&&(t.paramsSerializer={serialize:i});var o=[],c=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(c=c&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));var l,h=[];if(this.interceptors.response.forEach((function(e){h.push(e.fulfilled,e.rejected)})),!c){var p=[a,void 0];for(Array.prototype.unshift.apply(p,o),p=p.concat(h),l=Promise.resolve(t);p.length;)l=l.then(p.shift(),p.shift());return l}for(var f=t;o.length;){var m=o.shift(),g=o.shift();try{f=m(f)}catch(e){g(e);break}}try{l=a(f)}catch(e){return Promise.reject(e)}for(;h.length;)l=l.then(h.shift(),h.shift());return l},l.prototype.getUri=function(e){e=s(this.defaults,e);var t=c(e.baseURL,e.url);return i(t,e.params,e.paramsSerializer)},r.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(s(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}l.prototype[e]=t(),l.prototype[e+"Form"]=t(!0)})),e.exports=l},1218:function(e,t,n){"use strict";var r=n(3044);function i(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}r.inherits(i,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var o=i.prototype,a={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){a[e]={value:e}})),Object.defineProperties(i,a),Object.defineProperty(o,"isAxiosError",{value:!0}),i.from=function(e,t,n,a,s,c){var u=Object.create(o);return r.toFlatObject(e,u,(function(e){return e!==Error.prototype})),i.call(u,e.message,t,n,a,s),u.cause=e,u.name=e.name,c&&Object.assign(u,c),u},e.exports=i},946:function(e,t,n){"use strict";var r=n(3044);function i(){this.handlers=[]}i.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.clear=function(){this.handlers&&(this.handlers=[])},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},7948:function(e,t,n){"use strict";var r=n(9192),i=n(8762);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},6895:function(e,t,n){"use strict";var r=n(3044),i=n(8556),o=n(8041),a=n(663),s=n(8047),c=n(8868);function u(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new s}e.exports=function(e){return u(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,null,e.transformRequest),c(e.headers,"Accept"),c(e.headers,"Content-Type"),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return u(e),t.data=i.call(e,t.data,t.headers,t.status,e.transformResponse),t}),(function(t){return o(t)||(u(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,t.response.status,e.transformResponse))),Promise.reject(t)}))}},2937:function(e,t,n){"use strict";var r=n(3044);e.exports=function(e,t){t=t||{};var n={};function i(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isEmptyObject(t)?r.merge({},e):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function o(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(e[n],t[n])}function a(e){if(!r.isUndefined(t[e]))return i(void 0,t[e])}function s(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(void 0,t[n])}function c(n){return n in t?i(e[n],t[n]):n in e?i(void 0,e[n]):void 0}var u={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:c};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=u[e]||o,i=t(e);r.isUndefined(i)&&t!==c||(n[e]=i)})),n}},6955:function(e,t,n){"use strict";var r=n(1218);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(new r("Request failed with status code "+n.status,[r.ERR_BAD_REQUEST,r.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}},8556:function(e,t,n){"use strict";var r=n(3044),i=n(663);e.exports=function(e,t,n,o){var a=this||i;return r.forEach(o,(function(r){e=r.call(a,e,t,n)})),e}},663:function(e,t,n){"use strict";var r=n(3044),i=n(8868),o=n(1218),a=n(8560),s=n(9027),c=n(1746),u=n(7721),d=n(9468),l={"Content-Type":"application/x-www-form-urlencoded"};function h(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var p,f={transitional:a,adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(p=n(353)),p),transformRequest:[function(e,t){i(t,"Accept"),i(t,"Content-Type");var n,o=t&&t["Content-Type"]||"",a=o.indexOf("application/json")>-1,u=r.isObject(e);if(u&&r.isHTMLForm(e)&&(e=new FormData(e)),r.isFormData(e))return a?JSON.stringify(d(e)):e;if(r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e))return e;if(r.isArrayBufferView(e))return e.buffer;if(r.isURLSearchParams(e))return h(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();if(u){if(-1!==o.indexOf("application/x-www-form-urlencoded"))return c(e,this.formSerializer).toString();if((n=r.isFileList(e))||o.indexOf("multipart/form-data")>-1){var l=this.env&&this.env.FormData;return s(n?{"files[]":e}:e,l&&new l,this.formSerializer)}}return u||a?(h(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(0,JSON.parse)(e),r.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||f.transitional,n=t&&t.forcedJSONParsing,i="json"===this.responseType;if(e&&r.isString(e)&&(n&&!this.responseType||i)){var a=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(e){if(a){if("SyntaxError"===e.name)throw o.from(e,o.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:u.classes.FormData,Blob:u.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){f.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){f.headers[e]=r.merge(l)})),e.exports=f},8560:function(e){"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},5694:function(e,t,n){e.exports=n(1688)},9241:function(e){e.exports={version:"0.28.0"}},3831:function(e,t,n){"use strict";var r=n(9027);function i(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'\(\)~]|%20|%00/g,(function(e){return t[e]}))}function o(e,t){this._pairs=[],e&&r(e,this,t)}var a=o.prototype;a.append=function(e,t){this._pairs.push([e,t])},a.toString=function(e){var t=e?function(t){return e.call(this,t,i)}:i;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")},e.exports=o},3644:function(e){"use strict";e.exports=function(e,t){return function(){return e.apply(t,arguments)}}},8030:function(e,t,n){"use strict";var r=n(3044),i=n(3831);function o(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a));var s=n&&n.encode||o,c=r.isURLSearchParams(t)?t.toString():new i(t,n).toString(s);return c&&(e+=(-1===e.indexOf("?")?"?":"&")+c),e}},8762:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},2233:function(e,t,n){"use strict";var r=n(3044);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},9468:function(e,t,n){"use strict";var r=n(3044);e.exports=function(e){function t(e,n,i,o){var a=e[o++],s=Number.isFinite(+a),c=o>=e.length;return a=!a&&r.isArray(i)?i.length:a,c?(r.hasOwnProperty(i,a)?i[a]=[i[a],n]:i[a]=n,!s):(i[a]&&r.isObject(i[a])||(i[a]=[]),t(e,n,i[a],o)&&r.isArray(i[a])&&(i[a]=function(e){var t,n,r={},i=Object.keys(e),o=i.length;for(t=0;t<o;t++)r[n=i[t]]=e[n];return r}(i[a])),!s)}if(r.isFormData(e)&&r.isFunction(e.entries)){var n={};return r.forEachEntry(e,(function(e,i){t(function(e){return r.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),i,n,0)})),n}return null}},9192:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},5587:function(e,t,n){"use strict";var r=n(3044);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},842:function(e,t,n){"use strict";var r=n(3044);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},8868:function(e,t,n){"use strict";var r=n(3044);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},1875:function(e,t,n){"use strict";var r=n(3044),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,a={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.slice(0,o)).toLowerCase(),n=r.trim(e.slice(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}})),a):a}},738:function(e){"use strict";e.exports=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}},783:function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},9027:function(e,t,n){"use strict";var r=n(3044),i=n(1218),o=n(5694);function a(e){return r.isPlainObject(e)||r.isArray(e)}function s(e){return r.endsWith(e,"[]")?e.slice(0,-2):e}function c(e,t,n){return e?e.concat(t).map((function(e,t){return e=s(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}var u=r.toFlatObject(r,{},null,(function(e){return/^is[A-Z]/.test(e)}));e.exports=function(e,t,n){if(!r.isObject(e))throw new TypeError("target must be an object");t=t||new(o||FormData);var d,l=(n=r.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!r.isUndefined(t[e])}))).metaTokens,h=n.visitor||v,p=n.dots,f=n.indexes,m=(n.Blob||"undefined"!=typeof Blob&&Blob)&&(d=t)&&r.isFunction(d.append)&&"FormData"===d[Symbol.toStringTag]&&d[Symbol.iterator];if(!r.isFunction(h))throw new TypeError("visitor must be a function");function g(e){if(null===e)return"";if(r.isDate(e))return e.toISOString();if(!m&&r.isBlob(e))throw new i("Blob is not supported. Use a Buffer instead.");return r.isArrayBuffer(e)||r.isTypedArray(e)?m&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function v(e,n,i){var o=e;if(e&&!i&&"object"==typeof e)if(r.endsWith(n,"{}"))n=l?n:n.slice(0,-2),e=JSON.stringify(e);else if(r.isArray(e)&&function(e){return r.isArray(e)&&!e.some(a)}(e)||r.isFileList(e)||r.endsWith(n,"[]")&&(o=r.toArray(e)))return n=s(n),o.forEach((function(e,i){!r.isUndefined(e)&&t.append(!0===f?c([n],i,p):null===f?n:n+"[]",g(e))})),!1;return!!a(e)||(t.append(c(i,n,p),g(e)),!1)}var y=[],_=Object.assign(u,{defaultVisitor:v,convertValue:g,isVisitable:a});if(!r.isObject(e))throw new TypeError("data must be an object");return function e(n,i){if(!r.isUndefined(n)){if(-1!==y.indexOf(n))throw Error("Circular reference detected in "+i.join("."));y.push(n),r.forEach(n,(function(n,o){!0===(!r.isUndefined(n)&&h.call(t,n,r.isString(o)?o.trim():o,i,_))&&e(n,i?i.concat(o):[o])})),y.pop()}}(e),t}},1746:function(e,t,n){"use strict";var r=n(3044),i=n(9027),o=n(7721);e.exports=function(e,t){return i(e,new o.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,i){return o.isNode&&r.isBuffer(e)?(this.append(t,e.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}},7525:function(e,t,n){"use strict";var r=n(9241).version,i=n(1218),o={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){o[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var a={};o.transitional=function(e,t,n){function o(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,s){if(!1===e)throw new i(o(r," has been removed"+(t?" in "+t:"")),i.ERR_DEPRECATED);return t&&!a[r]&&(a[r]=!0,console.warn(o(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}},e.exports={assertOptions:function(e,t,n){if("object"!=typeof e)throw new i("options must be an object",i.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),o=r.length;o-- >0;){var a=r[o],s=t[a];if(s){var c=e[a],u=void 0===c||s(c,a,e);if(!0!==u)throw new i("option "+a+" must be "+u,i.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new i("Unknown option "+a,i.ERR_BAD_OPTION)}},validators:o}},319:function(e){"use strict";e.exports=FormData},1159:function(e,t,n){"use strict";var r=n(3831);e.exports="undefined"!=typeof URLSearchParams?URLSearchParams:r},1279:function(e,t,n){"use strict";e.exports={isBrowser:!0,classes:{URLSearchParams:n(1159),FormData:n(319),Blob:Blob},protocols:["http","https","file","blob","url","data"]}},7721:function(e,t,n){"use strict";e.exports=n(1279)},3044:function(e,t,n){"use strict";var r,i=n(3644),o=Object.prototype.toString,a=(r=Object.create(null),function(e){var t=o.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())});function s(e){return e=e.toLowerCase(),function(t){return a(t)===e}}function c(e){return Array.isArray(e)}function u(e){return void 0===e}var d=s("ArrayBuffer");function l(e){return"number"==typeof e}function h(e){return null!==e&&"object"==typeof e}function p(e){if("object"!==a(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var f=s("Date"),m=s("File"),g=s("Blob"),v=s("FileList");function y(e){return"[object Function]"===o.call(e)}var _=s("URLSearchParams");function w(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),c(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}var b,k,S=(b="undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return b&&e instanceof b}),E=s("HTMLFormElement"),T=(k=Object.prototype.hasOwnProperty,function(e,t){return k.call(e,t)});e.exports={isArray:c,isArrayBuffer:d,isBuffer:function(e){return null!==e&&!u(e)&&null!==e.constructor&&!u(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"==typeof FormData&&e instanceof FormData||o.call(e)===t||y(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&d(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:l,isObject:h,isPlainObject:p,isEmptyObject:function(e){return e&&0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype},isUndefined:u,isDate:f,isFile:m,isBlob:g,isFunction:y,isStream:function(e){return h(e)&&y(e.pipe)},isURLSearchParams:_,isStandardBrowserEnv:function(){var e;return("undefined"==typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:w,merge:function e(){var t={};function n(n,r){p(t[r])&&p(n)?t[r]=e(t[r],n):p(n)?t[r]=e({},n):c(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)w(arguments[r],n);return t},extend:function(e,t,n){return w(t,(function(t,r){e[r]=n&&"function"==typeof t?i(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n,r){var i,o,a,s={};if(t=t||{},null==e)return t;do{for(o=(i=Object.getOwnPropertyNames(e)).length;o-- >0;)a=i[o],r&&!r(a,e,t)||s[a]||(t[a]=e[a],s[a]=!0);e=!1!==n&&Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:a,kindOfTest:s,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;if(c(e))return e;var t=e.length;if(!l(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},isTypedArray:S,isFileList:v,forEachEntry:function(e,t){for(var n,r=(e&&e[Symbol.iterator]).call(e);(n=r.next())&&!n.done;){var i=n.value;t.call(e,i[0],i[1])}},matchAll:function(e,t){for(var n,r=[];null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:E,hasOwnProperty:T}},7160:function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=90)}({17:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(18),i=function(){function e(){}return e.getFirstMatch=function(e,t){var n=t.match(e);return n&&n.length>0&&n[1]||""},e.getSecondMatch=function(e,t){var n=t.match(e);return n&&n.length>1&&n[2]||""},e.matchAndReturnConst=function(e,t,n){if(e.test(t))return n},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,n,r){void 0===r&&(r=!1);var i=e.getVersionPrecision(t),o=e.getVersionPrecision(n),a=Math.max(i,o),s=0,c=e.map([t,n],(function(t){var n=a-e.getVersionPrecision(t),r=t+new Array(n+1).join(".0");return e.map(r.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(r&&(s=a-Math.min(i,o)),a-=1;a>=s;){if(c[0][a]>c[1][a])return 1;if(c[0][a]===c[1][a]){if(a===s)return 0;a-=1}else if(c[0][a]<c[1][a])return-1}},e.map=function(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)r.push(t(e[n]));return r},e.find=function(e,t){var n,r;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,r=e.length;n<r;n+=1){var i=e[n];if(t(i,n))return i}},e.assign=function(e){for(var t,n,r=e,i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];if(Object.assign)return Object.assign.apply(Object,[e].concat(o));var s=function(){var e=o[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){r[t]=e[t]}))};for(t=0,n=o.length;t<n;t+=1)s();return e},e.getBrowserAlias=function(e){return r.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return r.BROWSER_MAP[e]||""},e}();t.default=i,e.exports=t.default},18:function(e,t,n){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(91))&&r.__esModule?r:{default:r},o=n(18);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){}var t,n;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new i.default(e,t)},e.parse=function(e){return new i.default(e).getResult()},t=e,n=[{key:"BROWSER_MAP",get:function(){return o.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return o.ENGINE_MAP}},{key:"OS_MAP",get:function(){return o.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return o.PLATFORMS_MAP}}],null&&a(t.prototype,null),n&&a(t,n),e}();t.default=s,e.exports=t.default},91:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=c(n(92)),i=c(n(93)),o=c(n(94)),a=c(n(95)),s=c(n(17));function c(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=s.default.find(r.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=s.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=s.default.find(o.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=s.default.find(a.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return s.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,n={},r=0,i={},o=0;if(Object.keys(e).forEach((function(t){var a=e[t];"string"==typeof a?(i[t]=a,o+=1):"object"==typeof a&&(n[t]=a,r+=1)})),r>0){var a=Object.keys(n),c=s.default.find(a,(function(e){return t.isOS(e)}));if(c){var u=this.satisfies(n[c]);if(void 0!==u)return u}var d=s.default.find(a,(function(e){return t.isPlatform(e)}));if(d){var l=this.satisfies(n[d]);if(void 0!==l)return l}}if(o>0){var h=Object.keys(i),p=s.default.find(h,(function(e){return t.isBrowser(e,!0)}));if(void 0!==p)return this.compareVersion(i[p])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var n=this.getBrowserName().toLowerCase(),r=e.toLowerCase(),i=s.default.getBrowserTypeByAlias(r);return t&&i&&(r=i.toLowerCase()),r===n},t.compareVersion=function(e){var t=[0],n=e,r=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(r=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(r=!0,n=e.substr(1)),t.indexOf(s.default.compareVersions(i,n,r))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=u,e.exports=t.default},92:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=/version\/(\d+(\.?_?\d+)+)/i,a=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},n=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},n=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},n=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},n=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},n=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},n=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},n=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},n=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},n=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},n=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},n=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},n=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},n=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},n=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},n=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},n=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},n=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},n=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},n=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},n=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},n=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},n=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},n=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t={name:"Android Browser"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(t,e),version:i.default.getSecondMatch(t,e)}}}];t.default=a,e.exports=t.default},93:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:[/Roku\/DVP/],describe:function(e){var t=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:o.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=i.default.getWindowsVersionName(t);return{name:o.OS_MAP.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:o.OS_MAP.iOS},n=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe:function(e){var t=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=i.default.getMacOSVersionName(t),r={name:o.OS_MAP.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:o.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=i.default.getAndroidVersionName(t),r={name:o.OS_MAP.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:o.OS_MAP.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||i.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:o.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:o.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:o.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.PlayStation4,version:t}}}];t.default=a,e.exports=t.default},94:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=i.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:o.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe:function(e){var t=i.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:o.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}}];t.default=a,e.exports=t.default},95:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:o.ENGINE_MAP.Blink};var t=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:o.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:o.ENGINE_MAP.Trident},n=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:o.ENGINE_MAP.Presto},n=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe:function(e){var t={name:o.ENGINE_MAP.Gecko},n=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:o.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:o.ENGINE_MAP.WebKit},n=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];t.default=a,e.exports=t.default}})},5130:function(e,t,n){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(i=r))})),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(7123)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},7123:function(e,t,n){e.exports=function(e){function t(e){let n,i,o,a=null;function s(...e){if(!s.enabled)return;const r=s,i=Number(new Date),o=i-(n||i);r.diff=o,r.prev=n,r.curr=i,n=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,i)=>{if("%%"===n)return"%";a++;const o=t.formatters[i];if("function"==typeof o){const t=e[a];n=o.call(r,t),e.splice(a,1),a--}return n})),t.formatArgs.call(r,e),(r.log||t.log).apply(r,e)}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=r,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{a=e}}),"function"==typeof t.init&&t.init(s),s}function r(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(i),...t.skips.map(i).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(1378),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},1688:function(e){e.exports="object"==typeof self?self.FormData:window.FormData},3958:function(e,t,n){e=n.nmd(e);var r="__lodash_hash_undefined__",i=9007199254740991,o="[object Arguments]",a="[object Array]",s="[object Boolean]",c="[object Date]",u="[object Error]",d="[object Function]",l="[object Map]",h="[object Number]",p="[object Object]",f="[object Promise]",m="[object RegExp]",g="[object Set]",v="[object String]",y="[object WeakMap]",_="[object ArrayBuffer]",w="[object DataView]",b=/^\[object .+?Constructor\]$/,k=/^(?:0|[1-9]\d*)$/,S={};S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S[o]=S[a]=S[_]=S[s]=S[w]=S[c]=S[u]=S[d]=S[l]=S[h]=S[p]=S[m]=S[g]=S[v]=S[y]=!1;var E="object"==typeof global&&global&&global.Object===Object&&global,T="object"==typeof self&&self&&self.Object===Object&&self,C=E||T||Function("return this")(),j=t&&!t.nodeType&&t,x=j&&e&&!e.nodeType&&e,P=x&&x.exports===j,I=P&&E.process,M=function(){try{return I&&I.binding&&I.binding("util")}catch(e){}}(),R=M&&M.isTypedArray;function A(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function D(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function O(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var N,F,L,z=Array.prototype,U=Function.prototype,V=Object.prototype,B=C["__core-js_shared__"],W=U.toString,G=V.hasOwnProperty,H=(N=/[^.]+$/.exec(B&&B.keys&&B.keys.IE_PROTO||""))?"Symbol(src)_1."+N:"",Y=V.toString,$=RegExp("^"+W.call(G).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Z=P?C.Buffer:void 0,q=C.Symbol,X=C.Uint8Array,K=V.propertyIsEnumerable,J=z.splice,Q=q?q.toStringTag:void 0,ee=Object.getOwnPropertySymbols,te=Z?Z.isBuffer:void 0,ne=(F=Object.keys,L=Object,function(e){return F(L(e))}),re=xe(C,"DataView"),ie=xe(C,"Map"),oe=xe(C,"Promise"),ae=xe(C,"Set"),se=xe(C,"WeakMap"),ce=xe(Object,"create"),ue=Re(re),de=Re(ie),le=Re(oe),he=Re(ae),pe=Re(se),fe=q?q.prototype:void 0,me=fe?fe.valueOf:void 0;function ge(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ve(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ye(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function _e(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ye;++t<n;)this.add(e[t])}function we(e){var t=this.__data__=new ve(e);this.size=t.size}function be(e,t){for(var n=e.length;n--;)if(Ae(e[n][0],t))return n;return-1}function ke(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Q&&Q in Object(e)?function(e){var t=G.call(e,Q),n=e[Q];try{e[Q]=void 0;var r=!0}catch(e){}var i=Y.call(e);return r&&(t?e[Q]=n:delete e[Q]),i}(e):function(e){return Y.call(e)}(e)}function Se(e){return Ue(e)&&ke(e)==o}function Ee(e,t,n,r,i){return e===t||(null==e||null==t||!Ue(e)&&!Ue(t)?e!=e&&t!=t:function(e,t,n,r,i,d){var f=Oe(e),y=Oe(t),b=f?a:Ie(e),k=y?a:Ie(t),S=(b=b==o?p:b)==p,E=(k=k==o?p:k)==p,T=b==k;if(T&&Ne(e)){if(!Ne(t))return!1;f=!0,S=!1}if(T&&!S)return d||(d=new we),f||Ve(e)?Te(e,t,n,r,i,d):function(e,t,n,r,i,o,a){switch(n){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case _:return!(e.byteLength!=t.byteLength||!o(new X(e),new X(t)));case s:case c:case h:return Ae(+e,+t);case u:return e.name==t.name&&e.message==t.message;case m:case v:return e==t+"";case l:var d=D;case g:var p=1&r;if(d||(d=O),e.size!=t.size&&!p)return!1;var f=a.get(e);if(f)return f==t;r|=2,a.set(e,t);var y=Te(d(e),d(t),r,i,o,a);return a.delete(e),y;case"[object Symbol]":if(me)return me.call(e)==me.call(t)}return!1}(e,t,b,n,r,i,d);if(!(1&n)){var C=S&&G.call(e,"__wrapped__"),j=E&&G.call(t,"__wrapped__");if(C||j){var x=C?e.value():e,P=j?t.value():t;return d||(d=new we),i(x,P,n,r,d)}}return!!T&&(d||(d=new we),function(e,t,n,r,i,o){var a=1&n,s=Ce(e),c=s.length;if(c!=Ce(t).length&&!a)return!1;for(var u=c;u--;){var d=s[u];if(!(a?d in t:G.call(t,d)))return!1}var l=o.get(e);if(l&&o.get(t))return l==t;var h=!0;o.set(e,t),o.set(t,e);for(var p=a;++u<c;){var f=e[d=s[u]],m=t[d];if(r)var g=a?r(m,f,d,t,e,o):r(f,m,d,e,t,o);if(!(void 0===g?f===m||i(f,m,n,r,o):g)){h=!1;break}p||(p="constructor"==d)}if(h&&!p){var v=e.constructor,y=t.constructor;v==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y||(h=!1)}return o.delete(e),o.delete(t),h}(e,t,n,r,i,d))}(e,t,n,r,Ee,i))}function Te(e,t,n,r,i,o){var a=1&n,s=e.length,c=t.length;if(s!=c&&!(a&&c>s))return!1;var u=o.get(e);if(u&&o.get(t))return u==t;var d=-1,l=!0,h=2&n?new _e:void 0;for(o.set(e,t),o.set(t,e);++d<s;){var p=e[d],f=t[d];if(r)var m=a?r(f,p,d,t,e,o):r(p,f,d,e,t,o);if(void 0!==m){if(m)continue;l=!1;break}if(h){if(!A(t,(function(e,t){if(a=t,!h.has(a)&&(p===e||i(p,e,n,r,o)))return h.push(t);var a}))){l=!1;break}}else if(p!==f&&!i(p,f,n,r,o)){l=!1;break}}return o.delete(e),o.delete(t),l}function Ce(e){return function(e,t,n){var r=t(e);return Oe(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,Be,Pe)}function je(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function xe(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!ze(e)||function(e){return!!H&&H in e}(e))&&(Fe(e)?$:b).test(Re(e))}(n)?n:void 0}ge.prototype.clear=function(){this.__data__=ce?ce(null):{},this.size=0},ge.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ge.prototype.get=function(e){var t=this.__data__;if(ce){var n=t[e];return n===r?void 0:n}return G.call(t,e)?t[e]:void 0},ge.prototype.has=function(e){var t=this.__data__;return ce?void 0!==t[e]:G.call(t,e)},ge.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ce&&void 0===t?r:t,this},ve.prototype.clear=function(){this.__data__=[],this.size=0},ve.prototype.delete=function(e){var t=this.__data__,n=be(t,e);return!(n<0||(n==t.length-1?t.pop():J.call(t,n,1),--this.size,0))},ve.prototype.get=function(e){var t=this.__data__,n=be(t,e);return n<0?void 0:t[n][1]},ve.prototype.has=function(e){return be(this.__data__,e)>-1},ve.prototype.set=function(e,t){var n=this.__data__,r=be(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},ye.prototype.clear=function(){this.size=0,this.__data__={hash:new ge,map:new(ie||ve),string:new ge}},ye.prototype.delete=function(e){var t=je(this,e).delete(e);return this.size-=t?1:0,t},ye.prototype.get=function(e){return je(this,e).get(e)},ye.prototype.has=function(e){return je(this,e).has(e)},ye.prototype.set=function(e,t){var n=je(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},_e.prototype.add=_e.prototype.push=function(e){return this.__data__.set(e,r),this},_e.prototype.has=function(e){return this.__data__.has(e)},we.prototype.clear=function(){this.__data__=new ve,this.size=0},we.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},we.prototype.get=function(e){return this.__data__.get(e)},we.prototype.has=function(e){return this.__data__.has(e)},we.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ve){var r=n.__data__;if(!ie||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ye(r)}return n.set(e,t),this.size=n.size,this};var Pe=ee?function(e){return null==e?[]:(e=Object(e),function(t,n){for(var r=-1,i=null==t?0:t.length,o=0,a=[];++r<i;){var s=t[r];c=s,K.call(e,c)&&(a[o++]=s)}var c;return a}(ee(e)))}:function(){return[]},Ie=ke;function Me(e,t){return!!(t=null==t?i:t)&&("number"==typeof e||k.test(e))&&e>-1&&e%1==0&&e<t}function Re(e){if(null!=e){try{return W.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ae(e,t){return e===t||e!=e&&t!=t}(re&&Ie(new re(new ArrayBuffer(1)))!=w||ie&&Ie(new ie)!=l||oe&&Ie(oe.resolve())!=f||ae&&Ie(new ae)!=g||se&&Ie(new se)!=y)&&(Ie=function(e){var t=ke(e),n=t==p?e.constructor:void 0,r=n?Re(n):"";if(r)switch(r){case ue:return w;case de:return l;case le:return f;case he:return g;case pe:return y}return t});var De=Se(function(){return arguments}())?Se:function(e){return Ue(e)&&G.call(e,"callee")&&!K.call(e,"callee")},Oe=Array.isArray,Ne=te||function(){return!1};function Fe(e){if(!ze(e))return!1;var t=ke(e);return t==d||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Le(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function ze(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ue(e){return null!=e&&"object"==typeof e}var Ve=R?function(e){return function(t){return e(t)}}(R):function(e){return Ue(e)&&Le(e.length)&&!!S[ke(e)]};function Be(e){return null!=(t=e)&&Le(t.length)&&!Fe(t)?function(e,t){var n=Oe(e),r=!n&&De(e),i=!n&&!r&&Ne(e),o=!n&&!r&&!i&&Ve(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],c=s.length;for(var u in e)!t&&!G.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Me(u,c))||s.push(u);return s}(e):function(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||V))return ne(e);var t,n,r=[];for(var i in Object(e))G.call(e,i)&&"constructor"!=i&&r.push(i);return r}(e);var t}e.exports=function(e,t){return Ee(e,t)}},1344:function(e,t,n){e=n.nmd(e);var r="__lodash_hash_undefined__",i=9007199254740991,o="[object Arguments]",a="[object Function]",s="[object Object]",c=/^\[object .+?Constructor\]$/,u=/^(?:0|[1-9]\d*)$/,d={};d["[object Float32Array]"]=d["[object Float64Array]"]=d["[object Int8Array]"]=d["[object Int16Array]"]=d["[object Int32Array]"]=d["[object Uint8Array]"]=d["[object Uint8ClampedArray]"]=d["[object Uint16Array]"]=d["[object Uint32Array]"]=!0,d[o]=d["[object Array]"]=d["[object ArrayBuffer]"]=d["[object Boolean]"]=d["[object DataView]"]=d["[object Date]"]=d["[object Error]"]=d[a]=d["[object Map]"]=d["[object Number]"]=d[s]=d["[object RegExp]"]=d["[object Set]"]=d["[object String]"]=d["[object WeakMap]"]=!1;var l="object"==typeof global&&global&&global.Object===Object&&global,h="object"==typeof self&&self&&self.Object===Object&&self,p=l||h||Function("return this")(),f=t&&!t.nodeType&&t,m=f&&e&&!e.nodeType&&e,g=m&&m.exports===f,v=g&&l.process,y=function(){try{return m&&m.require&&m.require("util").types||v&&v.binding&&v.binding("util")}catch(e){}}(),_=y&&y.isTypedArray;function w(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var b,k,S,E=Array.prototype,T=Function.prototype,C=Object.prototype,j=p["__core-js_shared__"],x=T.toString,P=C.hasOwnProperty,I=(b=/[^.]+$/.exec(j&&j.keys&&j.keys.IE_PROTO||""))?"Symbol(src)_1."+b:"",M=C.toString,R=x.call(Object),A=RegExp("^"+x.call(P).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),D=g?p.Buffer:void 0,O=p.Symbol,N=p.Uint8Array,F=(D&&D.allocUnsafe,k=Object.getPrototypeOf,S=Object,function(e){return k(S(e))}),L=Object.create,z=C.propertyIsEnumerable,U=E.splice,V=O?O.toStringTag:void 0,B=function(){try{var e=ce(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),W=D?D.isBuffer:void 0,G=Math.max,H=Date.now,Y=ce(p,"Map"),$=ce(Object,"create"),Z=function(){function e(){}return function(t){if(!we(t))return{};if(L)return L(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function q(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function X(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function K(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function J(e){var t=this.__data__=new X(e);this.size=t.size}function Q(e,t,n){(void 0!==n&&!pe(e[t],n)||void 0===n&&!(t in e))&&ne(e,t,n)}function ee(e,t,n){var r=e[t];P.call(e,t)&&pe(r,n)&&(void 0!==n||t in e)||ne(e,t,n)}function te(e,t){for(var n=e.length;n--;)if(pe(e[n][0],t))return n;return-1}function ne(e,t,n){"__proto__"==t&&B?B(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}q.prototype.clear=function(){this.__data__=$?$(null):{},this.size=0},q.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},q.prototype.get=function(e){var t=this.__data__;if($){var n=t[e];return n===r?void 0:n}return P.call(t,e)?t[e]:void 0},q.prototype.has=function(e){var t=this.__data__;return $?void 0!==t[e]:P.call(t,e)},q.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=$&&void 0===t?r:t,this},X.prototype.clear=function(){this.__data__=[],this.size=0},X.prototype.delete=function(e){var t=this.__data__,n=te(t,e);return!(n<0||(n==t.length-1?t.pop():U.call(t,n,1),--this.size,0))},X.prototype.get=function(e){var t=this.__data__,n=te(t,e);return n<0?void 0:t[n][1]},X.prototype.has=function(e){return te(this.__data__,e)>-1},X.prototype.set=function(e,t){var n=this.__data__,r=te(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},K.prototype.clear=function(){this.size=0,this.__data__={hash:new q,map:new(Y||X),string:new q}},K.prototype.delete=function(e){var t=se(this,e).delete(e);return this.size-=t?1:0,t},K.prototype.get=function(e){return se(this,e).get(e)},K.prototype.has=function(e){return se(this,e).has(e)},K.prototype.set=function(e,t){var n=se(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},J.prototype.clear=function(){this.__data__=new X,this.size=0},J.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},J.prototype.get=function(e){return this.__data__.get(e)},J.prototype.has=function(e){return this.__data__.has(e)},J.prototype.set=function(e,t){var n=this.__data__;if(n instanceof X){var r=n.__data__;if(!Y||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new K(r)}return n.set(e,t),this.size=n.size,this};function re(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":V&&V in Object(e)?function(e){var t=P.call(e,V),n=e[V];try{e[V]=void 0;var r=!0}catch(e){}var i=M.call(e);return r&&(t?e[V]=n:delete e[V]),i}(e):function(e){return M.call(e)}(e)}function ie(e){return be(e)&&re(e)==o}function oe(e,t,n,r,i){e!==t&&function(e,t,n){for(var r=-1,i=Object(e),o=n(e),a=o.length;a--;){var s=o[++r];if(!1===t(i[s],s,i))break}}(t,(function(o,a){if(i||(i=new J),we(o))!function(e,t,n,r,i,o,a){var c=le(e,n),u=le(t,n),d=a.get(u);if(d)Q(e,n,d);else{var l,h,p,f,m,g=o?o(c,u,n+"",e,t,a):void 0,v=void 0===g;if(v){var y=me(u),_=!y&&ve(u),w=!y&&!_&&ke(u);g=u,y||_||w?me(c)?g=c:be(m=c)&&ge(m)?g=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(c):_?(v=!1,g=function(e,t){return e.slice()}(u)):w?(v=!1,f=new(p=(l=u).buffer).constructor(p.byteLength),new N(f).set(new N(p)),h=f,g=new l.constructor(h,l.byteOffset,l.length)):g=[]:function(e){if(!be(e)||re(e)!=s)return!1;var t=F(e);if(null===t)return!0;var n=P.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&x.call(n)==R}(u)||fe(u)?(g=c,fe(c)?g=function(e){return function(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],c=void 0;void 0===c&&(c=e[s]),i?ne(n,s,c):ee(n,s,c)}return n}(e,Se(e))}(c):we(c)&&!ye(c)||(g=function(e){return"function"!=typeof e.constructor||de(e)?{}:Z(F(e))}(u))):v=!1}v&&(a.set(u,g),i(g,u,r,o,a),a.delete(u)),Q(e,n,g)}}(e,t,a,n,oe,r,i);else{var c=r?r(le(e,a),o,a+"",e,t,i):void 0;void 0===c&&(c=o),Q(e,a,c)}}),Se)}var ae=B?function(e,t){return B(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:Ce;function se(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function ce(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!we(e)||function(e){return!!I&&I in e}(e))&&(ye(e)?A:c).test(function(e){if(null!=e){try{return x.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(n)?n:void 0}function ue(e,t){var n=typeof e;return!!(t=null==t?i:t)&&("number"==n||"symbol"!=n&&u.test(e))&&e>-1&&e%1==0&&e<t}function de(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||C)}function le(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var he=function(e){var t=0,n=0;return function(){var r=H(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(ae);function pe(e,t){return e===t||e!=e&&t!=t}var fe=ie(function(){return arguments}())?ie:function(e){return be(e)&&P.call(e,"callee")&&!z.call(e,"callee")},me=Array.isArray;function ge(e){return null!=e&&_e(e.length)&&!ye(e)}var ve=W||function(){return!1};function ye(e){if(!we(e))return!1;var t=re(e);return t==a||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function _e(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function we(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function be(e){return null!=e&&"object"==typeof e}var ke=_?function(e){return function(t){return e(t)}}(_):function(e){return be(e)&&_e(e.length)&&!!d[re(e)]};function Se(e){return ge(e)?function(e,t){var n=me(e),r=!n&&fe(e),i=!n&&!r&&ve(e),o=!n&&!r&&!i&&ke(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],c=s.length;for(var u in e)!t&&!P.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ue(u,c))||s.push(u);return s}(e,!0):function(e){if(!we(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=de(e),n=[];for(var r in e)("constructor"!=r||!t&&P.call(e,r))&&n.push(r);return n}(e)}var Ee,Te=(Ee=function(e,t,n){oe(e,t,n)},function(e,t){return he(function(e,t,n){return t=G(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=G(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),w(e,this,s)}}(e,t,Ce),e+"")}((function(e,t){var n=-1,r=t.length,i=r>1?t[r-1]:void 0,o=r>2?t[2]:void 0;for(i=Ee.length>3&&"function"==typeof i?(r--,i):void 0,o&&function(e,t,n){if(!we(n))return!1;var r=typeof t;return!!("number"==r?ge(n)&&ue(t,n.length):"string"==r&&t in n)&&pe(n[t],e)}(t[0],t[1],o)&&(i=r<3?void 0:i,r=1),e=Object(e);++n<r;){var a=t[n];a&&Ee(e,a,n)}return e})));function Ce(e){return e}e.exports=Te},9640:function(e,t,n){var r,i;!function(o,a){"use strict";r=function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"];function i(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function o(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(r){return"debug"===r&&(r="log"),typeof console!==t&&("trace"===r&&n?o:void 0!==console[r]?i(console,r):void 0!==console.log?i(console,"log"):e)}function s(t,n){for(var i=0;i<r.length;i++){var o=r[i];this[o]=i<t?e:this.methodFactory(o,t,n)}this.log=this.debug}function c(e,n,r){return function(){typeof console!==t&&(s.call(this,n,r),this[e].apply(this,arguments))}}function u(e,t,n){return a(e)||c.apply(this,arguments)}function d(e,n,i){var o,a=this;n=null==n?"WARN":n;var c="loglevel";function d(){var e;if(typeof window!==t&&c){try{e=window.localStorage[c]}catch(e){}if(typeof e===t)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(c)+"=");-1!==r&&(e=/^([^;]+)/.exec(n.slice(r))[1])}catch(e){}return void 0===a.levels[e]&&(e=void 0),e}}"string"==typeof e?c+=":"+e:"symbol"==typeof e&&(c=void 0),a.name=e,a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=i||u,a.getLevel=function(){return o},a.setLevel=function(n,i){if("string"==typeof n&&void 0!==a.levels[n.toUpperCase()]&&(n=a.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=a.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(o=n,!1!==i&&function(e){var n=(r[e]||"silent").toUpperCase();if(typeof window!==t&&c){try{return void(window.localStorage[c]=n)}catch(e){}try{window.document.cookie=encodeURIComponent(c)+"="+n+";"}catch(e){}}}(n),s.call(a,n,e),typeof console===t&&n<a.levels.SILENT)return"No console available for logging"},a.setDefaultLevel=function(e){n=e,d()||a.setLevel(e,!1)},a.resetLevel=function(){a.setLevel(n,!1),function(){if(typeof window!==t&&c){try{return void window.localStorage.removeItem(c)}catch(e){}try{window.document.cookie=encodeURIComponent(c)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}()},a.enableAll=function(e){a.setLevel(a.levels.TRACE,e)},a.disableAll=function(e){a.setLevel(a.levels.SILENT,e)};var l=d();null==l&&(l=n),a.setLevel(l,!1)}var l=new d,h={};l.getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=h[e];return t||(t=h[e]=new d(e,l.getLevel(),l.methodFactory)),t};var p=typeof window!==t?window.log:void 0;return l.noConflict=function(){return typeof window!==t&&window.log===l&&(window.log=p),l},l.getLoggers=function(){return h},l.default=l,l},void 0===(i=r.call(t,n,t,e))||(e.exports=i)}()},1944:function(e){function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=1944,e.exports=t},9034:function(e,t,n){(e=n.nmd(e)).exports=function(){"use strict";var t,r;function i(){return t.apply(null,arguments)}function o(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function a(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function c(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(s(e,t))return!1;return!0}function u(e){return void 0===e}function d(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function l(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function h(e,t){var n,r=[],i=e.length;for(n=0;n<i;++n)r.push(t(e[n],n));return r}function p(e,t){for(var n in t)s(t,n)&&(e[n]=t[n]);return s(t,"toString")&&(e.toString=t.toString),s(t,"valueOf")&&(e.valueOf=t.valueOf),e}function f(e,t,n,r){return Tt(e,t,n,r,!0).utc()}function m(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function g(e){if(null==e._isValid){var t=m(e),n=r.call(t.parsedDateParts,(function(e){return null!=e})),i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return i;e._isValid=i}return e._isValid}function v(e){var t=f(NaN);return null!=e?p(m(t),e):m(t).userInvalidated=!0,t}r=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),r=n.length>>>0;for(t=0;t<r;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var y=i.momentProperties=[],_=!1;function w(e,t){var n,r,i,o=y.length;if(u(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),u(t._i)||(e._i=t._i),u(t._f)||(e._f=t._f),u(t._l)||(e._l=t._l),u(t._strict)||(e._strict=t._strict),u(t._tzm)||(e._tzm=t._tzm),u(t._isUTC)||(e._isUTC=t._isUTC),u(t._offset)||(e._offset=t._offset),u(t._pf)||(e._pf=m(t)),u(t._locale)||(e._locale=t._locale),o>0)for(n=0;n<o;n++)u(i=t[r=y[n]])||(e[r]=i);return e}function b(e){w(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===_&&(_=!0,i.updateOffset(this),_=!1)}function k(e){return e instanceof b||null!=e&&null!=e._isAMomentObject}function S(e){!1===i.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function E(e,t){var n=!0;return p((function(){if(null!=i.deprecationHandler&&i.deprecationHandler(null,e),n){var r,o,a,c=[],u=arguments.length;for(o=0;o<u;o++){if(r="","object"==typeof arguments[o]){for(a in r+="\n["+o+"] ",arguments[0])s(arguments[0],a)&&(r+=a+": "+arguments[0][a]+", ");r=r.slice(0,-2)}else r=arguments[o];c.push(r)}S(e+"\nArguments: "+Array.prototype.slice.call(c).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var T,C={};function j(e,t){null!=i.deprecationHandler&&i.deprecationHandler(e,t),C[e]||(S(t),C[e]=!0)}function x(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function P(e,t){var n,r=p({},e);for(n in t)s(t,n)&&(a(e[n])&&a(t[n])?(r[n]={},p(r[n],e[n]),p(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)s(e,n)&&!s(t,n)&&a(e[n])&&(r[n]=p({},r[n]));return r}function I(e){null!=e&&this.set(e)}i.suppressDeprecationWarnings=!1,i.deprecationHandler=null,T=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)s(e,t)&&n.push(t);return n};function M(e,t,n){var r=""+Math.abs(e),i=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var R=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,A=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,D={},O={};function N(e,t,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),e&&(O[e]=i),t&&(O[t[0]]=function(){return M(i.apply(this,arguments),t[1],t[2])}),n&&(O[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function F(e,t){return e.isValid()?(t=L(t,e.localeData()),D[t]=D[t]||function(e){var t,n,r,i=e.match(R);for(t=0,n=i.length;t<n;t++)O[i[t]]?i[t]=O[i[t]]:i[t]=(r=i[t]).match(/\[[\s\S]/)?r.replace(/^\[|\]$/g,""):r.replace(/\\/g,"");return function(t){var r,o="";for(r=0;r<n;r++)o+=x(i[r])?i[r].call(t,e):i[r];return o}}(t),D[t](e)):e.localeData().invalidDate()}function L(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}for(A.lastIndex=0;n>=0&&A.test(e);)e=e.replace(A,r),A.lastIndex=0,n-=1;return e}var z={};function U(e,t){var n=e.toLowerCase();z[n]=z[n+"s"]=z[t]=e}function V(e){return"string"==typeof e?z[e]||z[e.toLowerCase()]:void 0}function B(e){var t,n,r={};for(n in e)s(e,n)&&(t=V(n))&&(r[t]=e[n]);return r}var W={};function G(e,t){W[e]=t}function H(e){return e%4==0&&e%100!=0||e%400==0}function Y(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function $(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=Y(t)),n}function Z(e,t){return function(n){return null!=n?(X(this,e,n),i.updateOffset(this,t),this):q(this,e)}}function q(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function X(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&H(e.year())&&1===e.month()&&29===e.date()?(n=$(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),ke(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}var K,J=/\d/,Q=/\d\d/,ee=/\d{3}/,te=/\d{4}/,ne=/[+-]?\d{6}/,re=/\d\d?/,ie=/\d\d\d\d?/,oe=/\d\d\d\d\d\d?/,ae=/\d{1,3}/,se=/\d{1,4}/,ce=/[+-]?\d{1,6}/,ue=/\d+/,de=/[+-]?\d+/,le=/Z|[+-]\d\d:?\d\d/gi,he=/Z|[+-]\d\d(?::?\d\d)?/gi,pe=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function fe(e,t,n){K[e]=x(t)?t:function(e,r){return e&&n?n:t}}function me(e,t){return s(K,e)?K[e](t._strict,t._locale):new RegExp(ge(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,r,i){return t||n||r||i}))))}function ge(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}K={};var ve={};function ye(e,t){var n,r,i=t;for("string"==typeof e&&(e=[e]),d(t)&&(i=function(e,n){n[t]=$(e)}),r=e.length,n=0;n<r;n++)ve[e[n]]=i}function _e(e,t){ye(e,(function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)}))}function we(e,t,n){null!=t&&s(ve,e)&&ve[e](t,n._a,n,e)}var be;function ke(e,t){if(isNaN(e)||isNaN(t))return NaN;var n,r=(t%(n=12)+n)%n;return e+=(t-r)/12,1===r?H(e)?29:28:31-r%7%2}be=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},N("M",["MM",2],"Mo",(function(){return this.month()+1})),N("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),N("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),U("month","M"),G("month",8),fe("M",re),fe("MM",re,Q),fe("MMM",(function(e,t){return t.monthsShortRegex(e)})),fe("MMMM",(function(e,t){return t.monthsRegex(e)})),ye(["M","MM"],(function(e,t){t[1]=$(e)-1})),ye(["MMM","MMMM"],(function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[1]=i:m(n).invalidMonth=e}));var Se="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ee="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Te=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ce=pe,je=pe;function xe(e,t,n){var r,i,o,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=f([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=be.call(this._shortMonthsParse,a))?i:null:-1!==(i=be.call(this._longMonthsParse,a))?i:null:"MMM"===t?-1!==(i=be.call(this._shortMonthsParse,a))||-1!==(i=be.call(this._longMonthsParse,a))?i:null:-1!==(i=be.call(this._longMonthsParse,a))||-1!==(i=be.call(this._shortMonthsParse,a))?i:null}function Pe(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=$(t);else if(!d(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),ke(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function Ie(e){return null!=e?(Pe(this,e),i.updateOffset(this,!0),this):q(this,"Month")}function Me(){function e(e,t){return t.length-e.length}var t,n,r=[],i=[],o=[];for(t=0;t<12;t++)n=f([2e3,t]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(r.sort(e),i.sort(e),o.sort(e),t=0;t<12;t++)r[t]=ge(r[t]),i[t]=ge(i[t]);for(t=0;t<24;t++)o[t]=ge(o[t]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function Re(e){return H(e)?366:365}N("Y",0,0,(function(){var e=this.year();return e<=9999?M(e,4):"+"+e})),N(0,["YY",2],0,(function(){return this.year()%100})),N(0,["YYYY",4],0,"year"),N(0,["YYYYY",5],0,"year"),N(0,["YYYYYY",6,!0],0,"year"),U("year","y"),G("year",1),fe("Y",de),fe("YY",re,Q),fe("YYYY",se,te),fe("YYYYY",ce,ne),fe("YYYYYY",ce,ne),ye(["YYYYY","YYYYYY"],0),ye("YYYY",(function(e,t){t[0]=2===e.length?i.parseTwoDigitYear(e):$(e)})),ye("YY",(function(e,t){t[0]=i.parseTwoDigitYear(e)})),ye("Y",(function(e,t){t[0]=parseInt(e,10)})),i.parseTwoDigitYear=function(e){return $(e)+($(e)>68?1900:2e3)};var Ae=Z("FullYear",!0);function De(e,t,n,r,i,o,a){var s;return e<100&&e>=0?(s=new Date(e+400,t,n,r,i,o,a),isFinite(s.getFullYear())&&s.setFullYear(e)):s=new Date(e,t,n,r,i,o,a),s}function Oe(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Ne(e,t,n){var r=7+t-n;return-(7+Oe(e,0,r).getUTCDay()-t)%7+r-1}function Fe(e,t,n,r,i){var o,a,s=1+7*(t-1)+(7+n-r)%7+Ne(e,r,i);return s<=0?a=Re(o=e-1)+s:s>Re(e)?(o=e+1,a=s-Re(e)):(o=e,a=s),{year:o,dayOfYear:a}}function Le(e,t,n){var r,i,o=Ne(e.year(),t,n),a=Math.floor((e.dayOfYear()-o-1)/7)+1;return a<1?r=a+ze(i=e.year()-1,t,n):a>ze(e.year(),t,n)?(r=a-ze(e.year(),t,n),i=e.year()+1):(i=e.year(),r=a),{week:r,year:i}}function ze(e,t,n){var r=Ne(e,t,n),i=Ne(e+1,t,n);return(Re(e)-r+i)/7}N("w",["ww",2],"wo","week"),N("W",["WW",2],"Wo","isoWeek"),U("week","w"),U("isoWeek","W"),G("week",5),G("isoWeek",5),fe("w",re),fe("ww",re,Q),fe("W",re),fe("WW",re,Q),_e(["w","ww","W","WW"],(function(e,t,n,r){t[r.substr(0,1)]=$(e)}));function Ue(e,t){return e.slice(t,7).concat(e.slice(0,t))}N("d",0,"do","day"),N("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),N("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),N("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),N("e",0,0,"weekday"),N("E",0,0,"isoWeekday"),U("day","d"),U("weekday","e"),U("isoWeekday","E"),G("day",11),G("weekday",11),G("isoWeekday",11),fe("d",re),fe("e",re),fe("E",re),fe("dd",(function(e,t){return t.weekdaysMinRegex(e)})),fe("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),fe("dddd",(function(e,t){return t.weekdaysRegex(e)})),_e(["dd","ddd","dddd"],(function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);null!=i?t.d=i:m(n).invalidWeekday=e})),_e(["d","e","E"],(function(e,t,n,r){t[r]=$(e)}));var Ve="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Be="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),We="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ge=pe,He=pe,Ye=pe;function $e(e,t,n){var r,i,o,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=f([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=be.call(this._weekdaysParse,a))?i:null:"ddd"===t?-1!==(i=be.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=be.call(this._minWeekdaysParse,a))?i:null:"dddd"===t?-1!==(i=be.call(this._weekdaysParse,a))||-1!==(i=be.call(this._shortWeekdaysParse,a))||-1!==(i=be.call(this._minWeekdaysParse,a))?i:null:"ddd"===t?-1!==(i=be.call(this._shortWeekdaysParse,a))||-1!==(i=be.call(this._weekdaysParse,a))||-1!==(i=be.call(this._minWeekdaysParse,a))?i:null:-1!==(i=be.call(this._minWeekdaysParse,a))||-1!==(i=be.call(this._weekdaysParse,a))||-1!==(i=be.call(this._shortWeekdaysParse,a))?i:null}function Ze(){function e(e,t){return t.length-e.length}var t,n,r,i,o,a=[],s=[],c=[],u=[];for(t=0;t<7;t++)n=f([2e3,1]).day(t),r=ge(this.weekdaysMin(n,"")),i=ge(this.weekdaysShort(n,"")),o=ge(this.weekdays(n,"")),a.push(r),s.push(i),c.push(o),u.push(r),u.push(i),u.push(o);a.sort(e),s.sort(e),c.sort(e),u.sort(e),this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function qe(){return this.hours()%12||12}function Xe(e,t){N(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function Ke(e,t){return t._meridiemParse}N("H",["HH",2],0,"hour"),N("h",["hh",2],0,qe),N("k",["kk",2],0,(function(){return this.hours()||24})),N("hmm",0,0,(function(){return""+qe.apply(this)+M(this.minutes(),2)})),N("hmmss",0,0,(function(){return""+qe.apply(this)+M(this.minutes(),2)+M(this.seconds(),2)})),N("Hmm",0,0,(function(){return""+this.hours()+M(this.minutes(),2)})),N("Hmmss",0,0,(function(){return""+this.hours()+M(this.minutes(),2)+M(this.seconds(),2)})),Xe("a",!0),Xe("A",!1),U("hour","h"),G("hour",13),fe("a",Ke),fe("A",Ke),fe("H",re),fe("h",re),fe("k",re),fe("HH",re,Q),fe("hh",re,Q),fe("kk",re,Q),fe("hmm",ie),fe("hmmss",oe),fe("Hmm",ie),fe("Hmmss",oe),ye(["H","HH"],3),ye(["k","kk"],(function(e,t,n){var r=$(e);t[3]=24===r?0:r})),ye(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),ye(["h","hh"],(function(e,t,n){t[3]=$(e),m(n).bigHour=!0})),ye("hmm",(function(e,t,n){var r=e.length-2;t[3]=$(e.substr(0,r)),t[4]=$(e.substr(r)),m(n).bigHour=!0})),ye("hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[3]=$(e.substr(0,r)),t[4]=$(e.substr(r,2)),t[5]=$(e.substr(i)),m(n).bigHour=!0})),ye("Hmm",(function(e,t,n){var r=e.length-2;t[3]=$(e.substr(0,r)),t[4]=$(e.substr(r))})),ye("Hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[3]=$(e.substr(0,r)),t[4]=$(e.substr(r,2)),t[5]=$(e.substr(i))}));var Je=Z("Hours",!0);var Qe,et={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Se,monthsShort:Ee,week:{dow:0,doy:6},weekdays:Ve,weekdaysMin:We,weekdaysShort:Be,meridiemParse:/[ap]\.?m?\.?/i},tt={},nt={};function rt(e,t){var n,r=Math.min(e.length,t.length);for(n=0;n<r;n+=1)if(e[n]!==t[n])return n;return r}function it(e){return e?e.toLowerCase().replace("_","-"):e}function ot(t){var r=null;if(void 0===tt[t]&&e&&e.exports&&function(e){return null!=e.match("^[^/\\\\]*$")}(t))try{r=Qe._abbr,n(1944)("./"+t),at(r)}catch(e){tt[t]=null}return tt[t]}function at(e,t){var n;return e&&((n=u(t)?ct(e):st(e,t))?Qe=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Qe._abbr}function st(e,t){if(null!==t){var n,r=et;if(t.abbr=e,null!=tt[e])j("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=tt[e]._config;else if(null!=t.parentLocale)if(null!=tt[t.parentLocale])r=tt[t.parentLocale]._config;else{if(null==(n=ot(t.parentLocale)))return nt[t.parentLocale]||(nt[t.parentLocale]=[]),nt[t.parentLocale].push({name:e,config:t}),null;r=n._config}return tt[e]=new I(P(r,t)),nt[e]&&nt[e].forEach((function(e){st(e.name,e.config)})),at(e),tt[e]}return delete tt[e],null}function ct(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Qe;if(!o(e)){if(t=ot(e))return t;e=[e]}return function(e){for(var t,n,r,i,o=0;o<e.length;){for(t=(i=it(e[o]).split("-")).length,n=(n=it(e[o+1]))?n.split("-"):null;t>0;){if(r=ot(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&rt(i,n)>=t-1)break;t--}o++}return Qe}(e)}function ut(e){var t,n=e._a;return n&&-2===m(e).overflow&&(t=n[1]<0||n[1]>11?1:n[2]<1||n[2]>ke(n[0],n[1])?2:n[3]<0||n[3]>24||24===n[3]&&(0!==n[4]||0!==n[5]||0!==n[6])?3:n[4]<0||n[4]>59?4:n[5]<0||n[5]>59?5:n[6]<0||n[6]>999?6:-1,m(e)._overflowDayOfYear&&(t<0||t>2)&&(t=2),m(e)._overflowWeeks&&-1===t&&(t=7),m(e)._overflowWeekday&&-1===t&&(t=8),m(e).overflow=t),e}var dt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,lt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ht=/Z|[+-]\d\d(?::?\d\d)?/,pt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],ft=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],mt=/^\/?Date\((-?\d+)/i,gt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,vt={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function yt(e){var t,n,r,i,o,a,s=e._i,c=dt.exec(s)||lt.exec(s),u=pt.length,d=ft.length;if(c){for(m(e).iso=!0,t=0,n=u;t<n;t++)if(pt[t][1].exec(c[1])){i=pt[t][0],r=!1!==pt[t][2];break}if(null==i)return void(e._isValid=!1);if(c[3]){for(t=0,n=d;t<n;t++)if(ft[t][1].exec(c[3])){o=(c[2]||" ")+ft[t][0];break}if(null==o)return void(e._isValid=!1)}if(!r&&null!=o)return void(e._isValid=!1);if(c[4]){if(!ht.exec(c[4]))return void(e._isValid=!1);a="Z"}e._f=i+(o||"")+(a||""),St(e)}else e._isValid=!1}function _t(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function wt(e){var t,n,r,i,o,a,s,c,u=gt.exec(e._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(u){if(n=u[4],r=u[3],i=u[2],o=u[5],a=u[6],s=u[7],c=[_t(n),Ee.indexOf(r),parseInt(i,10),parseInt(o,10),parseInt(a,10)],s&&c.push(parseInt(s,10)),t=c,!function(e,t,n){return!e||Be.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(m(n).weekdayMismatch=!0,n._isValid=!1,!1)}(u[1],t,e))return;e._a=t,e._tzm=function(e,t,n){if(e)return vt[e];if(t)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}(u[8],u[9],u[10]),e._d=Oe.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),m(e).rfc2822=!0}else e._isValid=!1}function bt(e,t,n){return null!=e?e:null!=t?t:n}function kt(e){var t,n,r,o,a,s=[];if(!e._d){for(r=function(e){var t=new Date(i.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[2]&&null==e._a[1]&&function(e){var t,n,r,i,o,a,s,c,u;null!=(t=e._w).GG||null!=t.W||null!=t.E?(o=1,a=4,n=bt(t.GG,e._a[0],Le(Ct(),1,4).year),r=bt(t.W,1),((i=bt(t.E,1))<1||i>7)&&(c=!0)):(o=e._locale._week.dow,a=e._locale._week.doy,u=Le(Ct(),o,a),n=bt(t.gg,e._a[0],u.year),r=bt(t.w,u.week),null!=t.d?((i=t.d)<0||i>6)&&(c=!0):null!=t.e?(i=t.e+o,(t.e<0||t.e>6)&&(c=!0)):i=o),r<1||r>ze(n,o,a)?m(e)._overflowWeeks=!0:null!=c?m(e)._overflowWeekday=!0:(s=Fe(n,r,i,o,a),e._a[0]=s.year,e._dayOfYear=s.dayOfYear)}(e),null!=e._dayOfYear&&(a=bt(e._a[0],r[0]),(e._dayOfYear>Re(a)||0===e._dayOfYear)&&(m(e)._overflowDayOfYear=!0),n=Oe(a,0,e._dayOfYear),e._a[1]=n.getUTCMonth(),e._a[2]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=s[t]=r[t];for(;t<7;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[3]&&0===e._a[4]&&0===e._a[5]&&0===e._a[6]&&(e._nextDay=!0,e._a[3]=0),e._d=(e._useUTC?Oe:De).apply(null,s),o=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[3]=24),e._w&&void 0!==e._w.d&&e._w.d!==o&&(m(e).weekdayMismatch=!0)}}function St(e){if(e._f!==i.ISO_8601)if(e._f!==i.RFC_2822){e._a=[],m(e).empty=!0;var t,n,r,o,a,s,c,u=""+e._i,d=u.length,l=0;for(c=(r=L(e._f,e._locale).match(R)||[]).length,t=0;t<c;t++)o=r[t],(n=(u.match(me(o,e))||[])[0])&&((a=u.substr(0,u.indexOf(n))).length>0&&m(e).unusedInput.push(a),u=u.slice(u.indexOf(n)+n.length),l+=n.length),O[o]?(n?m(e).empty=!1:m(e).unusedTokens.push(o),we(o,n,e)):e._strict&&!n&&m(e).unusedTokens.push(o);m(e).charsLeftOver=d-l,u.length>0&&m(e).unusedInput.push(u),e._a[3]<=12&&!0===m(e).bigHour&&e._a[3]>0&&(m(e).bigHour=void 0),m(e).parsedDateParts=e._a.slice(0),m(e).meridiem=e._meridiem,e._a[3]=function(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((r=e.isPM(n))&&t<12&&(t+=12),r||12!==t||(t=0),t):t}(e._locale,e._a[3],e._meridiem),null!==(s=m(e).era)&&(e._a[0]=e._locale.erasConvertYear(s,e._a[0])),kt(e),ut(e)}else wt(e);else yt(e)}function Et(e){var t=e._i,n=e._f;return e._locale=e._locale||ct(e._l),null===t||void 0===n&&""===t?v({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),k(t)?new b(ut(t)):(l(t)?e._d=t:o(n)?function(e){var t,n,r,i,o,a,s=!1,c=e._f.length;if(0===c)return m(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<c;i++)o=0,a=!1,t=w({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],St(t),g(t)&&(a=!0),o+=m(t).charsLeftOver,o+=10*m(t).unusedTokens.length,m(t).score=o,s?o<r&&(r=o,n=t):(null==r||o<r||a)&&(r=o,n=t,a&&(s=!0));p(e,n||t)}(e):n?St(e):function(e){var t=e._i;u(t)?e._d=new Date(i.now()):l(t)?e._d=new Date(t.valueOf()):"string"==typeof t?function(e){var t=mt.exec(e._i);null===t?(yt(e),!1===e._isValid&&(delete e._isValid,wt(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:i.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):o(t)?(e._a=h(t.slice(0),(function(e){return parseInt(e,10)})),kt(e)):a(t)?function(e){if(!e._d){var t=B(e._i),n=void 0===t.day?t.date:t.day;e._a=h([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),kt(e)}}(e):d(t)?e._d=new Date(t):i.createFromInputFallback(e)}(e),g(e)||(e._d=null),e))}function Tt(e,t,n,r,i){var s,u={};return!0!==t&&!1!==t||(r=t,t=void 0),!0!==n&&!1!==n||(r=n,n=void 0),(a(e)&&c(e)||o(e)&&0===e.length)&&(e=void 0),u._isAMomentObject=!0,u._useUTC=u._isUTC=i,u._l=n,u._i=e,u._f=t,u._strict=r,(s=new b(ut(Et(u))))._nextDay&&(s.add(1,"d"),s._nextDay=void 0),s}function Ct(e,t,n,r){return Tt(e,t,n,r,!1)}i.createFromInputFallback=E("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),i.ISO_8601=function(){},i.RFC_2822=function(){};var jt=E("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Ct.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:v()})),xt=E("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Ct.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:v()}));function Pt(e,t){var n,r;if(1===t.length&&o(t[0])&&(t=t[0]),!t.length)return Ct();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}var It=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Mt(e){var t=B(e),n=t.year||0,r=t.quarter||0,i=t.month||0,o=t.week||t.isoWeek||0,a=t.day||0,c=t.hour||0,u=t.minute||0,d=t.second||0,l=t.millisecond||0;this._isValid=function(e){var t,n,r=!1,i=It.length;for(t in e)if(s(e,t)&&(-1===be.call(It,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<i;++n)if(e[It[n]]){if(r)return!1;parseFloat(e[It[n]])!==$(e[It[n]])&&(r=!0)}return!0}(t),this._milliseconds=+l+1e3*d+6e4*u+1e3*c*60*60,this._days=+a+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=ct(),this._bubble()}function Rt(e){return e instanceof Mt}function At(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Dt(e,t){N(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+M(~~(e/60),2)+t+M(~~e%60,2)}))}Dt("Z",":"),Dt("ZZ",""),fe("Z",he),fe("ZZ",he),ye(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=Nt(he,e)}));var Ot=/([\+\-]|\d\d)/gi;function Nt(e,t){var n,r,i=(t||"").match(e);return null===i?null:0===(r=60*(n=((i[i.length-1]||[])+"").match(Ot)||["-",0,0])[1]+$(n[2]))?0:"+"===n[0]?r:-r}function Ft(e,t){var n,r;return t._isUTC?(n=t.clone(),r=(k(e)||l(e)?e.valueOf():Ct(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),i.updateOffset(n,!1),n):Ct(e).local()}function Lt(e){return-Math.round(e._d.getTimezoneOffset())}function zt(){return!!this.isValid()&&this._isUTC&&0===this._offset}i.updateOffset=function(){};var Ut=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Vt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Bt(e,t){var n,r,i,o,a,c,u=e,l=null;return Rt(e)?u={ms:e._milliseconds,d:e._days,M:e._months}:d(e)||!isNaN(+e)?(u={},t?u[t]=+e:u.milliseconds=+e):(l=Ut.exec(e))?(n="-"===l[1]?-1:1,u={y:0,d:$(l[2])*n,h:$(l[3])*n,m:$(l[4])*n,s:$(l[5])*n,ms:$(At(1e3*l[6]))*n}):(l=Vt.exec(e))?(n="-"===l[1]?-1:1,u={y:Wt(l[2],n),M:Wt(l[3],n),w:Wt(l[4],n),d:Wt(l[5],n),h:Wt(l[6],n),m:Wt(l[7],n),s:Wt(l[8],n)}):null==u?u={}:"object"==typeof u&&("from"in u||"to"in u)&&(o=Ct(u.from),a=Ct(u.to),i=o.isValid()&&a.isValid()?(a=Ft(a,o),o.isBefore(a)?c=Gt(o,a):((c=Gt(a,o)).milliseconds=-c.milliseconds,c.months=-c.months),c):{milliseconds:0,months:0},(u={}).ms=i.milliseconds,u.M=i.months),r=new Mt(u),Rt(e)&&s(e,"_locale")&&(r._locale=e._locale),Rt(e)&&s(e,"_isValid")&&(r._isValid=e._isValid),r}function Wt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Gt(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Ht(e,t){return function(n,r){var i;return null===r||isNaN(+r)||(j(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),Yt(this,Bt(n,r),e),this}}function Yt(e,t,n,r){var o=t._milliseconds,a=At(t._days),s=At(t._months);e.isValid()&&(r=null==r||r,s&&Pe(e,q(e,"Month")+s*n),a&&X(e,"Date",q(e,"Date")+a*n),o&&e._d.setTime(e._d.valueOf()+o*n),r&&i.updateOffset(e,a||s))}Bt.fn=Mt.prototype,Bt.invalid=function(){return Bt(NaN)};var $t=Ht(1,"add"),Zt=Ht(-1,"subtract");function qt(e){return"string"==typeof e||e instanceof String}function Xt(e){return k(e)||l(e)||qt(e)||d(e)||function(e){var t=o(e),n=!1;return t&&(n=0===e.filter((function(t){return!d(t)&&qt(e)})).length),t&&n}(e)||function(e){var t,n,r=a(e)&&!c(e),i=!1,o=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],u=o.length;for(t=0;t<u;t+=1)n=o[t],i=i||s(e,n);return r&&i}(e)||null==e}function Kt(e){var t,n=a(e)&&!c(e),r=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<i.length;t+=1)r=r||s(e,i[t]);return n&&r}function Jt(e,t){if(e.date()<t.date())return-Jt(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(n,"months");return-(n+(t-r<0?(t-r)/(r-e.clone().add(n-1,"months")):(t-r)/(e.clone().add(n+1,"months")-r)))||0}function Qt(e){var t;return void 0===e?this._locale._abbr:(null!=(t=ct(e))&&(this._locale=t),this)}i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",i.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var en=E("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function tn(){return this._locale}var nn=1e3,rn=6e4,on=36e5,an=126227808e5;function sn(e,t){return(e%t+t)%t}function cn(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-an:new Date(e,t,n).valueOf()}function un(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-an:Date.UTC(e,t,n)}function dn(e,t){return t.erasAbbrRegex(e)}function ln(){var e,t,n=[],r=[],i=[],o=[],a=this.eras();for(e=0,t=a.length;e<t;++e)r.push(ge(a[e].name)),n.push(ge(a[e].abbr)),i.push(ge(a[e].narrow)),o.push(ge(a[e].name)),o.push(ge(a[e].abbr)),o.push(ge(a[e].narrow));this._erasRegex=new RegExp("^("+o.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+r.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}function hn(e,t){N(0,[e,e.length],0,t)}function pn(e,t,n,r,i){var o;return null==e?Le(this,r,i).year:(t>(o=ze(e,r,i))&&(t=o),fn.call(this,e,t,n,r,i))}function fn(e,t,n,r,i){var o=Fe(e,t,n,r,i),a=Oe(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}N("N",0,0,"eraAbbr"),N("NN",0,0,"eraAbbr"),N("NNN",0,0,"eraAbbr"),N("NNNN",0,0,"eraName"),N("NNNNN",0,0,"eraNarrow"),N("y",["y",1],"yo","eraYear"),N("y",["yy",2],0,"eraYear"),N("y",["yyy",3],0,"eraYear"),N("y",["yyyy",4],0,"eraYear"),fe("N",dn),fe("NN",dn),fe("NNN",dn),fe("NNNN",(function(e,t){return t.erasNameRegex(e)})),fe("NNNNN",(function(e,t){return t.erasNarrowRegex(e)})),ye(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,n,r){var i=n._locale.erasParse(e,r,n._strict);i?m(n).era=i:m(n).invalidEra=e})),fe("y",ue),fe("yy",ue),fe("yyy",ue),fe("yyyy",ue),fe("yo",(function(e,t){return t._eraYearOrdinalRegex||ue})),ye(["y","yy","yyy","yyyy"],0),ye(["yo"],(function(e,t,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[0]=n._locale.eraYearOrdinalParse(e,i):t[0]=parseInt(e,10)})),N(0,["gg",2],0,(function(){return this.weekYear()%100})),N(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),hn("gggg","weekYear"),hn("ggggg","weekYear"),hn("GGGG","isoWeekYear"),hn("GGGGG","isoWeekYear"),U("weekYear","gg"),U("isoWeekYear","GG"),G("weekYear",1),G("isoWeekYear",1),fe("G",de),fe("g",de),fe("GG",re,Q),fe("gg",re,Q),fe("GGGG",se,te),fe("gggg",se,te),fe("GGGGG",ce,ne),fe("ggggg",ce,ne),_e(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,r){t[r.substr(0,2)]=$(e)})),_e(["gg","GG"],(function(e,t,n,r){t[r]=i.parseTwoDigitYear(e)})),N("Q",0,"Qo","quarter"),U("quarter","Q"),G("quarter",7),fe("Q",J),ye("Q",(function(e,t){t[1]=3*($(e)-1)})),N("D",["DD",2],"Do","date"),U("date","D"),G("date",9),fe("D",re),fe("DD",re,Q),fe("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),ye(["D","DD"],2),ye("Do",(function(e,t){t[2]=$(e.match(re)[0])}));var mn=Z("Date",!0);N("DDD",["DDDD",3],"DDDo","dayOfYear"),U("dayOfYear","DDD"),G("dayOfYear",4),fe("DDD",ae),fe("DDDD",ee),ye(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=$(e)})),N("m",["mm",2],0,"minute"),U("minute","m"),G("minute",14),fe("m",re),fe("mm",re,Q),ye(["m","mm"],4);var gn=Z("Minutes",!1);N("s",["ss",2],0,"second"),U("second","s"),G("second",15),fe("s",re),fe("ss",re,Q),ye(["s","ss"],5);var vn,yn,_n=Z("Seconds",!1);for(N("S",0,0,(function(){return~~(this.millisecond()/100)})),N(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),N(0,["SSS",3],0,"millisecond"),N(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),N(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),N(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),N(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),N(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),N(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),U("millisecond","ms"),G("millisecond",16),fe("S",ae,J),fe("SS",ae,Q),fe("SSS",ae,ee),vn="SSSS";vn.length<=9;vn+="S")fe(vn,ue);function wn(e,t){t[6]=$(1e3*("0."+e))}for(vn="S";vn.length<=9;vn+="S")ye(vn,wn);yn=Z("Milliseconds",!1),N("z",0,0,"zoneAbbr"),N("zz",0,0,"zoneName");var bn=b.prototype;function kn(e){return e}bn.add=$t,bn.calendar=function(e,t){1===arguments.length&&(arguments[0]?Xt(arguments[0])?(e=arguments[0],t=void 0):Kt(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||Ct(),r=Ft(n,this).startOf("day"),o=i.calendarFormat(this,r)||"sameElse",a=t&&(x(t[o])?t[o].call(this,n):t[o]);return this.format(a||this.localeData().calendar(o,this,Ct(n)))},bn.clone=function(){return new b(this)},bn.diff=function(e,t,n){var r,i,o;if(!this.isValid())return NaN;if(!(r=Ft(e,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),t=V(t)){case"year":o=Jt(this,r)/12;break;case"month":o=Jt(this,r);break;case"quarter":o=Jt(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-i)/864e5;break;case"week":o=(this-r-i)/6048e5;break;default:o=this-r}return n?o:Y(o)},bn.endOf=function(e){var t,n;if(void 0===(e=V(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?un:cn,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=on-sn(t+(this._isUTC?0:this.utcOffset()*rn),on)-1;break;case"minute":t=this._d.valueOf(),t+=rn-sn(t,rn)-1;break;case"second":t=this._d.valueOf(),t+=nn-sn(t,nn)-1}return this._d.setTime(t),i.updateOffset(this,!0),this},bn.format=function(e){e||(e=this.isUtc()?i.defaultFormatUtc:i.defaultFormat);var t=F(this,e);return this.localeData().postformat(t)},bn.from=function(e,t){return this.isValid()&&(k(e)&&e.isValid()||Ct(e).isValid())?Bt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},bn.fromNow=function(e){return this.from(Ct(),e)},bn.to=function(e,t){return this.isValid()&&(k(e)&&e.isValid()||Ct(e).isValid())?Bt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},bn.toNow=function(e){return this.to(Ct(),e)},bn.get=function(e){return x(this[e=V(e)])?this[e]():this},bn.invalidAt=function(){return m(this).overflow},bn.isAfter=function(e,t){var n=k(e)?e:Ct(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=V(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},bn.isBefore=function(e,t){var n=k(e)?e:Ct(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=V(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},bn.isBetween=function(e,t,n,r){var i=k(e)?e:Ct(e),o=k(t)?t:Ct(t);return!!(this.isValid()&&i.isValid()&&o.isValid())&&("("===(r=r||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(o,n):!this.isAfter(o,n))},bn.isSame=function(e,t){var n,r=k(e)?e:Ct(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=V(t)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},bn.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},bn.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},bn.isValid=function(){return g(this)},bn.lang=en,bn.locale=Qt,bn.localeData=tn,bn.max=xt,bn.min=jt,bn.parsingFlags=function(){return p({},m(this))},bn.set=function(e,t){if("object"==typeof e){var n,r=function(e){var t,n=[];for(t in e)s(e,t)&&n.push({unit:t,priority:W[t]});return n.sort((function(e,t){return e.priority-t.priority})),n}(e=B(e)),i=r.length;for(n=0;n<i;n++)this[r[n].unit](e[r[n].unit])}else if(x(this[e=V(e)]))return this[e](t);return this},bn.startOf=function(e){var t,n;if(void 0===(e=V(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?un:cn,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=sn(t+(this._isUTC?0:this.utcOffset()*rn),on);break;case"minute":t=this._d.valueOf(),t-=sn(t,rn);break;case"second":t=this._d.valueOf(),t-=sn(t,nn)}return this._d.setTime(t),i.updateOffset(this,!0),this},bn.subtract=Zt,bn.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},bn.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},bn.toDate=function(){return new Date(this.valueOf())},bn.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?F(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):x(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",F(n,"Z")):F(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},bn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,r="moment",i="";return this.isLocal()||(r=0===this.utcOffset()?"moment.utc":"moment.parseZone",i="Z"),e="["+r+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY","-MM-DD[T]HH:mm:ss.SSS",n=i+'[")]',this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+n)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(bn[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),bn.toJSON=function(){return this.isValid()?this.toISOString():null},bn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},bn.unix=function(){return Math.floor(this.valueOf()/1e3)},bn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},bn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},bn.eraName=function(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].name;if(r[e].until<=n&&n<=r[e].since)return r[e].name}return""},bn.eraNarrow=function(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].narrow;if(r[e].until<=n&&n<=r[e].since)return r[e].narrow}return""},bn.eraAbbr=function(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].abbr;if(r[e].until<=n&&n<=r[e].since)return r[e].abbr}return""},bn.eraYear=function(){var e,t,n,r,o=this.localeData().eras();for(e=0,t=o.length;e<t;++e)if(n=o[e].since<=o[e].until?1:-1,r=this.clone().startOf("day").valueOf(),o[e].since<=r&&r<=o[e].until||o[e].until<=r&&r<=o[e].since)return(this.year()-i(o[e].since).year())*n+o[e].offset;return this.year()},bn.year=Ae,bn.isLeapYear=function(){return H(this.year())},bn.weekYear=function(e){return pn.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},bn.isoWeekYear=function(e){return pn.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},bn.quarter=bn.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},bn.month=Ie,bn.daysInMonth=function(){return ke(this.year(),this.month())},bn.week=bn.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},bn.isoWeek=bn.isoWeeks=function(e){var t=Le(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},bn.weeksInYear=function(){var e=this.localeData()._week;return ze(this.year(),e.dow,e.doy)},bn.weeksInWeekYear=function(){var e=this.localeData()._week;return ze(this.weekYear(),e.dow,e.doy)},bn.isoWeeksInYear=function(){return ze(this.year(),1,4)},bn.isoWeeksInISOWeekYear=function(){return ze(this.isoWeekYear(),1,4)},bn.date=mn,bn.day=bn.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},bn.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},bn.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},bn.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},bn.hour=bn.hours=Je,bn.minute=bn.minutes=gn,bn.second=bn.seconds=_n,bn.millisecond=bn.milliseconds=yn,bn.utcOffset=function(e,t,n){var r,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Nt(he,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(r=Lt(this)),this._offset=e,this._isUTC=!0,null!=r&&this.add(r,"m"),o!==e&&(!t||this._changeInProgress?Yt(this,Bt(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:Lt(this)},bn.utc=function(e){return this.utcOffset(0,e)},bn.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Lt(this),"m")),this},bn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Nt(le,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},bn.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Ct(e).utcOffset():0,(this.utcOffset()-e)%60==0)},bn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},bn.isLocal=function(){return!!this.isValid()&&!this._isUTC},bn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},bn.isUtc=zt,bn.isUTC=zt,bn.zoneAbbr=function(){return this._isUTC?"UTC":""},bn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},bn.dates=E("dates accessor is deprecated. Use date instead.",mn),bn.months=E("months accessor is deprecated. Use month instead",Ie),bn.years=E("years accessor is deprecated. Use year instead",Ae),bn.zone=E("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()})),bn.isDSTShifted=E("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!u(this._isDSTShifted))return this._isDSTShifted;var e,t={};return w(t,this),(t=Et(t))._a?(e=t._isUTC?f(t._a):Ct(t._a),this._isDSTShifted=this.isValid()&&function(e,t,n){var r,i=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(r=0;r<i;r++)(n&&e[r]!==t[r]||!n&&$(e[r])!==$(t[r]))&&a++;return a+o}(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}));var Sn=I.prototype;function En(e,t,n,r){var i=ct(),o=f().set(r,t);return i[n](o,e)}function Tn(e,t,n){if(d(e)&&(t=e,e=void 0),e=e||"",null!=t)return En(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=En(e,r,n,"month");return i}function Cn(e,t,n,r){"boolean"==typeof e?(d(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,d(t)&&(n=t,t=void 0),t=t||"");var i,o=ct(),a=e?o._week.dow:0,s=[];if(null!=n)return En(t,(n+a)%7,r,"day");for(i=0;i<7;i++)s[i]=En(t,(i+a)%7,r,"day");return s}Sn.calendar=function(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return x(r)?r.call(t,n):r},Sn.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(R).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])},Sn.invalidDate=function(){return this._invalidDate},Sn.ordinal=function(e){return this._ordinal.replace("%d",e)},Sn.preparse=kn,Sn.postformat=kn,Sn.relativeTime=function(e,t,n,r){var i=this._relativeTime[n];return x(i)?i(e,t,n,r):i.replace(/%d/i,e)},Sn.pastFuture=function(e,t){var n=this._relativeTime[e>0?"future":"past"];return x(n)?n(t):n.replace(/%s/i,t)},Sn.set=function(e){var t,n;for(n in e)s(e,n)&&(x(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},Sn.eras=function(e,t){var n,r,o,a=this._eras||ct("en")._eras;for(n=0,r=a.length;n<r;++n)switch("string"==typeof a[n].since&&(o=i(a[n].since).startOf("day"),a[n].since=o.valueOf()),typeof a[n].until){case"undefined":a[n].until=1/0;break;case"string":o=i(a[n].until).startOf("day").valueOf(),a[n].until=o.valueOf()}return a},Sn.erasParse=function(e,t,n){var r,i,o,a,s,c=this.eras();for(e=e.toUpperCase(),r=0,i=c.length;r<i;++r)if(o=c[r].name.toUpperCase(),a=c[r].abbr.toUpperCase(),s=c[r].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(a===e)return c[r];break;case"NNNN":if(o===e)return c[r];break;case"NNNNN":if(s===e)return c[r]}else if([o,a,s].indexOf(e)>=0)return c[r]},Sn.erasConvertYear=function(e,t){var n=e.since<=e.until?1:-1;return void 0===t?i(e.since).year():i(e.since).year()+(t-e.offset)*n},Sn.erasAbbrRegex=function(e){return s(this,"_erasAbbrRegex")||ln.call(this),e?this._erasAbbrRegex:this._erasRegex},Sn.erasNameRegex=function(e){return s(this,"_erasNameRegex")||ln.call(this),e?this._erasNameRegex:this._erasRegex},Sn.erasNarrowRegex=function(e){return s(this,"_erasNarrowRegex")||ln.call(this),e?this._erasNarrowRegex:this._erasRegex},Sn.months=function(e,t){return e?o(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Te).test(t)?"format":"standalone"][e.month()]:o(this._months)?this._months:this._months.standalone},Sn.monthsShort=function(e,t){return e?o(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Te.test(t)?"format":"standalone"][e.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},Sn.monthsParse=function(e,t,n){var r,i,o;if(this._monthsParseExact)return xe.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=f([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}},Sn.monthsRegex=function(e){return this._monthsParseExact?(s(this,"_monthsRegex")||Me.call(this),e?this._monthsStrictRegex:this._monthsRegex):(s(this,"_monthsRegex")||(this._monthsRegex=je),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},Sn.monthsShortRegex=function(e){return this._monthsParseExact?(s(this,"_monthsRegex")||Me.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(s(this,"_monthsShortRegex")||(this._monthsShortRegex=Ce),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},Sn.week=function(e){return Le(e,this._week.dow,this._week.doy).week},Sn.firstDayOfYear=function(){return this._week.doy},Sn.firstDayOfWeek=function(){return this._week.dow},Sn.weekdays=function(e,t){var n=o(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Ue(n,this._week.dow):e?n[e.day()]:n},Sn.weekdaysMin=function(e){return!0===e?Ue(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},Sn.weekdaysShort=function(e){return!0===e?Ue(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},Sn.weekdaysParse=function(e,t,n){var r,i,o;if(this._weekdaysParseExact)return $e.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=f([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}},Sn.weekdaysRegex=function(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Ze.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(s(this,"_weekdaysRegex")||(this._weekdaysRegex=Ge),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},Sn.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Ze.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(s(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=He),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},Sn.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Ze.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(s(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ye),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},Sn.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},Sn.meridiem=function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},at("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===$(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),i.lang=E("moment.lang is deprecated. Use moment.locale instead.",at),i.langData=E("moment.langData is deprecated. Use moment.localeData instead.",ct);var jn=Math.abs;function xn(e,t,n,r){var i=Bt(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function Pn(e){return e<0?Math.floor(e):Math.ceil(e)}function In(e){return 4800*e/146097}function Mn(e){return 146097*e/4800}function Rn(e){return function(){return this.as(e)}}var An=Rn("ms"),Dn=Rn("s"),On=Rn("m"),Nn=Rn("h"),Fn=Rn("d"),Ln=Rn("w"),zn=Rn("M"),Un=Rn("Q"),Vn=Rn("y");function Bn(e){return function(){return this.isValid()?this._data[e]:NaN}}var Wn=Bn("milliseconds"),Gn=Bn("seconds"),Hn=Bn("minutes"),Yn=Bn("hours"),$n=Bn("days"),Zn=Bn("months"),qn=Bn("years");var Xn=Math.round,Kn={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Jn(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}var Qn=Math.abs;function er(e){return(e>0)-(e<0)||+e}function tr(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,r,i,o,a,s,c=Qn(this._milliseconds)/1e3,u=Qn(this._days),d=Qn(this._months),l=this.asSeconds();return l?(e=Y(c/60),t=Y(e/60),c%=60,e%=60,n=Y(d/12),d%=12,r=c?c.toFixed(3).replace(/\.?0+$/,""):"",i=l<0?"-":"",o=er(this._months)!==er(l)?"-":"",a=er(this._days)!==er(l)?"-":"",s=er(this._milliseconds)!==er(l)?"-":"",i+"P"+(n?o+n+"Y":"")+(d?o+d+"M":"")+(u?a+u+"D":"")+(t||e||c?"T":"")+(t?s+t+"H":"")+(e?s+e+"M":"")+(c?s+r+"S":"")):"P0D"}var nr=Mt.prototype;return nr.isValid=function(){return this._isValid},nr.abs=function(){var e=this._data;return this._milliseconds=jn(this._milliseconds),this._days=jn(this._days),this._months=jn(this._months),e.milliseconds=jn(e.milliseconds),e.seconds=jn(e.seconds),e.minutes=jn(e.minutes),e.hours=jn(e.hours),e.months=jn(e.months),e.years=jn(e.years),this},nr.add=function(e,t){return xn(this,e,t,1)},nr.subtract=function(e,t){return xn(this,e,t,-1)},nr.as=function(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=V(e))||"quarter"===e||"year"===e)switch(t=this._days+r/864e5,n=this._months+In(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Mn(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}},nr.asMilliseconds=An,nr.asSeconds=Dn,nr.asMinutes=On,nr.asHours=Nn,nr.asDays=Fn,nr.asWeeks=Ln,nr.asMonths=zn,nr.asQuarters=Un,nr.asYears=Vn,nr.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*$(this._months/12):NaN},nr._bubble=function(){var e,t,n,r,i,o=this._milliseconds,a=this._days,s=this._months,c=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*Pn(Mn(s)+a),a=0,s=0),c.milliseconds=o%1e3,e=Y(o/1e3),c.seconds=e%60,t=Y(e/60),c.minutes=t%60,n=Y(t/60),c.hours=n%24,a+=Y(n/24),s+=i=Y(In(a)),a-=Pn(Mn(i)),r=Y(s/12),s%=12,c.days=a,c.months=s,c.years=r,this},nr.clone=function(){return Bt(this)},nr.get=function(e){return e=V(e),this.isValid()?this[e+"s"]():NaN},nr.milliseconds=Wn,nr.seconds=Gn,nr.minutes=Hn,nr.hours=Yn,nr.days=$n,nr.weeks=function(){return Y(this.days()/7)},nr.months=Zn,nr.years=qn,nr.humanize=function(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,r,i=!1,o=Kn;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(i=e),"object"==typeof t&&(o=Object.assign({},Kn,t),null!=t.s&&null==t.ss&&(o.ss=t.s-1)),r=function(e,t,n,r){var i=Bt(e).abs(),o=Xn(i.as("s")),a=Xn(i.as("m")),s=Xn(i.as("h")),c=Xn(i.as("d")),u=Xn(i.as("M")),d=Xn(i.as("w")),l=Xn(i.as("y")),h=o<=n.ss&&["s",o]||o<n.s&&["ss",o]||a<=1&&["m"]||a<n.m&&["mm",a]||s<=1&&["h"]||s<n.h&&["hh",s]||c<=1&&["d"]||c<n.d&&["dd",c];return null!=n.w&&(h=h||d<=1&&["w"]||d<n.w&&["ww",d]),(h=h||u<=1&&["M"]||u<n.M&&["MM",u]||l<=1&&["y"]||["yy",l])[2]=t,h[3]=+e>0,h[4]=r,Jn.apply(null,h)}(this,!i,o,n=this.localeData()),i&&(r=n.pastFuture(+this,r)),n.postformat(r)},nr.toISOString=tr,nr.toString=tr,nr.toJSON=tr,nr.locale=Qt,nr.localeData=tn,nr.toIsoString=E("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",tr),nr.lang=en,N("X",0,0,"unix"),N("x",0,0,"valueOf"),fe("x",de),fe("X",/[+-]?\d+(\.\d{1,3})?/),ye("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e))})),ye("x",(function(e,t,n){n._d=new Date($(e))})),i.version="2.29.4",t=Ct,i.fn=bn,i.min=function(){return Pt("isBefore",[].slice.call(arguments,0))},i.max=function(){return Pt("isAfter",[].slice.call(arguments,0))},i.now=function(){return Date.now?Date.now():+new Date},i.utc=f,i.unix=function(e){return Ct(1e3*e)},i.months=function(e,t){return Tn(e,t,"months")},i.isDate=l,i.locale=at,i.invalid=v,i.duration=Bt,i.isMoment=k,i.weekdays=function(e,t,n){return Cn(e,t,n,"weekdays")},i.parseZone=function(){return Ct.apply(null,arguments).parseZone()},i.localeData=ct,i.isDuration=Rt,i.monthsShort=function(e,t){return Tn(e,t,"monthsShort")},i.weekdaysMin=function(e,t,n){return Cn(e,t,n,"weekdaysMin")},i.defineLocale=st,i.updateLocale=function(e,t){if(null!=t){var n,r,i=et;null!=tt[e]&&null!=tt[e].parentLocale?tt[e].set(P(tt[e]._config,t)):(null!=(r=ot(e))&&(i=r._config),t=P(i,t),null==r&&(t.abbr=e),(n=new I(t)).parentLocale=tt[e],tt[e]=n),at(e)}else null!=tt[e]&&(null!=tt[e].parentLocale?(tt[e]=tt[e].parentLocale,e===at()&&at(e)):null!=tt[e]&&delete tt[e]);return tt[e]},i.locales=function(){return T(tt)},i.weekdaysShort=function(e,t,n){return Cn(e,t,n,"weekdaysShort")},i.normalizeUnits=V,i.relativeTimeRounding=function(e){return void 0===e?Xn:"function"==typeof e&&(Xn=e,!0)},i.relativeTimeThreshold=function(e,t){return void 0!==Kn[e]&&(void 0===t?Kn[e]:(Kn[e]=t,"s"===e&&(Kn.ss=t-1),!0))},i.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},i.prototype=bn,i.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},i}()},1378:function(e){var t=1e3,n=60*t,r=60*n,i=24*r;function o(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,a){a=a||{};var s,c,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(o){var a=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return 6048e5*a;case"days":case"day":case"d":return a*i;case"hours":case"hour":case"hrs":case"hr":case"h":return a*r;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===u&&isFinite(e))return a.long?(s=e,(c=Math.abs(s))>=i?o(s,c,i,"day"):c>=r?o(s,c,r,"hour"):c>=n?o(s,c,n,"minute"):c>=t?o(s,c,t,"second"):s+" ms"):function(e){var o=Math.abs(e);return o>=i?Math.round(e/i)+"d":o>=r?Math.round(e/r)+"h":o>=n?Math.round(e/n)+"m":o>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},3682:function(e,t,n){"use strict";var r=n(8058),i={};i.rules=n(2379).map((function(e){return{rule:e,suffix:e.replace(/^(\*\.|\!)/,""),punySuffix:-1,wildcard:"*"===e.charAt(0),exception:"!"===e.charAt(0)}})),i.endsWith=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},i.findRule=function(e){var t=r.toASCII(e);return i.rules.reduce((function(e,n){return-1===n.punySuffix&&(n.punySuffix=r.toASCII(n.suffix)),i.endsWith(t,"."+n.punySuffix)||t===n.punySuffix?n:e}),null)},t.errorCodes={DOMAIN_TOO_SHORT:"Domain name too short.",DOMAIN_TOO_LONG:"Domain name too long. It should be no more than 255 chars.",LABEL_STARTS_WITH_DASH:"Domain name label can not start with a dash.",LABEL_ENDS_WITH_DASH:"Domain name label can not end with a dash.",LABEL_TOO_LONG:"Domain name label should be at most 63 chars long.",LABEL_TOO_SHORT:"Domain name label should be at least 1 character long.",LABEL_INVALID_CHARS:"Domain name label can only contain alphanumeric characters or dashes."},i.validate=function(e){var t=r.toASCII(e);if(t.length<1)return"DOMAIN_TOO_SHORT";if(t.length>255)return"DOMAIN_TOO_LONG";for(var n,i=t.split("."),o=0;o<i.length;++o){if(!(n=i[o]).length)return"LABEL_TOO_SHORT";if(n.length>63)return"LABEL_TOO_LONG";if("-"===n.charAt(0))return"LABEL_STARTS_WITH_DASH";if("-"===n.charAt(n.length-1))return"LABEL_ENDS_WITH_DASH";if(!/^[a-z0-9\-]+$/.test(n))return"LABEL_INVALID_CHARS"}},t.parse=function(e){if("string"!=typeof e)throw new TypeError("Domain name must be a string.");var n=e.slice(0).toLowerCase();"."===n.charAt(n.length-1)&&(n=n.slice(0,n.length-1));var o=i.validate(n);if(o)return{input:e,error:{message:t.errorCodes[o],code:o}};var a={input:e,tld:null,sld:null,domain:null,subdomain:null,listed:!1},s=n.split(".");if("local"===s[s.length-1])return a;var c=function(){return/xn--/.test(n)?(a.domain&&(a.domain=r.toASCII(a.domain)),a.subdomain&&(a.subdomain=r.toASCII(a.subdomain)),a):a},u=i.findRule(n);if(!u)return s.length<2?a:(a.tld=s.pop(),a.sld=s.pop(),a.domain=[a.sld,a.tld].join("."),s.length&&(a.subdomain=s.pop()),c());a.listed=!0;var d=u.suffix.split("."),l=s.slice(0,s.length-d.length);return u.exception&&l.push(d.shift()),a.tld=d.join("."),l.length?(u.wildcard&&(d.unshift(l.pop()),a.tld=d.join(".")),l.length?(a.sld=l.pop(),a.domain=[a.sld,a.tld].join("."),l.length&&(a.subdomain=l.join(".")),c()):c()):c()},t.get=function(e){return e&&t.parse(e).domain||null},t.isValid=function(e){var n=t.parse(e);return Boolean(n.domain&&n.listed)}},8058:function(e,t,n){"use strict";n.r(t),n.d(t,{decode:function(){return v},encode:function(){return y},toASCII:function(){return w},toUnicode:function(){return _},ucs2decode:function(){return p},ucs2encode:function(){return f}});const r=2147483647,i=36,o=/^xn--/,a=/[^\0-\x7E]/,s=/[\x2E\u3002\uFF0E\uFF61]/g,c={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},u=Math.floor,d=String.fromCharCode;function l(e){throw new RangeError(c[e])}function h(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]);const i=function(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}((e=e.replace(s,".")).split("."),t).join(".");return r+i}function p(e){const t=[];let n=0;const r=e.length;for(;n<r;){const i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const r=e.charCodeAt(n++);56320==(64512&r)?t.push(((1023&i)<<10)+(1023&r)+65536):(t.push(i),n--)}else t.push(i)}return t}const f=e=>String.fromCodePoint(...e),m=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},g=function(e,t,n){let r=0;for(e=n?u(e/700):e>>1,e+=u(e/t);e>455;r+=i)e=u(e/35);return u(r+36*e/(e+38))},v=function(e){const t=[],n=e.length;let o=0,a=128,s=72,c=e.lastIndexOf("-");c<0&&(c=0);for(let n=0;n<c;++n)e.charCodeAt(n)>=128&&l("not-basic"),t.push(e.charCodeAt(n));for(let h=c>0?c+1:0;h<n;){let c=o;for(let t=1,a=i;;a+=i){h>=n&&l("invalid-input");const c=(d=e.charCodeAt(h++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:i;(c>=i||c>u((r-o)/t))&&l("overflow"),o+=c*t;const p=a<=s?1:a>=s+26?26:a-s;if(c<p)break;const f=i-p;t>u(r/f)&&l("overflow"),t*=f}const p=t.length+1;s=g(o-c,p,0==c),u(o/p)>r-a&&l("overflow"),a+=u(o/p),o%=p,t.splice(o++,0,a)}var d;return String.fromCodePoint(...t)},y=function(e){const t=[];let n=(e=p(e)).length,o=128,a=0,s=72;for(const n of e)n<128&&t.push(d(n));let c=t.length,h=c;for(c&&t.push("-");h<n;){let n=r;for(const t of e)t>=o&&t<n&&(n=t);const p=h+1;n-o>u((r-a)/p)&&l("overflow"),a+=(n-o)*p,o=n;for(const n of e)if(n<o&&++a>r&&l("overflow"),n==o){let e=a;for(let n=i;;n+=i){const r=n<=s?1:n>=s+26?26:n-s;if(e<r)break;const o=e-r,a=i-r;t.push(d(m(r+o%a,0))),e=u(o/a)}t.push(d(m(e,0))),s=g(a,p,h==c),a=0,++h}++a,++o}return t.join("")},_=function(e){return h(e,(function(e){return o.test(e)?v(e.slice(4).toLowerCase()):e}))},w=function(e){return h(e,(function(e){return a.test(e)?"xn--"+y(e):e}))},b={version:"2.1.0",ucs2:{decode:p,encode:f},decode:v,encode:y,toASCII:w,toUnicode:_};t.default=b},7375:function(e,t){"use strict";var n=Object.prototype.hasOwnProperty;function r(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function i(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var r,o,a=[];for(o in"string"!=typeof t&&(t="?"),e)if(n.call(e,o)){if((r=e[o])||null!=r&&!isNaN(r)||(r=""),o=i(o),r=i(r),null===o||null===r)continue;a.push(o+"="+r)}return a.length?t+a.join("&"):""},t.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,i={};t=n.exec(e);){var o=r(t[1]),a=r(t[2]);null===o||null===a||o in i||(i[o]=a)}return i}},7245:function(e){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},6294:function(e,t,n){"use strict";var r=n(2281);function i(e,t,n,i,o){var a=r.writeRtpDescription(e.kind,t);if(a+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),a+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":o||"active"),a+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?a+="a=sendrecv\r\n":e.rtpSender?a+="a=sendonly\r\n":e.rtpReceiver?a+="a=recvonly\r\n":a+="a=inactive\r\n",e.rtpSender){var s=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=s;var c="msid:"+(i?i.id:"-")+" "+s+"\r\n";a+="a="+c,a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+c,e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+c,a+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),a}function o(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},i=function(e,t,n,i){var o=r(e.parameters.apt,n),a=r(t.parameters.apt,i);return o&&a&&o.name.toLowerCase()===a.name.toLowerCase()};return e.codecs.forEach((function(r){for(var o=0;o<t.codecs.length;o++){var a=t.codecs[o];if(r.name.toLowerCase()===a.name.toLowerCase()&&r.clockRate===a.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&a.parameters.apt&&!i(r,a,e.codecs,t.codecs))continue;(a=JSON.parse(JSON.stringify(a))).numChannels=Math.min(r.numChannels,a.numChannels),n.codecs.push(a),a.rtcpFeedback=a.rtcpFeedback.filter((function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var r=0;r<t.headerExtensions.length;r++){var i=t.headerExtensions[r];if(e.uri===i.uri){n.headerExtensions.push(i);break}}})),n}function a(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function s(e,t){var n=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return n||e.addRemoteCandidate(t),!n}function c(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}e.exports=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function u(t,n,r,i){var o=new Event("track");o.track=n,o.receiver=r,o.transceiver={receiver:r},o.streams=i,e.setTimeout((function(){t._dispatchEvent("track",o)}))}var d=function(n){var i=this,o=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){i[e]=o[e].bind(o)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw c("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var r=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var i="string"==typeof r;return i&&(r=[r]),r=r.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||n?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(n=!0,!0)})),delete e.url,e.urls=i?r[0]:r,!!r.length}}))}(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var a=n.iceCandidatePoolSize;a>0;a--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=r.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(d.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(d.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),d.prototype.onicecandidate=null,d.prototype.onaddstream=null,d.prototype.ontrack=null,d.prototype.onremovestream=null,d.prototype.onsignalingstatechange=null,d.prototype.oniceconnectionstatechange=null,d.prototype.onconnectionstatechange=null,d.prototype.onicegatheringstatechange=null,d.prototype.onnegotiationneeded=null,d.prototype.ondatachannel=null,d.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},d.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},d.prototype.getConfiguration=function(){return this._config},d.prototype.getLocalStreams=function(){return this.localStreams},d.prototype.getRemoteStreams=function(){return this.remoteStreams},d.prototype._createTransceiver=function(e,t){var n=this.transceivers.length>0,r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var i=this._createIceAndDtlsTransports();r.iceTransport=i.iceTransport,r.dtlsTransport=i.dtlsTransport}return t||this.transceivers.push(r),r},d.prototype.addTrack=function(t,n){if(this._isClosed)throw c("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find((function(e){return e.track===t})))throw c("InvalidAccessError","Track already exists.");for(var i=0;i<this.transceivers.length;i++)this.transceivers[i].track||this.transceivers[i].kind!==t.kind||(r=this.transceivers[i]);return r||(r=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),r.track=t,r.stream=n,r.rtpSender=new e.RTCRtpSender(t,r.dtlsTransport),r.rtpSender},d.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach((function(t){n.addTrack(t,e)}));else{var r=e.clone();e.getTracks().forEach((function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",(function(e){n.enabled=e.enabled}))})),r.getTracks().forEach((function(e){n.addTrack(e,r)}))}},d.prototype.removeTrack=function(t){if(this._isClosed)throw c("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find((function(e){return e.rtpSender===t}));if(!n)throw c("InvalidAccessError","Sender was not created by this connection.");var r=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},d.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var n=t.getSenders().find((function(t){return t.track===e}));n&&t.removeTrack(n)}))},d.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},d.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},d.prototype._createIceGatherer=function(t,n){var r=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;i.state=n?"completed":"gathering",null!==r.transceivers[t].bufferedCandidateEvents&&r.transceivers[t].bufferedCandidateEvents.push(e)},i.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),i},d.prototype._gather=function(t,n){var i=this,o=this.transceivers[n].iceGatherer;if(!o.onlocalcandidate){var a=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,o.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),o.onlocalcandidate=function(e){if(!(i.usingBundle&&n>0)){var a=new Event("icecandidate");a.candidate={sdpMid:t,sdpMLineIndex:n};var s=e.candidate,c=!s||0===Object.keys(s).length;if(c)"new"!==o.state&&"gathering"!==o.state||(o.state="completed");else{"new"===o.state&&(o.state="gathering"),s.component=1,s.ufrag=o.getLocalParameters().usernameFragment;var u=r.writeCandidate(s);a.candidate=Object.assign(a.candidate,r.parseCandidate(u)),a.candidate.candidate=u,a.candidate.toJSON=function(){return{candidate:a.candidate.candidate,sdpMid:a.candidate.sdpMid,sdpMLineIndex:a.candidate.sdpMLineIndex,usernameFragment:a.candidate.usernameFragment}}}var d=r.getMediaSections(i._localDescription.sdp);d[a.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+a.candidate.candidate+"\r\n",i._localDescription.sdp=r.getDescription(i._localDescription.sdp)+d.join("");var l=i.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==i.iceGatheringState&&(i.iceGatheringState="gathering",i._emitGatheringStateChange()),c||i._dispatchEvent("icecandidate",a),l&&(i._dispatchEvent("icecandidate",new Event("icecandidate")),i.iceGatheringState="complete",i._emitGatheringStateChange())}},e.setTimeout((function(){a.forEach((function(e){o.onlocalcandidate(e)}))}),0)}},d.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var r=new e.RTCDtlsTransport(n);return r.ondtlsstatechange=function(){t._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:r}},d.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var r=this.transceivers[e].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[e].dtlsTransport)},d.prototype._transceive=function(e,n,i){var a=o(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(a.encodings=e.sendEncodingParameters,a.rtcp={cname:r.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(a.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(a)),i&&e.rtpReceiver&&a.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?a.encodings=e.recvEncodingParameters:a.encodings=[{}],a.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(a.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(a.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(a))},d.prototype.setLocalDescription=function(e){var t,n,i=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(c("TypeError",'Unsupported type "'+e.type+'"'));if(!a("setLocalDescription",e.type,i.signalingState)||i._isClosed)return Promise.reject(c("InvalidStateError","Can not set local "+e.type+" in state "+i.signalingState));if("offer"===e.type)t=r.splitSections(e.sdp),n=t.shift(),t.forEach((function(e,t){var n=r.parseRtpParameters(e);i.transceivers[t].localCapabilities=n})),i.transceivers.forEach((function(e,t){i._gather(e.mid,t)}));else if("answer"===e.type){t=r.splitSections(i._remoteDescription.sdp),n=t.shift();var s=r.matchPrefix(n,"a=ice-lite").length>0;t.forEach((function(e,t){var a=i.transceivers[t],c=a.iceGatherer,u=a.iceTransport,d=a.dtlsTransport,l=a.localCapabilities,h=a.remoteCapabilities;if(!(r.isRejected(e)&&0===r.matchPrefix(e,"a=bundle-only").length||a.rejected)){var p=r.getIceParameters(e,n),f=r.getDtlsParameters(e,n);s&&(f.role="server"),i.usingBundle&&0!==t||(i._gather(a.mid,t),"new"===u.state&&u.start(c,p,s?"controlling":"controlled"),"new"===d.state&&d.start(f));var m=o(l,h);i._transceive(a,m.codecs.length>0,!1)}}))}return i._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?i._updateSignalingState("have-local-offer"):i._updateSignalingState("stable"),Promise.resolve()},d.prototype.setRemoteDescription=function(i){var d=this;if(-1===["offer","answer"].indexOf(i.type))return Promise.reject(c("TypeError",'Unsupported type "'+i.type+'"'));if(!a("setRemoteDescription",i.type,d.signalingState)||d._isClosed)return Promise.reject(c("InvalidStateError","Can not set remote "+i.type+" in state "+d.signalingState));var l={};d.remoteStreams.forEach((function(e){l[e.id]=e}));var h=[],p=r.splitSections(i.sdp),f=p.shift(),m=r.matchPrefix(f,"a=ice-lite").length>0,g=r.matchPrefix(f,"a=group:BUNDLE ").length>0;d.usingBundle=g;var v=r.matchPrefix(f,"a=ice-options:")[0];return d.canTrickleIceCandidates=!!v&&v.substr(14).split(" ").indexOf("trickle")>=0,p.forEach((function(a,c){var u=r.splitLines(a),p=r.getKind(a),v=r.isRejected(a)&&0===r.matchPrefix(a,"a=bundle-only").length,y=u[0].substr(2).split(" ")[2],_=r.getDirection(a,f),w=r.parseMsid(a),b=r.getMid(a)||r.generateIdentifier();if(v||"application"===p&&("DTLS/SCTP"===y||"UDP/DTLS/SCTP"===y))d.transceivers[c]={mid:b,kind:p,protocol:y,rejected:!0};else{var k,S,E,T,C,j,x,P,I;!v&&d.transceivers[c]&&d.transceivers[c].rejected&&(d.transceivers[c]=d._createTransceiver(p,!0));var M,R,A=r.parseRtpParameters(a);v||(M=r.getIceParameters(a,f),(R=r.getDtlsParameters(a,f)).role="client"),x=r.parseRtpEncodingParameters(a);var D=r.parseRtcpParameters(a),O=r.matchPrefix(a,"a=end-of-candidates",f).length>0,N=r.matchPrefix(a,"a=candidate:").map((function(e){return r.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===i.type||"answer"===i.type)&&!v&&g&&c>0&&d.transceivers[c]&&(d._disposeIceAndDtlsTransports(c),d.transceivers[c].iceGatherer=d.transceivers[0].iceGatherer,d.transceivers[c].iceTransport=d.transceivers[0].iceTransport,d.transceivers[c].dtlsTransport=d.transceivers[0].dtlsTransport,d.transceivers[c].rtpSender&&d.transceivers[c].rtpSender.setTransport(d.transceivers[0].dtlsTransport),d.transceivers[c].rtpReceiver&&d.transceivers[c].rtpReceiver.setTransport(d.transceivers[0].dtlsTransport)),"offer"!==i.type||v)"answer"!==i.type||v||(S=(k=d.transceivers[c]).iceGatherer,E=k.iceTransport,T=k.dtlsTransport,C=k.rtpReceiver,j=k.sendEncodingParameters,P=k.localCapabilities,d.transceivers[c].recvEncodingParameters=x,d.transceivers[c].remoteCapabilities=A,d.transceivers[c].rtcpParameters=D,N.length&&"new"===E.state&&(!m&&!O||g&&0!==c?N.forEach((function(e){s(k.iceTransport,e)})):E.setRemoteCandidates(N)),g&&0!==c||("new"===E.state&&E.start(S,M,"controlling"),"new"===T.state&&T.start(R)),!o(k.localCapabilities,k.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&k.sendEncodingParameters[0].rtx&&delete k.sendEncodingParameters[0].rtx,d._transceive(k,"sendrecv"===_||"recvonly"===_,"sendrecv"===_||"sendonly"===_),!C||"sendrecv"!==_&&"sendonly"!==_?delete k.rtpReceiver:(I=C.track,w?(l[w.stream]||(l[w.stream]=new e.MediaStream),n(I,l[w.stream]),h.push([I,C,l[w.stream]])):(l.default||(l.default=new e.MediaStream),n(I,l.default),h.push([I,C,l.default]))));else{(k=d.transceivers[c]||d._createTransceiver(p)).mid=b,k.iceGatherer||(k.iceGatherer=d._createIceGatherer(c,g)),N.length&&"new"===k.iceTransport.state&&(!O||g&&0!==c?N.forEach((function(e){s(k.iceTransport,e)})):k.iceTransport.setRemoteCandidates(N)),P=e.RTCRtpReceiver.getCapabilities(p),t<15019&&(P.codecs=P.codecs.filter((function(e){return"rtx"!==e.name}))),j=k.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var F,L=!1;"sendrecv"===_||"sendonly"===_?(L=!k.rtpReceiver,C=k.rtpReceiver||new e.RTCRtpReceiver(k.dtlsTransport,p),L&&(I=C.track,w&&"-"===w.stream||(w?(l[w.stream]||(l[w.stream]=new e.MediaStream,Object.defineProperty(l[w.stream],"id",{get:function(){return w.stream}})),Object.defineProperty(I,"id",{get:function(){return w.track}}),F=l[w.stream]):(l.default||(l.default=new e.MediaStream),F=l.default)),F&&(n(I,F),k.associatedRemoteMediaStreams.push(F)),h.push([I,C,F]))):k.rtpReceiver&&k.rtpReceiver.track&&(k.associatedRemoteMediaStreams.forEach((function(t){var n=t.getTracks().find((function(e){return e.id===k.rtpReceiver.track.id}));n&&function(t,n){n.removeTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(n,t)})),k.associatedRemoteMediaStreams=[]),k.localCapabilities=P,k.remoteCapabilities=A,k.rtpReceiver=C,k.rtcpParameters=D,k.sendEncodingParameters=j,k.recvEncodingParameters=x,d._transceive(d.transceivers[c],!1,L)}}})),void 0===d._dtlsRole&&(d._dtlsRole="offer"===i.type?"active":"passive"),d._remoteDescription={type:i.type,sdp:i.sdp},"offer"===i.type?d._updateSignalingState("have-remote-offer"):d._updateSignalingState("stable"),Object.keys(l).forEach((function(t){var n=l[t];if(n.getTracks().length){if(-1===d.remoteStreams.indexOf(n)){d.remoteStreams.push(n);var r=new Event("addstream");r.stream=n,e.setTimeout((function(){d._dispatchEvent("addstream",r)}))}h.forEach((function(e){var t=e[0],r=e[1];n.id===e[2].id&&u(d,t,r,[n])}))}})),h.forEach((function(e){e[2]||u(d,e[0],e[1],[])})),e.setTimeout((function(){d&&d.transceivers&&d.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},d.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},d.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},d.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},d.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},d.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},d.prototype.createOffer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createOffer after close"));var o=n.transceivers.filter((function(e){return"audio"===e.kind})).length,a=n.transceivers.filter((function(e){return"video"===e.kind})).length,s=arguments[0];if(s){if(s.mandatory||s.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==s.offerToReceiveAudio&&(o=!0===s.offerToReceiveAudio?1:!1===s.offerToReceiveAudio?0:s.offerToReceiveAudio),void 0!==s.offerToReceiveVideo&&(a=!0===s.offerToReceiveVideo?1:!1===s.offerToReceiveVideo?0:s.offerToReceiveVideo)}for(n.transceivers.forEach((function(e){"audio"===e.kind?--o<0&&(e.wantReceive=!1):"video"===e.kind&&--a<0&&(e.wantReceive=!1)}));o>0||a>0;)o>0&&(n._createTransceiver("audio"),o--),a>0&&(n._createTransceiver("video"),a--);var u=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach((function(i,o){var a=i.track,s=i.kind,c=i.mid||r.generateIdentifier();i.mid=c,i.iceGatherer||(i.iceGatherer=n._createIceGatherer(o,n.usingBundle));var u=e.RTCRtpSender.getCapabilities(s);t<15019&&(u.codecs=u.codecs.filter((function(e){return"rtx"!==e.name}))),u.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),i.remoteCapabilities&&i.remoteCapabilities.codecs&&i.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),u.headerExtensions.forEach((function(e){(i.remoteCapabilities&&i.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var d=i.sendEncodingParameters||[{ssrc:1001*(2*o+1)}];a&&t>=15019&&"video"===s&&!d[0].rtx&&(d[0].rtx={ssrc:d[0].ssrc+1}),i.wantReceive&&(i.rtpReceiver=new e.RTCRtpReceiver(i.dtlsTransport,s)),i.localCapabilities=u,i.sendEncodingParameters=d})),"max-compat"!==n._config.bundlePolicy&&(u+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),u+="a=ice-options:trickle\r\n",n.transceivers.forEach((function(e,t){u+=i(e,e.localCapabilities,"offer",e.stream,n._dtlsRole),u+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,u+="a="+r.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(u+="a=end-of-candidates\r\n"))}));var d=new e.RTCSessionDescription({type:"offer",sdp:u});return Promise.resolve(d)},d.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return Promise.reject(c("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var a=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(a+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),a+="a=ice-options:trickle\r\n";var s=r.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach((function(e,r){if(!(r+1>s)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?a+="m=application 0 DTLS/SCTP 5000\r\n":a+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?a+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(a+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(a+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var c;e.stream&&("audio"===e.kind?c=e.stream.getAudioTracks()[0]:"video"===e.kind&&(c=e.stream.getVideoTracks()[0]),c&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}));var u=o(e.localCapabilities,e.remoteCapabilities);!u.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,a+=i(e,u,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(a+="a=rtcp-rsize\r\n")}}));var u=new e.RTCSessionDescription({type:"answer",sdp:a});return Promise.resolve(u)},d.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(i,o){if(!n._remoteDescription)return o(c("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var a=e.sdpMLineIndex;if(e.sdpMid)for(var u=0;u<n.transceivers.length;u++)if(n.transceivers[u].mid===e.sdpMid){a=u;break}var d=n.transceivers[a];if(!d)return o(c("OperationError","Can not add ICE candidate"));if(d.rejected)return i();var l=Object.keys(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===l.protocol&&(0===l.port||9===l.port))return i();if(l.component&&1!==l.component)return i();if((0===a||a>0&&d.iceTransport!==n.transceivers[0].iceTransport)&&!s(d.iceTransport,l))return o(c("OperationError","Can not add ICE candidate"));var h=e.candidate.trim();0===h.indexOf("a=")&&(h=h.substr(2)),(t=r.getMediaSections(n._remoteDescription.sdp))[a]+="a="+(l.type?h:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join("")}else for(var p=0;p<n.transceivers.length&&(n.transceivers[p].rejected||(n.transceivers[p].iceTransport.addRemoteCandidate({}),(t=r.getMediaSections(n._remoteDescription.sdp))[p]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join(""),!n.usingBundle));p++);i()}))},d.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)})),!n)throw c("InvalidAccessError","Invalid selector.");return n.getStats()}var r=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&r.push(e[t].getStats())}))})),Promise.all(r).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var r=n.prototype.getStats;n.prototype.getStats=function(){return r.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(n){var r;e[n].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(r=e[n]).type]||r.type,t.set(n,e[n])})),t}))}}}));var l=["createOffer","createAnswer"];return l.forEach((function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(l=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),d}},2281:function(e){"use strict";var t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},t.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},t.getDescription=function(e){var n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){var n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((function(e){return 0===e.indexOf(n)}))},t.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1]}return n},t.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},t.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)n[(t=r[i].trim().split("="))[0].trim()]=t[1];return n},t.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},t.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},t.getMid=function(e){var n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substr(6)},t.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){var r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],i=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&i?{usernameFragment:r.substr(12),password:i.substr(10)}:null},t.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},t.parseRtpParameters=function(e){for(var n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" "),i=3;i<r.length;i++){var o=r[i],a=t.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(a){var s=t.parseRtpMap(a),c=t.matchPrefix(e,"a=fmtp:"+o+" ");switch(s.parameters=c.length?t.parseFmtp(c[0]):{},s.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(t.parseRtcpFb),n.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(s.name.toUpperCase())}}}return t.matchPrefix(e,"a=extmap:").forEach((function(e){n.headerExtensions.push(t.parseExtmap(e))})),n},t.writeRtpDescription=function(e,n){var r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=n.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((function(e){r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)}));var i=0;return n.codecs.forEach((function(e){e.maxptime>i&&(i=e.maxptime)})),i>0&&(r+="a=maxptime:"+i+"\r\n"),r+="a=rtcp-mux\r\n",n.headerExtensions&&n.headerExtensions.forEach((function(e){r+=t.writeExtmap(e)})),r},t.parseRtpEncodingParameters=function(e){var n,r=[],i=t.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),a=-1!==i.fecMechanisms.indexOf("ULPFEC"),s=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=s.length>0&&s[0].ssrc,u=t.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===c&&(n=u[0][1]),i.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&n&&(t.rtx={ssrc:n}),r.push(t),o&&((t=JSON.parse(JSON.stringify(t))).fec={ssrc:c,mechanism:a?"red+ulpfec":"red"},r.push(t))}})),0===r.length&&c&&r.push({ssrc:c});var d=t.matchPrefix(e,"b=");return d.length&&(d=0===d[0].indexOf("b=TIAS:")?parseInt(d[0].substr(7),10):0===d[0].indexOf("b=AS:")?1e3*parseInt(d[0].substr(5),10)*.95-16e3:void 0,r.forEach((function(e){e.maxBitrate=d}))),r},t.parseRtcpParameters=function(e){var n={},r=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);var i=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=0===i.length;var o=t.matchPrefix(e,"a=rtcp-mux");return n.mux=o.length>0,n},t.parseMsid=function(e){var n,r=t.matchPrefix(e,"a=msid:");if(1===r.length)return{stream:(n=r[0].substr(7).split(" "))[0],track:n[1]};var i=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return i.length>0?{stream:(n=i[0].value.split(" "))[0],track:n[1]}:void 0},t.parseSctpDescription=function(e){var n,r=t.parseMLine(e),i=t.matchPrefix(e,"a=max-message-size:");i.length>0&&(n=parseInt(i[0].substr(19),10)),isNaN(n)&&(n=65536);var o=t.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:r.fmt,maxMessageSize:n};if(t.matchPrefix(e,"a=sctpmap:").length>0){var a=t.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(a[0],10),protocol:a[1],maxMessageSize:n}}},t.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,n,r){var i=void 0!==n?n:2;return"v=0\r\no="+(r||"thisisadapterortc")+" "+(e||t.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.writeMediaSection=function(e,n,r,i){var o=t.writeRtpDescription(e.kind,n);if(o+=t.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=t.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var a="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+a,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+t.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+t.localCName+"\r\n"),o},t.getDirection=function(e,n){for(var r=t.splitLines(e),i=0;i<r.length;i++)switch(r[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[i].substr(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){var n=t.splitLines(e)[0].substr(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){var n=t.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var n=t.splitLines(e),r=0;r<n.length;r++)if(n[r].length<2||"="!==n[r].charAt(1))return!1;return!0},e.exports=t},4661:function(e){var t;self,t=()=>(()=>{var e={276:e=>{var t,n=(t="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(e){var n,r,i=void 0!==(e=e||{})?e:{};i.ready=new Promise((function(e,t){n=e,r=t}));var o,a,s=Object.assign({},i),c=[],u="./this.program",d=(e,t)=>{throw t},l="";"undefined"!=typeof document&&document.currentScript&&(l=document.currentScript.src),t&&(l=t),l=0!==l.indexOf("blob:")?l.substr(0,l.replace(/[?#].*/,"").lastIndexOf("/")+1):"",o=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},a=(e,t,n)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)};var h=i.print||console.log.bind(console),p=i.printErr||console.warn.bind(console);Object.assign(i,s),s=null,i.arguments&&(c=i.arguments),i.thisProgram&&(u=i.thisProgram),i.quit&&(d=i.quit);var f,m=i.dynamicLibraries||[];i.wasmBinary&&(f=i.wasmBinary);var g,v=i.noExitRuntime||!0;"object"!=typeof WebAssembly&&q("no native wasm support detected");var y,_,w,b,k,S,E,T=!1,C="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function j(e,t,n){for(var r=t+n,i=t;e[i]&&!(i>=r);)++i;if(i-t>16&&e.buffer&&C)return C.decode(e.subarray(t,i));for(var o="";t<i;){var a=e[t++];if(128&a){var s=63&e[t++];if(192!=(224&a)){var c=63&e[t++];if((a=224==(240&a)?(15&a)<<12|s<<6|c:(7&a)<<18|s<<12|c<<6|63&e[t++])<65536)o+=String.fromCharCode(a);else{var u=a-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&a)<<6|s)}else o+=String.fromCharCode(a)}return o}function x(e,t){return e?j(b,e,t):""}function P(e,t,n,r){if(!(r>0))return 0;for(var i=n,o=n+r-1,a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++a)),s<=127){if(n>=o)break;t[n++]=s}else if(s<=2047){if(n+1>=o)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=o)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=o)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}return t[n]=0,n-i}function I(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r<=127?t++:r<=2047?t+=2:r>=55296&&r<=57343?(t+=4,++n):t+=3}return t}function M(e){_=e,i.HEAP8=w=new Int8Array(e),i.HEAP16=k=new Int16Array(e),i.HEAP32=S=new Int32Array(e),i.HEAPU8=b=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAPU32=E=new Uint32Array(e),i.HEAPF32=new Float32Array(e),i.HEAPF64=new Float64Array(e)}var R=i.INITIAL_MEMORY||16777216;(g=i.wasmMemory?i.wasmMemory:new WebAssembly.Memory({initial:R/65536,maximum:32768}))&&(_=g.buffer),R=_.byteLength,M(_);var A,D,O,N,F=new WebAssembly.Table({initial:1539,element:"anyfunc"}),L=[],z=[],U=[],V=[],B=[],W=!1,G=0,H=null,Y=null;function $(e){G++,i.monitorRunDependencies&&i.monitorRunDependencies(G)}function Z(e){if(G--,i.monitorRunDependencies&&i.monitorRunDependencies(G),0==G&&(null!==H&&(clearInterval(H),H=null),Y)){var t=Y;Y=null,t()}}function q(e){i.onAbort&&i.onAbort(e),p(e="Aborted("+e+")"),T=!0,y=1,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw r(t),t}function X(e){return e.startsWith("data:application/octet-stream;base64,")}function K(e){try{if(e==A&&f)return new Uint8Array(f);throw"both async and sync fetching of the wasm failed"}catch(e){q(e)}}function J(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}X(A="vsl_impl.wasm")||(D=A,A=i.locateFile?i.locateFile(D,l):l+D);var Q={},ee=new Set([]),te={get:function(e,t){var n=Q[t];return n||(n=Q[t]=new WebAssembly.Global({value:"i32",mutable:!0})),ee.has(t)||(n.required=!0),n}};function ne(e){for(;e.length>0;)e.shift()(i)}function re(e){var t=0,n=0;function r(){for(var n=0,r=1;;){var i=e[t++];if(n+=(127&i)*r,r*=128,!(128&i))break}return n}function i(){var n=r();return j(e,(t+=n)-n,n)}function o(e,t){if(e)throw new Error(t)}var a="dylink.0";if(e instanceof WebAssembly.Module){var s=WebAssembly.Module.customSections(e,a);0===s.length&&(a="dylink",s=WebAssembly.Module.customSections(e,a)),o(0===s.length,"need dylink section"),n=(e=new Uint8Array(s[0])).length}else{o(!(1836278016==new Uint32Array(new Uint8Array(e.subarray(0,24)).buffer)[0]),"need to see wasm magic number"),o(0!==e[8],"need the dylink section to be first"),t=9;var c=r();n=t+c,a=i()}var u={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if("dylink"==a){u.memorySize=r(),u.memoryAlign=r(),u.tableSize=r(),u.tableAlign=r();for(var d=r(),l=0;l<d;++l){var h=i();u.neededDynlibs.push(h)}}else for(o("dylink.0"!==a);t<n;){var p=e[t++],f=r();if(1===p)u.memorySize=r(),u.memoryAlign=r(),u.tableSize=r(),u.tableAlign=r();else if(2===p)for(d=r(),l=0;l<d;++l)h=i(),u.neededDynlibs.push(h);else if(3===p)for(var m=r();m--;){var g=i();256&r()&&u.tlsExports.add(g)}else if(4===p)for(m=r();m--;)i(),g=i(),1==(3&r())&&u.weakImports.add(g);else t+=f}return u}function ie(e){if(e instanceof J||"unwind"==e)return y;d(1,e)}function oe(e){return 0==e.indexOf("dynCall_")||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(e)?e:"_"+e}function ae(e,t){for(var n in e)if(e.hasOwnProperty(n)){Ht.hasOwnProperty(n)||(Ht[n]=e[n]);var r=oe(n);i.hasOwnProperty(r)||(i[r]=e[n]),"__main_argc_argv"==n&&(i._main=e[n])}}var se={loadedLibsByName:{},loadedLibsByHandle:{}},ce=[];function ue(e){var t=ce[e];return t||(e>=ce.length&&(ce.length=e+1),ce[e]=t=F.get(e)),t}function de(e,t,n){return e.includes("j")?function(e,t,n){var r=i["dynCall_"+e];return n&&n.length?r.apply(null,[t].concat(n)):r.call(null,t)}(e,t,n):ue(t).apply(null,n)}var le=5892384;function he(e,t){return b.fill(0,e,e+t),e}function pe(e){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors"].includes(e)}function fe(e,t){e<128?t.push(e):t.push(e%128|128,e>>7)}function me(e,t){if(ge)for(var n=e;n<e+t;n++){var r=ue(n);r&&ge.set(r,n)}}var ge=void 0,ve=[];function ye(e,t){F.set(e,t),ce[e]=F.get(e)}function _e(e,t){if(ge||(ge=new WeakMap,me(0,F.length)),ge.has(e))return ge.get(e);var n=function(){if(ve.length)return ve.pop();try{F.grow(1)}catch(e){if(!(e instanceof RangeError))throw e;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}return F.length-1}();try{ye(n,e)}catch(i){if(!(i instanceof TypeError))throw i;var r=function(e,t){if("function"==typeof WebAssembly.Function)return new WebAssembly.Function(function(e){for(var t={i:"i32",j:"i64",f:"f32",d:"f64",p:"i32"},n={parameters:[],results:"v"==e[0]?[]:[t[e[0]]]},r=1;r<e.length;++r)n.parameters.push(t[e[r]]);return n}(t),e);var n=[1,96],r=t.slice(0,1),i=t.slice(1),o={i:127,p:127,j:126,f:125,d:124};fe(i.length,n);for(var a=0;a<i.length;++a)n.push(o[i[a]]);"v"==r?n.push(0):n.push(1,o[r]);var s=[0,97,115,109,1,0,0,0,1];fe(n.length,s),s.push.apply(s,n),s.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var c=new WebAssembly.Module(new Uint8Array(s));return new WebAssembly.Instance(c,{e:{f:e}}).exports.f}(e,t);ye(n,r)}return ge.set(e,n),n}function we(e,t,n){var r={};for(var i in e){var o=e[i];"object"==typeof o&&(o=o.value),"number"==typeof o&&(o+=t),r[i]=o}return function(e,t){for(var n in e)if(!pe(n)){var r=e[n];n.startsWith("orig$")&&(n=n.split("$")[1],t=!0),Q[n]||(Q[n]=new WebAssembly.Global({value:"i32",mutable:!0})),(t||0==Q[n].value)&&("function"==typeof r?Q[n].value=_e(r):"number"==typeof r?Q[n].value=r:"bigint"==typeof r?Q[n].value=Number(r):p("unhandled export type for `"+n+"`: "+typeof r))}}(r,n),r}function be(e,t){var n,r;return t&&(n=Ht["orig$"+e]),n||(n=Ht[e])&&n.stub&&(n=void 0),n||(n=i[oe(e)]),!n&&e.startsWith("invoke_")&&(r=e.split("_")[1],n=function(){var e=Qt();try{return de(r,arguments[0],Array.prototype.slice.call(arguments,1))}catch(t){if(en(e),t!==t+0)throw t;Kt(1,0)}}),!n&&e.startsWith("__cxa_find_matching_catch")&&(n=i.___cxa_find_matching_catch),n}function ke(e,t){return Math.ceil(e/t)*t}function Se(e,t,n){var r=re(e);function i(){if(n&&w[n+24>>0])o=E[n+28>>2],a=E[n+36>>2];else{var i=Math.pow(2,r.memoryAlign);i=Math.max(i,16);var o=r.memorySize?ke(function(e){if(W)return he(Yt(e),e);var t=le,n=t+e+15&-16;return le=n,Q.__heap_base.value=n,t}(r.memorySize+i),i):0,a=r.tableSize?F.length:0;n&&(w[n+24>>0]=1,E[n+28>>2]=o,S[n+32>>2]=r.memorySize,E[n+36>>2]=a,S[n+40>>2]=r.tableSize)}var s,c=a+r.tableSize-F.length;c>0&&F.grow(c);var u={get:function(e,t){switch(t){case"__memory_base":return o;case"__table_base":return a}return t in Ht?Ht[t]:(t in e||(e[t]=function(){return n||(n=function(e){var t=be(e,!1);return t||(t=s[e]),t}(t)),n.apply(null,arguments)}),e[t]);var n}},d=new Proxy({},u),l={"GOT.mem":new Proxy({},te),"GOT.func":new Proxy({},te),env:d,wasi_snapshot_preview1:d};function h(e){me(a,r.tableSize),s=we(e.exports,o),t.allowUndefined||Te();var n=s.__wasm_apply_data_relocs;n&&(W?n():B.push(n));var i=s.__wasm_call_ctors;return i&&(W?i():z.push(i)),s}if(t.loadAsync){if(e instanceof WebAssembly.Module){var p=new WebAssembly.Instance(e,l);return Promise.resolve(h(p))}return WebAssembly.instantiate(e,l).then((function(e){return h(e.instance)}))}var f=e instanceof WebAssembly.Module?e:new WebAssembly.Module(e);return h(p=new WebAssembly.Instance(f,l))}return ee=r.weakImports,t.loadAsync?r.neededDynlibs.reduce((function(e,n){return e.then((function(){return Ee(n,t)}))}),Promise.resolve()).then((function(){return i()})):(r.neededDynlibs.forEach((function(e){Ee(e,t)})),i())}function Ee(e,t,n){t=t||{global:!0,nodelete:!0};var r=se.loadedLibsByName[e];if(r)return t.global&&!r.global&&(r.global=!0,"loading"!==r.module&&ae(r.module)),t.nodelete&&r.refcount!==1/0&&(r.refcount=1/0),r.refcount++,n&&(se.loadedLibsByHandle[n]=r),!t.loadAsync||Promise.resolve(!0);function i(e){if(t.fs&&t.fs.findObject(e)){var n=t.fs.readFile(e,{encoding:"binary"});return n instanceof Uint8Array||(n=new Uint8Array(n)),t.loadAsync?Promise.resolve(n):n}if(t.loadAsync)return new Promise((function(t,n){a(e,(e=>t(new Uint8Array(e))),n)}));throw new Error(e+": file not found, and synchronous loading of external files is not available")}function o(){if("undefined"!=typeof preloadedWasm&&preloadedWasm[e]){var r=preloadedWasm[e];return t.loadAsync?Promise.resolve(r):r}return t.loadAsync?i(e).then((function(e){return Se(e,t,n)})):Se(i(e),t,n)}function s(e){r.global&&ae(e),r.module=e}return r={refcount:t.nodelete?1/0:1,name:e,module:"loading",global:t.global},se.loadedLibsByName[e]=r,n&&(se.loadedLibsByHandle[n]=r),t.loadAsync?o().then((function(e){return s(e),!0})):(s(o()),!0)}function Te(){for(var e in Q)if(0==Q[e].value){var t=be(e,!0);if(!t&&!Q[e].required)continue;if("function"==typeof t)Q[e].value=_e(t,t.sig);else{if("number"!=typeof t)throw new Error("bad export type for `"+e+"`: "+typeof t);Q[e].value=t}}}function Ce(e,t){w.set(e,t)}function je(e){return Yt(e+24)+24}i.___cxa_allocate_exception=je,je.sig="pp";var xe=[];function Pe(e){e.add_ref()}var Ie=0;function Me(e){var t=new Re(e);return t.get_caught()||(t.set_caught(!0),Ie--),t.set_rethrown(!1),xe.push(t),Pe(t),t.get_exception_ptr()}function Re(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(e){E[this.ptr+4>>2]=e},this.get_type=function(){return E[this.ptr+4>>2]},this.set_destructor=function(e){E[this.ptr+8>>2]=e},this.get_destructor=function(){return E[this.ptr+8>>2]},this.set_refcount=function(e){S[this.ptr>>2]=e},this.set_caught=function(e){e=e?1:0,w[this.ptr+12>>0]=e},this.get_caught=function(){return 0!=w[this.ptr+12>>0]},this.set_rethrown=function(e){e=e?1:0,w[this.ptr+13>>0]=e},this.get_rethrown=function(){return 0!=w[this.ptr+13>>0]},this.init=function(e,t){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var e=S[this.ptr>>2];S[this.ptr>>2]=e+1},this.release_ref=function(){var e=S[this.ptr>>2];return S[this.ptr>>2]=e-1,1===e},this.set_adjusted_ptr=function(e){E[this.ptr+16>>2]=e},this.get_adjusted_ptr=function(){return E[this.ptr+16>>2]},this.get_exception_ptr=function(){if(i.___cxa_is_pointer_type(this.get_type()))return E[this.excPtr>>2];var e=this.get_adjusted_ptr();return 0!==e?e:this.excPtr}}function Ae(e){return $t(new Re(e).ptr)}function De(e){if(e.release_ref()&&!e.get_rethrown()){var t=e.get_destructor();t&&ue(t)(e.excPtr),Ae(e.excPtr)}}function Oe(e){e&&De(new Re(e))}i.___cxa_begin_catch=Me,Me.sig="pp",i.___cxa_free_exception=Ae,Ae.sig="vp",Oe.sig="vp";var Ne=0;function Fe(){Kt(0),De(xe.pop()),Ne=0}function Le(e){throw Ne||(Ne=e),e}function ze(){var e=Ne;if(!e)return Jt(0),0;var t=new Re(e);t.set_adjusted_ptr(e);var n=t.get_type();if(!n)return Jt(0),e;for(var r=0;r<arguments.length;r++){var o=arguments[r];if(0===o||o===n)break;var a=t.ptr+16;if(i.___cxa_can_catch(o,n,a))return Jt(o),e}return Jt(n),e}function Ue(){var e=Ne;if(!e)return Jt(0),0;var t=new Re(e);t.set_adjusted_ptr(e);var n=t.get_type();if(!n)return Jt(0),e;for(var r=0;r<arguments.length;r++){var o=arguments[r];if(0===o||o===n)break;var a=t.ptr+16;if(i.___cxa_can_catch(o,n,a))return Jt(o),e}return Jt(n),e}function Ve(e){e&&Pe(new Re(e))}function Be(){var e=xe.pop();e||q("no exception to throw");var t=e.excPtr;throw e.get_rethrown()||(xe.push(e),e.set_rethrown(!0),e.set_caught(!1),Ie++),Ne=t,t}function We(e,t,n){throw new Re(e).init(t,n),Ne=e,Ie++,e}i.___cxa_end_catch=Fe,Fe.sig="v",i.___resumeException=Le,Le.sig="vp",i.___cxa_find_matching_catch_2=ze,ze.sig="ppp",i.___cxa_find_matching_catch_3=Ue,Ue.sig="pppp",Ve.sig="vp",i.___cxa_rethrow=Be,Be.sig="v",i.___cxa_throw=We,We.sig="vppp";var Ge=new WebAssembly.Global({value:"i32",mutable:!1},1024);i.___memory_base=Ge;var He=new WebAssembly.Global({value:"i32",mutable:!0},5892384);i.___stack_pointer=He;var Ye={isAbs:e=>"/"===e.charAt(0),splitPath:e=>/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1),normalizeArray:(e,t)=>{for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},normalize:e=>{var t=Ye.isAbs(e),n="/"===e.substr(-1);return(e=Ye.normalizeArray(e.split("/").filter((e=>!!e)),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},dirname:e=>{var t=Ye.splitPath(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},basename:e=>{if("/"===e)return"/";var t=(e=(e=Ye.normalize(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)},join:function(){var e=Array.prototype.slice.call(arguments);return Ye.normalize(e.join("/"))},join2:(e,t)=>Ye.normalize(e+"/"+t)};function $e(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return()=>(crypto.getRandomValues(e),e[0])}return()=>q("randomDevice")}var Ze={resolve:function(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var r=n>=0?arguments[n]:et.cwd();if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";e=r+"/"+e,t=Ye.isAbs(r)}return(t?"/":"")+(e=Ye.normalizeArray(e.split("/").filter((e=>!!e)),!t).join("/"))||"."},relative:(e,t)=>{function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=Ze.resolve(e).substr(1),t=Ze.resolve(t).substr(1);for(var r=n(e.split("/")),i=n(t.split("/")),o=Math.min(r.length,i.length),a=o,s=0;s<o;s++)if(r[s]!==i[s]){a=s;break}var c=[];for(s=a;s<r.length;s++)c.push("..");return(c=c.concat(i.slice(a))).join("/")}};function qe(e,t,n){var r=n>0?n:I(e)+1,i=new Array(r),o=P(e,i,0,i.length);return t&&(i.length=o),i}var Xe={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){Xe.ttys[e]={input:[],output:[],ops:t},et.registerDevice(e,Xe.stream_ops)},stream_ops:{open:function(e){var t=Xe.ttys[e.node.rdev];if(!t)throw new et.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.fsync(e.tty)},fsync:function(e){e.tty.ops.fsync(e.tty)},read:function(e,t,n,r,i){if(!e.tty||!e.tty.ops.get_char)throw new et.ErrnoError(60);for(var o=0,a=0;a<r;a++){var s;try{s=e.tty.ops.get_char(e.tty)}catch(e){throw new et.ErrnoError(29)}if(void 0===s&&0===o)throw new et.ErrnoError(6);if(null==s)break;o++,t[n+a]=s}return o&&(e.node.timestamp=Date.now()),o},write:function(e,t,n,r,i){if(!e.tty||!e.tty.ops.put_char)throw new et.ErrnoError(60);try{for(var o=0;o<r;o++)e.tty.ops.put_char(e.tty,t[n+o])}catch(e){throw new et.ErrnoError(29)}return r&&(e.node.timestamp=Date.now()),o}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n"),!t)return null;e.input=qe(t,!0)}return e.input.shift()},put_char:function(e,t){null===t||10===t?(h(j(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},fsync:function(e){e.output&&e.output.length>0&&(h(j(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(p(j(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},fsync:function(e){e.output&&e.output.length>0&&(p(j(e.output,0)),e.output=[])}}};function Ke(e){e=ke(e,65536);var t=Xt(65536,e);return t?he(t,e):0}var Je={ops_table:null,mount:function(e){return Je.createNode(null,"/",16895,0)},createNode:function(e,t,n,r){if(et.isBlkdev(n)||et.isFIFO(n))throw new et.ErrnoError(63);Je.ops_table||(Je.ops_table={dir:{node:{getattr:Je.node_ops.getattr,setattr:Je.node_ops.setattr,lookup:Je.node_ops.lookup,mknod:Je.node_ops.mknod,rename:Je.node_ops.rename,unlink:Je.node_ops.unlink,rmdir:Je.node_ops.rmdir,readdir:Je.node_ops.readdir,symlink:Je.node_ops.symlink},stream:{llseek:Je.stream_ops.llseek}},file:{node:{getattr:Je.node_ops.getattr,setattr:Je.node_ops.setattr},stream:{llseek:Je.stream_ops.llseek,read:Je.stream_ops.read,write:Je.stream_ops.write,allocate:Je.stream_ops.allocate,mmap:Je.stream_ops.mmap,msync:Je.stream_ops.msync}},link:{node:{getattr:Je.node_ops.getattr,setattr:Je.node_ops.setattr,readlink:Je.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Je.node_ops.getattr,setattr:Je.node_ops.setattr},stream:et.chrdev_stream_ops}});var i=et.createNode(e,t,n,r);return et.isDir(i.mode)?(i.node_ops=Je.ops_table.dir.node,i.stream_ops=Je.ops_table.dir.stream,i.contents={}):et.isFile(i.mode)?(i.node_ops=Je.ops_table.file.node,i.stream_ops=Je.ops_table.file.stream,i.usedBytes=0,i.contents=null):et.isLink(i.mode)?(i.node_ops=Je.ops_table.link.node,i.stream_ops=Je.ops_table.link.stream):et.isChrdev(i.mode)&&(i.node_ops=Je.ops_table.chrdev.node,i.stream_ops=Je.ops_table.chrdev.stream),i.timestamp=Date.now(),e&&(e.contents[t]=i,e.timestamp=i.timestamp),i},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,t){var n=e.contents?e.contents.length:0;if(!(n>=t)){t=Math.max(t,n*(n<1048576?2:1.125)>>>0),0!=n&&(t=Math.max(t,256));var r=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(r.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,t){if(e.usedBytes!=t)if(0==t)e.contents=null,e.usedBytes=0;else{var n=e.contents;e.contents=new Uint8Array(t),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=et.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,et.isDir(e.mode)?t.size=4096:et.isFile(e.mode)?t.size=e.usedBytes:et.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&Je.resizeFileStorage(e,t.size)},lookup:function(e,t){throw et.genericErrors[44]},mknod:function(e,t,n,r){return Je.createNode(e,t,n,r)},rename:function(e,t,n){if(et.isDir(e.mode)){var r;try{r=et.lookupNode(t,n)}catch(e){}if(r)for(var i in r.contents)throw new et.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=n,t.contents[n]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink:function(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir:function(e,t){var n=et.lookupNode(e,t);for(var r in n.contents)throw new et.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir:function(e){var t=[".",".."];for(var n in e.contents)e.contents.hasOwnProperty(n)&&t.push(n);return t},symlink:function(e,t,n){var r=Je.createNode(e,t,41471,0);return r.link=n,r},readlink:function(e){if(!et.isLink(e.mode))throw new et.ErrnoError(28);return e.link}},stream_ops:{read:function(e,t,n,r,i){var o=e.node.contents;if(i>=e.node.usedBytes)return 0;var a=Math.min(e.node.usedBytes-i,r);if(a>8&&o.subarray)t.set(o.subarray(i,i+a),n);else for(var s=0;s<a;s++)t[n+s]=o[i+s];return a},write:function(e,t,n,r,i,o){if(t.buffer===w.buffer&&(o=!1),!r)return 0;var a=e.node;if(a.timestamp=Date.now(),t.subarray&&(!a.contents||a.contents.subarray)){if(o)return a.contents=t.subarray(n,n+r),a.usedBytes=r,r;if(0===a.usedBytes&&0===i)return a.contents=t.slice(n,n+r),a.usedBytes=r,r;if(i+r<=a.usedBytes)return a.contents.set(t.subarray(n,n+r),i),r}if(Je.expandFileStorage(a,i+r),a.contents.subarray&&t.subarray)a.contents.set(t.subarray(n,n+r),i);else for(var s=0;s<r;s++)a.contents[i+s]=t[n+s];return a.usedBytes=Math.max(a.usedBytes,i+r),r},llseek:function(e,t,n){var r=t;if(1===n?r+=e.position:2===n&&et.isFile(e.node.mode)&&(r+=e.node.usedBytes),r<0)throw new et.ErrnoError(28);return r},allocate:function(e,t,n){Je.expandFileStorage(e.node,t+n),e.node.usedBytes=Math.max(e.node.usedBytes,t+n)},mmap:function(e,t,n,r,i){if(!et.isFile(e.node.mode))throw new et.ErrnoError(43);var o,a,s=e.node.contents;if(2&i||s.buffer!==_){if((n>0||n+t<s.length)&&(s=s.subarray?s.subarray(n,n+t):Array.prototype.slice.call(s,n,n+t)),a=!0,!(o=Ke(t)))throw new et.ErrnoError(48);w.set(s,o)}else a=!1,o=s.byteOffset;return{ptr:o,allocated:a}},msync:function(e,t,n,r,i){if(!et.isFile(e.node.mode))throw new et.ErrnoError(43);return 2&i||Je.stream_ops.write(e,t,0,r,n,!1),0}}};function Qe(e,t,n,r){var i=r?"":"al "+e;a(e,(n=>{n||q('Loading data file "'+e+'" failed (no arrayBuffer).'),t(new Uint8Array(n)),i&&Z()}),(t=>{if(!n)throw'Loading data file "'+e+'" failed.';n()})),i&&$()}var et={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(e,t={})=>{if(!(e=Ze.resolve(et.cwd(),e)))return{path:"",node:null};if((t=Object.assign({follow_mount:!0,recurse_count:0},t)).recurse_count>8)throw new et.ErrnoError(32);for(var n=Ye.normalizeArray(e.split("/").filter((e=>!!e)),!1),r=et.root,i="/",o=0;o<n.length;o++){var a=o===n.length-1;if(a&&t.parent)break;if(r=et.lookupNode(r,n[o]),i=Ye.join2(i,n[o]),et.isMountpoint(r)&&(!a||a&&t.follow_mount)&&(r=r.mounted.root),!a||t.follow)for(var s=0;et.isLink(r.mode);){var c=et.readlink(i);if(i=Ze.resolve(Ye.dirname(i),c),r=et.lookupPath(i,{recurse_count:t.recurse_count+1}).node,s++>40)throw new et.ErrnoError(32)}}return{path:i,node:r}},getPath:e=>{for(var t;;){if(et.isRoot(e)){var n=e.mount.mountpoint;return t?"/"!==n[n.length-1]?n+"/"+t:n+t:n}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:(e,t)=>{for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(e+n>>>0)%et.nameTable.length},hashAddNode:e=>{var t=et.hashName(e.parent.id,e.name);e.name_next=et.nameTable[t],et.nameTable[t]=e},hashRemoveNode:e=>{var t=et.hashName(e.parent.id,e.name);if(et.nameTable[t]===e)et.nameTable[t]=e.name_next;else for(var n=et.nameTable[t];n;){if(n.name_next===e){n.name_next=e.name_next;break}n=n.name_next}},lookupNode:(e,t)=>{var n=et.mayLookup(e);if(n)throw new et.ErrnoError(n,e);for(var r=et.hashName(e.id,t),i=et.nameTable[r];i;i=i.name_next){var o=i.name;if(i.parent.id===e.id&&o===t)return i}return et.lookup(e,t)},createNode:(e,t,n,r)=>{var i=new et.FSNode(e,t,n,r);return et.hashAddNode(i),i},destroyNode:e=>{et.hashRemoveNode(e)},isRoot:e=>e===e.parent,isMountpoint:e=>!!e.mounted,isFile:e=>32768==(61440&e),isDir:e=>16384==(61440&e),isLink:e=>40960==(61440&e),isChrdev:e=>8192==(61440&e),isBlkdev:e=>24576==(61440&e),isFIFO:e=>4096==(61440&e),isSocket:e=>49152==(49152&e),flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:e=>{var t=et.flagModes[e];if(void 0===t)throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:e=>{var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:(e,t)=>et.ignorePermissions||(!t.includes("r")||292&e.mode)&&(!t.includes("w")||146&e.mode)&&(!t.includes("x")||73&e.mode)?0:2,mayLookup:e=>et.nodePermissions(e,"x")||(e.node_ops.lookup?0:2),mayCreate:(e,t)=>{try{return et.lookupNode(e,t),20}catch(e){}return et.nodePermissions(e,"wx")},mayDelete:(e,t,n)=>{var r;try{r=et.lookupNode(e,t)}catch(e){return e.errno}var i=et.nodePermissions(e,"wx");if(i)return i;if(n){if(!et.isDir(r.mode))return 54;if(et.isRoot(r)||et.getPath(r)===et.cwd())return 10}else if(et.isDir(r.mode))return 31;return 0},mayOpen:(e,t)=>e?et.isLink(e.mode)?32:et.isDir(e.mode)&&("r"!==et.flagsToPermissionString(t)||512&t)?31:et.nodePermissions(e,et.flagsToPermissionString(t)):44,MAX_OPEN_FDS:4096,nextfd:(e=0,t=et.MAX_OPEN_FDS)=>{for(var n=e;n<=t;n++)if(!et.streams[n])return n;throw new et.ErrnoError(33)},getStream:e=>et.streams[e],createStream:(e,t,n)=>{et.FSStream||(et.FSStream=function(){this.shared={}},et.FSStream.prototype={},Object.defineProperties(et.FSStream.prototype,{object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}},flags:{get:function(){return this.shared.flags},set:function(e){this.shared.flags=e}},position:{get:function(){return this.shared.position},set:function(e){this.shared.position=e}}})),e=Object.assign(new et.FSStream,e);var r=et.nextfd(t,n);return e.fd=r,et.streams[r]=e,e},closeStream:e=>{et.streams[e]=null},chrdev_stream_ops:{open:e=>{var t=et.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:()=>{throw new et.ErrnoError(70)}},major:e=>e>>8,minor:e=>255&e,makedev:(e,t)=>e<<8|t,registerDevice:(e,t)=>{et.devices[e]={stream_ops:t}},getDevice:e=>et.devices[e],getMounts:e=>{for(var t=[],n=[e];n.length;){var r=n.pop();t.push(r),n.push.apply(n,r.mounts)}return t},syncfs:(e,t)=>{"function"==typeof e&&(t=e,e=!1),et.syncFSRequests++,et.syncFSRequests>1&&p("warning: "+et.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var n=et.getMounts(et.root.mount),r=0;function i(e){return et.syncFSRequests--,t(e)}function o(e){if(e)return o.errored?void 0:(o.errored=!0,i(e));++r>=n.length&&i(null)}n.forEach((t=>{if(!t.type.syncfs)return o(null);t.type.syncfs(t,e,o)}))},mount:(e,t,n)=>{var r,i="/"===n,o=!n;if(i&&et.root)throw new et.ErrnoError(10);if(!i&&!o){var a=et.lookupPath(n,{follow_mount:!1});if(n=a.path,r=a.node,et.isMountpoint(r))throw new et.ErrnoError(10);if(!et.isDir(r.mode))throw new et.ErrnoError(54)}var s={type:e,opts:t,mountpoint:n,mounts:[]},c=e.mount(s);return c.mount=s,s.root=c,i?et.root=c:r&&(r.mounted=s,r.mount&&r.mount.mounts.push(s)),c},unmount:e=>{var t=et.lookupPath(e,{follow_mount:!1});if(!et.isMountpoint(t.node))throw new et.ErrnoError(28);var n=t.node,r=n.mounted,i=et.getMounts(r);Object.keys(et.nameTable).forEach((e=>{for(var t=et.nameTable[e];t;){var n=t.name_next;i.includes(t.mount)&&et.destroyNode(t),t=n}})),n.mounted=null;var o=n.mount.mounts.indexOf(r);n.mount.mounts.splice(o,1)},lookup:(e,t)=>e.node_ops.lookup(e,t),mknod:(e,t,n)=>{var r=et.lookupPath(e,{parent:!0}).node,i=Ye.basename(e);if(!i||"."===i||".."===i)throw new et.ErrnoError(28);var o=et.mayCreate(r,i);if(o)throw new et.ErrnoError(o);if(!r.node_ops.mknod)throw new et.ErrnoError(63);return r.node_ops.mknod(r,i,t,n)},create:(e,t)=>(t=void 0!==t?t:438,t&=4095,t|=32768,et.mknod(e,t,0)),mkdir:(e,t)=>(t=void 0!==t?t:511,t&=1023,t|=16384,et.mknod(e,t,0)),mkdirTree:(e,t)=>{for(var n=e.split("/"),r="",i=0;i<n.length;++i)if(n[i]){r+="/"+n[i];try{et.mkdir(r,t)}catch(e){if(20!=e.errno)throw e}}},mkdev:(e,t,n)=>(void 0===n&&(n=t,t=438),t|=8192,et.mknod(e,t,n)),symlink:(e,t)=>{if(!Ze.resolve(e))throw new et.ErrnoError(44);var n=et.lookupPath(t,{parent:!0}).node;if(!n)throw new et.ErrnoError(44);var r=Ye.basename(t),i=et.mayCreate(n,r);if(i)throw new et.ErrnoError(i);if(!n.node_ops.symlink)throw new et.ErrnoError(63);return n.node_ops.symlink(n,r,e)},rename:(e,t)=>{var n,r,i=Ye.dirname(e),o=Ye.dirname(t),a=Ye.basename(e),s=Ye.basename(t);if(n=et.lookupPath(e,{parent:!0}).node,r=et.lookupPath(t,{parent:!0}).node,!n||!r)throw new et.ErrnoError(44);if(n.mount!==r.mount)throw new et.ErrnoError(75);var c,u=et.lookupNode(n,a),d=Ze.relative(e,o);if("."!==d.charAt(0))throw new et.ErrnoError(28);if("."!==(d=Ze.relative(t,i)).charAt(0))throw new et.ErrnoError(55);try{c=et.lookupNode(r,s)}catch(e){}if(u!==c){var l=et.isDir(u.mode),h=et.mayDelete(n,a,l);if(h)throw new et.ErrnoError(h);if(h=c?et.mayDelete(r,s,l):et.mayCreate(r,s))throw new et.ErrnoError(h);if(!n.node_ops.rename)throw new et.ErrnoError(63);if(et.isMountpoint(u)||c&&et.isMountpoint(c))throw new et.ErrnoError(10);if(r!==n&&(h=et.nodePermissions(n,"w")))throw new et.ErrnoError(h);et.hashRemoveNode(u);try{n.node_ops.rename(u,r,s)}catch(e){throw e}finally{et.hashAddNode(u)}}},rmdir:e=>{var t=et.lookupPath(e,{parent:!0}).node,n=Ye.basename(e),r=et.lookupNode(t,n),i=et.mayDelete(t,n,!0);if(i)throw new et.ErrnoError(i);if(!t.node_ops.rmdir)throw new et.ErrnoError(63);if(et.isMountpoint(r))throw new et.ErrnoError(10);t.node_ops.rmdir(t,n),et.destroyNode(r)},readdir:e=>{var t=et.lookupPath(e,{follow:!0}).node;if(!t.node_ops.readdir)throw new et.ErrnoError(54);return t.node_ops.readdir(t)},unlink:e=>{var t=et.lookupPath(e,{parent:!0}).node;if(!t)throw new et.ErrnoError(44);var n=Ye.basename(e),r=et.lookupNode(t,n),i=et.mayDelete(t,n,!1);if(i)throw new et.ErrnoError(i);if(!t.node_ops.unlink)throw new et.ErrnoError(63);if(et.isMountpoint(r))throw new et.ErrnoError(10);t.node_ops.unlink(t,n),et.destroyNode(r)},readlink:e=>{var t=et.lookupPath(e).node;if(!t)throw new et.ErrnoError(44);if(!t.node_ops.readlink)throw new et.ErrnoError(28);return Ze.resolve(et.getPath(t.parent),t.node_ops.readlink(t))},stat:(e,t)=>{var n=et.lookupPath(e,{follow:!t}).node;if(!n)throw new et.ErrnoError(44);if(!n.node_ops.getattr)throw new et.ErrnoError(63);return n.node_ops.getattr(n)},lstat:e=>et.stat(e,!0),chmod:(e,t,n)=>{var r;if(!(r="string"==typeof e?et.lookupPath(e,{follow:!n}).node:e).node_ops.setattr)throw new et.ErrnoError(63);r.node_ops.setattr(r,{mode:4095&t|-4096&r.mode,timestamp:Date.now()})},lchmod:(e,t)=>{et.chmod(e,t,!0)},fchmod:(e,t)=>{var n=et.getStream(e);if(!n)throw new et.ErrnoError(8);et.chmod(n.node,t)},chown:(e,t,n,r)=>{var i;if(!(i="string"==typeof e?et.lookupPath(e,{follow:!r}).node:e).node_ops.setattr)throw new et.ErrnoError(63);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown:(e,t,n)=>{et.chown(e,t,n,!0)},fchown:(e,t,n)=>{var r=et.getStream(e);if(!r)throw new et.ErrnoError(8);et.chown(r.node,t,n)},truncate:(e,t)=>{if(t<0)throw new et.ErrnoError(28);var n;if(!(n="string"==typeof e?et.lookupPath(e,{follow:!0}).node:e).node_ops.setattr)throw new et.ErrnoError(63);if(et.isDir(n.mode))throw new et.ErrnoError(31);if(!et.isFile(n.mode))throw new et.ErrnoError(28);var r=et.nodePermissions(n,"w");if(r)throw new et.ErrnoError(r);n.node_ops.setattr(n,{size:t,timestamp:Date.now()})},ftruncate:(e,t)=>{var n=et.getStream(e);if(!n)throw new et.ErrnoError(8);if(0==(2097155&n.flags))throw new et.ErrnoError(28);et.truncate(n.node,t)},utime:(e,t,n)=>{var r=et.lookupPath(e,{follow:!0}).node;r.node_ops.setattr(r,{timestamp:Math.max(t,n)})},open:(e,t,n)=>{if(""===e)throw new et.ErrnoError(44);var r;if(n=void 0===n?438:n,n=64&(t="string"==typeof t?et.modeStringToFlags(t):t)?4095&n|32768:0,"object"==typeof e)r=e;else{e=Ye.normalize(e);try{r=et.lookupPath(e,{follow:!(131072&t)}).node}catch(e){}}var o=!1;if(64&t)if(r){if(128&t)throw new et.ErrnoError(20)}else r=et.mknod(e,n,0),o=!0;if(!r)throw new et.ErrnoError(44);if(et.isChrdev(r.mode)&&(t&=-513),65536&t&&!et.isDir(r.mode))throw new et.ErrnoError(54);if(!o){var a=et.mayOpen(r,t);if(a)throw new et.ErrnoError(a)}512&t&&!o&&et.truncate(r,0),t&=-131713;var s=et.createStream({node:r,path:et.getPath(r),flags:t,seekable:!0,position:0,stream_ops:r.stream_ops,ungotten:[],error:!1});return s.stream_ops.open&&s.stream_ops.open(s),!i.logReadFiles||1&t||(et.readFiles||(et.readFiles={}),e in et.readFiles||(et.readFiles[e]=1)),s},close:e=>{if(et.isClosed(e))throw new et.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{et.closeStream(e.fd)}e.fd=null},isClosed:e=>null===e.fd,llseek:(e,t,n)=>{if(et.isClosed(e))throw new et.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new et.ErrnoError(70);if(0!=n&&1!=n&&2!=n)throw new et.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,n),e.ungotten=[],e.position},read:(e,t,n,r,i)=>{if(r<0||i<0)throw new et.ErrnoError(28);if(et.isClosed(e))throw new et.ErrnoError(8);if(1==(2097155&e.flags))throw new et.ErrnoError(8);if(et.isDir(e.node.mode))throw new et.ErrnoError(31);if(!e.stream_ops.read)throw new et.ErrnoError(28);var o=void 0!==i;if(o){if(!e.seekable)throw new et.ErrnoError(70)}else i=e.position;var a=e.stream_ops.read(e,t,n,r,i);return o||(e.position+=a),a},write:(e,t,n,r,i,o)=>{if(r<0||i<0)throw new et.ErrnoError(28);if(et.isClosed(e))throw new et.ErrnoError(8);if(0==(2097155&e.flags))throw new et.ErrnoError(8);if(et.isDir(e.node.mode))throw new et.ErrnoError(31);if(!e.stream_ops.write)throw new et.ErrnoError(28);e.seekable&&1024&e.flags&&et.llseek(e,0,2);var a=void 0!==i;if(a){if(!e.seekable)throw new et.ErrnoError(70)}else i=e.position;var s=e.stream_ops.write(e,t,n,r,i,o);return a||(e.position+=s),s},allocate:(e,t,n)=>{if(et.isClosed(e))throw new et.ErrnoError(8);if(t<0||n<=0)throw new et.ErrnoError(28);if(0==(2097155&e.flags))throw new et.ErrnoError(8);if(!et.isFile(e.node.mode)&&!et.isDir(e.node.mode))throw new et.ErrnoError(43);if(!e.stream_ops.allocate)throw new et.ErrnoError(138);e.stream_ops.allocate(e,t,n)},mmap:(e,t,n,r,i)=>{if(0!=(2&r)&&0==(2&i)&&2!=(2097155&e.flags))throw new et.ErrnoError(2);if(1==(2097155&e.flags))throw new et.ErrnoError(2);if(!e.stream_ops.mmap)throw new et.ErrnoError(43);return e.stream_ops.mmap(e,t,n,r,i)},msync:(e,t,n,r,i)=>e&&e.stream_ops.msync?e.stream_ops.msync(e,t,n,r,i):0,munmap:e=>0,ioctl:(e,t,n)=>{if(!e.stream_ops.ioctl)throw new et.ErrnoError(59);return e.stream_ops.ioctl(e,t,n)},readFile:(e,t={})=>{if(t.flags=t.flags||0,t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error('Invalid encoding type "'+t.encoding+'"');var n,r=et.open(e,t.flags),i=et.stat(e).size,o=new Uint8Array(i);return et.read(r,o,0,i,0),"utf8"===t.encoding?n=j(o,0):"binary"===t.encoding&&(n=o),et.close(r),n},writeFile:(e,t,n={})=>{n.flags=n.flags||577;var r=et.open(e,n.flags,n.mode);if("string"==typeof t){var i=new Uint8Array(I(t)+1),o=P(t,i,0,i.length);et.write(r,i,0,o,void 0,n.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");et.write(r,t,0,t.byteLength,void 0,n.canOwn)}et.close(r)},cwd:()=>et.currentPath,chdir:e=>{var t=et.lookupPath(e,{follow:!0});if(null===t.node)throw new et.ErrnoError(44);if(!et.isDir(t.node.mode))throw new et.ErrnoError(54);var n=et.nodePermissions(t.node,"x");if(n)throw new et.ErrnoError(n);et.currentPath=t.path},createDefaultDirectories:()=>{et.mkdir("/tmp"),et.mkdir("/home"),et.mkdir("/home/web_user")},createDefaultDevices:()=>{et.mkdir("/dev"),et.registerDevice(et.makedev(1,3),{read:()=>0,write:(e,t,n,r,i)=>r}),et.mkdev("/dev/null",et.makedev(1,3)),Xe.register(et.makedev(5,0),Xe.default_tty_ops),Xe.register(et.makedev(6,0),Xe.default_tty1_ops),et.mkdev("/dev/tty",et.makedev(5,0)),et.mkdev("/dev/tty1",et.makedev(6,0));var e=$e();et.createDevice("/dev","random",e),et.createDevice("/dev","urandom",e),et.mkdir("/dev/shm"),et.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{et.mkdir("/proc");var e=et.mkdir("/proc/self");et.mkdir("/proc/self/fd"),et.mount({mount:()=>{var t=et.createNode(e,"fd",16895,73);return t.node_ops={lookup:(e,t)=>{var n=+t,r=et.getStream(n);if(!r)throw new et.ErrnoError(8);var i={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>r.path}};return i.parent=i,i}},t}},{},"/proc/self/fd")},createStandardStreams:()=>{i.stdin?et.createDevice("/dev","stdin",i.stdin):et.symlink("/dev/tty","/dev/stdin"),i.stdout?et.createDevice("/dev","stdout",null,i.stdout):et.symlink("/dev/tty","/dev/stdout"),i.stderr?et.createDevice("/dev","stderr",null,i.stderr):et.symlink("/dev/tty1","/dev/stderr"),et.open("/dev/stdin",0),et.open("/dev/stdout",1),et.open("/dev/stderr",1)},ensureErrnoError:()=>{et.ErrnoError||(et.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){this.errno=e},this.setErrno(e),this.message="FS error"},et.ErrnoError.prototype=new Error,et.ErrnoError.prototype.constructor=et.ErrnoError,[44].forEach((e=>{et.genericErrors[e]=new et.ErrnoError(e),et.genericErrors[e].stack="<generic error, no stack>"})))},staticInit:()=>{et.ensureErrnoError(),et.nameTable=new Array(4096),et.mount(Je,{},"/"),et.createDefaultDirectories(),et.createDefaultDevices(),et.createSpecialDirectories(),et.filesystems={MEMFS:Je}},init:(e,t,n)=>{et.init.initialized=!0,et.ensureErrnoError(),i.stdin=e||i.stdin,i.stdout=t||i.stdout,i.stderr=n||i.stderr,et.createStandardStreams()},quit:()=>{et.init.initialized=!1;for(var e=0;e<et.streams.length;e++){var t=et.streams[e];t&&et.close(t)}},getMode:(e,t)=>{var n=0;return e&&(n|=365),t&&(n|=146),n},findObject:(e,t)=>{var n=et.analyzePath(e,t);return n.exists?n.object:null},analyzePath:(e,t)=>{try{e=(r=et.lookupPath(e,{follow:!t})).path}catch(e){}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var r=et.lookupPath(e,{parent:!0});n.parentExists=!0,n.parentPath=r.path,n.parentObject=r.node,n.name=Ye.basename(e),r=et.lookupPath(e,{follow:!t}),n.exists=!0,n.path=r.path,n.object=r.node,n.name=r.node.name,n.isRoot="/"===r.path}catch(e){n.error=e.errno}return n},createPath:(e,t,n,r)=>{e="string"==typeof e?e:et.getPath(e);for(var i=t.split("/").reverse();i.length;){var o=i.pop();if(o){var a=Ye.join2(e,o);try{et.mkdir(a)}catch(e){}e=a}}return a},createFile:(e,t,n,r,i)=>{var o=Ye.join2("string"==typeof e?e:et.getPath(e),t),a=et.getMode(r,i);return et.create(o,a)},createDataFile:(e,t,n,r,i,o)=>{var a=t;e&&(e="string"==typeof e?e:et.getPath(e),a=t?Ye.join2(e,t):e);var s=et.getMode(r,i),c=et.create(a,s);if(n){if("string"==typeof n){for(var u=new Array(n.length),d=0,l=n.length;d<l;++d)u[d]=n.charCodeAt(d);n=u}et.chmod(c,146|s);var h=et.open(c,577);et.write(h,n,0,n.length,0,o),et.close(h),et.chmod(c,s)}return c},createDevice:(e,t,n,r)=>{var i=Ye.join2("string"==typeof e?e:et.getPath(e),t),o=et.getMode(!!n,!!r);et.createDevice.major||(et.createDevice.major=64);var a=et.makedev(et.createDevice.major++,0);return et.registerDevice(a,{open:e=>{e.seekable=!1},close:e=>{r&&r.buffer&&r.buffer.length&&r(10)},read:(e,t,r,i,o)=>{for(var a=0,s=0;s<i;s++){var c;try{c=n()}catch(e){throw new et.ErrnoError(29)}if(void 0===c&&0===a)throw new et.ErrnoError(6);if(null==c)break;a++,t[r+s]=c}return a&&(e.node.timestamp=Date.now()),a},write:(e,t,n,i,o)=>{for(var a=0;a<i;a++)try{r(t[n+a])}catch(e){throw new et.ErrnoError(29)}return i&&(e.node.timestamp=Date.now()),a}}),et.mkdev(i,o,a)},forceLoadFile:e=>{if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!o)throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=qe(o(e.url),!0),e.usedBytes=e.contents.length}catch(e){throw new et.ErrnoError(29)}},createLazyFile:(e,t,n,r,i)=>{function o(){this.lengthKnown=!1,this.chunks=[]}var a;if(o.prototype.get=function(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,n=e/this.chunkSize|0;return this.getter(n)[t]}},o.prototype.setDataGetter=function(e){this.getter=e},o.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",n,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+n+". Status: "+e.status);var t,r=Number(e.getResponseHeader("Content-length")),i=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,o=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,a=1048576;i||(a=r);var s=this;s.setDataGetter((e=>{var t=e*a,i=(e+1)*a-1;if(i=Math.min(i,r-1),void 0===s.chunks[e]&&(s.chunks[e]=((e,t)=>{if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>r-1)throw new Error("only "+r+" bytes available! programmer error!");var i=new XMLHttpRequest;if(i.open("GET",n,!1),r!==a&&i.setRequestHeader("Range","bytes="+e+"-"+t),i.responseType="arraybuffer",i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.send(null),!(i.status>=200&&i.status<300||304===i.status))throw new Error("Couldn't load "+n+". Status: "+i.status);return void 0!==i.response?new Uint8Array(i.response||[]):qe(i.responseText||"",!0)})(t,i)),void 0===s.chunks[e])throw new Error("doXHR failed!");return s.chunks[e]})),!o&&r||(a=r=1,r=this.getter(0).length,a=r,h("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=r,this._chunkSize=a,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";a={isDevice:!1,url:n};var s=et.createFile(e,t,a,r,i);a.contents?s.contents=a.contents:a.url&&(s.contents=null,s.url=a.url),Object.defineProperties(s,{usedBytes:{get:function(){return this.contents.length}}});var c={};function u(e,t,n,r,i){var o=e.node.contents;if(i>=o.length)return 0;var a=Math.min(o.length-i,r);if(o.slice)for(var s=0;s<a;s++)t[n+s]=o[i+s];else for(s=0;s<a;s++)t[n+s]=o.get(i+s);return a}return Object.keys(s.stream_ops).forEach((e=>{var t=s.stream_ops[e];c[e]=function(){return et.forceLoadFile(s),t.apply(null,arguments)}})),c.read=(e,t,n,r,i)=>(et.forceLoadFile(s),u(e,t,n,r,i)),c.mmap=(e,t,n,r,i)=>{et.forceLoadFile(s);var o=Ke(t);if(!o)throw new et.ErrnoError(48);return u(e,w,o,t,n),{ptr:o,allocated:!0}},s.stream_ops=c,s},createPreloadedFile:(e,t,n,r,i,o,a,s,c,u)=>{var d=t?Ze.resolve(Ye.join2(e,t)):e;function l(n){function l(n){u&&u(),s||et.createDataFile(e,t,n,r,i,c),o&&o(),Z()}Browser.handledByPreloadPlugin(n,d,l,(()=>{a&&a(),Z()}))||l(n)}$(),"string"==typeof n?Qe(n,(e=>l(e)),a):l(n)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,DB_NAME:()=>"EM_FS_"+window.location.pathname,DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:(e,t,n)=>{t=t||(()=>{}),n=n||(()=>{});var r=et.indexedDB();try{var i=r.open(et.DB_NAME(),et.DB_VERSION)}catch(e){return n(e)}i.onupgradeneeded=()=>{h("creating db"),i.result.createObjectStore(et.DB_STORE_NAME)},i.onsuccess=()=>{var r=i.result.transaction([et.DB_STORE_NAME],"readwrite"),o=r.objectStore(et.DB_STORE_NAME),a=0,s=0,c=e.length;function u(){0==s?t():n()}e.forEach((e=>{var t=o.put(et.analyzePath(e).object.contents,e);t.onsuccess=()=>{++a+s==c&&u()},t.onerror=()=>{s++,a+s==c&&u()}})),r.onerror=n},i.onerror=n},loadFilesFromDB:(e,t,n)=>{t=t||(()=>{}),n=n||(()=>{});var r=et.indexedDB();try{var i=r.open(et.DB_NAME(),et.DB_VERSION)}catch(e){return n(e)}i.onupgradeneeded=n,i.onsuccess=()=>{var r=i.result;try{var o=r.transaction([et.DB_STORE_NAME],"readonly")}catch(e){return void n(e)}var a=o.objectStore(et.DB_STORE_NAME),s=0,c=0,u=e.length;function d(){0==c?t():n()}e.forEach((e=>{var t=a.get(e);t.onsuccess=()=>{et.analyzePath(e).exists&&et.unlink(e),et.createDataFile(Ye.dirname(e),Ye.basename(e),t.result,!0,!0,!0),++s+c==u&&d()},t.onerror=()=>{c++,s+c==u&&d()}})),o.onerror=n},i.onerror=n}},tt={DEFAULT_POLLMASK:5,calculateAt:function(e,t,n){if(Ye.isAbs(t))return t;var r;if(r=-100===e?et.cwd():tt.getStreamFromFD(e).path,0==t.length){if(!n)throw new et.ErrnoError(44);return r}return Ye.join2(r,t)},doStat:function(e,t,n){try{var r=e(t)}catch(e){if(e&&e.node&&Ye.normalize(t)!==Ye.normalize(et.getPath(e.node)))return-54;throw e}return S[n>>2]=r.dev,S[n+8>>2]=r.ino,S[n+12>>2]=r.mode,E[n+16>>2]=r.nlink,S[n+20>>2]=r.uid,S[n+24>>2]=r.gid,S[n+28>>2]=r.rdev,N=[r.size>>>0,(O=r.size,+Math.abs(O)>=1?O>0?(0|Math.min(+Math.floor(O/4294967296),4294967295))>>>0:~~+Math.ceil((O-+(~~O>>>0))/4294967296)>>>0:0)],S[n+40>>2]=N[0],S[n+44>>2]=N[1],S[n+48>>2]=4096,S[n+52>>2]=r.blocks,N=[Math.floor(r.atime.getTime()/1e3)>>>0,(O=Math.floor(r.atime.getTime()/1e3),+Math.abs(O)>=1?O>0?(0|Math.min(+Math.floor(O/4294967296),4294967295))>>>0:~~+Math.ceil((O-+(~~O>>>0))/4294967296)>>>0:0)],S[n+56>>2]=N[0],S[n+60>>2]=N[1],E[n+64>>2]=0,N=[Math.floor(r.mtime.getTime()/1e3)>>>0,(O=Math.floor(r.mtime.getTime()/1e3),+Math.abs(O)>=1?O>0?(0|Math.min(+Math.floor(O/4294967296),4294967295))>>>0:~~+Math.ceil((O-+(~~O>>>0))/4294967296)>>>0:0)],S[n+72>>2]=N[0],S[n+76>>2]=N[1],E[n+80>>2]=0,N=[Math.floor(r.ctime.getTime()/1e3)>>>0,(O=Math.floor(r.ctime.getTime()/1e3),+Math.abs(O)>=1?O>0?(0|Math.min(+Math.floor(O/4294967296),4294967295))>>>0:~~+Math.ceil((O-+(~~O>>>0))/4294967296)>>>0:0)],S[n+88>>2]=N[0],S[n+92>>2]=N[1],E[n+96>>2]=0,N=[r.ino>>>0,(O=r.ino,+Math.abs(O)>=1?O>0?(0|Math.min(+Math.floor(O/4294967296),4294967295))>>>0:~~+Math.ceil((O-+(~~O>>>0))/4294967296)>>>0:0)],S[n+104>>2]=N[0],S[n+108>>2]=N[1],0},doMsync:function(e,t,n,r,i){var o=b.slice(e,e+n);et.msync(t,o,i,n,r)},varargs:void 0,get:function(){return tt.varargs+=4,S[tt.varargs-4>>2]},getStr:function(e){return x(e)},getStreamFromFD:function(e){var t=et.getStream(e);if(!t)throw new et.ErrnoError(8);return t}};function nt(e,t,n){tt.varargs=n;try{var r=tt.getStreamFromFD(e);switch(t){case 0:return(i=tt.get())<0?-28:et.createStream(r,i).fd;case 1:case 2:case 6:case 7:return 0;case 3:return r.flags;case 4:var i=tt.get();return r.flags|=i,0;case 5:return i=tt.get(),k[i+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return S[Zt()>>2]=28,-1}}catch(e){if(void 0===et||!(e instanceof et.ErrnoError))throw e;return-e.errno}}function rt(e,t){try{var n=tt.getStreamFromFD(e);return tt.doStat(et.stat,n.path,t)}catch(e){if(void 0===et||!(e instanceof et.ErrnoError))throw e;return-e.errno}}function it(e,t,n){tt.varargs=n;try{var r=tt.getStreamFromFD(e);switch(t){case 21509:case 21505:case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:case 21523:case 21524:return r.tty?0:-59;case 21519:if(!r.tty)return-59;var i=tt.get();return S[i>>2]=0,0;case 21520:return r.tty?-28:-59;case 21531:return i=tt.get(),et.ioctl(r,t,i);default:return-28}}catch(e){if(void 0===et||!(e instanceof et.ErrnoError))throw e;return-e.errno}}function ot(e,t){try{return e=tt.getStr(e),tt.doStat(et.lstat,e,t)}catch(e){if(void 0===et||!(e instanceof et.ErrnoError))throw e;return-e.errno}}function at(e,t,n,r){try{t=tt.getStr(t);var i=256&r,o=4096&r;return r&=-4353,t=tt.calculateAt(e,t,o),tt.doStat(i?et.lstat:et.stat,t,n)}catch(e){if(void 0===et||!(e instanceof et.ErrnoError))throw e;return-e.errno}}function st(e,t,n,r){tt.varargs=r;try{t=tt.getStr(t),t=tt.calculateAt(e,t);var i=r?tt.get():0;return et.open(t,n,i).fd}catch(e){if(void 0===et||!(e instanceof et.ErrnoError))throw e;return-e.errno}}function ct(e,t){try{return e=tt.getStr(e),tt.doStat(et.stat,e,t)}catch(e){if(void 0===et||!(e instanceof et.ErrnoError))throw e;return-e.errno}}nt.sig="iiip",rt.sig="iip",it.sig="iiip",ot.sig="ipp",at.sig="iippi",st.sig="iipip",ct.sig="ipp";var ut=new WebAssembly.Global({value:"i32",mutable:!1},1);i.___table_base=ut;var dt,lt={};function ht(e){var t=I(e)+1,n=tn(t);return P(e,w,n,t),n}function pt(e){var t,n;t=function(){var t=ht(e);qt(t)},n=Qt(),t(),en(n)}function ft(e,t){var n,r=x(e+44),i=S[e+20>>2];n=r,new RegExp("^([a-zA-Z]+:\\/\\/)","i").test(n)||(r=Ye.normalize(r));var o=[],a=e=>{var t=et.findObject(e);return t&&!t.isFolder&&!t.isDevice};if(!a(r))for(var s in lt.LD_LIBRARY_PATH&&(o=lt.LD_LIBRARY_PATH.split(":")),o){var c=Ye.join2(o[s],r);if(a(c)){r=c;break}}var u={global:Boolean(256&i),nodelete:Boolean(4096&i),loadAsync:t.loadAsync,fs:t.fs};if(t.loadAsync)return Ee(r,u,e);try{return Ee(r,u,e)}catch(e){return pt("Could not load dynamic lib: "+r+"\n"+e),0}}function mt(e){return ft(e,{loadAsync:!1,fs:et})}function gt(e,t){var n;if(t=x(t),0==e){if(!(n=be(t,!0)))return pt('Tried to lookup unknown symbol "'+t+'" in dynamic lib: RTLD_DEFAULT'),0}else{var r=se.loadedLibsByHandle[e];if(!r.module.hasOwnProperty(t))return pt('Tried to lookup unknown symbol "'+t+'" in dynamic lib: '+r.name),0;(n=r.module["orig$"+t])||(n=r.module[t])}return"function"==typeof n&&(n=_e(n,n.sig)),n}function vt(){return Date.now()}function yt(e){if(!T)try{e()}catch(e){ie(e)}}function _t(e,t,n){function r(t){pt("Could not load dynamic lib: "+x(E[e+44>>2])+"\n"+t),yt((function(){ue(n)(e)}))}var i=ft(e,{loadAsync:!0});i?i.then((function(){yt((function(){ue(t)(e)}))}),r):r()}function wt(e,t,n,r,i,o){try{var a=tt.getStreamFromFD(r),s=et.mmap(a,e,i,t,n),c=s.ptr;return S[o>>2]=s.allocated,c}catch(e){if(void 0===et||!(e instanceof et.ErrnoError))throw e;return-e.errno}}function bt(e,t,n,r,i,o){try{var a=tt.getStreamFromFD(i);2&n&&tt.doMsync(e,a,t,r,o),et.munmap(a)}catch(e){if(void 0===et||!(e instanceof et.ErrnoError))throw e;return-e.errno}}function kt(){q("")}function St(){return 2147483648}function Et(e,t,n){b.copyWithin(e,t,t+n)}function Tt(e){try{return g.grow(e-_.byteLength+65535>>>16),M(g.buffer),1}catch(e){}}function Ct(e){var t,n=b.length,r=2147483648;if((e>>>=0)>r)return!1;for(var i=1;i<=4;i*=2){var o=n*(1+.2/i);if(o=Math.min(o,e+100663296),Tt(Math.min(r,(t=Math.max(e,o))+(65536-t%65536)%65536)))return!0}return!1}function jt(){if(!jt.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:u||"./this.program"};for(var t in lt)void 0===lt[t]?delete e[t]:e[t]=lt[t];var n=[];for(var t in e)n.push(t+"="+e[t]);jt.strings=n}return jt.strings}function xt(e,t){var n=0;return jt().forEach((function(r,i){var o=t+n;E[e+4*i>>2]=o,function(e,t,n){for(var r=0;r<e.length;++r)w[t++>>0]=e.charCodeAt(r);w[t>>0]=0}(r,o),n+=r.length+1})),0}function Pt(e,t){var n=jt();E[e>>2]=n.length;var r=0;return n.forEach((function(e){r+=e.length+1})),E[t>>2]=r,0}function It(e){try{var t=tt.getStreamFromFD(e);return et.close(t),0}catch(e){if(void 0===et||!(e instanceof et.ErrnoError))throw e;return e.errno}}function Mt(e,t,n,r){try{var i=function(e,t,n,r){for(var i=0,o=0;o<n;o++){var a=E[t>>2],s=E[t+4>>2];t+=8;var c=et.read(e,w,a,s,void 0);if(c<0)return-1;if(i+=c,c<s)break}return i}(tt.getStreamFromFD(e),t,n);return E[r>>2]=i,0}catch(e){if(void 0===et||!(e instanceof et.ErrnoError))throw e;return e.errno}}function Rt(e,t,n,r,i){try{var o=(c=n)+2097152>>>0<4194305-!!(s=t)?(s>>>0)+4294967296*c:NaN;if(isNaN(o))return 61;var a=tt.getStreamFromFD(e);return et.llseek(a,o,r),N=[a.position>>>0,(O=a.position,+Math.abs(O)>=1?O>0?(0|Math.min(+Math.floor(O/4294967296),4294967295))>>>0:~~+Math.ceil((O-+(~~O>>>0))/4294967296)>>>0:0)],S[i>>2]=N[0],S[i+4>>2]=N[1],a.getdents&&0===o&&0===r&&(a.getdents=null),0}catch(e){if(void 0===et||!(e instanceof et.ErrnoError))throw e;return e.errno}var s,c}function At(e,t,n,r){try{var i=function(e,t,n,r){for(var i=0,o=0;o<n;o++){var a=E[t>>2],s=E[t+4>>2];t+=8;var c=et.write(e,w,a,s,void 0);if(c<0)return-1;i+=c}return i}(tt.getStreamFromFD(e),t,n);return E[r>>2]=i,0}catch(e){if(void 0===et||!(e instanceof et.ErrnoError))throw e;return e.errno}}function Dt(e,t){Dt.randomDevice||(Dt.randomDevice=$e());for(var n=0;n<t;n++)w[e+n>>0]=Dt.randomDevice();return 0}function Ot(e){return e}function Nt(e){y=e,v||(i.onExit&&i.onExit(e),T=!0),d(e,new J(e))}function Ft(e){return e%4==0&&(e%100!=0||e%400==0)}mt.sig="iiii",gt.sig="iii",vt.sig="j",_t.sig="viiiii",wt.sig="ppiiipp",bt.sig="vppiiip",i._abort=kt,kt.sig="v",St.sig="p",dt=()=>performance.now(),i._emscripten_get_now=dt,dt.sig="d",Et.sig="vppp",Ct.sig="ip",xt.sig="ipp",Pt.sig="ipp",It.sig="ii",Mt.sig="iippp",Rt.sig="iijip",At.sig="iippp",Dt.sig="ipp",Ot.sig="ip",Nt.sig="vi";var Lt=[31,29,31,30,31,30,31,31,30,31,30,31],zt=[31,28,31,30,31,30,31,31,30,31,30,31];function Ut(e,t,n,r){var i=S[r+40>>2],o={tm_sec:S[r>>2],tm_min:S[r+4>>2],tm_hour:S[r+8>>2],tm_mday:S[r+12>>2],tm_mon:S[r+16>>2],tm_year:S[r+20>>2],tm_wday:S[r+24>>2],tm_yday:S[r+28>>2],tm_isdst:S[r+32>>2],tm_gmtoff:S[r+36>>2],tm_zone:i?x(i):""},a=x(n),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var c in s)a=a.replace(new RegExp(c,"g"),s[c]);var u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d=["January","February","March","April","May","June","July","August","September","October","November","December"];function l(e,t,n){for(var r="number"==typeof e?e.toString():e||"";r.length<t;)r=n[0]+r;return r}function h(e,t){return l(e,t,"0")}function p(e,t){function n(e){return e<0?-1:e>0?1:0}var r;return 0===(r=n(e.getFullYear()-t.getFullYear()))&&0===(r=n(e.getMonth()-t.getMonth()))&&(r=n(e.getDate()-t.getDate())),r}function f(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function m(e){var t=function(e,t){for(var n=new Date(e.getTime());t>0;){var r=Ft(n.getFullYear()),i=n.getMonth(),o=(r?Lt:zt)[i];if(!(t>o-n.getDate()))return n.setDate(n.getDate()+t),n;t-=o-n.getDate()+1,n.setDate(1),i<11?n.setMonth(i+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1))}return n}(new Date(e.tm_year+1900,0,1),e.tm_yday),n=new Date(t.getFullYear(),0,4),r=new Date(t.getFullYear()+1,0,4),i=f(n),o=f(r);return p(i,t)<=0?p(o,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var g={"%a":function(e){return u[e.tm_wday].substring(0,3)},"%A":function(e){return u[e.tm_wday]},"%b":function(e){return d[e.tm_mon].substring(0,3)},"%B":function(e){return d[e.tm_mon]},"%C":function(e){return h((e.tm_year+1900)/100|0,2)},"%d":function(e){return h(e.tm_mday,2)},"%e":function(e){return l(e.tm_mday,2," ")},"%g":function(e){return m(e).toString().substring(2)},"%G":function(e){return m(e)},"%H":function(e){return h(e.tm_hour,2)},"%I":function(e){var t=e.tm_hour;return 0==t?t=12:t>12&&(t-=12),h(t,2)},"%j":function(e){return h(e.tm_mday+function(e,t){for(var n=0,r=0;r<=t;n+=e[r++]);return n}(Ft(e.tm_year+1900)?Lt:zt,e.tm_mon-1),3)},"%m":function(e){return h(e.tm_mon+1,2)},"%M":function(e){return h(e.tm_min,2)},"%n":function(){return"\n"},"%p":function(e){return e.tm_hour>=0&&e.tm_hour<12?"AM":"PM"},"%S":function(e){return h(e.tm_sec,2)},"%t":function(){return"\t"},"%u":function(e){return e.tm_wday||7},"%U":function(e){var t=e.tm_yday+7-e.tm_wday;return h(Math.floor(t/7),2)},"%V":function(e){var t=Math.floor((e.tm_yday+7-(e.tm_wday+6)%7)/7);if((e.tm_wday+371-e.tm_yday-2)%7<=2&&t++,t){if(53==t){var n=(e.tm_wday+371-e.tm_yday)%7;4==n||3==n&&Ft(e.tm_year)||(t=1)}}else{t=52;var r=(e.tm_wday+7-e.tm_yday-1)%7;(4==r||5==r&&Ft(e.tm_year%400-1))&&t++}return h(t,2)},"%w":function(e){return e.tm_wday},"%W":function(e){var t=e.tm_yday+7-(e.tm_wday+6)%7;return h(Math.floor(t/7),2)},"%y":function(e){return(e.tm_year+1900).toString().substring(2)},"%Y":function(e){return e.tm_year+1900},"%z":function(e){var t=e.tm_gmtoff,n=t>=0;return t=(t=Math.abs(t)/60)/60*100+t%60,(n?"+":"-")+String("0000"+t).slice(-4)},"%Z":function(e){return e.tm_zone},"%%":function(){return"%"}};for(var c in a=a.replace(/%%/g,"\0\0"),g)a.includes(c)&&(a=a.replace(new RegExp(c,"g"),g[c](o)));var v=qe(a=a.replace(/\0\0/g,"%"),!1);return v.length>t?0:(Ce(v,e),v.length-1)}function Vt(e){return i["_"+e]}function Bt(e,t,n,r,i){var o={string:e=>{var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);!function(e,t,n){P(e,b,t,n)}(e,t=tn(n),n)}return t},array:e=>{var t=tn(e.length);return Ce(e,t),t}},a=Vt(e),s=[],c=0;if(r)for(var u=0;u<r.length;u++){var d=o[n[u]];d?(0===c&&(c=Qt()),s[u]=d(r[u])):s[u]=r[u]}return function(e){return 0!==c&&en(c),function(e){return"string"===t?x(e):"boolean"===t?Boolean(e):e}(e)}(a.apply(null,s))}Ut.sig="ppppp","undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var Wt=function(e,t,n,r){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=et.nextInode++,this.name=t,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=r};Object.defineProperties(Wt.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return et.isDir(this.mode)}},isDevice:{get:function(){return et.isChrdev(this.mode)}}}),et.FSNode=Wt,et.staticInit();var Gt,Ht={__cxa_allocate_exception:je,__cxa_begin_catch:Me,__cxa_decrement_exception_refcount:Oe,__cxa_end_catch:Fe,__cxa_find_matching_catch_2:ze,__cxa_find_matching_catch_3:Ue,__cxa_free_exception:Ae,__cxa_increment_exception_refcount:Ve,__cxa_rethrow:Be,__cxa_rethrow_primary_exception:function(e){if(e){var t=new Re(e);xe.push(t),t.set_rethrown(!0),Be()}},__cxa_throw:We,__cxa_uncaught_exceptions:function(){return Ie},__heap_base:le,__indirect_function_table:F,__memory_base:Ge,__resumeException:Le,__stack_pointer:He,__syscall_fcntl64:nt,__syscall_fstat64:rt,__syscall_ioctl:it,__syscall_lstat64:ot,__syscall_newfstatat:at,__syscall_openat:st,__syscall_stat64:ct,__table_base:ut,_dlinit:function(e){var t={refcount:1/0,name:"__main__",module:i.asm,global:!0};se.loadedLibsByName[t.name]=t,se.loadedLibsByHandle[e]=t},_dlopen_js:mt,_dlsym_js:gt,_emscripten_date_now:vt,_emscripten_dlopen_js:_t,_emscripten_get_now_is_monotonic:function(){return!0},_mmap_js:wt,_munmap_js:bt,abort:kt,emscripten_get_heap_max:St,emscripten_get_now:dt,emscripten_memcpy_big:Et,emscripten_resize_heap:Ct,environ_get:xt,environ_sizes_get:Pt,fd_close:It,fd_read:Mt,fd_seek:Rt,fd_write:At,getentropy:Dt,invoke_diii:function(e,t,n,r){var i=Qt();try{return ue(e)(t,n,r)}catch(e){if(en(i),e!==e+0)throw e;Kt(1,0)}},invoke_fiii:function(e,t,n,r){var i=Qt();try{return ue(e)(t,n,r)}catch(e){if(en(i),e!==e+0)throw e;Kt(1,0)}},invoke_i:function(e){var t=Qt();try{return ue(e)()}catch(e){if(en(t),e!==e+0)throw e;Kt(1,0)}},invoke_ii:function(e,t){var n=Qt();try{return ue(e)(t)}catch(e){if(en(n),e!==e+0)throw e;Kt(1,0)}},invoke_iii:function(e,t,n){var r=Qt();try{return ue(e)(t,n)}catch(e){if(en(r),e!==e+0)throw e;Kt(1,0)}},invoke_iiii:function(e,t,n,r){var i=Qt();try{return ue(e)(t,n,r)}catch(e){if(en(i),e!==e+0)throw e;Kt(1,0)}},invoke_iiiii:function(e,t,n,r,i){var o=Qt();try{return ue(e)(t,n,r,i)}catch(e){if(en(o),e!==e+0)throw e;Kt(1,0)}},invoke_iiiiii:function(e,t,n,r,i,o){var a=Qt();try{return ue(e)(t,n,r,i,o)}catch(e){if(en(a),e!==e+0)throw e;Kt(1,0)}},invoke_iiiiiii:function(e,t,n,r,i,o,a){var s=Qt();try{return ue(e)(t,n,r,i,o,a)}catch(e){if(en(s),e!==e+0)throw e;Kt(1,0)}},invoke_iiiiiiii:function(e,t,n,r,i,o,a,s){var c=Qt();try{return ue(e)(t,n,r,i,o,a,s)}catch(e){if(en(c),e!==e+0)throw e;Kt(1,0)}},invoke_iiiiiiiiiii:function(e,t,n,r,i,o,a,s,c,u,d){var l=Qt();try{return ue(e)(t,n,r,i,o,a,s,c,u,d)}catch(e){if(en(l),e!==e+0)throw e;Kt(1,0)}},invoke_iiiiiiiiiiii:function(e,t,n,r,i,o,a,s,c,u,d,l){var h=Qt();try{return ue(e)(t,n,r,i,o,a,s,c,u,d,l)}catch(e){if(en(h),e!==e+0)throw e;Kt(1,0)}},invoke_iiiiiiiiiiiii:function(e,t,n,r,i,o,a,s,c,u,d,l,h){var p=Qt();try{return ue(e)(t,n,r,i,o,a,s,c,u,d,l,h)}catch(e){if(en(p),e!==e+0)throw e;Kt(1,0)}},invoke_j:function(e){var t=Qt();try{return i.dynCall_j(e)}catch(e){if(en(t),e!==e+0)throw e;Kt(1,0)}},invoke_jiiii:function(e,t,n,r,o){var a=Qt();try{return i.dynCall_jiiii(e,t,n,r,o)}catch(e){if(en(a),e!==e+0)throw e;Kt(1,0)}},invoke_v:function(e){var t=Qt();try{ue(e)()}catch(e){if(en(t),e!==e+0)throw e;Kt(1,0)}},invoke_vi:function(e,t){var n=Qt();try{ue(e)(t)}catch(e){if(en(n),e!==e+0)throw e;Kt(1,0)}},invoke_vidi:function(e,t,n,r){var i=Qt();try{ue(e)(t,n,r)}catch(e){if(en(i),e!==e+0)throw e;Kt(1,0)}},invoke_vii:function(e,t,n){var r=Qt();try{ue(e)(t,n)}catch(e){if(en(r),e!==e+0)throw e;Kt(1,0)}},invoke_viii:function(e,t,n,r){var i=Qt();try{ue(e)(t,n,r)}catch(e){if(en(i),e!==e+0)throw e;Kt(1,0)}},invoke_viiii:function(e,t,n,r,i){var o=Qt();try{ue(e)(t,n,r,i)}catch(e){if(en(o),e!==e+0)throw e;Kt(1,0)}},invoke_viiiii:function(e,t,n,r,i,o){var a=Qt();try{ue(e)(t,n,r,i,o)}catch(e){if(en(a),e!==e+0)throw e;Kt(1,0)}},invoke_viiiiii:function(e,t,n,r,i,o,a){var s=Qt();try{ue(e)(t,n,r,i,o,a)}catch(e){if(en(s),e!==e+0)throw e;Kt(1,0)}},invoke_viiiiiii:function(e,t,n,r,i,o,a,s){var c=Qt();try{ue(e)(t,n,r,i,o,a,s)}catch(e){if(en(c),e!==e+0)throw e;Kt(1,0)}},invoke_viiiiiiiiii:function(e,t,n,r,i,o,a,s,c,u,d){var l=Qt();try{ue(e)(t,n,r,i,o,a,s,c,u,d)}catch(e){if(en(l),e!==e+0)throw e;Kt(1,0)}},invoke_viiiiiiiiiiiiiii:function(e,t,n,r,i,o,a,s,c,u,d,l,h,p,f,m){var g=Qt();try{ue(e)(t,n,r,i,o,a,s,c,u,d,l,h,p,f,m)}catch(e){if(en(g),e!==e+0)throw e;Kt(1,0)}},llvm_eh_typeid_for:Ot,memory:g,proc_exit:Nt,strftime_l:function(e,t,n,r){return Ut(e,t,n,r)}},Yt=(function(){var e={env:Ht,wasi_snapshot_preview1:Ht,"GOT.mem":new Proxy(Ht,te),"GOT.func":new Proxy(Ht,te)};function t(e,t){var n=e.exports;n=we(n,1024),i.asm=n;var r,o=re(t);o.neededDynlibs&&(m=o.neededDynlibs.concat(m)),ae(n),r=i.asm.__wasm_call_ctors,z.unshift(r),B.push(i.asm.__wasm_apply_data_relocs),Z()}function n(e){t(e.instance,e.module)}function o(t){return(f||"function"!=typeof fetch?Promise.resolve().then((function(){return K(A)})):fetch(A,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+A+"'";return e.arrayBuffer()})).catch((function(){return K(A)}))).then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){p("failed to asynchronously prepare wasm: "+e),q(e)}))}if($(),i.instantiateWasm)try{return i.instantiateWasm(e,t)}catch(e){return p("Module.instantiateWasm callback failed with error: "+e),!1}(f||"function"!=typeof WebAssembly.instantiateStreaming||X(A)||"function"!=typeof fetch?o(n):fetch(A,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return p("wasm streaming compile failed: "+e),p("falling back to ArrayBuffer instantiation"),o(n)}))}))).catch(r)}(),i.___wasm_call_ctors=function(){return(i.___wasm_call_ctors=i.asm.__wasm_call_ctors).apply(null,arguments)},i.___wasm_apply_data_relocs=function(){return(i.___wasm_apply_data_relocs=i.asm.__wasm_apply_data_relocs).apply(null,arguments)},i._strlen=function(){return(i._strlen=i.asm.strlen).apply(null,arguments)},i.__Znwm=function(){return(i.__Znwm=i.asm._Znwm).apply(null,arguments)},i._memcpy=function(){return(i._memcpy=i.asm.memcpy).apply(null,arguments)},i.__ZdlPv=function(){return(i.__ZdlPv=i.asm._ZdlPv).apply(null,arguments)},i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6appendEPKc=function(){return(i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6appendEPKc=i.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6appendEPKc).apply(null,arguments)},i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6appendEPKcm=function(){return(i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6appendEPKcm=i.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6appendEPKcm).apply(null,arguments)},i.getTempRet0=function(){return(i.getTempRet0=i.asm.getTempRet0).apply(null,arguments)},i._dlsym=function(){return(i._dlsym=i.asm.dlsym).apply(null,arguments)},i.__ZSt9terminatev=function(){return(i.__ZSt9terminatev=i.asm._ZSt9terminatev).apply(null,arguments)},i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6insertEmPKc=function(){return(i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6insertEmPKc=i.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6insertEmPKc).apply(null,arguments)},i.__ZNSt3__217bad_function_callD1Ev=function(){return(i.__ZNSt3__217bad_function_callD1Ev=i.asm._ZNSt3__217bad_function_callD1Ev).apply(null,arguments)},i.__ZNSt12length_errorD1Ev=function(){return(i.__ZNSt12length_errorD1Ev=i.asm._ZNSt12length_errorD1Ev).apply(null,arguments)},i.__ZNSt11logic_errorC2EPKc=function(){return(i.__ZNSt11logic_errorC2EPKc=i.asm._ZNSt11logic_errorC2EPKc).apply(null,arguments)},i._getModelBufferMemoryOffset=function(){return(i._getModelBufferMemoryOffset=i.asm.getModelBufferMemoryOffset).apply(null,arguments)},i._getNumFaces=function(){return(i._getNumFaces=i.asm.getNumFaces).apply(null,arguments)},i._getInputMemoryOffset=function(){return(i._getInputMemoryOffset=i.asm.getInputMemoryOffset).apply(null,arguments)},i._getInputName=function(){return(i._getInputName=i.asm.getInputName).apply(null,arguments)},i._getInputHeight=function(){return(i._getInputHeight=i.asm.getInputHeight).apply(null,arguments)},i._getInputWidth=function(){return(i._getInputWidth=i.asm.getInputWidth).apply(null,arguments)},i._getInputChannelCount=function(){return(i._getInputChannelCount=i.asm.getInputChannelCount).apply(null,arguments)},i._getOutputMemoryOffset=function(){return(i._getOutputMemoryOffset=i.asm.getOutputMemoryOffset).apply(null,arguments)},i._iprintf=function(){return(i._iprintf=i.asm.iprintf).apply(null,arguments)},i._getOutputHeight=function(){return(i._getOutputHeight=i.asm.getOutputHeight).apply(null,arguments)},i._getOutputName=function(){return(i._getOutputName=i.asm.getOutputName).apply(null,arguments)},i._getOutputWidth=function(){return(i._getOutputWidth=i.asm.getOutputWidth).apply(null,arguments)},i._getOutputChannelCount=function(){return(i._getOutputChannelCount=i.asm.getOutputChannelCount).apply(null,arguments)},i._getFrameTLx=function(){return(i._getFrameTLx=i.asm.getFrameTLx).apply(null,arguments)},i._getFrameTLy=function(){return(i._getFrameTLy=i.asm.getFrameTLy).apply(null,arguments)},i._getFrameWidth=function(){return(i._getFrameWidth=i.asm.getFrameWidth).apply(null,arguments)},i._getFrameHeight=function(){return(i._getFrameHeight=i.asm.getFrameHeight).apply(null,arguments)},i._getLargestFaceTLx=function(){return(i._getLargestFaceTLx=i.asm.getLargestFaceTLx).apply(null,arguments)},i._getLargestFaceTLy=function(){return(i._getLargestFaceTLy=i.asm.getLargestFaceTLy).apply(null,arguments)},i._getLargestFaceWidth=function(){return(i._getLargestFaceWidth=i.asm.getLargestFaceWidth).apply(null,arguments)},i._getLargestFaceHeight=function(){return(i._getLargestFaceHeight=i.asm.getLargestFaceHeight).apply(null,arguments)},i._getFaceEnhanceSatBoost=function(){return(i._getFaceEnhanceSatBoost=i.asm.getFaceEnhanceSatBoost).apply(null,arguments)},i._getFaceEnhanceCurvePoly=function(){return(i._getFaceEnhanceCurvePoly=i.asm.getFaceEnhanceCurvePoly).apply(null,arguments)},i._loadModel=function(){return(i._loadModel=i.asm.loadModel).apply(null,arguments)},i._malloc=function(){return(Yt=i._malloc=i.asm.malloc).apply(null,arguments)}),$t=(i.__ZNSt3__29to_stringEi=function(){return(i.__ZNSt3__29to_stringEi=i.asm._ZNSt3__29to_stringEi).apply(null,arguments)},i._free=function(){return($t=i._free=i.asm.free).apply(null,arguments)}),Zt=(i._fiprintf=function(){return(i._fiprintf=i.asm.fiprintf).apply(null,arguments)},i._loadTfliteAsynchronously=function(){return(i._loadTfliteAsynchronously=i.asm.loadTfliteAsynchronously).apply(null,arguments)},i._memset=function(){return(i._memset=i.asm.memset).apply(null,arguments)},i._infer=function(){return(i._infer=i.asm.infer).apply(null,arguments)},i.___cxa_atexit=function(){return(i.___cxa_atexit=i.asm.__cxa_atexit).apply(null,arguments)},i._puts=function(){return(i._puts=i.asm.puts).apply(null,arguments)},i._memcmp=function(){return(i._memcmp=i.asm.memcmp).apply(null,arguments)},i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE25__init_copy_ctor_externalEPKcm=function(){return(i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE25__init_copy_ctor_externalEPKcm=i.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE25__init_copy_ctor_externalEPKcm).apply(null,arguments)},i.__ZNSt3__212__next_primeEm=function(){return(i.__ZNSt3__212__next_primeEm=i.asm._ZNSt3__212__next_primeEm).apply(null,arguments)},i.__ZNSt20bad_array_new_lengthD1Ev=function(){return(i.__ZNSt20bad_array_new_lengthD1Ev=i.asm._ZNSt20bad_array_new_lengthD1Ev).apply(null,arguments)},i.__ZNSt20bad_array_new_lengthC1Ev=function(){return(i.__ZNSt20bad_array_new_lengthC1Ev=i.asm._ZNSt20bad_array_new_lengthC1Ev).apply(null,arguments)},i.___small_printf=function(){return(i.___small_printf=i.asm.__small_printf).apply(null,arguments)},i._putchar=function(){return(i._putchar=i.asm.putchar).apply(null,arguments)},i._lrintf=function(){return(i._lrintf=i.asm.lrintf).apply(null,arguments)},i.__ZNSt3__26chrono12steady_clock3nowEv=function(){return(i.__ZNSt3__26chrono12steady_clock3nowEv=i.asm._ZNSt3__26chrono12steady_clock3nowEv).apply(null,arguments)},i.__ZNSt3__24stoiERKNS_12basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEEEPmi=function(){return(i.__ZNSt3__24stoiERKNS_12basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEEEPmi=i.asm._ZNSt3__24stoiERKNS_12basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEEEPmi).apply(null,arguments)},i._memchr=function(){return(i._memchr=i.asm.memchr).apply(null,arguments)},i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE17__assign_no_aliasILb0EEERS5_PKcm=function(){return(i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE17__assign_no_aliasILb0EEERS5_PKcm=i.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE17__assign_no_aliasILb0EEERS5_PKcm).apply(null,arguments)},i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE17__assign_no_aliasILb1EEERS5_PKcm=function(){return(i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE17__assign_no_aliasILb1EEERS5_PKcm=i.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE17__assign_no_aliasILb1EEERS5_PKcm).apply(null,arguments)},i._memmove=function(){return(i._memmove=i.asm.memmove).apply(null,arguments)},i.__Znam=function(){return(i.__Znam=i.asm._Znam).apply(null,arguments)},i.__ZdaPv=function(){return(i.__ZdaPv=i.asm._ZdaPv).apply(null,arguments)},i._posix_memalign=function(){return(i._posix_memalign=i.asm.posix_memalign).apply(null,arguments)},i.__ZNSt3__219__shared_weak_count14__release_weakEv=function(){return(i.__ZNSt3__219__shared_weak_count14__release_weakEv=i.asm._ZNSt3__219__shared_weak_count14__release_weakEv).apply(null,arguments)},i._cos=function(){return(i._cos=i.asm.cos).apply(null,arguments)},i._pow=function(){return(i._pow=i.asm.pow).apply(null,arguments)},i._atan2f=function(){return(i._atan2f=i.asm.atan2f).apply(null,arguments)},i._expf=function(){return(i._expf=i.asm.expf).apply(null,arguments)},i._exp=function(){return(i._exp=i.asm.exp).apply(null,arguments)},i._logf=function(){return(i._logf=i.asm.logf).apply(null,arguments)},i._log=function(){return(i._log=i.asm.log).apply(null,arguments)},i.__ZNSt3__26__sortIRNS_6__lessIiiEEPiEEvT0_S5_T_=function(){return(i.__ZNSt3__26__sortIRNS_6__lessIiiEEPiEEvT0_S5_T_=i.asm._ZNSt3__26__sortIRNS_6__lessIiiEEPiEEvT0_S5_T_).apply(null,arguments)},i.__ZNSt3__219__shared_weak_countD2Ev=function(){return(i.__ZNSt3__219__shared_weak_countD2Ev=i.asm._ZNSt3__219__shared_weak_countD2Ev).apply(null,arguments)},i.__ZNKSt3__219__shared_weak_count13__get_deleterERKSt9type_info=function(){return(i.__ZNKSt3__219__shared_weak_count13__get_deleterERKSt9type_info=i.asm._ZNKSt3__219__shared_weak_count13__get_deleterERKSt9type_info).apply(null,arguments)},i._sysconf=function(){return(i._sysconf=i.asm.sysconf).apply(null,arguments)},i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEEC1ERKS5_mmRKS4_=function(){return(i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEEC1ERKS5_mmRKS4_=i.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEEC1ERKS5_mmRKS4_).apply(null,arguments)},i.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7compareEmmPKcm=function(){return(i.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7compareEmmPKcm=i.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7compareEmmPKcm).apply(null,arguments)},i._fopen=function(){return(i._fopen=i.asm.fopen).apply(null,arguments)},i._strncmp=function(){return(i._strncmp=i.asm.strncmp).apply(null,arguments)},i._fputc=function(){return(i._fputc=i.asm.fputc).apply(null,arguments)},i._strcmp=function(){return(i._strcmp=i.asm.strcmp).apply(null,arguments)},i.__ZNSt12out_of_rangeD1Ev=function(){return(i.__ZNSt12out_of_rangeD1Ev=i.asm._ZNSt12out_of_rangeD1Ev).apply(null,arguments)},i._fclose=function(){return(i._fclose=i.asm.fclose).apply(null,arguments)},i._strtod=function(){return(i._strtod=i.asm.strtod).apply(null,arguments)},i._isspace=function(){return(i._isspace=i.asm.isspace).apply(null,arguments)},i._getenv=function(){return(i._getenv=i.asm.getenv).apply(null,arguments)},i._vsnprintf=function(){return(i._vsnprintf=i.asm.vsnprintf).apply(null,arguments)},i._fwrite=function(){return(i._fwrite=i.asm.fwrite).apply(null,arguments)},i._pthread_setspecific=function(){return(i._pthread_setspecific=i.asm.pthread_setspecific).apply(null,arguments)},i.__ZNSt3__25mutex4lockEv=function(){return(i.__ZNSt3__25mutex4lockEv=i.asm._ZNSt3__25mutex4lockEv).apply(null,arguments)},i.__ZNSt3__25mutex6unlockEv=function(){return(i.__ZNSt3__25mutex6unlockEv=i.asm._ZNSt3__25mutex6unlockEv).apply(null,arguments)},i.__ZNSt3__25mutexD1Ev=function(){return(i.__ZNSt3__25mutexD1Ev=i.asm._ZNSt3__25mutexD1Ev).apply(null,arguments)},i._sin=function(){return(i._sin=i.asm.sin).apply(null,arguments)},i._atan2=function(){return(i._atan2=i.asm.atan2).apply(null,arguments)},i._snprintf=function(){return(i._snprintf=i.asm.snprintf).apply(null,arguments)},i._open=function(){return(i._open=i.asm.open).apply(null,arguments)},i.___errno_location=function(){return(Zt=i.___errno_location=i.asm.__errno_location).apply(null,arguments)}),qt=(i._close=function(){return(i._close=i.asm.close).apply(null,arguments)},i._write=function(){return(i._write=i.asm.write).apply(null,arguments)},i._vfprintf=function(){return(i._vfprintf=i.asm.vfprintf).apply(null,arguments)},i.__exit=function(){return(i.__exit=i.asm._exit).apply(null,arguments)},i._aligned_alloc=function(){return(i._aligned_alloc=i.asm.aligned_alloc).apply(null,arguments)},i._bsearch=function(){return(i._bsearch=i.asm.bsearch).apply(null,arguments)},i._cosf=function(){return(i._cosf=i.asm.cosf).apply(null,arguments)},i.___dl_seterr=function(){return(qt=i.___dl_seterr=i.asm.__dl_seterr).apply(null,arguments)}),Xt=(i._dlopen=function(){return(i._dlopen=i.asm.dlopen).apply(null,arguments)},i._calloc=function(){return(i._calloc=i.asm.calloc).apply(null,arguments)},i._erf=function(){return(i._erf=i.asm.erf).apply(null,arguments)},i._expm1f=function(){return(i._expm1f=i.asm.expm1f).apply(null,arguments)},i._fileno=function(){return(i._fileno=i.asm.fileno).apply(null,arguments)},i._fmaxf=function(){return(i._fmaxf=i.asm.fmaxf).apply(null,arguments)},i._fminf=function(){return(i._fminf=i.asm.fminf).apply(null,arguments)},i._fmodf=function(){return(i._fmodf=i.asm.fmodf).apply(null,arguments)},i._fread=function(){return(i._fread=i.asm.fread).apply(null,arguments)},i._frexp=function(){return(i._frexp=i.asm.frexp).apply(null,arguments)},i._fstat=function(){return(i._fstat=i.asm.fstat).apply(null,arguments)},i._hypot=function(){return(i._hypot=i.asm.hypot).apply(null,arguments)},i._hypotf=function(){return(i._hypotf=i.asm.hypotf).apply(null,arguments)},i._ldexp=function(){return(i._ldexp=i.asm.ldexp).apply(null,arguments)},i._emscripten_num_logical_cores=function(){return(i._emscripten_num_logical_cores=i.asm.emscripten_num_logical_cores).apply(null,arguments)},i._pthread_mutex_init=function(){return(i._pthread_mutex_init=i.asm.pthread_mutex_init).apply(null,arguments)},i._pthread_mutex_destroy=function(){return(i._pthread_mutex_destroy=i.asm.pthread_mutex_destroy).apply(null,arguments)},i._pthread_cond_wait=function(){return(i._pthread_cond_wait=i.asm.pthread_cond_wait).apply(null,arguments)},i._pthread_cond_broadcast=function(){return(i._pthread_cond_broadcast=i.asm.pthread_cond_broadcast).apply(null,arguments)},i._pthread_cond_init=function(){return(i._pthread_cond_init=i.asm.pthread_cond_init).apply(null,arguments)},i._pthread_cond_destroy=function(){return(i._pthread_cond_destroy=i.asm.pthread_cond_destroy).apply(null,arguments)},i._pthread_mutex_lock=function(){return(i._pthread_mutex_lock=i.asm.pthread_mutex_lock).apply(null,arguments)},i._pthread_mutex_unlock=function(){return(i._pthread_mutex_unlock=i.asm.pthread_mutex_unlock).apply(null,arguments)},i._pthread_create=function(){return(i._pthread_create=i.asm.pthread_create).apply(null,arguments)},i._pthread_join=function(){return(i._pthread_join=i.asm.pthread_join).apply(null,arguments)},i._pthread_once=function(){return(i._pthread_once=i.asm.pthread_once).apply(null,arguments)},i._log1p=function(){return(i._log1p=i.asm.log1p).apply(null,arguments)},i._mmap=function(){return(i._mmap=i.asm.mmap).apply(null,arguments)},i._munmap=function(){return(i._munmap=i.asm.munmap).apply(null,arguments)},i._nanf=function(){return(i._nanf=i.asm.nanf).apply(null,arguments)},i._powf=function(){return(i._powf=i.asm.powf).apply(null,arguments)},i._pthread_self=function(){return(i._pthread_self=i.asm.pthread_self).apply(null,arguments)},i._qsort=function(){return(i._qsort=i.asm.qsort).apply(null,arguments)},i._round=function(){return(i._round=i.asm.round).apply(null,arguments)},i._roundf=function(){return(i._roundf=i.asm.roundf).apply(null,arguments)},i._sinf=function(){return(i._sinf=i.asm.sinf).apply(null,arguments)},i._strtoull=function(){return(i._strtoull=i.asm.strtoull).apply(null,arguments)},i._strtoll=function(){return(i._strtoll=i.asm.strtoll).apply(null,arguments)},i._tanhf=function(){return(i._tanhf=i.asm.tanhf).apply(null,arguments)},i._realloc=function(){return(i._realloc=i.asm.realloc).apply(null,arguments)},i._emscripten_builtin_memalign=function(){return(Xt=i._emscripten_builtin_memalign=i.asm.emscripten_builtin_memalign).apply(null,arguments)}),Kt=i._setThrew=function(){return(Kt=i._setThrew=i.asm.setThrew).apply(null,arguments)},Jt=i.setTempRet0=function(){return(Jt=i.setTempRet0=i.asm.setTempRet0).apply(null,arguments)},Qt=i.stackSave=function(){return(Qt=i.stackSave=i.asm.stackSave).apply(null,arguments)},en=i.stackRestore=function(){return(en=i.stackRestore=i.asm.stackRestore).apply(null,arguments)},tn=i.stackAlloc=function(){return(tn=i.stackAlloc=i.asm.stackAlloc).apply(null,arguments)};i.__ZNSt3__220__throw_system_errorEiPKc=function(){return(i.__ZNSt3__220__throw_system_errorEiPKc=i.asm._ZNSt3__220__throw_system_errorEiPKc).apply(null,arguments)},i.__ZNSt3__218condition_variable10notify_oneEv=function(){return(i.__ZNSt3__218condition_variable10notify_oneEv=i.asm._ZNSt3__218condition_variable10notify_oneEv).apply(null,arguments)},i.__ZNSt3__218condition_variable10notify_allEv=function(){return(i.__ZNSt3__218condition_variable10notify_allEv=i.asm._ZNSt3__218condition_variable10notify_allEv).apply(null,arguments)},i.__ZNSt3__218condition_variable4waitERNS_11unique_lockINS_5mutexEEE=function(){return(i.__ZNSt3__218condition_variable4waitERNS_11unique_lockINS_5mutexEEE=i.asm._ZNSt3__218condition_variable4waitERNS_11unique_lockINS_5mutexEEE).apply(null,arguments)},i.__ZNSt3__218condition_variableD1Ev=function(){return(i.__ZNSt3__218condition_variableD1Ev=i.asm._ZNSt3__218condition_variableD1Ev).apply(null,arguments)},i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6resizeEmc=function(){return(i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6resizeEmc=i.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6resizeEmc).apply(null,arguments)},i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE17__assign_externalEPKc=function(){return(i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE17__assign_externalEPKc=i.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE17__assign_externalEPKc).apply(null,arguments)},i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE26__erase_external_with_moveEmm=function(){return(i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE26__erase_external_with_moveEmm=i.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE26__erase_external_with_moveEmm).apply(null,arguments)},i.__ZNSt3__219__thread_local_dataEv=function(){return(i.__ZNSt3__219__thread_local_dataEv=i.asm._ZNSt3__219__thread_local_dataEv).apply(null,arguments)},i.__ZNSt3__215__thread_structC1Ev=function(){return(i.__ZNSt3__215__thread_structC1Ev=i.asm._ZNSt3__215__thread_structC1Ev).apply(null,arguments)},i.__ZNSt9bad_allocD1Ev=function(){return(i.__ZNSt9bad_allocD1Ev=i.asm._ZNSt9bad_allocD1Ev).apply(null,arguments)},i.__ZNSt9bad_allocC1Ev=function(){return(i.__ZNSt9bad_allocC1Ev=i.asm._ZNSt9bad_allocC1Ev).apply(null,arguments)},i.__ZnwmRKSt9nothrow_t=function(){return(i.__ZnwmRKSt9nothrow_t=i.asm._ZnwmRKSt9nothrow_t).apply(null,arguments)},i.__ZNSt3__213random_deviceclEv=function(){return(i.__ZNSt3__213random_deviceclEv=i.asm._ZNSt3__213random_deviceclEv).apply(null,arguments)},i.__ZNSt3__213random_deviceC1ERKNS_12basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEEE=function(){return(i.__ZNSt3__213random_deviceC1ERKNS_12basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEEE=i.asm._ZNSt3__213random_deviceC1ERKNS_12basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEEE).apply(null,arguments)},i.__ZNSt3__213random_deviceD1Ev=function(){return(i.__ZNSt3__213random_deviceD1Ev=i.asm._ZNSt3__213random_deviceD1Ev).apply(null,arguments)},i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7replaceEmmPKc=function(){return(i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7replaceEmmPKc=i.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7replaceEmmPKc).apply(null,arguments)},i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE17__assign_externalEPKcm=function(){return(i.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE17__assign_externalEPKcm=i.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE17__assign_externalEPKcm).apply(null,arguments)},i.__ZNSt3__29to_stringEm=function(){return(i.__ZNSt3__29to_stringEm=i.asm._ZNSt3__29to_stringEm).apply(null,arguments)},i.__ZNSt3__26thread4joinEv=function(){return(i.__ZNSt3__26thread4joinEv=i.asm._ZNSt3__26thread4joinEv).apply(null,arguments)},i.__ZNSt3__211this_thread9sleep_forERKNS_6chrono8durationIxNS_5ratioILx1ELx1000000000EEEEE=function(){return(i.__ZNSt3__211this_thread9sleep_forERKNS_6chrono8durationIxNS_5ratioILx1ELx1000000000EEEEE=i.asm._ZNSt3__211this_thread9sleep_forERKNS_6chrono8durationIxNS_5ratioILx1ELx1000000000EEEEE).apply(null,arguments)},i.__ZNSt3__215__thread_structD1Ev=function(){return(i.__ZNSt3__215__thread_structD1Ev=i.asm._ZNSt3__215__thread_structD1Ev).apply(null,arguments)},i.__ZNSt3__26threadD1Ev=function(){return(i.__ZNSt3__26threadD1Ev=i.asm._ZNSt3__26threadD1Ev).apply(null,arguments)},i.___cxa_can_catch=function(){return(i.___cxa_can_catch=i.asm.__cxa_can_catch).apply(null,arguments)},i.___cxa_is_pointer_type=function(){return(i.___cxa_is_pointer_type=i.asm.__cxa_is_pointer_type).apply(null,arguments)},i.dynCall_ji=function(){return(i.dynCall_ji=i.asm.dynCall_ji).apply(null,arguments)},i.dynCall_jiji=function(){return(i.dynCall_jiji=i.asm.dynCall_jiji).apply(null,arguments)},i.dynCall_iijjiiii=function(){return(i.dynCall_iijjiiii=i.asm.dynCall_iijjiiii).apply(null,arguments)},i.dynCall_j=function(){return(i.dynCall_j=i.asm.dynCall_j).apply(null,arguments)},i.dynCall_viijii=function(){return(i.dynCall_viijii=i.asm.dynCall_viijii).apply(null,arguments)},i.dynCall_jiiii=function(){return(i.dynCall_jiiii=i.asm.dynCall_jiiii).apply(null,arguments)},i.dynCall_iiiiij=function(){return(i.dynCall_iiiiij=i.asm.dynCall_iiiiij).apply(null,arguments)},i.dynCall_iiiiijj=function(){return(i.dynCall_iiiiijj=i.asm.dynCall_iiiiijj).apply(null,arguments)},i.dynCall_iiiiiijj=function(){return(i.dynCall_iiiiiijj=i.asm.dynCall_iiiiiijj).apply(null,arguments)},i._orig$_ZNSt3__26chrono12steady_clock3nowEv=function(){return(i._orig$_ZNSt3__26chrono12steady_clock3nowEv=i.asm.orig$_ZNSt3__26chrono12steady_clock3nowEv).apply(null,arguments)},i._orig$mmap=function(){return(i._orig$mmap=i.asm.orig$mmap).apply(null,arguments)},i._orig$strtoull=function(){return(i._orig$strtoull=i.asm.orig$strtoull).apply(null,arguments)},i._orig$strtoll=function(){return(i._orig$strtoll=i.asm.orig$strtoll).apply(null,arguments)},i.___THREW__=645276,i.__ZTVNSt3__217bad_function_callE=82860,i.__ZTVSt12length_error=88108,i.__ZTVN10__cxxabiv120__si_class_type_infoE=87800,i.__ZTVN10__cxxabiv117__class_type_infoE=87760,i._stderr=82552,i.__ZTVSt12out_of_range=88140,i.__ZSt7nothrow=73011,i.UTF8ToString=x,i.cwrap=function(e,t,n,r){var i=(n=n||[]).every((e=>"number"===e||"boolean"===e));return"string"!==t&&i&&!r?Vt(e):function(){return Bt(e,t,n,arguments)}},i.addFunction=_e,Y=function e(){Gt||rn(),Gt||(Y=e)};var nn=!1;function rn(e){function t(){Gt||(Gt=!0,i.calledRun=!0,T||(W=!0,ne(B),i.noFSInit||et.init.initialized||et.init(),et.ignorePermissions=!1,Xe.init(),ne(z),ne(U),n(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),on&&function(e){var t=i._main;if(t){(e=e||[]).unshift(u);var n,r=e.length,o=tn(4*(r+1)),a=o>>2;e.forEach((e=>{S[a++]=ht(e)})),S[a]=0;try{var s=t(r,o);y=n=s,Nt(n)}catch(e){return ie(e)}}}(e),function(){if(i.postRun)for("function"==typeof i.postRun&&(i.postRun=[i.postRun]);i.postRun.length;)e=i.postRun.shift(),V.unshift(e);var e;ne(V)}()))}e=e||c,G>0||!nn&&(m.length?($(),m.reduce((function(e,t){return e.then((function(){return Ee(t,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})}))}),Promise.resolve()).then((function(){Te(),Z()}))):Te(),nn=!0,G>0)||(function(){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;)e=i.preRun.shift(),L.unshift(e);var e;ne(L)}(),G>0||(i.setStatus?(i.setStatus("Running..."),setTimeout((function(){setTimeout((function(){i.setStatus("")}),1),t()}),1)):t()))}if(i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();var on=!0;return i.noInitialRun&&(on=!1),rn(),e.ready});e.exports=n}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{"use strict";n.r(r),n.d(r,{VSLError:()=>s,VideoFilter:()=>h,VideoFilterError:()=>c});var e=n(276),t=n.n(e);const i="vsl_impl.bin",o="vsl_impl.wasm",a="dvdnr.wasm";class s extends Error{constructor(e,t){super(e,{cause:t}),this.name="VSLError"}}class c extends s{constructor(e,t){super(e,{cause:t}),this.name="VideoFilterError"}}async function u(e,t,n,r,i,o,a,s){const c=e.createBuffer();return e.bindBuffer(e.PIXEL_PACK_BUFFER,c),e.bufferData(e.PIXEL_PACK_BUFFER,s.byteLength,e.STREAM_READ),e.readPixels(t,n,r,i,o,a,0),e.bindBuffer(e.PIXEL_PACK_BUFFER,null),await async function(e,t,n,r,i,o,a){const s=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),await function(e,t,n,r){return new Promise(((n,r)=>{!function i(){const o=e.clientWaitSync(t,0,0);o!==e.WAIT_FAILED?o!==e.TIMEOUT_EXPIRED?n():setTimeout(i,5):r()}()}))}(e,s),e.deleteSync(s),e.bindBuffer(t,n),e.getBufferSubData(t,0,i,void 0,void 0),e.bindBuffer(t,null)}(e,e.PIXEL_PACK_BUFFER,c,0,s),e.deleteBuffer(c),s}class d{constructor(e,t={}){this.initDone_=!1,this.imgLogList_=[],this.fps_=30,this.frameSubSample_=15,this.setLogDurationSec(3),this.frameCount_=0,this.imgLogLen_=Math.round(this.logDurationSec_*this.fps_/this.frameSubSample_),this.init(e),this.backgroundRed_=0,this.backgroundBlue_=0,this.backgroundGreen_=0,this.textureInit_=!1,this.uploadBackground_=!1,this.updateBackgroundColor_=!1,this.initBackgroundColorDone_=!1,this.isVideoBackground_=!1,this.isVideoPause_=!1,this.isBokeh_=!0,this.backgroundImageBitmap_=null,this.initDone_=!0,this.debug_=!1,this.flags_=t}setDebug(e){this.debug_=e}setSaturation(e){this.gl_.uniform1f(this.satAdjust_,e)}setToneMapPoly(e,t,n){this.gl_.uniform3f(this.toneMapPoly_,e,t,n)}setLogDurationSec(e){this.logDurationSec_=e,this.frameCount_=0,this.imgLogLen_=Math.round(this.logDurationSec_*this.fps_/this.frameSubSample_),!0===this.debug_&&console.debug("[Segmentation: setLogDurationSec]: duration =",e,"sec")}setStudioLightMode(e){!0===e?this.gl_.uniform1i(this.studioLightEnable_,1):this.gl_.uniform1i(this.studioLightEnable_,0),!0===this.debug_&&console.debug("[Segmentation: setStudioLightMode]: enable =",e)}setFaceSmoothStrengthVal(e,t,n){let r=e/Math.max(0,n-t);this.gl_.uniform1f(this.faceSmoothEps_,.001*r)}setFaceGlowStrengthVal(e,t,n){this.gl_.uniform1f(this.faceGlowVal_,e),1==this.debug_&&console.debug("[Segmentation: setFaceGlowStrengthVal]: value =",e,t,n)}setLightDirectionXVal(e){this.gl_.uniform1f(this.lightXVal_,e),1==this.debug_&&console.debug("[Segmentation: setLightDirectionXVal]: value =",e)}setLightDirectionYVal(e){this.gl_.uniform1f(this.lightYVal_,e),1==this.debug_&&console.debug("[Segmentation: setLightDirectionYVal]: value =",e)}setOperationMode(e){if("bokeh"===e)this.isBokeh_=!0;else if("replace"===e)if(!1===this.isVideoBackground_)if(null!==this.backgroundImageBitmap_)this.isBokeh_=!1,this.uploadBackground_=!0;else{if(!0!==this.initBackgroundColorDone_)throw"[Segmentation: setOperationMode] Failure to switch to background mode. Background image has not been set.";this.isBokeh_=!1,this.updateBackgroundColor_=!0}else{if(null===this.backgroundVideoSrc_)throw"[Segmentation: setOperationMode] Failure to switch to background mode. Background video source has not been set.";this.isBokeh_=!1}else this.isBokeh_=!0}setBackgroundImageBitmap(e){null!==this.backgroundImageBitmap_&&this.backgroundImageBitmap_.close(),this.backgroundImageBitmap_=e,this.isVideoBackground_=!1,this.uploadBackground_=!0}setBackgroundVideoSrc(e){this.backgroundVideoSrc_=e,this.updateBackgroundVideo_=!0,this.isVideoBackground_=!0}setBackgroundColor(e,t,n){this.backgroundRed_=e,this.backgroundGreen_=t,this.backgroundBlue_=n,this.isVideoBackground_=!1,this.updateBackgroundColor_=!0,this.initBackgroundColorDone_=!0}pauseBackgroundVideo(){this.isVideoPause_=!0}resumeBackgroundVideo(){this.isVideoPause_=!1}setZoomScale(e){this.initDone_&&this.gl_.uniform1f(this.zoomScale_,e)}setPanTilt(e,t){this.initDone_&&this.gl_.uniform2f(this.panTilt_,e,t)}getVideoLog(){let e=[];for(var t=0;t<12;++t)e.push("DLB_VSLw0001".charCodeAt(t));let n=new Uint8Array(e),r=this.imgLogList_.length,i=0;for(t=0;t<this.imgLogList_.length;++t)i+=this.imgLogList_[t].byteLength;let o,a=new Uint8Array(n.byteLength+2+4*r+i),s=0;for(a.set(new Uint8Array(n),s),s+=n.byteLength,a.set(new Uint8Array([(65280&r)>>8,255&r]),s),s+=2,t=0;t<r;++t)o=this.imgLogList_[t].byteLength,a.set(new Uint8Array([(4278190080&o)>>24,(16711680&o)>>16,(65280&o)>>8,255&o]),s),s+=4,a.set(new Uint8Array(this.imgLogList_[t]),s),s+=o;return a}createDiagCanvas(){null===this.diagCanvas_&&(this.diagImageWidth_=640,this.diagImageHeight_=180,this.diagCanvas_=document.createElement("canvas"),this.diagCanvas_.setAttribute("width",this.diagImageWidth_),this.diagCanvas_.setAttribute("height",this.diagImageHeight_))}destroyDiagCanvas(){null!==this.diagCanvas_&&(document.removeChild(this.diagCanvas_),this.diagCanvas_=null)}init(e){!0===this.debug_&&console.debug("[Segmentation: init] Initializing WebGL."),this.facialSmoothNeedInit_=!0,this.diagCanvas_=null,this.createDiagCanvas(),this.widthModel_=160,this.heightModel_=96,this.canvas_=e,this.faceBboxReset();const t=this.canvas_.getContext("webgl2",{antialias:!1,premultipliedAlpha:!0});if(!t)throw"[Segmentation: init] Failure to create WebGL2 context. Please check whether WebGL2 is supported by your browser/hardware.";this.gl_=t,this.shaderOperationModeOptions_={blend:1,downscale:2,blur:3,smooth_mask:4,copy:5,fillmask:6,cropresize:7,smooth:8,denoise_update:9,downscale_subtract:10,flood:11,saturate:12,precompute_gf:13,compute_gf_coeff:14,studiolight:15,portraitlight:16};const n=this.loadShader_(t.VERTEX_SHADER,"\n      attribute vec2 a_position;\n      attribute vec2 a_texCoord;\n      uniform vec2 u_resolution;\t\t\t\n      uniform float u_flipY;\n      varying vec2 v_texCoord;\n\n      void main() {\n        // Convert pixels coordinates to -1->+1 (clipSpace)\t\t\t\t\t\n        vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;\n        gl_Position = vec4(clipSpace * vec2(1, -u_flipY), 0, 1);\t\t\t\t\n        v_texCoord = a_texCoord;\n      }"),r=this.loadShader_(t.FRAGMENT_SHADER,"\n      #define BLEND_MODE\t\t \t        1\n      #define DOWNSCALE_MODE\t\t\t    2\n      #define BLUR_MODE\t\t\t          3\n      #define SMOOTHMASK_MODE\t\t\t    4\n      #define COPY_MODE\t\t\t          5\n      #define FILLMASK_MODE\t    \t\t  6\n      #define CROPRESIZE_MODE\t\t\t    7\n      #define SMOOTH_MODE\t\t\t        8\n      #define DENOISE_UPDATE_MODE\t\t  9\n      #define DOWNSCALE_SUBTRACT_MODE 10\n      #define FLOOD_MODE\t\t\t        11\n      #define SATURATE_MODE\t\t\t      12\n      #define PRECOMPUTE_GF_MODE      13\n      #define COMPUTE_GF_COEFF_MODE   14\n      #define STUDIO_LIGHT_MODE       15\n      #define PORTRAIT_LIGHT_MODE     16\n\n      precision lowp  float;        \n      uniform float   u_aspectRatio;\n      uniform float   u_faceSmoothEps;\n      uniform float \tu_zoomScale;\n      uniform float \tu_satAdjust;\n      uniform float   u_lightXVal;\n      uniform float   u_lightYVal;\n      uniform float   u_faceGlowVal;\n      uniform vec3    u_toneMapPoly;\n      uniform vec2    u_panTilt;\n      uniform vec2    u_denoiseTl;\n      uniform vec2    u_denoiseBr;\n      uniform int \t  u_operationMode;\n      uniform int \t  u_facialSmoothInit;\n      uniform int \t  u_studioLightEnable;\n      uniform int \t  u_erodeEnable;\n      uniform sampler2D u_image; \n      uniform sampler2D u_image_alpha;\n      uniform sampler2D u_image_bkground;\n      uniform sampler2D u_image_denoise;\t\n      uniform vec2 u_textureSize;    \n      uniform vec2 u_direction; \t\t\t\n      varying vec2 v_texCoord;        \t\t\t\n      \n      vec3 rgb2yuv(vec3 rgb) {\n        vec3 yuv;\n        yuv.x = rgb.r * 0.299 + rgb.g * 0.587 + rgb.b * 0.114;\n        yuv.y = rgb.r * -0.169 + rgb.g * -0.331 + rgb.b * 0.5 + 0.5;\n        yuv.z = rgb.r * 0.5 + rgb.g * -0.419 + rgb.b * -0.081 + 0.5;           \n        return yuv;\n      }\n\n      vec3 yuv2rgb(vec3 yuv) {\n        vec3 rgb;\n        rgb.r = yuv.x * 1.0 + (yuv.z-0.5) * 1.4;\n        rgb.g = yuv.x * 1.0 + (yuv.y-0.5) * -0.343 + (yuv.z-0.5) * -0.711;\n        rgb.b = yuv.x * 1.0 + (yuv.y-0.5) * 1.765;\n        return rgb;\n      }\n\n      vec3 yuvsat2rgb(vec3 yuv, float sat) {\n        vec3 rgb;\n        rgb.r = yuv.x + sat*(yuv.z-0.5) * 1.4;\n        rgb.g = yuv.x + sat*(yuv.y-0.5) * -0.343 + sat*(yuv.z-0.5) * -0.711;\n        rgb.b = yuv.x + sat*(yuv.y-0.5) * 1.765;\n        return rgb;\n      }\n\n      vec3 applyToneMap(vec3 data, vec3 p) {\n        vec3 yuv = rgb2yuv(data);\n        // Apply the curve\n        yuv.x = p.x + yuv.x*p.y + yuv.x*yuv.x*p.z;\n        return yuv2rgb(yuv);\n      }\n\n      float gaussCurve(float x, float x0, float sx){    \n        float arg = x-x0;\n        arg = -0.5*arg*arg/sx;        \n        float a = 1./(pow(2.*3.1415*sx, 0.5));        \n        return a*exp(arg);\n      }\n      \n      float computeShading(vec2 uvCoord, vec2 ellipseCenter, float alpha) {\n        float invRadiusScale = 1./1.85;              \n        vec2 gStd = vec2(0.075, 0.075);        \n        float gx = gaussCurve(uvCoord.x*invRadiusScale/u_aspectRatio, ellipseCenter.x*invRadiusScale/u_aspectRatio, gStd.x);\n        float gy = 0.5*gaussCurve(uvCoord.y*invRadiusScale, ellipseCenter.y*invRadiusScale, gStd.y);\n        alpha = clamp(gx*gy, 0., 1.);\n        alpha = smoothstep(0.2,1., alpha);\n        alpha = pow(alpha, 2.);\n        invRadiusScale = 0.7;\n\n        vec2 xyShift = vec2(0.,-0.5);\n        xyShift.x = -ellipseCenter.x + 0.5;\n        xyShift.y = -ellipseCenter.y + 0.5;\n        \n        float invAspectRatio = 1./u_aspectRatio;\n        vec2 center = vec2(0.5, 0.5);\n        \n        vec2 uv = invRadiusScale*(2.0 * ((uvCoord+xyShift-center)*vec2(invAspectRatio,1.) + center) - 1.0);\n        // compute the normal vector\n        vec3 n = vec3(uv, sqrt(1.0 - clamp(dot(uv, uv), 0.0, 1.0)));         \n                  \n        // setup the light source\n        vec2 lightPos = vec2( (u_lightXVal-50.)/50., (u_lightYVal-50.)/50.);\n        vec3 lightDirect = vec3(lightPos.x, -lightPos.y, 1.);\n        // normalize the light direction\n        lightDirect = normalize(lightDirect)*(1.+0.1*sqrt(lightPos.x*lightPos.x+lightPos.y*lightPos.y));\n        // compute the brightness on the sphere\n        float lightStrength = dot(lightDirect, n);\n        float brightness = clamp(pow(lightStrength, 1.), 0.0, 1.0);\n        float d = distance(center, invRadiusScale*(uvCoord+xyShift-center)*vec2(invAspectRatio,1.) + center) / 0.5;\n        float a = d > 0.99 ? 1.0 - smoothstep(0.99, 1.0, d) : 1.0;          \n        //alpha = 1. - a*brightness*alpha;\n        alpha = 1. - pow(a*brightness*alpha,4.);\n        //alpha = 1. - a*brightness*alpha;\n        \n        return alpha;\n      }\n\n      void main() {\t\t\t\n        if (u_operationMode == FILLMASK_MODE) {\n          vec3 color = texture2D(u_image, v_texCoord).rgb;\n          vec2 offset = vec2(1.,1.) / u_textureSize;\n          float alpha = texture2D(u_image, v_texCoord).a;\n\n          // Compute the mask for left-right+top-bottom edges\n          float lrMask = texture2D(u_image, v_texCoord - vec2(2.5*offset[0],0.)).a + \n                texture2D(u_image, v_texCoord - vec2(offset[0],0.)).a - \t\t\t\t\t\t\t\t\n                texture2D(u_image, v_texCoord + vec2(2.5*offset[0],0.)).a - \n                texture2D(u_image, v_texCoord + vec2(offset[0],0.)).a;\t\t\t\t\t\n          lrMask = mix(1.0, 0.0, step(0.5, lrMask));\n          color = color*lrMask + (0.5*texture2D(u_image, v_texCoord - 1.75*vec2(offset[0],0.)).rgb + \n              0.5*texture2D(u_image, v_texCoord - 3.5*vec2(offset[0],0.)).rgb)*(1.-lrMask);\n\n          lrMask = texture2D(u_image, v_texCoord + vec2(2.5*offset[0],0.)).a + \n                texture2D(u_image, v_texCoord + vec2(offset[0],0.)).a - \t\t\t\t\t\t\t\t\n                texture2D(u_image, v_texCoord - vec2(2.5*offset[0],0.)).a - \n                texture2D(u_image, v_texCoord - vec2(offset[0],0.)).a;\n          lrMask = mix(1.0, 0.0, step(0.5, lrMask));\n          color = color*lrMask + (0.5*texture2D(u_image, v_texCoord + 1.75*vec2(offset[0],0.)).rgb +\n              0.5*texture2D(u_image, v_texCoord + 3.5*vec2(offset[0],0.)).rgb)*(1.-lrMask);\n\n          lrMask = texture2D(u_image, v_texCoord + vec2(0.,2.5*offset[0])).a + \n                texture2D(u_image, v_texCoord + vec2(0.,offset[0])).a - \t\t\t\t\t\t\t\t\n                texture2D(u_image, v_texCoord - vec2(0.,2.5*offset[0])).a - \n                texture2D(u_image, v_texCoord - vec2(0.,offset[0])).a;\n          lrMask = mix(1.0, 0.0, step(0.5, lrMask));\n          color = color*lrMask + (0.5*texture2D(u_image, v_texCoord + 1.75*vec2(0.,offset[0])).rgb +\n                0.5*texture2D(u_image, v_texCoord + 3.5*vec2(0.,offset[0])).rgb)*(1.-lrMask);\n                \n          lrMask = texture2D(u_image, v_texCoord - vec2(0.,2.5*offset[0])).a + \n                texture2D(u_image, v_texCoord - vec2(0.,offset[0])).a - \t\t\t\t\t\t\t\t\n                texture2D(u_image, v_texCoord + vec2(0.,2.5*offset[0])).a - \n                texture2D(u_image, v_texCoord + vec2(0.,offset[0])).a;\n          lrMask = mix(1.0, 0.0, step(0.5, lrMask));\n          color = color*lrMask + (0.5*texture2D(u_image, v_texCoord- 1.75*vec2(0.,offset[0])).rgb +\n                0.5*texture2D(u_image, v_texCoord - 3.5*vec2(0.,offset[0])).rgb)*(1.-lrMask);\n          gl_FragColor = vec4(color, alpha);\t\t\t\t\t\n        }\n        if (u_operationMode==STUDIO_LIGHT_MODE) {\n          vec2 uvCoord = u_zoomScale*v_texCoord+u_panTilt;\n\t\t\t\t\t//vec3 background = texture2D(u_image_bkground, uvCoord).rgb;\n          vec3 background = texture2D(u_image,uvCoord).rgb;\n          //u_image_denoise // this contains the smoothed facial coeficients\n\n          // Adjust the background          \n          float satScale = 0.65;\n          background = applyToneMap(background, u_toneMapPoly);          \n          background = applyToneMap(background, vec3(0.05, 0.8, 0.1));\n\n\t\t\t\t\tvec3 foreground = texture2D(u_image, uvCoord).rgb;\n\t\t\t\t\tfloat alpha; // = 1.-texture2D(u_image_alpha, uvCoord).a;\t\t\t\t\t\n\n\t\t\t\t\tif (u_satAdjust != 1.) {\n\t\t\t\t\t\tconst vec3 W = vec3(0.2125, 0.7154, 0.0721);\n\t\t\t\t\t\tvec3 intensity = vec3(dot(foreground, W));\n\t\t\t\t\t\tforeground = mix(intensity, foreground, u_satAdjust);\n\t\t\t\t\t}\n          \n          // Adjust the foreground\n          float p0, p1, p2;         \n          vec3 yuv = rgb2yuv(foreground);            \n          yuv.x = u_toneMapPoly[0] + yuv.x*u_toneMapPoly[1] + yuv.x*yuv.x*u_toneMapPoly[2];\n          p0 = 0.;            \n          p2 = - u_faceGlowVal*.004;\n          p1 = 1. - p2;\n          satScale = 1.0 + u_faceGlowVal*.0008;\n          yuv.x = p0 + yuv.x*p1 + yuv.x*yuv.x*p2;                    \n          foreground = yuvsat2rgb(yuv, satScale);     \n\n          // Setup a ellipse for spot lighting\n          vec2 ellipseCenter;\n          ellipseCenter.x = (u_denoiseTl.x+u_denoiseBr.x)*0.5;\n          ellipseCenter.y = (u_denoiseTl.y+u_denoiseBr.y)*0.5*1.101;          \n\n          alpha = computeShading(uvCoord, ellipseCenter, alpha);\n\n\t\t\t\t\tgl_FragColor = vec4(mix(foreground,background,alpha),1);            \n          //gl_FragColor = vec4(alpha,alpha,alpha,1);\n\t\t\t\t\treturn;\n        }\n        if (u_operationMode == PORTRAIT_LIGHT_MODE) {\n\t\t\t\t\t//vec3 background = texture2D(u_image_bkground, u_zoomScale*v_texCoord+u_panTilt).rgb;\n          vec3 background = texture2D(u_image, u_zoomScale*v_texCoord+u_panTilt).rgb;\n          float alpha = texture2D(u_image_alpha, u_zoomScale*v_texCoord+u_panTilt).a;\n\t\t\t\t\t//alpha = smoothstep(0.25,0.45, alpha);          \n          vec3 yuv;\n          yuv = rgb2yuv(background);            \n          float p2, p1, p0;\n          p2 = u_faceGlowVal*.005132*0.45;\n          p1 = 1. - p2;\n          p0 = -u_faceGlowVal*0.002*0.7;\n          yuv.x = p0+p1*yuv.x + yuv.x*yuv.x*p2;\n          //yuv.x = 0.05 + 0.2*yuv.x + yuv.x*yuv.x*0.6;\n          float satScale = 0.65;          \n          background = yuvsat2rgb(yuv, satScale);\n\t\t\t\t\tvec3 foreground = texture2D(u_image, u_zoomScale*v_texCoord+u_panTilt).rgb;\t\t\t\t\t\n\t\t\t\t\tif (u_satAdjust != 1.) {\n\t\t\t\t\t\tconst vec3 W = vec3(0.2125, 0.7154, 0.0721);\n\t\t\t\t\t\tvec3 intensity = vec3(dot(foreground, W));\n\t\t\t\t\t\tforeground = mix(intensity, foreground, u_satAdjust);\n\t\t\t\t\t}\n          yuv = rgb2yuv(foreground);            \n          yuv.x = u_toneMapPoly[0] + yuv.x*u_toneMapPoly[1] + yuv.x*yuv.x*u_toneMapPoly[2];\n          p0 = 0.;            \n          p2 = - u_faceGlowVal*.004*0.65;\n          p1 = 1. - p2;\n          yuv.x = p0 + yuv.x*p1 + yuv.x*yuv.x*p2;                    \n          foreground = yuv2rgb(yuv);     \n\n          if (u_studioLightEnable == 1) {\n            vec2 ellipseCenter;\n            ellipseCenter.x = (u_denoiseTl.x+u_denoiseBr.x)*0.5;\n            ellipseCenter.y = (u_denoiseTl.y+u_denoiseBr.y)*0.5*1.101;          \n\n            vec2 uvCoord = u_zoomScale*v_texCoord+u_panTilt;\n            float shading = computeShading(uvCoord, ellipseCenter, alpha);\n            alpha = alpha*shading;\n          }\n\n\t\t\t\t\tgl_FragColor = vec4(mix(foreground,background,alpha),1);\n          //gl_FragColor = vec4(gfCoeff,gfCoeff,gfCoeff,gfCoeff);               \n          //gl_FragColor = vec4(alpha,alpha,alpha,1);\n\t\t\t\t\treturn;\n\t\t\t\t}\n        if (u_operationMode == BLEND_MODE) {\n          vec2 coord = u_zoomScale*v_texCoord+u_panTilt;\n\t\t\t\t\tvec3 background = texture2D(u_image_bkground, coord).rgb;\n\t\t\t\t\tvec3 foreground = texture2D(u_image, coord).rgb;\n\t\t\t\t\tfloat alpha = texture2D(u_image_alpha, coord).a;\n\t\t\t\t\t//alpha = smoothstep(0.25,0.45, alpha);\t\t\t\t\t\n          //alpha = smoothstep(0.3,0.55, alpha); // OK\n          \n          alpha = min(alpha*1.35, 1.); //1.3 = no background ghosting during movement, 1.2 = some ghosting during movement\n          alpha = pow(alpha,2.);         \n          alpha = smoothstep(0.1,0.9, alpha); \n\n          //if ((alpha > 0.01) && (alpha < 0.99)) {\n          if ((alpha > 0.0) && (alpha < 1.)) {\n            vec2 offset = vec2(1.,1.) / u_textureSize;\n            float lrMask = texture2D(u_image, coord - vec2(2.5*offset[0],0.)).a +\n\t\t\t\t\t\t\t\ttexture2D(u_image, coord - vec2(offset[0],0.)).a -\n\t\t\t\t\t\t\t\ttexture2D(u_image, coord + vec2(2.5*offset[0],0.)).a -\n\t\t\t\t\t\t\t\ttexture2D(u_image, coord + vec2(offset[0],0.)).a;\n\t\t\t\t\t  lrMask = 0.;//1.- mix(1.0, 0.0, step(0.5, lrMask));\n          \n            //foreground = vec3(0.);  \n            // float spacingScale = 1.2*pow(alpha,4.);\n            // vec2 off1 = spacingScale*vec2(1.3846153846, 0.) / u_textureSize;\n\t\t\t\t\t  // vec2 off2 = spacingScale*vec2(3.2307692308, 0.) / u_textureSize;\n            // vec2 off3 = spacingScale*vec2(0., 1.3846153846) / u_textureSize;\n\t\t\t\t\t  // vec2 off4 = spacingScale*vec2(0., 3.2307692308) / u_textureSize;\n            // foreground += texture2D(u_image, coord).rgb;\n            // foreground += texture2D(u_image, coord).rgb*lrMask + texture2D(u_image, coord + off1).rgb*(1.-lrMask);\n            // foreground += texture2D(u_image, coord).rgb*lrMask + texture2D(u_image, coord - off1).rgb*(1.-lrMask);\n            // foreground += texture2D(u_image, coord).rgb*lrMask + texture2D(u_image, coord + off2).rgb*(1.-lrMask);\n            // foreground += texture2D(u_image, coord).rgb*lrMask + texture2D(u_image, coord - off2).rgb*(1.-lrMask);            \n\n            // foreground += texture2D(u_image, coord).rgb*lrMask + texture2D(u_image, coord + off3).rgb*(1.-lrMask);\n            // foreground += texture2D(u_image, coord).rgb*lrMask + texture2D(u_image, coord - off3).rgb*(1.-lrMask);\n            // foreground += texture2D(u_image, coord).rgb*lrMask + texture2D(u_image, coord + off4).rgb*(1.-lrMask);\n            // foreground += texture2D(u_image, coord).rgb*lrMask + texture2D(u_image, coord - off4).rgb*(1.-lrMask);\n            // foreground *= (1./9.);\n          }\n\n\t\t\t\t\tif (u_satAdjust != 1.) {\n\t\t\t\t\t\tconst vec3 W = vec3(0.2125, 0.7154, 0.0721);\n\t\t\t\t\t\tvec3 intensity = vec3(dot(foreground, W));\n\t\t\t\t\t\tforeground = mix(intensity, foreground, u_satAdjust);\n\t\t\t\t\t}\n          if (u_toneMapPoly[0] != 0. || u_toneMapPoly[1] != 1. || u_toneMapPoly[2] != 0.0 ) {\n            foreground = applyToneMap(foreground, u_toneMapPoly);\n          }          \n          if (u_studioLightEnable == 1) {\n            vec3 yuv = rgb2yuv(foreground);            \n            vec3 p = vec3(0., 0., 0.);            \n            p[2] = - u_faceGlowVal*.004;\n            p[1] = 1. - p[2];\n            yuv.x = p[0] + yuv.x*p[1] + yuv.x*yuv.x*p[2];                    \n            float satScale = 1.0 + u_faceGlowVal*.0008;\n            vec3 foregroundEnhanced = yuvsat2rgb(yuv, satScale);            \n            vec2 ellipseCenter;\n            ellipseCenter.x = (u_denoiseTl.x+u_denoiseBr.x)*0.5;\n            ellipseCenter.y = (u_denoiseTl.y+u_denoiseBr.y)*0.5*1.101;          \n\n            vec2 uvCoord = u_zoomScale*v_texCoord+u_panTilt;\n            float shading = computeShading(uvCoord, ellipseCenter, alpha);\n            \n            // apply effect to foreground\n            foreground = mix(foregroundEnhanced,foreground,shading);\n            //alpha = shading; // DEBUG\n          }          \n\t\t\t\t\tgl_FragColor = vec4(mix(foreground,background,alpha),1);\n          //gl_FragColor =  vec4(foreground,1);//vec4(vec3(alpha),1);\n\t\t\t\t\treturn;\n\t\t\t\t}\n        if (u_operationMode == CROPRESIZE_MODE) {\n\t\t\t\t\tvec3 rgb = texture2D(u_image, u_zoomScale*v_texCoord+u_panTilt).rgb;\n\n          if (u_toneMapPoly[0] != 0. || u_toneMapPoly[1] != 1. || u_toneMapPoly[2] != 0.0 ) {\n            rgb = applyToneMap(rgb, u_toneMapPoly);\n          }\n\n\t\t\t\t\tif (u_satAdjust != 1.) {\n\t\t\t\t\t\tconst vec3 W = vec3(0.2125, 0.7154, 0.0721);\n\n\t\t\t\t\t\tvec3 intensity = vec3(dot(rgb, W));\n\t\t\t\t\t\tgl_FragColor = vec4(mix(intensity, rgb, u_satAdjust), 1.);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tgl_FragColor = vec4(rgb,1.);\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n        if (u_operationMode == DOWNSCALE_MODE) {\n          vec2 offset = 0.4*vec2(1.,1.) / u_textureSize;\n        \n          gl_FragColor = (1./3.)*(texture2D(u_image, v_texCoord) + \n                0.5*texture2D(u_image, v_texCoord + vec2(offset[0],0.)) + 0.5*texture2D(u_image, v_texCoord - vec2(offset[0],0.)) +\n                0.5*texture2D(u_image, v_texCoord + vec2(0,offset[1])) + 0.5*texture2D(u_image, v_texCoord - vec2(0.,offset[1])));\t\t\n          return;\n        }\n\n        if (u_operationMode == BLUR_MODE) {\n\t\t\t\t\tvec3 color = vec3(0.0);\n          vec2 off1 = vec2(1.3846153846) * u_direction / u_textureSize;\n\t\t\t\t\tvec2 off2 = vec2(3.2307692308) * u_direction / u_textureSize;\n\n\t\t\t\t\tfloat alpha = 0.;\n\t\t\t\t\t//vec2 off1_a = vec2(1.3333333333333333) * u_direction / u_textureSize;\n\t\t\t\t\tvec2 off1_a = vec2(1.15) * u_direction / u_textureSize;\n          if (u_erodeEnable == 0) {            \n\t\t\t\t\t  //alpha += texture2D(u_image, v_texCoord).a * 0.29411764705882354;\n            //alpha += texture2D(u_image, v_texCoord + off1_a).a * 0.35294117647058826;\n            //alpha += texture2D(u_image, v_texCoord - off1_a).a * 0.35294117647058826;\n            off1 = vec2(1.5*1.3846153846) * u_direction / u_textureSize;\n\t\t\t\t\t  off2 = vec2(1.5*3.2307692308) * u_direction / u_textureSize;\n            alpha += texture2D(u_image, v_texCoord).a * 0.2270270270;\n            alpha += texture2D(u_image, v_texCoord + off1).a * 0.3162162162;\n            alpha += texture2D(u_image, v_texCoord - off1).a * 0.3162162162;\n            alpha += texture2D(u_image, v_texCoord + off2).a * 0.0702702703;\n            alpha += texture2D(u_image, v_texCoord - off2).a * 0.0702702703;\n          } else {\n            alpha += smoothstep(0.0, 0.85, texture2D(u_image, v_texCoord).a) * 0.2270270270;\n            alpha += smoothstep(0.0, 0.85, texture2D(u_image, v_texCoord + off1).a) * 0.3162162162;\n            alpha += smoothstep(0.0, 0.85, texture2D(u_image, v_texCoord - off1).a) * 0.3162162162;\n            alpha += smoothstep(0.0, 0.85, texture2D(u_image, v_texCoord + off2).a) * 0.0702702703;\n            alpha += smoothstep(0.0, 0.85, texture2D(u_image, v_texCoord - off2).a) * 0.0702702703;\n          }\n          //alpha = smoothstep(0.0,0.5, alpha);\n\t\t\t\t\t\n\t\t\t\t\tcolor += texture2D(u_image, v_texCoord).rgb * 0.2270270270;\n\t\t\t\t\tcolor += texture2D(u_image, v_texCoord + off1).rgb * 0.3162162162;\n\t\t\t\t\tcolor += texture2D(u_image, v_texCoord - off1).rgb * 0.3162162162;\n\t\t\t\t\tcolor += texture2D(u_image, v_texCoord + off2).rgb * 0.0702702703;\n\t\t\t\t\tcolor += texture2D(u_image, v_texCoord - off2).rgb * 0.0702702703;\n\n\t\t\t\t\t//gl_FragColor = vec4(color, 1.-alpha);\n          gl_FragColor = vec4(color, alpha);\n\t\t\t\t\treturn;\n\t\t\t\t}\n        // if (u_operationMode == BLUR_MODE) {\n        //   vec3 color = vec3(0.0);\t\t\t\t\t\n          \n        //   float alpha = 0.;\n        //   //vec2 off1_a = vec2(1.3333333333333333) * u_direction / u_textureSize;\n        //   vec2 off1_a = vec2(1.15) * u_direction / u_textureSize;\n        //   alpha += texture2D(u_image, v_texCoord).a * 0.29411764705882354;\n        //   alpha += texture2D(u_image, v_texCoord + off1_a).a * 0.35294117647058826;\n        //   alpha += texture2D(u_image, v_texCoord - off1_a).a * 0.35294117647058826;\n          \n        //   vec2 off1 = vec2(1.3846153846) * u_direction / u_textureSize;\n        //   vec2 off2 = vec2(3.2307692308) * u_direction / u_textureSize;\n        //   color += texture2D(u_image, v_texCoord).rgb * 0.2270270270;\n        //   color += texture2D(u_image, v_texCoord + off1).rgb * 0.3162162162;\n        //   color += texture2D(u_image, v_texCoord - off1).rgb * 0.3162162162;\n        //   color += texture2D(u_image, v_texCoord + off2).rgb * 0.0702702703;\n        //   color += texture2D(u_image, v_texCoord - off2).rgb * 0.0702702703;\n          \n        //   gl_FragColor = vec4(color, alpha);\n        //   return;\n        // }\n        if (u_operationMode == FLOOD_MODE) {\n          vec3 color = vec3(0.0);\t\t\t\t\t\n          vec2 off1 = vec2(1.5) * u_direction / u_textureSize;\n          vec2 off2 = vec2(3.) * u_direction / u_textureSize;\n          color += texture2D(u_image, v_texCoord).rgb;\n          color += texture2D(u_image, v_texCoord + off1).rgb;\n          color += texture2D(u_image, v_texCoord - off1).rgb;\n          color += texture2D(u_image, v_texCoord + off2).rgb;\n          color += texture2D(u_image, v_texCoord - off2).rgb;\n          color = clamp(color,0.,1.);\n          gl_FragColor = vec4(color, 1.);\n          return;\n        }\n        if (u_operationMode == SMOOTHMASK_MODE) {\n          // Compute the smoothing constant based on the motion \n          float smooth_coef = 1.;\n          float out_smooth;\n          out_smooth = smooth_coef*texture2D(u_image, v_texCoord).a + (1.-smooth_coef)*texture2D(u_image_alpha, v_texCoord).a;\n          float motion = length(out_smooth-texture2D(u_image_alpha, v_texCoord).a);\n          //if (motion < 0.1) smooth_coef = 0.125;\n          //else  smooth_coef = 0.85;\n          float max_smooth = 0.85;//0.8;\n          float min_smooth = 0.1275;\t\n          float max_motion_val = 0.9;//0.8;\n          float min_motion_val = 0.05;//0.1;\n\n          float slope = (max_smooth - min_smooth)/(max_motion_val - min_motion_val);\n          float offset = max_smooth - slope*max_motion_val;\n          smooth_coef = min(max(slope*motion + offset,min_smooth),max_smooth);\n                    \n          gl_FragColor = vec4(texture2D(u_image, v_texCoord).rgb,\n                  smooth_coef*texture2D(u_image, v_texCoord).a + (1.-smooth_coef)*texture2D(u_image_alpha, v_texCoord).a);\n          \n          return;\n        }\n        \n        if (u_operationMode == SATURATE_MODE) {\t\t\t\t\t\n          const vec3 W = vec3(0.2125, 0.7154, 0.0721);\n          vec3 rgb = texture2D(u_image, v_texCoord).rgb;\n          vec3 intensity = vec3(dot(rgb, W));\n          gl_FragColor = vec4(mix(intensity, rgb, u_satAdjust), 1.);\n          return;\n        }\n        \n        if (u_operationMode == SMOOTH_MODE) {\t\t\t\t\t\n          float smooth_coef = 0.25;\n          gl_FragColor = smooth_coef*texture2D(u_image, v_texCoord) + (1.-smooth_coef)*texture2D(u_image_alpha, v_texCoord);\t\t\t\t\t\t\t\t\t\t\t\t\n          return;\n        }\n        \n        if (u_operationMode == DOWNSCALE_SUBTRACT_MODE) {\n          vec2 offset = 0.4*vec2(1.,1.) / u_textureSize;\n          float smooth_coef = 0.25;\n          vec3 in1 = (texture2D(u_image, v_texCoord).rgb);\n          vec3 in2 = smooth_coef*in1 + (1.-smooth_coef)*(texture2D(u_image_bkground, v_texCoord).rgb);\n          float alpha = abs((in1.r + in1.g + in1.b) - (in2.r + in2.g + in2.b));\n          float alpha2 = mix(0.0, 1.0, step(0.2, alpha));\t\n          alpha = 1.-smoothstep(0.0,0.00015, alpha);\n          alpha = clamp(alpha,0.25,1.);\n          gl_FragColor = vec4(alpha2,alpha,alpha,1);\t\t\t\t\t\n          return;\n        }\n\n        if (u_operationMode == DENOISE_UPDATE_MODE) {\n          // u_image_alpha = noisy image, u_image_bkground = previously clean image\n          float smooth_coef = 0.25;\n          float alpha  = texture2D(u_image, v_texCoord).g;\n          vec3 noisy = texture2D(u_image_alpha, v_texCoord).rgb;\n          vec3 clean = smooth_coef*noisy + (1.-smooth_coef)*(texture2D(u_image_denoise, v_texCoord).rgb);\n          if ((v_texCoord.x>u_denoiseTl.x)&&(v_texCoord.y>u_denoiseTl.y)&&(v_texCoord.x<u_denoiseBr.x)&&(v_texCoord.y<u_denoiseBr.y))\n          {\n            alpha = 1.;\n          }\n          gl_FragColor = vec4(mix(noisy,clean,alpha),1.);\n          return;\n        }\t\n\n        if (u_operationMode == COPY_MODE) {\n          gl_FragColor = texture2D(u_image, v_texCoord);\n          return;\n        }\t\t\t\n        \n        if (u_operationMode == PRECOMPUTE_GF_MODE) {   \n          vec2 off1 = vec2(0.8*1.3846153846, 0.) / u_textureSize;\n          vec2 off2 = vec2(0., 0.8*1.3846153846) / u_textureSize;\n          vec2 off3 = vec2(3.2307692308, 0.) / u_textureSize;\n          vec2 off4 = vec2(0., 3.2307692308) / u_textureSize;\n\n          vec3 rgb   = texture2D(u_image, v_texCoord).rgb;\n          float intensity  = dot(rgb, vec3(0.299, 0.587, 0.114));\n          float intensitySquareMean = intensity*intensity*(1./5.);\n          float intensityMean = intensity*(1./5.);\n\n          float intensityTmp = dot(texture2D(u_image, v_texCoord + off1).rgb, vec3(0.299, 0.587, 0.114));\n          intensityMean += (1./5.)*intensityTmp;\n          intensitySquareMean += (1./5.)*intensityTmp*intensityTmp;\n\n          intensityTmp = dot(texture2D(u_image, v_texCoord - off1).rgb, vec3(0.299, 0.587, 0.114));\n          intensityMean += (1./5.)*intensityTmp;\n          intensitySquareMean += (1./5.)*intensityTmp*intensityTmp;\n\n          intensityTmp = dot(texture2D(u_image, v_texCoord + off2).rgb, vec3(0.299, 0.587, 0.114));\n          intensityMean += (1./5.)*intensityTmp;\n          intensitySquareMean += (1./5.)*intensityTmp*intensityTmp;\n\n          intensityTmp = dot(texture2D(u_image, v_texCoord - off2).rgb, vec3(0.299, 0.587, 0.114));\n          intensityMean += (1./5.)*intensityTmp;\n          intensitySquareMean += (1./5.)*intensityTmp*intensityTmp;\n                    \n          //step(a,x)*step(x,b);\n          float isSkinColor;\n          //isSkinColor = step(80./255., intensity)*step(intensity, 1.);\n          //isSkinColor = step(80./255., intensity)*step(intensity, 1.);\n          isSkinColor = step(50./255., intensity)*step(intensity, 1.);\n          float Cb = dot(rgb, vec3(-0.169, -0.331, 0.499))+0.5;\n          //isSkinColor = isSkinColor*step(85./255., Cb)*step(Cb, 135./255.);\n          isSkinColor = isSkinColor*step(85./255., Cb)*step(Cb, 124./255.); \n          //isSkinColor = isSkinColor*step(85./255., Cb)*step(Cb, 122./255.);\n          float Cr = dot(rgb, vec3(0.499, -0.418, -0.0813))+0.5;\n          isSkinColor = isSkinColor*step(120./255., Cr)*step(Cr, 180./255.);\n\n          // compute the alpha blending weight\n          float alpha = intensitySquareMean - intensityMean*intensityMean;\n          if (!((v_texCoord.x>u_denoiseTl.x)&&(v_texCoord.y>u_denoiseTl.y)&&(v_texCoord.x<u_denoiseBr.x)&&(v_texCoord.y<u_denoiseBr.y)))\n          {\n            isSkinColor = 0.;\n          }\n          alpha = alpha/(alpha + u_faceSmoothEps*isSkinColor);\n\n          if (u_facialSmoothInit == 0) {\n            float smooth_coef = 0.25;\n            alpha = smooth_coef*alpha + (1.-smooth_coef)*texture2D(u_image_alpha, v_texCoord).a;\n          }\n\n          rgb.x  = intensityMean;\n          gl_FragColor = vec4(rgb,alpha);\n          return;\n        }\n               \n        if (u_operationMode == COMPUTE_GF_COEFF_MODE) {\n          vec3 ycbcrOrig = vec3(0.0);                 \n          vec3 rgb = texture2D(u_image, u_zoomScale*v_texCoord+u_panTilt).rgb;\n          vec3 imgOrig = texture2D(u_image_bkground, u_zoomScale*v_texCoord+u_panTilt).rgb;\t\t\t\t\t\n\n          ycbcrOrig.x = dot(imgOrig, vec3(0.299, 0.587, 0.114));\n          \n          ycbcrOrig.y = dot(imgOrig, vec3(-0.169, -0.331, 0.499))+0.5;\n          ycbcrOrig.z = dot(imgOrig, vec3(0.499, -0.418, -0.0813))+0.5;\n          ycbcrOrig.x = mix(rgb.x, ycbcrOrig.x, texture2D(u_image, u_zoomScale*v_texCoord+u_panTilt).a);\n          //ycbcrOrig.x = rgb.x;\n          ycbcrOrig = clamp(ycbcrOrig, 0., 1.);\n          \n          rgb.x = ycbcrOrig.x + 1.402*(ycbcrOrig.z-0.5);\n          rgb.y = ycbcrOrig.x - 0.344*(ycbcrOrig.y-0.5) - 0.714*(ycbcrOrig.z-0.5);\n          rgb.z = ycbcrOrig.x + 1.772*(ycbcrOrig.y-0.5);\n          \n          if (u_toneMapPoly[0] != 0. || u_toneMapPoly[1] != 1. || u_toneMapPoly[2] != 0.0 ) {            \n            rgb = applyToneMap(rgb, u_toneMapPoly);\n          }\n\n          if (u_satAdjust != 1.) {\n            const vec3 W = vec3(0.2125, 0.7154, 0.0721);\n            \n            vec3 intensity = vec3(dot(rgb, W));\n            gl_FragColor = vec4(mix(intensity, rgb, u_satAdjust), 1.);\n          }\n          else {\n            gl_FragColor = vec4(rgb,1.);\n          }          \n          return;  \n        }\n      }");if(!n||!r)return;const i=t.createProgram();if(t.attachShader(i,n),t.attachShader(i,r),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS))throw t.getProgramInfoLog(i),t.deleteProgram(i),"[Segmentation] Error linking program:\n${infoLog}";t.deleteShader(n),t.deleteShader(r),this.programSegment_=i,this.positionLocation_=t.getAttribLocation(this.programSegment_,"a_position"),t.enableVertexAttribArray(this.positionLocation_),t.bindBuffer(t.ARRAY_BUFFER,t.createBuffer()),t.vertexAttribPointer(this.positionLocation_,2,t.FLOAT,!1,0,0),this.positionArray_=new Float32Array([0,0,e.width,0,0,e.height,0,e.height,e.width,0,e.width,e.height]),t.bufferData(t.ARRAY_BUFFER,this.positionArray_,t.STATIC_DRAW),this.texcoordLocation_=t.getAttribLocation(this.programSegment_,"a_texCoord"),t.enableVertexAttribArray(this.texcoordLocation_),t.bindBuffer(t.ARRAY_BUFFER,t.createBuffer()),t.vertexAttribPointer(this.texcoordLocation_,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),t.STATIC_DRAW),this.textureSizeLocation_=t.getUniformLocation(this.programSegment_,"u_textureSize"),this.resolutionLocation_=t.getUniformLocation(this.programSegment_,"u_resolution"),this.directionLocation_=t.getUniformLocation(this.programSegment_,"u_direction"),this.flipYLocation_=t.getUniformLocation(this.programSegment_,"u_flipY"),this.shaderOperationMode_=t.getUniformLocation(this.programSegment_,"u_operationMode"),this.facialSmoothInit_=t.getUniformLocation(this.programSegment_,"u_facialSmoothInit"),this.studioLightEnable_=t.getUniformLocation(this.programSegment_,"u_studioLightEnable"),this.erodeEnable_=t.getUniformLocation(this.programSegment_,"u_erodeEnable"),this.zoomScale_=t.getUniformLocation(this.programSegment_,"u_zoomScale"),this.faceSmoothEps_=t.getUniformLocation(this.programSegment_,"u_faceSmoothEps"),this.faceGlowVal_=t.getUniformLocation(this.programSegment_,"u_faceGlowVal"),this.aspecRatioVal_=t.getUniformLocation(this.programSegment_,"u_aspectRatio"),this.lightXVal_=t.getUniformLocation(this.programSegment_,"u_lightXVal"),this.lightYVal_=t.getUniformLocation(this.programSegment_,"u_lightYVal"),this.satAdjust_=t.getUniformLocation(this.programSegment_,"u_satAdjust"),this.toneMapPoly_=t.getUniformLocation(this.programSegment_,"u_toneMapPoly"),this.panTilt_=t.getUniformLocation(this.programSegment_,"u_panTilt"),this.denoiseTl_=t.getUniformLocation(this.programSegment_,"u_denoiseTl"),this.denoiseBr_=t.getUniformLocation(this.programSegment_,"u_denoiseBr"),t.viewport(0,0,this.widthModel_,this.heightModel_),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.useProgram(this.programSegment_),t.uniform1f(this.flipYLocation_,1),t.uniform1i(this.shaderOperationMode_,this.shaderOperationModeOptions_.blend),t.uniform1i(this.facialSmoothInit_,1),t.uniform1i(this.studioLightEnable_,0),t.uniform1i(this.erodeEnable_,0),t.uniform1f(this.faceSmoothEps_,.001),t.uniform1f(this.faceGlowVal_,100),t.uniform1f(this.aspecRatioVal_,e.height/e.width),t.uniform1f(this.lightXVal_,50),t.uniform1f(this.lightYVal_,50),t.uniform1f(this.zoomScale_,1),t.uniform2f(this.panTilt_,0,0),t.uniform1f(this.satAdjust_,1),t.uniform3f(this.toneMapPoly_,0,1,0),t.uniform2f(this.denoiseTl_,2,2),t.uniform2f(this.denoiseBr_,-1,-1),t.uniform2f(this.resolutionLocation_,e.width,e.height),t.uniform2f(this.textureSizeLocation_,this.widthModel_,this.heightModel_),this.u_imageLocation_=this.gl_.getUniformLocation(this.programSegment_,"u_image"),this.gl_.uniform1i(this.u_imageLocation_,0),this.u_imageBkgndLocation_=this.gl_.getUniformLocation(this.programSegment_,"u_image_bkground"),this.gl_.uniform1i(this.u_imageBkgndLocation_,1),this.u_imageAlphaLocation_=this.gl_.getUniformLocation(this.programSegment_,"u_image_alpha"),this.gl_.uniform1i(this.u_imageAlphaLocation_,2),this.u_imageDenoiseLocation_=this.gl_.getUniformLocation(this.programSegment_,"u_image_denoise"),this.gl_.uniform1i(this.u_imageDenoiseLocation_,3),this.inPixels_=new Uint8Array(4*this.widthModel_*this.heightModel_),this.textureBackground_=l(this.gl_),this.texturePrevMask_=l(this.gl_),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.widthModel_,this.heightModel_,0,t.RGBA,t.UNSIGNED_BYTE,null),this.gl_.activeTexture(this.gl_.TEXTURE2),this.fbPrevMask_=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this.fbPrevMask_),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texturePrevMask_,0),this.fbTmp_=[],this.textureTmp_=[];for(let e=0;e<2;e++){var o=l(this.gl_);this.textureTmp_.push(o),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.widthModel_,this.heightModel_,0,t.RGBA,t.UNSIGNED_BYTE,null);var a=t.createFramebuffer();this.fbTmp_.push(a),t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,o,0)}this.textureDenoiseInit_=!1,this.textureDenoiseHist_=[],this.fbDenoiseHist_=[];for(let n=0;n<2;n++)this.textureDenoiseHist_.push(l(this.gl_)),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e.width,e.height,0,t.RGBA,t.UNSIGNED_BYTE,null),this.fbDenoiseHist_.push(t.createFramebuffer()),t.bindFramebuffer(t.FRAMEBUFFER,this.fbDenoiseHist_[n]),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.textureDenoiseHist_[n],0);this.denoiseHistIndex_=0,this.fbFacialSmooth_=[],this.textureFacialSmooth_=l(this.gl_),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.widthModel_,this.heightModel_,0,t.RGBA,t.UNSIGNED_BYTE,null),this.fbFacialSmooth_=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this.fbFacialSmooth_),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.textureFacialSmooth_,0),this.texture_=l(this.gl_),this.gl_.activeTexture(this.gl_.TEXTURE0),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.texture_),t.bindFramebuffer(t.FRAMEBUFFER,null)}reinitTextures(e,t){if(this.textureInit_=!1,this.width_!==e||this.height_!==t){this.width_=e,this.height_=t,this.canvas_.setAttribute("width",this.width_),this.canvas_.setAttribute("height",this.height_),!0===this.debug_&&console.debug("[Segmentation::reinitTextures] Resolution",this.width_,this.height_,"canvas",this.canvas_.width,this.canvas_.height),this.gl_.uniform1f(this.aspecRatioVal_,this.height_/this.width_),this.textureInit_=!1;for(let e=0;e<this.textureDenoiseHist_.length;e++)this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.textureDenoiseHist_[e]),this.gl_.texImage2D(this.gl_.TEXTURE_2D,0,this.gl_.RGBA,this.width_,this.height_,0,this.gl_.RGBA,this.gl_.UNSIGNED_BYTE,null);this.denoiseHistIndex_=0}this.denoiseReset()}smoothMaskReset(){this.init_prev_mask_=!1}denoiseReset(){this.textureDenoiseInit_=!1}faceSmoothReset(){this.facialSmoothNeedInit_=!0}faceBboxReset(){this.xLeft=0,this.xRight=0,this.yTop=0,this.yBottom=0}updateStudioLightBbox(e){let t,n,r,i;t=e._getLargestFaceTLx(),r=e._getLargestFaceTLy(),n=t+e._getLargestFaceWidth(),i=r+e._getLargestFaceHeight(),t/=this.widthModel_-1,n/=this.widthModel_-1,r/=this.heightModel_-1,i/=this.heightModel_-1,t*=.95,r*=.95,n=Math.min(1,1.05*n),i=Math.min(1,1.05*i);let o=.35;(Math.abs(this.xRight-this.xLeft-(n-t))>.005||Math.abs(this.yBottom-this.yTop-(i-r))>.005)&&(this.xLeft=o*t+.65*this.xLeft,this.xRight=o*n+.65*this.xRight,this.yTop=o*r+.65*this.yTop,this.yBottom=o*i+.65*this.yBottom),this.gl_.uniform2f(this.denoiseTl_,this.xLeft,this.yTop),this.gl_.uniform2f(this.denoiseBr_,this.xRight,this.yBottom)}studioLightProcess(e,t,n,r){let i;this.gl_.activeTexture(this.gl_.TEXTURE1),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.textureTmp_[0]),this.gl_.activeTexture(this.gl_.TEXTURE0),i=!0===n?this.textureDenoiseHist_[this.denoiseHistIndex_]:!0===t?this.textureDenoiseHist_[(this.denoiseHistIndex_+1)%2]:this.texture_,this.gl_.bindTexture(this.gl_.TEXTURE_2D,i),this.gl_.activeTexture(this.gl_.TEXTURE2),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.textureFacialSmooth_),this.gl_.viewport(0,0,this.widthModel_,this.heightModel_),this.updateStudioLightBbox(e),this.gl_.uniform1i(this.shaderOperationMode_,this.shaderOperationModeOptions_.studiolight),this.gl_.uniform1f(this.flipYLocation_,1),this.gl_.viewport(0,0,this.canvas_.width,this.canvas_.height),!0===r?(this.gl_.bindFramebuffer(this.gl_.FRAMEBUFFER,null),this.gl_.drawArrays(this.gl_.TRIANGLES,0,6)):(this.gl_.uniform1f(this.flipYLocation_,-1),this.gl_.bindFramebuffer(this.gl_.FRAMEBUFFER,this.fbDenoiseHist_[this.denoiseHistIndex_]),this.gl_.drawArrays(this.gl_.TRIANGLES,0,6)),this.gl_.viewport(0,0,this.widthModel_,this.heightModel_)}async passthrough(e){this.gl_.activeTexture(this.gl_.TEXTURE1),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.textureTmp_[1]),this.gl_.activeTexture(this.gl_.TEXTURE2),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.texturePrevMask_);let t=new Uint8Array(4);this.gl_.activeTexture(this.gl_.TEXTURE0),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.texturePrevMask_),this.gl_.uniform1i(this.shaderOperationMode_,this.shaderOperationModeOptions_.copy),this.gl_.viewport(0,0,1,1),this.gl_.uniform1f(this.flipYLocation_,1),this.gl_.bindFramebuffer(this.gl_.FRAMEBUFFER,this.fbTmp_[0]),this.gl_.drawArrays(this.gl_.TRIANGLES,0,6),this.flags_.nonBlockingAsyncPixelReadback?await u(this.gl_,0,0,1,1,this.gl_.RGBA,this.gl_.UNSIGNED_BYTE,t):this.gl_.readPixels(0,0,1,1,this.gl_.RGBA,this.gl_.UNSIGNED_BYTE,t),this.gl_.activeTexture(this.gl_.TEXTURE3),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.texture_),this.gl_.activeTexture(this.gl_.TEXTURE1),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.textureTmp_[1]),this.gl_.activeTexture(this.gl_.TEXTURE2),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.texturePrevMask_),this.gl_.activeTexture(this.gl_.TEXTURE0),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.texture_),0==this.textureInit_?(this.gl_.texImage2D(this.gl_.TEXTURE_2D,0,this.gl_.RGB,this.gl_.RGB,this.gl_.UNSIGNED_BYTE,e),this.textureInit_=!0):this.gl_.texSubImage2D(this.gl_.TEXTURE_2D,0,0,0,this.gl_.RGB,this.gl_.UNSIGNED_BYTE,e),this.gl_.viewport(0,0,this.canvas_.width,this.canvas_.height),this.gl_.bindFramebuffer(this.gl_.FRAMEBUFFER,null),this.gl_.drawArrays(this.gl_.TRIANGLES,0,6)}async applyDenoise(e){let t,n,r,i;this.gl_.activeTexture(this.gl_.TEXTURE3),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.texture_),this.denoiseHistIndex_=(this.denoiseHistIndex_+1)%2,this.gl_.activeTexture(this.gl_.TEXTURE2),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.textureDenoiseHist_[this.denoiseHistIndex_]),this.gl_.activeTexture(this.gl_.TEXTURE1),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.texturePrevMask_),this.gl_.activeTexture(this.gl_.TEXTURE0),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.texture_),!1===this.textureInit_?(this.gl_.texImage2D(this.gl_.TEXTURE_2D,0,this.gl_.RGB,this.gl_.RGB,this.gl_.UNSIGNED_BYTE,e),this.textureInit_=!0):this.gl_.texSubImage2D(this.gl_.TEXTURE_2D,0,0,0,this.gl_.RGB,this.gl_.UNSIGNED_BYTE,e),this.gl_.activeTexture(this.gl_.TEXTURE2),!1===this.textureDenoiseInit_&&(this.gl_.texImage2D(this.gl_.TEXTURE_2D,0,this.gl_.RGB,this.gl_.RGB,this.gl_.UNSIGNED_BYTE,e),this.textureDenoiseInit_=!0),this.gl_.activeTexture(this.gl_.TEXTURE1),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.textureDenoiseHist_[this.denoiseHistIndex_]),this.gl_.uniform1i(this.shaderOperationMode_,this.shaderOperationModeOptions_.downscale_subtract),this.gl_.viewport(0,0,this.widthModel_,this.heightModel_),this.gl_.uniform1f(this.flipYLocation_,-1),this.gl_.bindFramebuffer(this.gl_.FRAMEBUFFER,this.fbTmp_[1]),this.gl_.drawArrays(this.gl_.TRIANGLES,0,6),this.flags_.nonBlockingAsyncPixelReadback?await u(this.gl_,0,0,this.widthModel_,this.heightModel_,this.gl_.RGBA,this.gl_.UNSIGNED_BYTE,this.inPixels_):this.gl_.readPixels(0,0,this.widthModel_,this.heightModel_,this.gl_.RGBA,this.gl_.UNSIGNED_BYTE,this.inPixels_),t=2*this.widthModel_,n=-1,r=2*this.heightModel_,i=-1;for(var o=0;o<this.heightModel_;o++)for(var a=0;a<this.widthModel_;a++)if(this.inPixels_[4*(o*this.widthModel_+a)+0]>200){t=Math.min(t,a);break}for(o=0;o<this.heightModel_;o++)for(a=this.widthModel_-1;a>0;a--)if(this.inPixels_[4*(o*this.widthModel_+a)+0]>200){n=Math.max(n,a);break}for(a=0;a<this.widthModel_;a++)for(o=0;o<this.heightModel_;o++)if(this.inPixels_[4*(o*this.widthModel_+a)+0]>200){r=Math.min(r,o);break}for(a=0;a<this.widthModel_;a++)for(o=this.heightModel_-1;o>0;o--)if(this.inPixels_[4*(o*this.widthModel_+a)+0]>200){i=Math.max(i,o);break}t/=this.widthModel_-1,n/=this.widthModel_-1,r/=this.heightModel_-1,i/=this.heightModel_-1,t*=.9,r*=.9,n=Math.min(1,1.1*n),i=Math.min(1,1.1*i),this.gl_.uniform2f(this.denoiseTl_,t,r),this.gl_.uniform2f(this.denoiseBr_,n,i),this.gl_.activeTexture(this.gl_.TEXTURE0),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.textureTmp_[1]),this.gl_.activeTexture(this.gl_.TEXTURE2),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.textureDenoiseHist_[this.denoiseHistIndex_]),this.gl_.uniform1i(this.shaderOperationMode_,this.shaderOperationModeOptions_.denoise_update),this.gl_.viewport(0,0,this.canvas_.width,this.canvas_.height),this.gl_.bindFramebuffer(this.gl_.FRAMEBUFFER,this.fbDenoiseHist_[(this.denoiseHistIndex_+1)%2]),this.gl_.uniform1f(this.flipYLocation_,-1),this.gl_.drawArrays(this.gl_.TRIANGLES,0,6)}copyDenoiseToCanvas(){this.gl_.activeTexture(this.gl_.TEXTURE0),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.textureDenoiseHist_[[(this.denoiseHistIndex_+1)%2]]),this.gl_.uniform1i(this.shaderOperationMode_,this.shaderOperationModeOptions_.copy),this.gl_.bindFramebuffer(this.gl_.FRAMEBUFFER,null),this.gl_.uniform1f(this.flipYLocation_,1),this.gl_.drawArrays(this.gl_.TRIANGLES,0,6)}async preProcess(e,t){this.gl_.activeTexture(this.gl_.TEXTURE3),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.texturePrevMask_),this.gl_.activeTexture(this.gl_.TEXTURE1),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.textureTmp_[1]),this.gl_.activeTexture(this.gl_.TEXTURE2),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.texturePrevMask_),this.gl_.activeTexture(this.gl_.TEXTURE0),!0===t?this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.textureDenoiseHist_[(this.denoiseHistIndex_+1)%2]):(this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.texture_),0==this.textureInit_?this.gl_.texImage2D(this.gl_.TEXTURE_2D,0,this.gl_.RGB,this.gl_.RGB,this.gl_.UNSIGNED_BYTE,e):this.gl_.texSubImage2D(this.gl_.TEXTURE_2D,0,0,0,this.gl_.RGB,this.gl_.UNSIGNED_BYTE,e)),this.readPixelSuccess=!1,this.gl_.uniform1i(this.shaderOperationMode_,this.shaderOperationModeOptions_.downscale),this.gl_.viewport(0,0,this.widthModel_,this.heightModel_),this.gl_.uniform1f(this.flipYLocation_,-1),this.gl_.bindFramebuffer(this.gl_.FRAMEBUFFER,this.fbTmp_[0]),this.gl_.drawArrays(this.gl_.TRIANGLES,0,6),this.flags_.nonBlockingAsyncPixelReadback?await u(this.gl_,0,0,this.widthModel_,this.heightModel_,this.gl_.RGBA,this.gl_.UNSIGNED_BYTE,this.inPixels_):this.gl_.readPixels(0,0,this.widthModel_,this.heightModel_,this.gl_.RGBA,this.gl_.UNSIGNED_BYTE,this.inPixels_),this.readPixelSuccess=!0}putinferEngineInData(e,t){if(this.readPixelSuccess){const n=255;let r=0;for(let i=0;i<this.widthModel_*this.heightModel_*4;i+=4)e.HEAPF32[t+r]=this.inPixels_[i]/n,e.HEAPF32[t+r+1]=this.inPixels_[i+1]/n,e.HEAPF32[t+r+2]=this.inPixels_[i+2]/n,r+=3}}putinferEngineMask(e,t){this.gl_.activeTexture(this.gl_.TEXTURE0);let n=0;for(var r=0;r<this.inPixels_.length;r+=4)this.inPixels_[r+3]=Math.min(Math.max(255-64*e.HEAPF32[t+n],0),255),n+=1;this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.textureTmp_[0]),0==this.textureInit_?(this.gl_.texImage2D(this.gl_.TEXTURE_2D,0,this.gl_.RGBA,this.widthModel_,this.heightModel_,0,this.gl_.RGBA,this.gl_.UNSIGNED_BYTE,this.inPixels_),this.textureInit_=!0):this.gl_.texSubImage2D(this.gl_.TEXTURE_2D,0,0,0,this.widthModel_,this.heightModel_,this.gl_.RGBA,this.gl_.UNSIGNED_BYTE,this.inPixels_)}getData(e){let t=0;for(let n=0;n<this.widthModel_*this.heightModel_*4;n+=4)e[t]=this.inPixels_[n]/255,e[t+1]=this.inPixels_[n+1]/255,e[t+2]=this.inPixels_[n+2]/255,t+=3}getPixelBuffer(){return this.inPixels_}async reframeOnly(e){this.gl_.uniform1i(this.shaderOperationMode_,this.shaderOperationModeOptions_.cropresize),this.gl_.uniform1f(this.flipYLocation_,1),this.gl_.viewport(0,0,this.canvas_.width,this.canvas_.height),this.gl_.activeTexture(this.gl_.TEXTURE0),!0===e?this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.textureDenoiseHist_[(this.denoiseHistIndex_+1)%2]):this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.texture_),this.gl_.activeTexture(this.gl_.TEXTURE1),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.textureTmp_[0]),this.gl_.activeTexture(this.gl_.TEXTURE2),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.texturePrevMask_),this.gl_.bindFramebuffer(this.gl_.FRAMEBUFFER,null),this.gl_.drawArrays(this.gl_.TRIANGLES,0,6)}facialSmoothing(e,t,n){let r,i,o,a;this.gl_.activeTexture(this.gl_.TEXTURE0),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.textureTmp_[0]),this.gl_.activeTexture(this.gl_.TEXTURE1),!0===t?this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.textureDenoiseHist_[(this.denoiseHistIndex_+1)%2]):this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.texture_),this.gl_.activeTexture(this.gl_.TEXTURE2),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.textureFacialSmooth_),this.gl_.viewport(0,0,this.widthModel_,this.heightModel_),r=e._getLargestFaceTLx(),o=e._getLargestFaceTLy(),i=r+e._getLargestFaceWidth(),a=o+e._getLargestFaceHeight(),r/=this.widthModel_-1,i/=this.widthModel_-1,o/=this.heightModel_-1,a/=this.heightModel_-1,r*=.95,o*=.95,i=Math.min(1,1.05*i),a=Math.min(1,1.05*a),this.gl_.uniform2f(this.denoiseTl_,r,o),this.gl_.uniform2f(this.denoiseBr_,i,a),this.gl_.uniform1i(this.shaderOperationMode_,this.shaderOperationModeOptions_.precompute_gf),0==e._getNumFaces()&&(this.facialSmoothNeedInit_=!0),!0===this.facialSmoothNeedInit_&&this.gl_.uniform1i(this.facialSmoothInit_,1),this.gl_.uniform1f(this.flipYLocation_,-1),this.gl_.bindFramebuffer(this.gl_.FRAMEBUFFER,this.fbTmp_[1]),this.gl_.drawArrays(this.gl_.TRIANGLES,0,6),!0===this.facialSmoothNeedInit_&&(this.gl_.uniform1i(this.facialSmoothInit_,0),this.facialSmoothNeedInit_=!1),this.gl_.activeTexture(this.gl_.TEXTURE0),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.textureTmp_[1]),this.gl_.activeTexture(this.gl_.TEXTURE2),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.texturePrevMask_),this.gl_.uniform1i(this.shaderOperationMode_,this.shaderOperationModeOptions_.copy),this.gl_.bindFramebuffer(this.gl_.FRAMEBUFFER,this.fbFacialSmooth_),this.gl_.drawArrays(this.gl_.TRIANGLES,0,6),this.gl_.uniform1i(this.shaderOperationMode_,this.shaderOperationModeOptions_.compute_gf_coeff),this.gl_.uniform1f(this.flipYLocation_,1),this.gl_.viewport(0,0,this.canvas_.width,this.canvas_.height),!0===n?(this.gl_.bindFramebuffer(this.gl_.FRAMEBUFFER,null),this.gl_.drawArrays(this.gl_.TRIANGLES,0,6)):(this.gl_.uniform1f(this.flipYLocation_,-1),this.gl_.bindFramebuffer(this.gl_.FRAMEBUFFER,this.fbDenoiseHist_[this.denoiseHistIndex_]),this.gl_.drawArrays(this.gl_.TRIANGLES,0,6)),this.gl_.viewport(0,0,this.widthModel_,this.heightModel_)}async postProcess(e,t,n,r,i){let o;this.gl_.activeTexture(this.gl_.TEXTURE1),o=!0===t?this.textureDenoiseHist_[this.denoiseHistIndex_]:!0===e?this.textureDenoiseHist_[(this.denoiseHistIndex_+1)%2]:this.texture_,this.gl_.bindTexture(this.gl_.TEXTURE_2D,o),this.gl_.activeTexture(this.gl_.TEXTURE0),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.textureTmp_[0]),this.gl_.bindFramebuffer(this.gl_.FRAMEBUFFER,this.fbTmp_[1]),this.gl_.uniform1i(this.shaderOperationMode_,this.shaderOperationModeOptions_.fillmask),this.gl_.drawArrays(this.gl_.TRIANGLES,0,6),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.textureTmp_[1]),this.gl_.uniform1i(this.shaderOperationMode_,this.shaderOperationModeOptions_.blur);let a=2;!0===r&&(a=6);var s=-1;this.gl_.uniform1i(this.erodeEnable_,1);for(let e=0;e<a;e++)s*=-1,this.gl_.uniform1f(this.flipYLocation_,s),this.gl_.bindFramebuffer(this.gl_.FRAMEBUFFER,this.fbTmp_[e%2]),e%2==0?this.gl_.uniform2f(this.directionLocation_,0,1):this.gl_.uniform2f(this.directionLocation_,1,0),this.gl_.drawArrays(this.gl_.TRIANGLES,0,6),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.textureTmp_[e%2]),e>4&&this.gl_.uniform1i(this.erodeEnable_,0);if(this.gl_.uniform2f(this.directionLocation_,0,1),this.gl_.uniform1f(this.flipYLocation_,-s),this.gl_.bindFramebuffer(this.gl_.FRAMEBUFFER,this.fbTmp_[a%2]),this.gl_.drawArrays(this.gl_.TRIANGLES,0,6),1==this.init_prev_mask_?this.gl_.uniform1i(this.shaderOperationMode_,this.shaderOperationModeOptions_.smooth_mask):(this.gl_.uniform1i(this.shaderOperationMode_,this.shaderOperationModeOptions_.copy),this.init_prev_mask_=!0),this.gl_.uniform1f(this.flipYLocation_,-1),this.gl_.activeTexture(this.gl_.TEXTURE2),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.texturePrevMask_),this.gl_.activeTexture(this.gl_.TEXTURE0),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.textureTmp_[a%2]),this.gl_.bindFramebuffer(this.gl_.FRAMEBUFFER,this.fbTmp_[(a+1)%2]),this.gl_.drawArrays(this.gl_.TRIANGLES,0,6),n&&this.updateStudioLightBbox(i),this.gl_.uniform1i(this.shaderOperationMode_,this.shaderOperationModeOptions_.copy),this.gl_.uniform1f(this.flipYLocation_,-1),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.textureTmp_[(a+1)%2]),this.gl_.bindFramebuffer(this.gl_.FRAMEBUFFER,this.fbPrevMask_),this.gl_.activeTexture(this.gl_.TEXTURE1),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.textureTmp_[(a+2)%2]),this.gl_.activeTexture(this.gl_.TEXTURE2),this.gl_.bindTexture(this.gl_.TEXTURE_2D,o),this.gl_.activeTexture(this.gl_.TEXTURE3),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.texture_),this.gl_.drawArrays(this.gl_.TRIANGLES,0,6),!0===r?this.gl_.uniform1i(this.shaderOperationMode_,this.shaderOperationModeOptions_.portraitlight):this.gl_.uniform1i(this.shaderOperationMode_,this.shaderOperationModeOptions_.blend),this.gl_.uniform1f(this.flipYLocation_,1),this.gl_.viewport(0,0,this.canvas_.width,this.canvas_.height),!0===this.uploadBackground_&&!1===this.isVideoBackground_&&(this.gl_.activeTexture(this.gl_.TEXTURE1),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.textureBackground_),null!==this.backgroundImageBitmap_&&(this.gl_.texImage2D(this.gl_.TEXTURE_2D,0,this.gl_.RGB,this.gl_.RGB,this.gl_.UNSIGNED_BYTE,this.backgroundImageBitmap_),this.uploadBackground_=!1)),!0===this.updateBackgroundColor_&&!1===this.isVideoBackground_){this.gl_.activeTexture(this.gl_.TEXTURE1),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.textureBackground_);let e=new Uint8Array(3);e[0]=this.backgroundRed_,e[1]=this.backgroundGreen_,e[2]=this.backgroundBlue_,this.gl_.texImage2D(this.gl_.TEXTURE_2D,0,this.gl_.RGB,1,1,0,this.gl_.RGB,this.gl_.UNSIGNED_BYTE,e),!0===this.debug_&&console.debug("[Segmentation: postProcess] Has set background color to",this.backgroundRed_,this.backgroundGreen_,this.backgroundBlue_),this.updateBackgroundColor_=!1}this.gl_.activeTexture(this.gl_.TEXTURE1),1==this.isBokeh_?this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.textureTmp_[(a+1)%2]):this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.textureBackground_),null!==this.backgroundVideoSrc_&&!0===this.isVideoBackground_&&!1===this.isVideoPause_&&0==this.isBokeh_&&this.backgroundVideoSrc_.videoWidth>0&&this.backgroundVideoSrc_.readyState>1&&(this.imageBitmapBgndVid_=await createImageBitmap(this.backgroundVideoSrc_),!0===this.updateBackgroundVideo_?(this.gl_.texImage2D(this.gl_.TEXTURE_2D,0,this.gl_.RGB,this.gl_.RGB,this.gl_.UNSIGNED_BYTE,this.imageBitmapBgndVid_),this.updateBackgroundVideo_=!1):this.gl_.texSubImage2D(this.gl_.TEXTURE_2D,0,0,0,this.gl_.RGB,this.gl_.UNSIGNED_BYTE,this.imageBitmapBgndVid_),this.imageBitmapBgndVid_.close()),this.gl_.activeTexture(this.gl_.TEXTURE0),this.gl_.bindTexture(this.gl_.TEXTURE_2D,o),this.gl_.activeTexture(this.gl_.TEXTURE2),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.texturePrevMask_),this.gl_.bindFramebuffer(this.gl_.FRAMEBUFFER,null),this.gl_.drawArrays(this.gl_.TRIANGLES,0,6)}async captureImage(e){if(0!=this.imgLogLen_){if(this.frameCount_=this.frameCount_+1,this.frameCount_>=this.frameSubSample_){const t=this.diagCanvas_.getContext("2d");for(t.drawImage(e,0,0,this.canvas_.width,this.canvas_.height,0,0,this.diagCanvas_.width/2,this.diagCanvas_.height),t.drawImage(this.canvas_,0,0,this.canvas_.width,this.canvas_.height,this.diagCanvas_.width/2,0,this.diagCanvas_.width/2,this.diagCanvas_.height),this.imgLog_=this.diagCanvas_.toDataURL("image/jpg",.9);this.imgLogList_.length>=this.imgLogLen_;)this.imgLogList_.shift();this.imgLogList_.push(function(e){if("string"!=typeof e)throw console.debug("Invalid argument: dataURI must be a string"),"[dataURItoArrayBuffer] Invalid argument: dataURI must be a string";(e=e.split(","))[0].split(":")[1].split(";")[0];for(var t=window.atob(e[1]),n=t.length,r=new ArrayBuffer(n),i=new Uint8Array(r),o=0;o<n;o++)i[o]=t.charCodeAt(o);return i}(this.imgLog_)),this.frameCount_=0}}else{for(;this.imgLogList_.length>0;)this.imgLogList_.pop();this.frameCount_=0}}loadShader_(e,t){const n=this.gl_,r=n.createShader(e);if(n.shaderSource(r,t),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS))throw n.getShaderInfoLog(r),n.deleteShader(r),"[Segmentation] Error compiling shader:\n${infoLog}";return r}destroy(){this.gl_&&(!0===this.debug_&&console.debug("[Segmentation] Forcing WebGL to lose context."),this.gl_.getExtension("WEBGL_lose_context").loseContext()),destroyDiagCanvas()}}function l(e){var t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),t}class h{constructor(e,n={mode:"bokeh",wasm_filepath:o,model_filepath:i,dvdnr_filepath:a,passthrough:!1,debug:!1,autoframe:!1,background:"",logduration:0,process_enable:!0,denoise:!1,face_enhance:!1,face_smooth:!1,face_smooth_strength:100,face_glow_strength:100,studio_light:!1,portrait_light:!1,light_direction_x:50,light_direction_y:50,processing_error_handler:null,flags:{}}){return(async()=>{if(0==(e instanceof HTMLVideoElement||e instanceof MediaStream))throw c("Invalid argument: only MediaStream or HTMLVideoElement");this.loadVideoInProgress_=!1,this.setIntervalId_=null,this.localVideo_=null,this.videoElement_=null,this.inStream_=null,this.modelVersion_="",this.logDurationMin_=0,this.logDurationMax_=60,this.faceSmoothStrengthMin_=0,this.faceSmoothStrengthMax_=100,this.faceGlowStrengthMin_=0,this.faceGlowStrengthMax_=100,this.lightDirectionMin_=0,this.lightDirectionMax_=100,this.config_={},this.flags_={};let r={mode:"bokeh",wasm_filepath:o,model_filepath:i,dvdnr_filepath:a,passthrough:!1,debug:!1,autoframe:!1,background:"",logduration:0,process_enable:!0,denoise:!1,face_enhance:!1,face_smooth:!1,face_smooth_strength:100,face_glow_strength:100,studio_light:!1,portrait_light:!1,light_direction_x:50,light_direction_y:50,flags:{}};("mode"in n||"string"==typeof n.mode||n.mode instanceof String)&&("bokeh"!==n.mode&&"replace"!==n.mode||(r.mode=n.mode)),("passthrough"in n||"boolean"==typeof n.passthrough)&&(r.passthrough=n.passthrough),("debug"in n||"boolean"==typeof n.debug)&&(r.debug=n.debug),("background"in n||"string"==typeof n.background||n.background instanceof String)&&(r.background=n.background),("autoframe"in n||"boolean"==typeof n.autoframe)&&(r.autoframe=n.autoframe),("denoise"in n||"boolean"==typeof n.denoise)&&(r.denoise=n.denoise),("logduration"in n||"number"==typeof n.logduration)&&(r.logduration=n.logduration),("process_enable"in n||"boolean"==typeof n.process_enable)&&(r.process_enable=n.process_enable),("face_enhance"in n||"boolean"==typeof n.face_enhance)&&(r.face_enhance=n.face_enhance),("studio_light"in n||"boolean"==typeof n.studio_light)&&(r.studio_light=n.studio_light),("portrait_light"in n||"boolean"==typeof n.portrait_light)&&(r.portrait_light=n.portrait_light),("face_glow_strength"in n||"number"==typeof n.face_glow_strength)&&(r.face_glow_strength=n.face_glow_strength),("light_direction_x"in n||"number"==typeof n.light_direction_x)&&(r.light_direction_x=n.light_direction_x),("light_direction_y"in n||"number"==typeof n.light_direction_y)&&(r.light_direction_y=n.light_direction_y),("face_smooth"in n||"boolean"==typeof n.face_smooth)&&(r.face_smooth=n.face_smooth),("face_smooth_strength"in n||"number"==typeof n.face_smooth_strength)&&(r.face_smooth_strength=n.face_smooth_strength),("wasm_filepath"in n||"string"==typeof n.wasm_filepath||n.wasm_filepath instanceof String)&&(r.wasm_filepath=n.wasm_filepath),("model_filepath"in n||"string"==typeof n.model_filepath||n.model_filepath instanceof String)&&(r.model_filepath=n.model_filepath),("dvdnr_filepath"in n||"string"==typeof n.dvdnr_filepath||n.dvdnr_filepath instanceof String)&&(r.dvdnr_filepath=n.dvdnr_filepath),"flags"in n&&(r.flags=n.flags),!0===r.debug&&console.debug("[VideoFilter] About to set the params to",r),e instanceof HTMLVideoElement&&(this.videoElement_=e),e instanceof MediaStream&&(this.inStream_=e);let s=!1,u=!1,l=r.model_filepath;const h=function(e){var t=e.split("/").pop();const n=(t=(t=t.split("?")[0]).split("#")[0]).indexOf(".");return n>0?t.substring(n+1):""}(l);"tflite"===h?(s=!1,!0===r.debug&&console.debug("[VideoFilter] Unencrypted model.")):s=!0,"pkgtflite"===h&&(s=!1,u=!0,!0===r.debug&&console.debug("[VideoFilter] Unencrypted packaged model.")),"pkgwvsl"!==h&&"bin"!==h||(s=!0,u=!0),!0===r.debug&&console.debug("[VideoFilter] Model filename extension: ",h);const p=await fetch(l),f=await p.arrayBuffer();if(!0===r.debug&&console.debug("[VideoFilter] Have downloaded inferEngine model with size:",f.byteLength),this.inferEngineObj_=await async function(e){try{return await t()({locateFile:function(){return e}})}catch(e){throw console.debug("[VideoFilter: loadInferEngine] Failed to create Infer SIMD WebAssembly module.",e),e}}(r.wasm_filepath),!await async function(e,t,n){let r,i,o=new Promise(((e,t)=>{r=e,i=t})),a=t.addFunction((function(){r()}),"v"),s=t.addFunction((function(e){i(t.UTF8ToString(e))}),"vi");const c=e=>{n&&console.debug("[VideoFilter: loadDvdnrLibrary] "+e)};if(a>0&&s>0){t.cwrap("loadTfliteAsynchronously",null,["string","number","number"])(e,a,s);try{await o}catch(e){return c("Error occured while loading of DVDNR: "+e),!1}return c("DVDNR library was successfully loaded"),!0}return c("Cannot create valid function pointers."),!1}(r.dvdnr_filepath,this.inferEngineObj_,r.debug))throw new c("Loading of DVDNR library has been failed.");return this.modelVersion_=await async function(e,t,n,r,i){const o=e._getModelBufferMemoryOffset();if(!0===i&&console.debug("[VideoFilter: loadInferModel] Loading model buffer..."),e.HEAPU8.set(new Uint8Array(t),o),0==(0==e._loadModel(t.byteLength,n,r)))return"N/A";!0===i&&console.debug("[VideoFilter: loadInferModel] Model has been successfully loaded");let a=e._getInputName(),s=new Uint8Array(16);for(var c=0;c<s.length;c++)s[c]=e.HEAPU8[a+c+8];let u=(new TextDecoder).decode(s);return!1===u.includes("_VER")&&(u="N/A"),!0===i&&console.debug("[VideoFilter: loadInferModel] Model version  :",u),u}(this.inferEngineObj_,f,s,u,r.debug),this.inputMemoryOffset_=this.inferEngineObj_._getInputMemoryOffset()/4,this.outputMemoryOffset_=this.inferEngineObj_._getOutputMemoryOffset(0)/4,null!==this.inStream_&&(this.width_=e.getVideoTracks()[0].getSettings().width,this.height_=e.getVideoTracks()[0].getSettings().height,this.fps_=e.getVideoTracks()[0].getSettings().frameRate),null!==this.videoElement_&&(this.width_=e.videoWidth,this.height_=e.videoHeight,this.fps_=30),this.canvas_=document.createElement("canvas"),this.canvas_.setAttribute("width",this.width_),this.canvas_.setAttribute("height",this.height_),this.Segment_=new d(this.canvas_,r.flags),this.setDebugMode(r.debug),this.setPassthroughMode(r.passthrough),this.setAutoframeMode(r.autoframe),this.setFaceEnhanceMode(r.face_enhance),this.setStudioLightMode(r.studio_light),this.setPortraitLightMode(r.portrait_light),this.setFaceSmoothMode(r.face_smooth),this.setDenoiseMode(r.denoise),this.setProcessEnable(r.process_enable),this.setLogDuration(r.logduration),this.setFaceSmoothStrength(r.face_smooth_strength),r.background.length>0&&await this.changeBackground(r.background),null!==this.inStream_&&this.initStream(this.inStream_),null!==this.videoElement_&&this.initVideo(this.videoElement_),this.setBackgroundMode(r.mode),this.outStream_=this.canvas_.captureStream(),await this.applyConstraintsOnStream(this.outStream_,{frameRate:this.fps_}),!0===r.debug&&console.debug("[VideoFilter]: Capturing at",this.fps_,"fps,",this.width_,"x",this.height_),this})()}setProcessEnable(e){this.config_.process_enable=e}getProcessEnable(e){return this.config_.process_enable}setFaceEnhanceMode(e){this.config_.face_enhance=e}getFaceEnhanceMode(e){return this.config_.face_enhance}setStudioLightMode(e){this.Segment_.setStudioLightMode(e),this.config_.studio_light=e}getStudioLightMode(e){return this.config_.studio_light}setPortraitLightMode(e){this.config_.portrait_light=e}getPortraitLightMode(e){return this.config_.portrait_light}setFaceSmoothMode(e){this.Segment_.faceSmoothReset(),this.config_.face_smooth=e}getFaceSmoothMode(e){return this.config_.face_smooth}setLogDuration(e){let t=parseInt(e);t>=this.logDurationMin_&&t<=this.logDurationMax_?(this.Segment_.setLogDurationSec(t),this.config_.logduration=t):console.debug("[VideoFilter] Unable to setLogDuration: value is out of range.")}getLogDurationMin(){return this.logDurationMin_}getLogDurationMax(){return this.logDurationMax_}getLogDuration(){return this.config_.logduration}setFaceGlowStrength(e){let t;t="number"==typeof e?e:parseInt(e),t>=this.faceGlowStrengthMin_&&t<=this.faceGlowStrengthMax_?(this.Segment_.setFaceGlowStrengthVal(t,this.faceGlowStrengthMin_,this.faceGlowStrengthMax_),this.config_.face_glow_strength=t):console.debug("[VideoFilter] Unable to setFaceGlowStrength: value is out of range.")}getFaceGlowStrengthMax(){return this.faceGlowStrengthMax_}getFaceGlowStrengthMin(){return this.faceGlowStrengthMin_}getFaceGlowStrength(){return this.config_.face_glow_strength}setLightDirectionX(e){let t;t="number"==typeof e?e:parseInt(e),t>=this.lightDirectionMin_&&t<=this.lightDirectionMax_?(this.Segment_.setLightDirectionXVal(t,this.lightDirectionMin_,this.lightDirectionMax_),this.config_.light_direction_x=t):console.debug("[VideoFilter] Unable to setLightDirectionX: value is out of range.")}setLightDirectionY(e){let t;t="number"==typeof e?e:parseInt(e),t>=this.lightDirectionMin_&&t<=this.lightDirectionMax_?(this.Segment_.setLightDirectionYVal(t,this.lightDirectionMin_,this.lightDirectionMax_),this.config_.light_direction_y=t):console.debug("[VideoFilter] Unable to setLightDirectionY: value is out of range.")}getLightDirectionX(){return this.config_.light_direction_x}getLightDirectionY(){return this.config_.light_direction_y}getLightDirectionMax(){return this.lightDirectionMax_}getLightDirectionMin(){return this.lightDirectionMin_}setFaceSmoothStrength(e){let t;t="number"==typeof e?e:parseInt(e),t>=this.faceSmoothStrengthMin_&&t<=this.faceSmoothStrengthMax_?(this.Segment_.setFaceSmoothStrengthVal(t,this.faceSmoothStrengthMin_,this.faceSmoothStrengthMax_),this.config_.face_smooth_strength=t):console.debug("[VideoFilter] Unable to setFaceSmoothStrength: value is out of range.")}getFaceSmoothStrengthMax(){return this.faceSmoothStrengthMax_}getFaceSmoothStrengthMin(){return this.faceSmoothStrengthMin_}getFaceSmoothStrength(){return this.config_.face_smooth_strength}uploadVideoLog(){let e=this.Segment_.getVideoLog();(async function(e){return new Promise(((t,n)=>{let r=new FileReader;r.onerror=n,r.onload=e=>t(r.result),r.readAsDataURL(e)}))})(new Blob([e],{type:"image/png"})).then((e=>async function(e,t){let n=new XMLHttpRequest;n.responseType="blob",n.onload=function(){let e=document.createElement("a");e.href=window.URL.createObjectURL(n.response),e.download="videoLog.bin",e.style.display="none",document.body.appendChild(e),e.click(),e.remove()},n.open("GET",e),n.send()}(e)))}setPassthroughMode(e){this.Segment_.denoiseReset(),this.config_.passthrough=e}getPassthroughMode(){return this.config_.passthrough}setAutoframeMode(e){this.config_.autoframe=e}getAutoframeMode(){return this.config_.autoframe}setDenoiseMode(e){this.Segment_.denoiseReset(),this.config_.denoise=e}getDenoiseMode(){return this.config_.denoise}setDebugMode(e){this.Segment_.setDebug(e),this.config_.debug=e}getDebugMode(){return this.config_.debug}setBackgroundMode(e){"bokeh"==e?(this.Segment_.setOperationMode("bokeh"),this.config_.mode="bokeh"):"replace"==e?(this.config_.mode="replace",!1===this.loadVideoInProgress_&&this.Segment_.setOperationMode("replace")):(this.Segment_.setOperationMode("bokeh"),this.config_.mode="bokeh",console.log("[VideoFilter]: setBackgroundMode error:",e,"is invalid options. Valid options are {'bokeh','replace'}"))}setSaturation(e){this.Segment_.setSaturation(e)}getBackgroundMode(){return this.config_.mode}setProcessingErrorHandler(e){this.config_.processing_error_handler=e}async getImageBitMap(e){return new Promise((async(t,n)=>{let r=new Image;r.onload=async()=>{!0===this.config_.debug&&console.debug("[VideoFilter: getImageBitMap] About to createImageBitmap");let n=await createImageBitmap(r);r=null,!0===this.config_.debug&&console.debug("[VideoFilter: getImageBitMap] Have been changed to",e),t(n)},r.onerror=function(){r=null,console.log("[VideoFilter: getImageBitMap] backgroundImg.onerror"),n(null)},r.src=e,!0===this.config_.debug&&console.debug("[VideoFilter: getImageBitMap] backgroundImg_.src",e)}))}getModelVersion(){return this.modelVersion_}async changeBackground(e){if("string"==typeof e||e instanceof String)if("#"==e.charAt(0)&&7==e.length){if(parseInt(e.slice(1),16).toString(16)!==e.slice(1).toLowerCase())throw new c("Invalid argument: input string does not contain hex values");this.changeBackgroundColor(e)}else"mp4"===e.split(".").pop()?await this.changeVideoBackground(e):await this.changeImageBackground(e);else e instanceof HTMLVideoElement?this.changeVideoBackground(e):await this.changeImageBackground(e)}changeBackgroundColor(e){let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),n=parseInt(t[1],16),r=parseInt(t[2],16),i=parseInt(t[3],16);this.Segment_.setBackgroundColor(n,r,i),!0===this.config_.debug&&console.debug("[VideoFilter: changeBackgroundColor]")}async changeImageBackground(e){try{let t;"string"==typeof e||e instanceof String?(!0===this.config_.debug&&console.debug("[VideoFilter: changeImageBackground] backgroundImg_.src",e),t=await this.getImageBitMap(e)):t=await createImageBitmap(e),null!==t&&(this.backgroundImageBitmap_=t,this.config_.background=e,this.Segment_.setBackgroundImageBitmap(t))}catch(e){throw new c("Failed to load background image",e)}}loadVideoBackground(){this.loadVideoInProgress_=!0,4==this.videoBackgroundSrc_.readyState&&(this.Segment_.setBackgroundVideoSrc(this.videoBackgroundSrc_),"replace"==this.config_.mode&&this.Segment_.setOperationMode("replace"),this.Segment_.resumeBackgroundVideo(),this.loadVideoInProgress_=!1),this.videoBackgroundSrc_.addEventListener("loadeddata",function(){this.videoBackgroundSrc_.videoWidth>0&&(!0===this.config_.debug&&console.debug("[VideoFilter: changeVideoBackground(HTMLVideoElement)] About to set the video background"),this.Segment_.setBackgroundVideoSrc(this.videoBackgroundSrc_),"replace"==this.config_.mode&&this.Segment_.setOperationMode("replace"),this.Segment_.resumeBackgroundVideo(),this.loadVideoInProgress_=!1,!0===this.config_.debug&&console.debug("[VideoFilter: changeVideoBackground(HTMLVideoElement)] video background has changed"))}.bind(this))}async changeVideoBackground(e){try{"string"==typeof e||e instanceof String?(this.Segment_.pauseBackgroundVideo(),null==this.videoBackgroundSrc_&&(this.videoBackgroundSrc_=document.createElement("video")),this.videoBackgroundSrc_.pause(),this.videoBackgroundSrc_.src="",this.videoBackgroundSrc_.srcObject=null,this.videoBackgroundSrc_.load(),this.videoBackgroundSrc_.src=e,this.videoBackgroundSrc_.type="video/mp4",this.videoBackgroundSrc_.autoplay=!0,this.videoBackgroundSrc_.loop=!0,!0===this.config_.debug&&console.debug("[VideoFilter: changeVideoBackground] backgroundVideo_.src",this.videoBackgroundSrc_),this.loadVideoBackground()):e instanceof HTMLVideoElement?(this.Segment_.pauseBackgroundVideo(),this.videoBackgroundSrc_=e,this.loadVideoBackground()):console.warn("[VideoFilter: changeVideoBackground] ERROR: videoSrc is not a string or HTMLVideoElement")}catch(e){throw new c("Failed to load background video",e)}}initVideo(e){this.localVideo_=e,!0===this.config_.debug&&console.debug("[VideoFilter: initVideo] About to start the stream"),this.localVideo_.addEventListener("play",(()=>{!0===this.config_.debug&&(console.debug("[VideoFilter: initVideo] 'play': setInterval",this.setIntervalId_,"this.videoElement_",this.videoElement_),this.config_.local_video_started=!0)})),this.localVideo_.onpause=()=>{!0===this.config_.debug&&console.debug("[VideoFilter: initStream] 'pause': calling filter stop"),this.config_.local_video_started=!1,this.stop()}}initStream(e){let t=document.createElement("video");t.srcObject=e,this.localVideo_=t,!0===this.config_.debug&&console.debug("[VideoFilter: initStream] About to start the stream"),this.config_.local_video_started=!1,this.localVideo_.addEventListener("loadeddata",(()=>{!0===this.config_.debug&&console.debug("[VideoFilter: initStream] 'play': setInterval",this.setIntervalId_,"this.inStream_",this.inStream_),this.config_.local_video_started=!0})),this.localVideo_.onpause=()=>{!0===this.config_.debug&&console.debug("[VideoFilter: initStream] 'pause': calling filter stop"),this.config_.local_video_started=!1,this.stop()},this.localVideo_.play()}reinitStream(e){this.localVideo_.srcObject=e,this.localVideo_.play(),!0===this.config_.debug&&console.debug("[VideoFilter: reinitStream] Setting to new stream")}stop(){null!==this.localVideo_&&null!==this.setIntervalId_&&(clearInterval(this.setIntervalId_),delete this.setIntervalId_,this.setIntervalId_=null,!0===this.config_.debug&&console.debug("[VideoFilter: stop] Have stopped video filter"))}start(){null!==this.localVideo_&&null===this.setIntervalId_&&(this.setIntervalId_=setInterval(this.processSafe.bind(this,{}),1e3/this.fps_,this.localVideo_,this.Segment_,this.config_,this.inputMemoryOffset_,this.outputMemoryOffset_,this.inferEngineObj_),!0===this.config_.debug&&console.debug("[VideoFilter: start] Have started video filter, fps:",this.fps_))}restart(){null!==this.localVideo_&&null===this.setIntervalId_&&(this.setIntervalId_=setInterval(this.processSafe.bind(this,{}),1e3/this.fps_,this.localVideo_,this.Segment_,this.config_,this.inputMemoryOffset_,this.outputMemoryOffset_,this.inferEngineObj_),!0===this.config_.debug&&console.debug("[VideoFilter: restart] Have restarted video filter"))}async changeInput(e){if(0==(e instanceof HTMLVideoElement||e instanceof MediaStream))throw new c("Failed to change an input. Invalid argument: only MediaStream or HTMLVideoElement for the source");if(null===e)throw new c("Failed to change an input. Invalid argument: source = null");e instanceof HTMLVideoElement&&(this.config_.local_video_started=!1,this.width_=e.videoWidth,this.height_=e.videoHeight,this.fps_=30,this.videoElement_=e,this.Segment_.reinitTextures(this.width_,this.height_),this.inStream_=null,this.Segment_.denoiseReset(),this.Segment_.smoothMaskReset(),this.initVideo(this.videoElement_),!0===this.config_.debug&&console.debug("[VideoFilter::changeInput]",this.videoElement_,this.width_,this.height_,e.videoWidth,e.videoHeight)),e instanceof MediaStream&&(this.config_.local_video_started=!1,this.width_===e.getVideoTracks()[0].getSettings().width&&this.height_===e.getVideoTracks()[0].getSettings().height||(this.width_=e.getVideoTracks()[0].getSettings().width,this.height_=e.getVideoTracks()[0].getSettings().height),this.fps_=e.getVideoTracks()[0].getSettings().frameRate,this.inStream_=e,this.Segment_.reinitTextures(this.width_,this.height_),this.videoElement_=null,this.Segment_.denoiseReset(),this.Segment_.smoothMaskReset(),this.reinitStream(this.inStream_),!0===this.config_.debug&&console.debug("[VideoFilter::changeInput]",this.inStream_))}async process(e,t,n,r,i,o){if(void 0===n)return;if(!1===n.process_enable)return;if(!1===n.local_video_started)return;if(e.readyState<2)return void(!0===n.debug&&console.debug("[VideoFilter: process] Not enough video data to read, readyState:",e.readyState));let a=await createImageBitmap(e),s=a.width,c=a.height;if(s<=0||c<=0)return console.warn("[VideoFilter: process] Invalid resolution:",s,"x",c),void a.close();if(t.width_==s&&t.height_==c||(t.reinitTextures(s,c),t.smoothMaskReset(),!0===n.debug&&console.debug("[VideoFilter] Video resolution has changed to: ",s,"x",c)),!0===n.passthrough&&!1===n.autoframe&&!1===n.face_enhance&&!1===n.face_smooth&&!1===n.studio_light)return!0===n.denoise?(await t.applyDenoise(a),t.copyDenoiseToCanvas()):await t.passthrough(a),void a.close();!0===n.denoise&&await t.applyDenoise(a),await t.preProcess(a,n.denoise);let u=10;!0===this.config_.passthrough&&!0===this.config_.studio_light&&(u=1),t.putinferEngineInData(o,r),o._infer(!1===n.passthrough,!0===n.autoframe||!0===n.face_enhance||!0===n.face_smooth||!0===this.config_.studio_light,u),!0===n.face_enhance?(t.setSaturation(o._getFaceEnhanceSatBoost()),t.setToneMapPoly(o._getFaceEnhanceCurvePoly(0),o._getFaceEnhanceCurvePoly(1),o._getFaceEnhanceCurvePoly(2))):(t.setSaturation(1),t.setToneMapPoly(0,1,0));let d=o._getFrameWidth(),l=o._getFrameTLx(),h=o._getFrameTLy();return t.setZoomScale(1),t.setPanTilt(0,0),!0===n.studio_light&&!0===n.passthrough?(t.setSaturation(1),t.setToneMapPoly(0,1,0),!0===this.config_.face_smooth&&t.facialSmoothing(o,n.denoise,!1),!0===n.face_enhance&&(t.setSaturation(o._getFaceEnhanceSatBoost()),t.setToneMapPoly(o._getFaceEnhanceCurvePoly(0),o._getFaceEnhanceCurvePoly(1),o._getFaceEnhanceCurvePoly(2))),!0===n.autoframe&&(t.setZoomScale(d),t.setPanTilt(l,h)),void t.studioLightProcess(o,n.denoise,n.face_smooth,!0)):!0===n.face_smooth?(!0===n.passthrough?(!0===n.autoframe&&(t.setZoomScale(d),t.setPanTilt(l,h)),t.facialSmoothing(o,n.denoise,!0)):(t.setSaturation(1),t.setToneMapPoly(0,1,0),t.facialSmoothing(o,n.denoise,!1),t.putinferEngineMask(o,i),!0===n.autoframe&&(t.setZoomScale(d),t.setPanTilt(l,h)),!0===this.config_.face_enhance&&(t.setSaturation(o._getFaceEnhanceSatBoost()),t.setToneMapPoly(o._getFaceEnhanceCurvePoly(0),o._getFaceEnhanceCurvePoly(1),o._getFaceEnhanceCurvePoly(2))),await t.postProcess(n.denoise,n.face_smooth,n.studio_light,n.portrait_light,o)),void a.close()):(!0===n.autoframe&&(t.setZoomScale(d),t.setPanTilt(l,h)),!0===n.passthrough?await t.reframeOnly(n.denoise):(t.putinferEngineMask(o,i),await t.postProcess(n.denoise,n.face_smooth,n.studio_light,n.portrait_light,o)),await t.captureImage(e),void a.close())}async processSafe(e,...t){if(!0!==e.isBusy){e.isBusy=!0;try{await this.process(...t),requestAnimationFrame(this.process)}catch(e){if("function"==typeof this.config_.processing_error_handler)await this.config_.processing_error_handler(e);else{console.error("[VideoFilter: default InternalErrorHandler] Internal error occurred. Stopping...",e);try{this.stop()}catch(e){console.error("[VideoFilter: default InternalErrorHandler] Failed to stop a video filter while internal error occurred",e)}}}finally{e.isBusy=!1}}else!0===this.config_.debug&&console.debug("Video processor is busy")}async getOutput(){return this.outStream_}async changeOutputFrameRate(e){if(!this.outStream_||!this.outStream_.getVideoTracks().length)throw new c("Output video track is not available.");this.stop(),this.fps_=e,await this.applyConstraintsOnStream(this.outStream_,{frameRate:e}),this.start(),!0===this.config_.debug&&console.debug("[VideoFilter]: Framerate changed to",this.fps_)}async applyConstraintsOnStream(e,t){const n=e.getVideoTracks()[0],r={...n.getConstraints()??{},...t};0==navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&await n.applyConstraints(r)}}})(),r})(),e.exports=t()},5595:function(e,t,n){"use strict";const r=n(8058),i=n(4846),o=n(8254),a=n(2363).y,s=n(9968).m,c=n(5433).U,u=n(1113),d=n(7646),{fromCallback:l}=n(3096),{getCustomInspectSymbol:h}=n(7620),p=/^[\x21\x23-\x2B\x2D-\x3A\x3C-\x5B\x5D-\x7E]+$/,f=/[\x00-\x1F]/,m=["\n","\r","\0"],g=/[\x20-\x3A\x3C-\x7E]+/,v=/[\x09\x20-\x2F\x3B-\x40\x5B-\x60\x7B-\x7E]/,y={jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11},_=2147483647e3,w='Invalid sameSiteContext option for getCookies(); expected one of "strict", "lax", or "none"';function b(e){u.validate(u.isNonEmptyString(e),e);const t=String(e).toLowerCase();return"none"===t||"lax"===t||"strict"===t?t:null}const k=Object.freeze({SILENT:"silent",STRICT:"strict",DISABLED:"unsafe-disabled"}),S=/(?:^(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}$)|(?:^(?:(?:[a-f\d]{1,4}:){7}(?:[a-f\d]{1,4}|:)|(?:[a-f\d]{1,4}:){6}(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|:[a-f\d]{1,4}|:)|(?:[a-f\d]{1,4}:){5}(?::(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-f\d]{1,4}){1,2}|:)|(?:[a-f\d]{1,4}:){4}(?:(?::[a-f\d]{1,4}){0,1}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-f\d]{1,4}){1,3}|:)|(?:[a-f\d]{1,4}:){3}(?:(?::[a-f\d]{1,4}){0,2}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-f\d]{1,4}){1,4}|:)|(?:[a-f\d]{1,4}:){2}(?:(?::[a-f\d]{1,4}){0,3}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-f\d]{1,4}){1,5}|:)|(?:[a-f\d]{1,4}:){1}(?:(?::[a-f\d]{1,4}){0,4}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-f\d]{1,4}){1,6}|:)|(?::(?:(?::[a-f\d]{1,4}){0,5}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-f\d]{1,4}){1,7}|:)))$)/,E="\n\\[?(?:\n(?:[a-fA-F\\d]{1,4}:){7}(?:[a-fA-F\\d]{1,4}|:)|\n(?:[a-fA-F\\d]{1,4}:){6}(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|:[a-fA-F\\d]{1,4}|:)|\n(?:[a-fA-F\\d]{1,4}:){5}(?::(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-fA-F\\d]{1,4}){1,2}|:)|\n(?:[a-fA-F\\d]{1,4}:){4}(?:(?::[a-fA-F\\d]{1,4}){0,1}:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-fA-F\\d]{1,4}){1,3}|:)|\n(?:[a-fA-F\\d]{1,4}:){3}(?:(?::[a-fA-F\\d]{1,4}){0,2}:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-fA-F\\d]{1,4}){1,4}|:)|\n(?:[a-fA-F\\d]{1,4}:){2}(?:(?::[a-fA-F\\d]{1,4}){0,3}:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-fA-F\\d]{1,4}){1,5}|:)|\n(?:[a-fA-F\\d]{1,4}:){1}(?:(?::[a-fA-F\\d]{1,4}){0,4}:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-fA-F\\d]{1,4}){1,6}|:)|\n(?::(?:(?::[a-fA-F\\d]{1,4}){0,5}:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-fA-F\\d]{1,4}){1,7}|:))\n)(?:%[0-9a-zA-Z]{1,})?\\]?\n".replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),T=new RegExp(`^${E}$`);function C(e,t,n,r){let i=0;for(;i<e.length;){const t=e.charCodeAt(i);if(t<=47||t>=58)break;i++}return i<t||i>n?null:r||i==e.length?parseInt(e.substr(0,i),10):null}function j(e){const t=e.split(":"),n=[0,0,0];if(3!==t.length)return null;for(let e=0;e<3;e++){const r=2==e,i=C(t[e],1,2,r);if(null===i)return null;n[e]=i}return n}function x(e){e=String(e).substr(0,3).toLowerCase();const t=y[e];return t>=0?t:null}function P(e){if(!e)return;const t=e.split(v);if(!t)return;let n=null,r=null,i=null,o=null,a=null,s=null;for(let e=0;e<t.length;e++){const c=t[e].trim();if(!c.length)continue;let u;null===i&&(u=j(c),u)?(n=u[0],r=u[1],i=u[2]):null!==o||(u=C(c,1,2,!0),null===u)?null!==a||(u=x(c),null===u)?null===s&&(u=C(c,2,4,!0),null!==u&&(s=u,s>=70&&s<=99?s+=1900:s>=0&&s<=69&&(s+=2e3))):a=u:o=u}return null===o||null===a||null===s||null===i||o<1||o>31||s<1601||n>23||r>59||i>59?void 0:new Date(Date.UTC(s,a,o,n,r,i))}function I(e){return null==e?null:(e=e.trim().replace(/^\./,""),T.test(e)&&(e=e.replace("[","").replace("]","")),r&&/[^\u0001-\u007f]/.test(e)&&(e=r.toASCII(e)),e.toLowerCase())}function M(e,t,n){if(null==e||null==t)return null;if(!1!==n&&(e=I(e),t=I(t)),e==t)return!0;const r=e.lastIndexOf(t);return!(r<=0||e.length!==t.length+r||"."!==e.substr(r-1,1)||S.test(e))}function R(e){let t;try{t=JSON.parse(e)}catch(e){return e}return t}function A(e){if(!e||u.isEmptyString(e))return null;let t;if("string"==typeof e){if(t=R(e),t instanceof Error)return null}else t=e;const n=new F;for(let e=0;e<F.serializableProperties.length;e++){const r=F.serializableProperties[e];void 0!==t[r]&&t[r]!==N[r]&&("expires"===r||"creation"===r||"lastAccessed"===r?null===t[r]?n[r]=null:n[r]="Infinity"==t[r]?"Infinity":new Date(t[r]):n[r]=t[r])}return n}function D(e,t){u.validate(u.isObject(e),e),u.validate(u.isObject(t),t);let n=0;const r=e.path?e.path.length:0;return n=(t.path?t.path.length:0)-r,0!==n||(n=(e.creation?e.creation.getTime():_)-(t.creation?t.creation.getTime():_),0!==n||(n=e.creationIndex-t.creationIndex)),n}function O(e){if(e instanceof Object)return e;try{e=decodeURI(e)}catch(e){}return i(e)}const N={key:"",value:"",expires:"Infinity",maxAge:null,domain:null,path:null,secure:!1,httpOnly:!1,extensions:null,hostOnly:null,pathIsDefault:null,creation:null,lastAccessed:null,sameSite:void 0};class F{constructor(e={}){const t=h();t&&(this[t]=this.inspect),Object.assign(this,N,e),this.creation=this.creation||new Date,Object.defineProperty(this,"creationIndex",{configurable:!1,enumerable:!1,writable:!0,value:++F.cookiesCreated})}inspect(){const e=Date.now(),t=null!=this.hostOnly?this.hostOnly:"?",n=this.creation?e-this.creation.getTime()+"ms":"?",r=this.lastAccessed?e-this.lastAccessed.getTime()+"ms":"?";return`Cookie="${this.toString()}; hostOnly=${t}; aAge=${r}; cAge=${n}"`}toJSON(){const e={};for(const t of F.serializableProperties)this[t]!==N[t]&&("expires"===t||"creation"===t||"lastAccessed"===t?null===this[t]?e[t]=null:e[t]="Infinity"==this[t]?"Infinity":this[t].toISOString():"maxAge"===t?null!==this[t]&&(e[t]=this[t]==1/0||this[t]==-1/0?this[t].toString():this[t]):this[t]!==N[t]&&(e[t]=this[t]));return e}clone(){return A(this.toJSON())}validate(){if(!p.test(this.value))return!1;if(!(this.expires==1/0||this.expires instanceof Date||P(this.expires)))return!1;if(null!=this.maxAge&&this.maxAge<=0)return!1;if(null!=this.path&&!g.test(this.path))return!1;const e=this.cdomain();if(e){if(e.match(/\.$/))return!1;if(null==o.getPublicSuffix(e))return!1}return!0}setExpires(e){e instanceof Date?this.expires=e:this.expires=P(e)||"Infinity"}setMaxAge(e){this.maxAge=e===1/0||e===-1/0?e.toString():e}cookieString(){let e=this.value;return null==e&&(e=""),""===this.key?e:`${this.key}=${e}`}toString(){let e=this.cookieString();if(this.expires!=1/0&&(this.expires instanceof Date?e+=`; Expires=${t=this.expires,u.validate(u.isDate(t),t),t.toUTCString()}`:e+=`; Expires=${this.expires}`),null!=this.maxAge&&this.maxAge!=1/0&&(e+=`; Max-Age=${this.maxAge}`),this.domain&&!this.hostOnly&&(e+=`; Domain=${this.domain}`),this.path&&(e+=`; Path=${this.path}`),this.secure&&(e+="; Secure"),this.httpOnly&&(e+="; HttpOnly"),this.sameSite&&"none"!==this.sameSite){const t=F.sameSiteCanonical[this.sameSite.toLowerCase()];e+=`; SameSite=${t||this.sameSite}`}var t;return this.extensions&&this.extensions.forEach((t=>{e+=`; ${t}`})),e}TTL(e){if(null!=this.maxAge)return this.maxAge<=0?0:1e3*this.maxAge;let t=this.expires;return t!=1/0?(t instanceof Date||(t=P(t)||1/0),t==1/0?1/0:t.getTime()-(e||Date.now())):1/0}expiryTime(e){if(null!=this.maxAge){const t=e||this.creation||new Date,n=this.maxAge<=0?-1/0:1e3*this.maxAge;return t.getTime()+n}return this.expires==1/0?1/0:this.expires.getTime()}expiryDate(e){const t=this.expiryTime(e);return t==1/0?new Date(_):t==-1/0?new Date(0):new Date(t)}isPersistent(){return null!=this.maxAge||this.expires!=1/0}canonicalizedDomain(){return null==this.domain?null:I(this.domain)}cdomain(){return this.canonicalizedDomain()}}function L(e){if(null!=e){const t=e.toLowerCase();switch(t){case k.STRICT:case k.SILENT:case k.DISABLED:return t}}return k.SILENT}F.cookiesCreated=0,F.parse=function(e,t){if(t&&"object"==typeof t||(t={}),u.isEmptyString(e)||!u.isString(e))return null;const n=(e=e.trim()).indexOf(";"),r=function(e,t){e=function(e){if(u.isEmptyString(e))return e;for(let t=0;t<m.length;t++){const n=e.indexOf(m[t]);-1!==n&&(e=e.substr(0,n))}return e}(e),u.validate(u.isString(e),e);let n,r,i=e.indexOf("=");if(t)0===i&&(i=(e=e.substr(1)).indexOf("="));else if(i<=0)return;if(i<=0?(n="",r=e.trim()):(n=e.substr(0,i).trim(),r=e.substr(i+1).trim()),f.test(n)||f.test(r))return;const o=new F;return o.key=n,o.value=r,o}(-1===n?e:e.substr(0,n),!!t.loose);if(!r)return;if(-1===n)return r;const i=e.slice(n+1).trim();if(0===i.length)return r;const o=i.split(";");for(;o.length;){const e=o.shift().trim();if(0===e.length)continue;const t=e.indexOf("=");let n,i;switch(-1===t?(n=e,i=null):(n=e.substr(0,t),i=e.substr(t+1)),n=n.trim().toLowerCase(),i&&(i=i.trim()),n){case"expires":if(i){const e=P(i);e&&(r.expires=e)}break;case"max-age":if(i&&/^-?[0-9]+$/.test(i)){const e=parseInt(i,10);r.setMaxAge(e)}break;case"domain":if(i){const e=i.trim().replace(/^\./,"");e&&(r.domain=e.toLowerCase())}break;case"path":r.path=i&&"/"===i[0]?i:null;break;case"secure":r.secure=!0;break;case"httponly":r.httpOnly=!0;break;case"samesite":switch(i?i.toLowerCase():""){case"strict":r.sameSite="strict";break;case"lax":r.sameSite="lax";break;case"none":r.sameSite="none";break;default:r.sameSite=void 0}break;default:r.extensions=r.extensions||[],r.extensions.push(e)}}return r},F.fromJSON=A,F.serializableProperties=Object.keys(N),F.sameSiteLevel={strict:3,lax:2,none:1},F.sameSiteCanonical={strict:"Strict",lax:"Lax"};class z{constructor(e,t={rejectPublicSuffixes:!0}){"boolean"==typeof t&&(t={rejectPublicSuffixes:t}),u.validate(u.isObject(t),t),this.rejectPublicSuffixes=t.rejectPublicSuffixes,this.enableLooseMode=!!t.looseMode,this.allowSpecialUseDomain="boolean"!=typeof t.allowSpecialUseDomain||t.allowSpecialUseDomain,this.store=e||new s,this.prefixSecurity=L(t.prefixSecurity),this._cloneSync=U("clone"),this._importCookiesSync=U("_importCookies"),this.getCookiesSync=U("getCookies"),this.getCookieStringSync=U("getCookieString"),this.getSetCookieStringsSync=U("getSetCookieStrings"),this.removeAllCookiesSync=U("removeAllCookies"),this.setCookieSync=U("setCookie"),this.serializeSync=U("serialize")}setCookie(e,t,n,r){let i;if(u.validate(u.isNonEmptyString(t),r,n),u.isFunction(t))return(r=t)(new Error("No URL was specified"));const a=O(t);if(u.isFunction(n)&&(r=n,n={}),u.validate(u.isFunction(r),r),!u.isNonEmptyString(e)&&!u.isObject(e)&&e instanceof String&&0==e.length)return r(null);const s=I(a.hostname),c=n.loose||this.enableLooseMode;let d=null;if(n.sameSiteContext&&(d=b(n.sameSiteContext),!d))return r(new Error(w));if("string"==typeof e||e instanceof String){if(!(e=F.parse(e,{loose:c})))return i=new Error("Cookie failed to parse"),r(n.ignoreError?null:i)}else if(!(e instanceof F))return i=new Error("First argument to setCookie must be a Cookie object or string"),r(n.ignoreError?null:i);const l=n.now||new Date;if(this.rejectPublicSuffixes&&e.domain&&null==o.getPublicSuffix(e.cdomain(),{allowSpecialUseDomain:this.allowSpecialUseDomain,ignoreError:n.ignoreError})&&!T.test(e.domain))return i=new Error("Cookie has domain set to a public suffix"),r(n.ignoreError?null:i);if(e.domain){if(!M(s,e.cdomain(),!1))return i=new Error(`Cookie not in this host's domain. Cookie:${e.cdomain()} Request:${s}`),r(n.ignoreError?null:i);null==e.hostOnly&&(e.hostOnly=!1)}else e.hostOnly=!0,e.domain=s;if(e.path&&"/"===e.path[0]||(e.path=function(e){if(!e||"/"!==e.substr(0,1))return"/";if("/"===e)return e;const t=e.lastIndexOf("/");return 0===t?"/":e.slice(0,t)}(a.pathname),e.pathIsDefault=!0),!1===n.http&&e.httpOnly)return i=new Error("Cookie is HttpOnly and this isn't an HTTP API"),r(n.ignoreError?null:i);if("none"!==e.sameSite&&void 0!==e.sameSite&&d&&"none"===d)return i=new Error("Cookie is SameSite but this is a cross-origin request"),r(n.ignoreError?null:i);const h=this.prefixSecurity===k.SILENT;if(this.prefixSecurity!==k.DISABLED){let t,i=!1;if(function(e){return u.validate(u.isObject(e),e),!e.key.startsWith("__Secure-")||e.secure}(e)?function(e){return u.validate(u.isObject(e)),!e.key.startsWith("__Host-")||e.secure&&e.hostOnly&&null!=e.path&&"/"===e.path}(e)||(i=!0,t="Cookie has __Host prefix but either Secure or HostOnly attribute is not set or Path is not '/'"):(i=!0,t="Cookie has __Secure prefix but Secure attribute is not set"),i)return r(n.ignoreError||h?null:new Error(t))}const p=this.store;p.updateCookie||(p.updateCookie=function(e,t,n){this.putCookie(t,n)}),p.findCookie(e.domain,e.path,e.key,(function(t,i){if(t)return r(t);const o=function(t){if(t)return r(t);r(null,e)};if(i){if(!1===n.http&&i.httpOnly)return t=new Error("old Cookie is HttpOnly and this isn't an HTTP API"),r(n.ignoreError?null:t);e.creation=i.creation,e.creationIndex=i.creationIndex,e.lastAccessed=l,p.updateCookie(i,e,o)}else e.creation=e.lastAccessed=l,p.putCookie(e,o)}))}getCookies(e,t,n){u.validate(u.isNonEmptyString(e),n,e);const r=O(e);u.isFunction(t)&&(n=t,t={}),u.validate(u.isObject(t),n,t),u.validate(u.isFunction(n),n);const i=I(r.hostname),o=r.pathname||"/";let a=t.secure;null!=a||!r.protocol||"https:"!=r.protocol&&"wss:"!=r.protocol||(a=!0);let s=0;if(t.sameSiteContext){const e=b(t.sameSiteContext);if(s=F.sameSiteLevel[e],!s)return n(new Error(w))}let d=t.http;null==d&&(d=!0);const l=t.now||Date.now(),h=!1!==t.expire,p=!!t.allPaths,f=this.store;function m(e){if(e.hostOnly){if(e.domain!=i)return!1}else if(!M(i,e.domain,!1))return!1;return!(!p&&!c(o,e.path))&&(!(e.secure&&!a)&&(!(e.httpOnly&&!d)&&(!(s&&F.sameSiteLevel[e.sameSite||"none"]>s)&&!(h&&e.expiryTime()<=l&&(f.removeCookie(e.domain,e.path,e.key,(()=>{})),1)))))}f.findCookies(i,p?null:o,this.allowSpecialUseDomain,((e,r)=>{if(e)return n(e);r=r.filter(m),!1!==t.sort&&(r=r.sort(D));const i=new Date;for(const e of r)e.lastAccessed=i;n(null,r)}))}getCookieString(...e){const t=e.pop();u.validate(u.isFunction(t),t),e.push((function(e,n){e?t(e):t(null,n.sort(D).map((e=>e.cookieString())).join("; "))})),this.getCookies.apply(this,e)}getSetCookieStrings(...e){const t=e.pop();u.validate(u.isFunction(t),t),e.push((function(e,n){e?t(e):t(null,n.map((e=>e.toString())))})),this.getCookies.apply(this,e)}serialize(e){u.validate(u.isFunction(e),e);let t=this.store.constructor.name;u.isObject(t)&&(t=null);const n={version:`tough-cookie@${d}`,storeType:t,rejectPublicSuffixes:!!this.rejectPublicSuffixes,enableLooseMode:!!this.enableLooseMode,allowSpecialUseDomain:!!this.allowSpecialUseDomain,prefixSecurity:L(this.prefixSecurity),cookies:[]};if(!this.store.getAllCookies||"function"!=typeof this.store.getAllCookies)return e(new Error("store does not support getAllCookies and cannot be serialized"));this.store.getAllCookies(((t,r)=>t?e(t):(n.cookies=r.map((e=>(delete(e=e instanceof F?e.toJSON():e).creationIndex,e))),e(null,n))))}toJSON(){return this.serializeSync()}_importCookies(e,t){let n=e.cookies;if(!n||!Array.isArray(n))return t(new Error("serialized jar has no cookies array"));n=n.slice();const r=e=>{if(e)return t(e);if(!n.length)return t(e,this);let i;try{i=A(n.shift())}catch(e){return t(e)}if(null===i)return r(null);this.store.putCookie(i,r)};r()}clone(e,t){1===arguments.length&&(t=e,e=null),this.serialize(((n,r)=>{if(n)return t(n);z.deserialize(r,e,t)}))}cloneSync(e){if(0===arguments.length)return this._cloneSync();if(!e.synchronous)throw new Error("CookieJar clone destination store is not synchronous; use async API instead.");return this._cloneSync(e)}removeAllCookies(e){u.validate(u.isFunction(e),e);const t=this.store;if("function"==typeof t.removeAllCookies&&t.removeAllCookies!==a.prototype.removeAllCookies)return t.removeAllCookies(e);t.getAllCookies(((n,r)=>{if(n)return e(n);if(0===r.length)return e(null);let i=0;const o=[];function a(t){if(t&&o.push(t),i++,i===r.length)return e(o.length?o[0]:null)}r.forEach((e=>{t.removeCookie(e.domain,e.path,e.key,a)}))}))}static deserialize(e,t,n){let r;if(3!==arguments.length&&(n=t,t=null),u.validate(u.isFunction(n),n),"string"==typeof e){if(r=R(e),r instanceof Error)return n(r)}else r=e;const i=new z(t,{rejectPublicSuffixes:r.rejectPublicSuffixes,looseMode:r.enableLooseMode,allowSpecialUseDomain:r.allowSpecialUseDomain,prefixSecurity:r.prefixSecurity});i._importCookies(r,(e=>{if(e)return n(e);n(null,i)}))}static deserializeSync(e,t){const n="string"==typeof e?JSON.parse(e):e,r=new z(t,{rejectPublicSuffixes:n.rejectPublicSuffixes,looseMode:n.enableLooseMode});if(!r.store.synchronous)throw new Error("CookieJar store is not synchronous; use async API instead.");return r._importCookiesSync(n),r}}function U(e){return function(...t){if(!this.store.synchronous)throw new Error("CookieJar store is not synchronous; use async API instead.");let n,r;if(this[e](...t,((e,t)=>{n=e,r=t})),n)throw n;return r}}z.fromJSON=z.deserializeSync,["_importCookies","clone","getCookies","getCookieString","getSetCookieStrings","removeAllCookies","serialize","setCookie"].forEach((e=>{z.prototype[e]=l(z.prototype[e])})),z.deserialize=l(z.deserialize),t.US=z,t.Vj=F,o.getPublicSuffix,n(6326).p,u.ParameterError},9968:function(e,t,n){"use strict";const{fromCallback:r}=n(3096),i=n(2363).y,o=n(6326).p,a=n(5433).U,{getCustomInspectSymbol:s,getUtilInspect:c}=n(7620);class u extends i{constructor(){super(),this.synchronous=!0,this.idx={};const e=s();e&&(this[e]=this.inspect)}inspect(){return`{ idx: ${c(d)(this.idx,!1,2)} }`}findCookie(e,t,n,r){return this.idx[e]&&this.idx[e][t]?r(null,this.idx[e][t][n]||null):r(null,void 0)}findCookies(e,t,n,r){const i=[];if("function"==typeof n&&(r=n,n=!0),!e)return r(null,[]);let s;s=t?function(e){Object.keys(e).forEach((n=>{if(a(t,n)){const t=e[n];for(const e in t)i.push(t[e])}}))}:function(e){for(const t in e){const n=e[t];for(const e in n)i.push(n[e])}};const c=o(e,n)||[e],u=this.idx;c.forEach((e=>{const t=u[e];t&&s(t)})),r(null,i)}putCookie(e,t){this.idx[e.domain]||(this.idx[e.domain]={}),this.idx[e.domain][e.path]||(this.idx[e.domain][e.path]={}),this.idx[e.domain][e.path][e.key]=e,t(null)}updateCookie(e,t,n){this.putCookie(t,n)}removeCookie(e,t,n,r){this.idx[e]&&this.idx[e][t]&&this.idx[e][t][n]&&delete this.idx[e][t][n],r(null)}removeCookies(e,t,n){return this.idx[e]&&(t?delete this.idx[e][t]:delete this.idx[e]),n(null)}removeAllCookies(e){return this.idx={},e(null)}getAllCookies(e){const t=[],n=this.idx;Object.keys(n).forEach((e=>{Object.keys(n[e]).forEach((r=>{Object.keys(n[e][r]).forEach((i=>{null!==i&&t.push(n[e][r][i])}))}))})),t.sort(((e,t)=>(e.creationIndex||0)-(t.creationIndex||0))),e(null,t)}}function d(e){const t=Object.keys(e);if(0===t.length)return"{}";let n="{\n";return Object.keys(e).forEach(((r,i)=>{n+=function(e,t){let n=`  '${e}': {\n`;return Object.keys(t).forEach(((e,r,i)=>{n+=function(e,t){let n=`    '${e}': {\n`;return Object.keys(t).forEach(((e,r,i)=>{const o=t[e];n+=`      ${e}: ${o.inspect()}`,r<i.length-1&&(n+=","),n+="\n"})),n+="    }",n}(e,t[e]),r<i.length-1&&(n+=","),n+="\n"})),n+="  }",n}(r,e[r]),i<t.length-1&&(n+=","),n+="\n"})),n+="}",n}["findCookie","findCookies","putCookie","updateCookie","removeCookie","removeCookies","removeAllCookies","getAllCookies"].forEach((e=>{u.prototype[e]=r(u.prototype[e])})),t.m=u},5433:function(e,t){"use strict";t.U=function(e,t){if(t===e)return!0;if(0===e.indexOf(t)){if("/"===t.substr(-1))return!0;if("/"===e.substr(t.length,1))return!0}return!1}},6326:function(e,t,n){"use strict";const r=n(8254);t.p=function(e,t){const n=r.getPublicSuffix(e,{allowSpecialUseDomain:t});if(!n)return null;if(n==e)return[e];"."==e.slice(-1)&&(e=e.slice(0,-1));const i=e.slice(0,-(n.length+1)).split(".").reverse();let o=n;const a=[o];for(;i.length;)o=`${i.shift()}.${o}`,a.push(o);return a}},8254:function(e,t,n){"use strict";const r=n(3682),i=["local","example","invalid","localhost","test"],o=["localhost","invalid"];t.getPublicSuffix=function(e,t={}){const n=e.split("."),a=n[n.length-1],s=!!t.allowSpecialUseDomain,c=!!t.ignoreError;if(s&&i.includes(a)){if(n.length>1)return`${n[n.length-2]}.${a}`;if(o.includes(a))return`${a}`}if(!c&&i.includes(a))throw new Error(`Cookie has domain set to the public suffix "${a}" which is a special use domain. To allow this, configure your CookieJar with {allowSpecialUseDomain:true, rejectPublicSuffixes: false}.`);return r.get(e)}},2363:function(e,t){"use strict";t.y=class{constructor(){this.synchronous=!1}findCookie(e,t,n,r){throw new Error("findCookie is not implemented")}findCookies(e,t,n,r){throw new Error("findCookies is not implemented")}putCookie(e,t){throw new Error("putCookie is not implemented")}updateCookie(e,t,n){throw new Error("updateCookie is not implemented")}removeCookie(e,t,n,r){throw new Error("removeCookie is not implemented")}removeCookies(e,t,n){throw new Error("removeCookies is not implemented")}removeAllCookies(e){throw new Error("removeAllCookies is not implemented")}getAllCookies(e){throw new Error("getAllCookies is not implemented (therefore jar cannot be serialized)")}}},7620:function(e,t,n){function r(){try{return n(3339)}catch(e){return null}}function i(){return Symbol.for("nodejs.util.inspect.custom")}t.getUtilInspect=function(e,t={}){const n=(t.requireUtil||r)();return function(t,r,i){return n?n.inspect(t,r,i):e(t)}},t.getCustomInspectSymbol=function(e={}){return(e.lookupCustomInspectSymbol||i)()||function(e){const t=(e.requireUtil||r)();return t?t.inspect.custom:null}(e)}},1113:function(e,t){"use strict";function n(e){return"function"==typeof e}function r(e){return"string"==typeof e||e instanceof String}function i(e){return"[object Object]"===toString.call(e)}class o extends Error{constructor(...e){super(...e)}}t.ParameterError=o,t.isFunction=n,t.isNonEmptyString=function(e){return r(e)&&""!==e},t.isDate=function(e){return function(e,t){try{return e instanceof t}catch(e){return!1}}(e,Date)&&function(e){return"number"==typeof e&&e%1==0}(e.getTime())},t.isEmptyString=function(e){return""===e||e instanceof String&&""===e.toString()},t.isString=r,t.isObject=i,t.validate=function(e,t,r){if(n(t)||(r=t,t=null),i(r)||(r={Error:"Failed Check"}),!e){if(!t)throw new o(r);t(new o(r))}}},7646:function(e){e.exports="4.1.2"},3096:function(e,t){"use strict";t.fromCallback=function(e){return Object.defineProperty((function(){if("function"!=typeof arguments[arguments.length-1])return new Promise(((t,n)=>{arguments[arguments.length]=(e,r)=>{if(e)return n(e);t(r)},arguments.length++,e.apply(this,arguments)}));e.apply(this,arguments)}),"name",{value:e.name})},t.fromPromise=function(e){return Object.defineProperty((function(){const t=arguments[arguments.length-1];if("function"!=typeof t)return e.apply(this,arguments);delete arguments[arguments.length-1],arguments.length--,e.apply(this,arguments).then((e=>t(null,e)),t)}),"name",{value:e.name})}},4590:function(e,t,n){e.exports=n.p+"voxeet-worklet.js"},6850:function(e){e.exports={leaveURI:"//www.voxeet.com/web-thank-you",wsSessionURI:"wss://comms.sdk.dolby.io",ackTimeout:3e4,keepAlive:3e4,peerConnection:{config:{bundlePolicy:"max-bundle",iceServers:[{urls:"stun:stun.l.google.com:19302"}]},constraints:{mandatory:{},optional:[{DtlsSrtpKeyAgreement:!0}]}},media:{dolbyProcessing:{constraints:{audio:{autoGainControl:!1,googAutoGainControl:!1,noiseSuppression:!1,echoCancellation:!0},video:{}}},music:{default:{constraints:{audio:{autoGainControl:!0,googAutoGainControl:!0,noiseSuppression:!0,echoCancellation:!0},video:{}}},echoCancellationOff:{constraints:{audio:{autoGainControl:!0,googAutoGainControl:!0,noiseSuppression:!0,echoCancellation:!1},video:{}}}},unprocessed:{constraints:{audio:{autoGainControl:!1,googAutoGainControl:!1,noiseSuppression:!1,echoCancellation:!1},video:{}}},dapm:{constraints:{audio:{autoGainControl:!0,googAutoGainControl:!0,noiseSuppression:!1,echoCancellation:!0},video:{}}},constraints:{audio:{autoGainControl:!0,googAutoGainControl:!0,noiseSuppression:!0,echoCancellation:!0},video:{}}},audioSettings:{chromeCutOffVolume:.06,distanceModel:"inverse",refDistance:.3,maxDistance:15,rollOffFactor:4,gain:1},dialInTexts:{title:"Bad connection?",description:"It looks like you have a low quality IP connection. We'd suggest rejoining this conference from your phone – simply dial in using the Voxeet dial-in number and PIN below.\nTo find an alternative local number, verify your current location.",phone_label:"Your dial-in number:",pin_label:"Your PIN:",qr_label:"You can also scan the QR code with your phone to autodial."},offLine:!1,videoSettings:{desktop:[{range:{min:0,max:384},resolution:240,fps:20,dimensions:{width:426,height:240}},{range:{min:384,max:900},resolution:360,fps:25,dimensions:{width:640,height:360}},{range:{min:900,max:1/0},resolution:720,fps:25,dimensions:{width:1280,height:720}}],mobile:[{range:{min:0,max:384},resolution:240,fps:20,dimensions:{width:426,height:240}},{range:{min:384,max:900},resolution:360,fps:25,dimensions:{width:640,height:360}},{range:{min:900,max:1/0},resolution:480,fps:25,dimensions:{width:854,height:480}}]},pluginDefs:{voxeetPlugin:{name:"Voxeet Plugin",mimeType:"application/x-voxeetplugin",activeXName:"VoxeetInc.VoxeetPlugin",guid:"987ae2fb-3c9c-5787-bf68-b66d84219b95",version:"1.1.0.0",installURL:{win:"http://app.voxeet.com/plugins/VoxeetPluginV1.1.exe",mac:"http://app.voxeet.com/plugins/VoxeetPluginV1.1.dmg"}}}}},4846:function(e,t,n){"use strict";var r=n(7245),i=n(7375),o=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,a=/[\n\r\t]/g,s=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,u=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,d=/^[a-zA-Z]:/;function l(e){return(e||"").toString().replace(o,"")}var h=[["#","hash"],["?","query"],function(e,t){return m(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],p={hash:1,query:1};function f(e){var t,n=("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{}).location||{},r={},i=typeof(e=e||n);if("blob:"===e.protocol)r=new v(unescape(e.pathname),{});else if("string"===i)for(t in r=new v(e,{}),p)delete r[t];else if("object"===i){for(t in e)t in p||(r[t]=e[t]);void 0===r.slashes&&(r.slashes=s.test(e.href))}return r}function m(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function g(e,t){e=(e=l(e)).replace(a,""),t=t||{};var n,r=u.exec(e),i=r[1]?r[1].toLowerCase():"",o=!!r[2],s=!!r[3],c=0;return o?s?(n=r[2]+r[3]+r[4],c=r[2].length+r[3].length):(n=r[2]+r[4],c=r[2].length):s?(n=r[3]+r[4],c=r[3].length):n=r[4],"file:"===i?c>=2&&(n=n.slice(2)):m(i)?n=r[4]:i?o&&(n=n.slice(2)):c>=2&&m(t.protocol)&&(n=r[4]),{protocol:i,slashes:o||m(i),slashesCount:c,rest:n}}function v(e,t,n){if(e=(e=l(e)).replace(a,""),!(this instanceof v))return new v(e,t,n);var o,s,c,u,p,y,_=h.slice(),w=typeof t,b=this,k=0;for("object"!==w&&"string"!==w&&(n=t,t=null),n&&"function"!=typeof n&&(n=i.parse),o=!(s=g(e||"",t=f(t))).protocol&&!s.slashes,b.slashes=s.slashes||o&&t.slashes,b.protocol=s.protocol||t.protocol||"",e=s.rest,("file:"===s.protocol&&(2!==s.slashesCount||d.test(e))||!s.slashes&&(s.protocol||s.slashesCount<2||!m(b.protocol)))&&(_[3]=[/(.*)/,"pathname"]);k<_.length;k++)"function"!=typeof(u=_[k])?(c=u[0],y=u[1],c!=c?b[y]=e:"string"==typeof c?~(p="@"===c?e.lastIndexOf(c):e.indexOf(c))&&("number"==typeof u[2]?(b[y]=e.slice(0,p),e=e.slice(p+u[2])):(b[y]=e.slice(p),e=e.slice(0,p))):(p=c.exec(e))&&(b[y]=p[1],e=e.slice(0,p.index)),b[y]=b[y]||o&&u[3]&&t[y]||"",u[4]&&(b[y]=b[y].toLowerCase())):e=u(e,b);n&&(b.query=n(b.query)),o&&t.slashes&&"/"!==b.pathname.charAt(0)&&(""!==b.pathname||""!==t.pathname)&&(b.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,i=n[r-1],o=!1,a=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),a++):a&&(0===r&&(o=!0),n.splice(r,1),a--);return o&&n.unshift(""),"."!==i&&".."!==i||n.push(""),n.join("/")}(b.pathname,t.pathname)),"/"!==b.pathname.charAt(0)&&m(b.protocol)&&(b.pathname="/"+b.pathname),r(b.port,b.protocol)||(b.host=b.hostname,b.port=""),b.username=b.password="",b.auth&&(~(p=b.auth.indexOf(":"))?(b.username=b.auth.slice(0,p),b.username=encodeURIComponent(decodeURIComponent(b.username)),b.password=b.auth.slice(p+1),b.password=encodeURIComponent(decodeURIComponent(b.password))):b.username=encodeURIComponent(decodeURIComponent(b.auth)),b.auth=b.password?b.username+":"+b.password:b.username),b.origin="file:"!==b.protocol&&m(b.protocol)&&b.host?b.protocol+"//"+b.host:"null",b.href=b.toString()}v.prototype={set:function(e,t,n){var o=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||i.parse)(t)),o[e]=t;break;case"port":o[e]=t,r(t,o.protocol)?t&&(o.host=o.hostname+":"+t):(o.host=o.hostname,o[e]="");break;case"hostname":o[e]=t,o.port&&(t+=":"+o.port),o.host=t;break;case"host":o[e]=t,c.test(t)?(t=t.split(":"),o.port=t.pop(),o.hostname=t.join(":")):(o.hostname=t,o.port="");break;case"protocol":o.protocol=t.toLowerCase(),o.slashes=!n;break;case"pathname":case"hash":if(t){var a="pathname"===e?"/":"#";o[e]=t.charAt(0)!==a?a+t:t}else o[e]=t;break;case"username":case"password":o[e]=encodeURIComponent(t);break;case"auth":var s=t.indexOf(":");~s?(o.username=t.slice(0,s),o.username=encodeURIComponent(decodeURIComponent(o.username)),o.password=t.slice(s+1),o.password=encodeURIComponent(decodeURIComponent(o.password))):o.username=encodeURIComponent(decodeURIComponent(t))}for(var u=0;u<h.length;u++){var d=h[u];d[4]&&(o[d[1]]=o[d[1]].toLowerCase())}return o.auth=o.password?o.username+":"+o.password:o.username,o.origin="file:"!==o.protocol&&m(o.protocol)&&o.host?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(e){e&&"function"==typeof e||(e=i.stringify);var t,n=this,r=n.host,o=n.protocol;o&&":"!==o.charAt(o.length-1)&&(o+=":");var a=o+(n.protocol&&n.slashes||m(n.protocol)?"//":"");return n.username?(a+=n.username,n.password&&(a+=":"+n.password),a+="@"):n.password?(a+=":"+n.password,a+="@"):"file:"!==n.protocol&&m(n.protocol)&&!r&&"/"!==n.pathname&&(a+="@"),(":"===r[r.length-1]||c.test(n.hostname)&&!n.port)&&(r+=":"),a+=r+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(a+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(a+=n.hash),a}},v.extractProtocol=g,v.location=f,v.trimLeft=l,v.qs=i,e.exports=v},2382:function(e,t,n){"use strict";var r=n(3475);e.exports=function(e,t){var i=e&&e.window,o={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};for(var a in t)hasOwnProperty.call(t,a)&&(o[a]=t[a]);var s=r.log,c=r.detectBrowser(i),u=n(629)||null,d=n(7435)||null,l=n(4449)||null,h=n(4477)||null,p=n(1594)||null,f={browserDetails:c,commonShim:p,extractVersion:r.extractVersion,disableLog:r.disableLog,disableWarnings:r.disableWarnings};switch(c.browser){case"chrome":if(!u||!u.shimPeerConnection||!o.shimChrome)return s("Chrome shim is not included in this adapter release."),f;s("adapter.js shimming chrome."),f.browserShim=u,p.shimCreateObjectURL(i),u.shimGetUserMedia(i),u.shimMediaStream(i),u.shimSourceObject(i),u.shimPeerConnection(i),u.shimOnTrack(i),u.shimAddTrackRemoveTrack(i),u.shimGetSendersWithDtmf(i),u.shimSenderReceiverGetStats(i),u.fixNegotiationNeeded(i),p.shimRTCIceCandidate(i),p.shimMaxMessageSize(i),p.shimSendThrowTypeError(i);break;case"firefox":if(!l||!l.shimPeerConnection||!o.shimFirefox)return s("Firefox shim is not included in this adapter release."),f;s("adapter.js shimming firefox."),f.browserShim=l,p.shimCreateObjectURL(i),l.shimGetUserMedia(i),l.shimSourceObject(i),l.shimPeerConnection(i),l.shimOnTrack(i),l.shimRemoveStream(i),l.shimSenderGetStats(i),l.shimReceiverGetStats(i),l.shimRTCDataChannel(i),p.shimRTCIceCandidate(i),p.shimMaxMessageSize(i),p.shimSendThrowTypeError(i);break;case"edge":if(!d||!d.shimPeerConnection||!o.shimEdge)return s("MS edge shim is not included in this adapter release."),f;s("adapter.js shimming edge."),f.browserShim=d,p.shimCreateObjectURL(i),d.shimGetUserMedia(i),d.shimPeerConnection(i),d.shimReplaceTrack(i),d.shimGetDisplayMedia(i),p.shimMaxMessageSize(i),p.shimSendThrowTypeError(i);break;case"safari":if(!h||!o.shimSafari)return s("Safari shim is not included in this adapter release."),f;s("adapter.js shimming safari."),f.browserShim=h,p.shimCreateObjectURL(i),h.shimRTCIceServerUrls(i),h.shimCreateOfferLegacy(i),h.shimCallbacksAPI(i),h.shimLocalStreamsAPI(i),h.shimRemoteStreamsAPI(i),h.shimTrackEventTransceiver(i),h.shimGetUserMedia(i),p.shimRTCIceCandidate(i),p.shimMaxMessageSize(i),p.shimSendThrowTypeError(i);break;default:s("Unsupported browser!")}return f}},629:function(e,t,n){"use strict";var r=n(3475),i=r.log;function o(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((function(r){r.endsWith("Id")?o(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((function(t){o(e,e.get(t),n)}))})))}function a(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;var a=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&a.push(e)})),a.forEach((function(t){e.forEach((function(n){n.type===r&&n.trackId===t.id&&o(e,n,i)}))})),i}e.exports={shimGetUserMedia:n(483),shimMediaStream:function(e){e.MediaStream=e.MediaStream||e.webkitMediaStream},shimOnTrack:function(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return n._ontrackpoly||(n._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.track.id})):{track:r.track};var o=new Event("track");o.track=r.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)})),t.stream.getTracks().forEach((function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.id})):{track:r};var o=new Event("track");o.track=r,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)}))},n.addEventListener("addstream",n._ontrackpoly)),t.apply(n,arguments)}}else r.wrapPeerConnectionEvent(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}))},shimGetSendersWithDtmf:function(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){var i=this,o=n.apply(i,arguments);return o||(o=t(i,e),i._senders.push(o)),o};var r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;r.apply(t,arguments);var n=t._senders.indexOf(e);-1!==n&&t._senders.splice(n,1)}}var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;n._senders=n._senders||[],i.apply(n,[e]),e.getTracks().forEach((function(e){n._senders.push(t(n,e))}))};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;t._senders=t._senders||[],o.apply(t,[e]),e.getTracks().forEach((function(e){var n=t._senders.find((function(t){return t.track===e}));n&&t._senders.splice(t._senders.indexOf(n),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(e,[]);return t.forEach((function(t){t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}},shimSenderReceiverGetStats:function(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(e,[]);return n.forEach((function(t){t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return a(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var i=e.RTCPeerConnection.prototype.getReceivers;i&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=i.apply(e,[]);return t.forEach((function(t){t._pc=e})),t}),r.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return a(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var t=this;if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var n,r,i,a=arguments[0];return t.getSenders().forEach((function(e){e.track===a&&(n?i=!0:n=e)})),t.getReceivers().forEach((function(e){return e.track===a&&(r?i=!0:r=e),e.track===a})),i||n&&r?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):n?n.getStats():r?r.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return o.apply(t,arguments)}}}},shimSourceObject:function(e){var t=e&&e.URL;"object"==typeof e&&e.HTMLMediaElement&&!("srcObject"in e.HTMLMediaElement.prototype)&&Object.defineProperty(e.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(e){var n=this;this._srcObject=e,this.src&&t.revokeObjectURL(this.src),e?(this.src=t.createObjectURL(e),e.addEventListener("addtrack",(function(){n.src&&t.revokeObjectURL(n.src),n.src=t.createObjectURL(e)})),e.addEventListener("removetrack",(function(){n.src&&t.revokeObjectURL(n.src),n.src=t.createObjectURL(e)}))):this.src=""}})},shimAddTrackRemoveTrackWithNative:function(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){if(t.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")}));var r=t.getSenders();n.apply(this,arguments);var i=t.getSenders().filter((function(e){return-1===r.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(i)};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(n){var r=t._shimmedLocalStreams[n].indexOf(e);-1!==r&&t._shimmedLocalStreams[n].splice(r,1),1===t._shimmedLocalStreams[n].length&&delete t._shimmedLocalStreams[n]})),i.apply(this,arguments)}},shimAddTrackRemoveTrack:function(e){if(e.RTCPeerConnection){var t=r.detectBrowser(e);if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return this.shimAddTrackRemoveTrackWithNative(e);var n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=n.apply(this);return e._reverseStreams=e._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(n._streams=n._streams||{},n._reverseStreams=n._reverseStreams||{},t.getTracks().forEach((function(e){if(n.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")})),!n._reverseStreams[t.id]){var r=new e.MediaStream(t.getTracks());n._streams[t.id]=r,n._reverseStreams[r.id]=t,t=r}i.apply(n,[t])};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;t._streams=t._streams||{},t._reverseStreams=t._reverseStreams||{},o.apply(t,[t._streams[e.id]||e]),delete t._reverseStreams[t._streams[e.id]?t._streams[e.id].id:e.id],delete t._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var r=this;if("closed"===r.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");var o=r.getSenders().find((function(e){return e.track===t}));if(o)throw new DOMException("Track already exists.","InvalidAccessError");r._streams=r._streams||{},r._reverseStreams=r._reverseStreams||{};var a=r._streams[n.id];if(a)a.addTrack(t),Promise.resolve().then((function(){r.dispatchEvent(new Event("negotiationneeded"))}));else{var s=new e.MediaStream([t]);r._streams[n.id]=s,r._reverseStreams[s.id]=n,r.addStream(s)}return r.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=this,t=arguments,r=arguments.length&&"function"==typeof arguments[0];return r?n.apply(e,[function(n){var r=c(e,n);t[0].apply(null,[r])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):n.apply(e,arguments).then((function(t){return c(e,t)}))}}));var a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){var e=this;return arguments.length&&arguments[0].type?(arguments[0]=u(e,arguments[0]),a.apply(e,arguments)):a.apply(e,arguments)};var s=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=s.get.apply(this);return""===e.type?e:c(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t,n=this;if("closed"===n.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==n)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");n._streams=n._streams||{},Object.keys(n._streams).forEach((function(r){n._streams[r].getTracks().find((function(t){return e.track===t}))&&(t=n._streams[r])})),t&&(1===t.getTracks().length?n.removeStream(n._reverseStreams[t.id]):t.removeTrack(e.track),n.dispatchEvent(new Event("negotiationneeded")))}}function c(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}function u(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}},shimPeerConnection:function(e){var t=r.detectBrowser(e);if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=function(t,n){return i("PeerConnection"),t&&t.iceTransportPolicy&&(t.iceTransports=t.iceTransportPolicy),new e.webkitRTCPeerConnection(t,n)},e.RTCPeerConnection.prototype=e.webkitRTCPeerConnection.prototype,e.webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return e.webkitRTCPeerConnection.generateCertificate}})),e.RTCPeerConnection){var n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,t,r){var i=this,o=arguments;if(arguments.length>0&&"function"==typeof e)return n.apply(this,arguments);if(0===n.length&&(0===arguments.length||"function"!=typeof arguments[0]))return n.apply(this,[]);var a=function(e){var t={};return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t},s=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};if(arguments.length>=2){var c=function(e){o[1](s(a(e)))};return n.apply(this,[c,arguments[0]])}return new Promise((function(e,t){n.apply(i,[function(t){e(s(a(t)))},t])})).then(t,r)},t.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=arguments,t=this,r=new Promise((function(r,i){n.apply(t,[e[0],r,i])}));return e.length<2?r:r.then((function(){e[1].apply(null,[])}),(function(t){e.length>=3&&e[2].apply(null,[t])}))}})),t.version<52&&["createOffer","createAnswer"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"==typeof arguments[0]){var t=1===arguments.length?arguments[0]:void 0;return new Promise((function(r,i){n.apply(e,[r,i,t])}))}return n.apply(this,arguments)}})),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}}));var o=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?o.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}},fixNegotiationNeeded:function(e){r.wrapPeerConnectionEvent(e,"negotiationneeded",(function(e){if("stable"===e.target.signalingState)return e}))},shimGetDisplayMedia:function(e,t){e.navigator&&e.navigator.mediaDevices&&!("getDisplayMedia"in e.navigator.mediaDevices)&&("function"==typeof t?(e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((function(t){var r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)}))},e.navigator.getDisplayMedia=function(t){return r.deprecated("navigator.getDisplayMedia","navigator.mediaDevices.getDisplayMedia"),e.navigator.mediaDevices.getDisplayMedia(t)}):console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}}},483:function(e,t,n){"use strict";var r=n(3475),i=r.log;e.exports=function(e){var t=r.detectBrowser(e),n=e&&e.navigator,o=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var o={};"number"==typeof r.ideal?(o[i("min",n)]=r.ideal,t.optional.push(o),(o={})[i("max",n)]=r.ideal,t.optional.push(o)):(o[i("",n)]=r.ideal,t.optional.push(o))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach((function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},a=function(e,r){if(t.version>=61)return r(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){var a=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};a((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),a(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=o(e.audio)}if(e&&"object"==typeof e.video){var s=e.video.facingMode;s=s&&("object"==typeof s?s:{ideal:s});var c,u=t.version<66;if(s&&("user"===s.exact||"environment"===s.exact||"user"===s.ideal||"environment"===s.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||u)&&(delete e.video.facingMode,"environment"===s.exact||"environment"===s.ideal?c=["back","rear"]:"user"!==s.exact&&"user"!==s.ideal||(c=["front"]),c))return n.mediaDevices.enumerateDevices().then((function(t){var n=(t=t.filter((function(e){return"videoinput"===e.kind}))).find((function(e){return c.some((function(t){return-1!==e.label.toLowerCase().indexOf(t)}))}));return!n&&t.length&&-1!==c.indexOf("back")&&(n=t[t.length-1]),n&&(e.video.deviceId=s.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=o(e.video),i("chrome: "+JSON.stringify(e)),r(e)}));e.video=o(e.video)}return i("chrome: "+JSON.stringify(e)),r(e)},s=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};n.getUserMedia=function(e,t,r){a(e,(function(e){n.webkitGetUserMedia(e,t,(function(e){r&&r(s(e))}))}))};var c=function(e){return new Promise((function(t,r){n.getUserMedia(e,t,r)}))};if(n.mediaDevices||(n.mediaDevices={getUserMedia:c,enumerateDevices:function(){return new Promise((function(t){var n={audio:"audioinput",video:"videoinput"};return e.MediaStreamTrack.getSources((function(e){t(e.map((function(e){return{label:e.label,kind:n[e.kind],deviceId:e.id,groupId:""}})))}))}))},getSupportedConstraints:function(){return{deviceId:!0,echoCancellation:!0,facingMode:!0,frameRate:!0,height:!0,width:!0}}}),n.mediaDevices.getUserMedia){var u=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return a(e,(function(e){return u(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Promise.reject(s(e))}))}))}}else n.mediaDevices.getUserMedia=function(e){return c(e)};void 0===n.mediaDevices.addEventListener&&(n.mediaDevices.addEventListener=function(){i("Dummy mediaDevices.addEventListener called.")}),void 0===n.mediaDevices.removeEventListener&&(n.mediaDevices.removeEventListener=function(){i("Dummy mediaDevices.removeEventListener called.")})}},1594:function(e,t,n){"use strict";var r=n(2281),i=n(3475);e.exports={shimRTCIceCandidate:function(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),i=r.parseCandidate(e.candidate),o=Object.assign(n,i);return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,i.wrapPeerConnectionEvent(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}},shimCreateObjectURL:function(e){var t=e&&e.URL;if("object"==typeof e&&e.HTMLMediaElement&&"srcObject"in e.HTMLMediaElement.prototype&&t.createObjectURL&&t.revokeObjectURL){var n=t.createObjectURL.bind(t),r=t.revokeObjectURL.bind(t),o=new Map,a=0;t.createObjectURL=function(e){if("getTracks"in e){var t="polyblob:"+ ++a;return o.set(t,e),i.deprecated("URL.createObjectURL(stream)","elem.srcObject = stream"),t}return n(e)},t.revokeObjectURL=function(e){r(e),o.delete(e)};var s=Object.getOwnPropertyDescriptor(e.HTMLMediaElement.prototype,"src");Object.defineProperty(e.HTMLMediaElement.prototype,"src",{get:function(){return s.get.apply(this)},set:function(e){return this.srcObject=o.get(e)||null,s.set.apply(this,[e])}});var c=e.HTMLMediaElement.prototype.setAttribute;e.HTMLMediaElement.prototype.setAttribute=function(){return 2===arguments.length&&"src"===(""+arguments[0]).toLowerCase()&&(this.srcObject=o.get(arguments[1])||null),c.apply(this,arguments)}}},shimMaxMessageSize:function(e){if(!e.RTCSctpTransport&&e.RTCPeerConnection){var t=i.detectBrowser(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var n=function(e){var t=r.splitSections(e.sdp);return t.shift(),t.some((function(e){var t=r.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},o=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!=n?-1:n},a=function(e){var n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},s=function(e,n){var i=65536;"firefox"===t.browser&&57===t.version&&(i=65535);var o=r.matchPrefix(e.sdp,"a=max-message-size:");return o.length>0?i=parseInt(o[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(i=2147483637),i},c=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;if(e._sctp=null,n(arguments[0])){var t,r=o(arguments[0]),i=a(r),u=s(arguments[0],r);t=0===i&&0===u?Number.POSITIVE_INFINITY:0===i||0===u?Math.max(i,u):Math.min(i,u);var d={};Object.defineProperty(d,"maxMessageSize",{get:function(){return t}}),e._sctp=d}return c.apply(e,arguments)}}},shimSendThrowTypeError:function(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=this,r=t.apply(e,arguments);return n(r,e),r},i.wrapPeerConnectionEvent(e,"datachannel",(function(e){return n(e.channel,e.target),e}))}function n(e,t){var n=e.send;e.send=function(){var r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}}}},7435:function(e,t,n){"use strict";var r=n(3475),i=n(7225),o=n(6294);e.exports={shimGetUserMedia:n(2673),shimPeerConnection:function(e){var t=r.detectBrowser(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var n=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){n.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var a=o(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=i(e.iceServers)),new a(e)},e.RTCPeerConnection.prototype=a.prototype},shimReplaceTrack:function(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)},shimGetDisplayMedia:function(e,t){if("getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&!("getDisplayMedia"in e.navigator.mediaDevices)){var n=e.navigator.getDisplayMedia;e.navigator.mediaDevices.getDisplayMedia=function(t){return n.call(e.navigator,t)},e.navigator.getDisplayMedia=function(t){return r.deprecated("navigator.getDisplayMedia","navigator.mediaDevices.getDisplayMedia"),n.call(e.navigator,t)}}}}},7225:function(e,t,n){"use strict";var r=n(3475);e.exports=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var i=e.urls||e.url;e.url&&!e.urls&&r.deprecated("RTCIceServer.url","RTCIceServer.urls");var o="string"==typeof i;return o&&(i=[i]),i=i.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||n?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(n=!0,!0)})),delete e.url,e.urls=o?i[0]:i,!!i.length}}))}},2673:function(e){"use strict";e.exports=function(e){var t=e&&e.navigator,n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return n(e).catch((function(e){return Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))}))}}},4449:function(e,t,n){"use strict";var r=n(3475);e.exports={shimGetUserMedia:n(2244),shimOnTrack:function(e){"object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)&&Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.getTracks().forEach(function(t){var n=new Event("track");n.track=t,n.receiver={track:t},n.transceiver={receiver:n.receiver},n.streams=[e.stream],this.dispatchEvent(n)}.bind(this))}.bind(this))},enumerable:!0,configurable:!0}),"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimSourceObject:function(e){"object"==typeof e&&e.HTMLMediaElement&&!("srcObject"in e.HTMLMediaElement.prototype)&&Object.defineProperty(e.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(e){this.mozSrcObject=e}})},shimPeerConnection:function(e){var t=r.detectBrowser(e);if("object"==typeof e&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){e.RTCPeerConnection||(e.RTCPeerConnection=function(n,r){if(t.version<38&&n&&n.iceServers){for(var i=[],o=0;o<n.iceServers.length;o++){var a=n.iceServers[o];if(a.hasOwnProperty("urls"))for(var s=0;s<a.urls.length;s++){var c={url:a.urls[s]};0===a.urls[s].indexOf("turn")&&(c.username=a.username,c.credential=a.credential),i.push(c)}else i.push(n.iceServers[o])}n.iceServers=i}return new e.mozRTCPeerConnection(n,r)},e.RTCPeerConnection.prototype=e.mozRTCPeerConnection.prototype,e.mozRTCPeerConnection.generateCertificate&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return e.mozRTCPeerConnection.generateCertificate}}),e.RTCSessionDescription=e.mozRTCSessionDescription,e.RTCIceCandidate=e.mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}}));var n=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())};var i={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,n,r){return o.apply(this,[e||null]).then((function(e){if(t.version<48&&(e=function(e){var t=new Map;return Object.keys(e).forEach((function(n){t.set(n,e[n]),t[n]=e[n]})),t}(e)),t.version<53&&!n)try{e.forEach((function(e){e.type=i[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach((function(t,n){e.set(n,Object.assign({},t,{type:i[t.type]||t.type}))}))}return e})).then(n,r)}}},shimSenderGetStats:function(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(e,[]);return n.forEach((function(t){t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}},shimReceiverGetStats:function(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,n=t.apply(e,[]);return n.forEach((function(t){t._pc=e})),n}),r.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}},shimRemoveStream:function(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;r.deprecated("removeStream","removeTrack"),this.getSenders().forEach((function(n){n.track&&-1!==e.getTracks().indexOf(n.track)&&t.removeTrack(n)}))})},shimRTCDataChannel:function(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)},shimGetDisplayMedia:function(e,t){e.navigator&&e.navigator.mediaDevices&&!("getDisplayMedia"in e.navigator.mediaDevices)&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){var r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)},e.navigator.getDisplayMedia=function(t){return r.deprecated("navigator.getDisplayMedia","navigator.mediaDevices.getDisplayMedia"),e.navigator.mediaDevices.getDisplayMedia(t)})}}},2244:function(e,t,n){"use strict";var r=n(3475),i=r.log;e.exports=function(e){var t=r.detectBrowser(e),n=e&&e.navigator,o=e&&e.MediaStreamTrack,a=function(e){return{name:{InternalError:"NotReadableError",NotSupportedError:"TypeError",PermissionDeniedError:"NotAllowedError",SecurityError:"NotAllowedError"}[e.name]||e.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[e.message]||e.message,constraint:e.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}},s=function(e,r,o){var s=function(e){if("object"!=typeof e||e.require)return e;var t=[];return Object.keys(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r=e[n]="object"==typeof e[n]?e[n]:{ideal:e[n]};if(void 0===r.min&&void 0===r.max&&void 0===r.exact||t.push(n),void 0!==r.exact&&("number"==typeof r.exact?r.min=r.max=r.exact:e[n]=r.exact,delete r.exact),void 0!==r.ideal){e.advanced=e.advanced||[];var i={};"number"==typeof r.ideal?i[n]={min:r.ideal,max:r.ideal}:i[n]=r.ideal,e.advanced.push(i),delete r.ideal,Object.keys(r).length||delete e[n]}}})),t.length&&(e.require=t),e};return e=JSON.parse(JSON.stringify(e)),t.version<38&&(i("spec: "+JSON.stringify(e)),e.audio&&(e.audio=s(e.audio)),e.video&&(e.video=s(e.video)),i("ff37: "+JSON.stringify(e))),n.mozGetUserMedia(e,r,(function(e){o(a(e))}))};if(n.mediaDevices||(n.mediaDevices={getUserMedia:function(e){return new Promise((function(t,n){s(e,t,n)}))},addEventListener:function(){},removeEventListener:function(){}}),n.mediaDevices.enumerateDevices=n.mediaDevices.enumerateDevices||function(){return new Promise((function(e){e([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])}))},t.version<41){var c=n.mediaDevices.enumerateDevices.bind(n.mediaDevices);n.mediaDevices.enumerateDevices=function(){return c().then(void 0,(function(e){if("NotFoundError"===e.name)return[];throw e}))}}if(t.version<49){var u=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return u(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("The object can not be found here.","NotFoundError");return t}),(function(e){return Promise.reject(a(e))}))}}if(!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var d=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"==typeof e&&"object"==typeof e.audio&&(e=JSON.parse(JSON.stringify(e)),d(e.audio,"autoGainControl","mozAutoGainControl"),d(e.audio,"noiseSuppression","mozNoiseSuppression")),l(e)},o&&o.prototype.getSettings){var h=o.prototype.getSettings;o.prototype.getSettings=function(){var e=h.apply(this,arguments);return d(e,"mozAutoGainControl","autoGainControl"),d(e,"mozNoiseSuppression","noiseSuppression"),e}}if(o&&o.prototype.applyConstraints){var p=o.prototype.applyConstraints;o.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"==typeof e&&(e=JSON.parse(JSON.stringify(e)),d(e,"autoGainControl","mozAutoGainControl"),d(e,"noiseSuppression","mozNoiseSuppression")),p.apply(this,[e])}}}n.getUserMedia=function(e,i,o){if(t.version<44)return s(e,i,o);r.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(i,o)}}},4477:function(e,t,n){"use strict";var r=n(3475);e.exports={shimLocalStreamsAPI:function(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),"getStreamById"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getStreamById=function(e){var t=null;return this._localStreams&&this._localStreams.forEach((function(n){n.id===e&&(t=n)})),this._remoteStreams&&this._remoteStreams.forEach((function(n){n.id===e&&(t=n)})),t}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),-1===this._localStreams.indexOf(e)&&this._localStreams.push(e);var n=this;e.getTracks().forEach((function(r){t.call(n,r,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e,n){return n&&(this._localStreams?-1===this._localStreams.indexOf(n)&&this._localStreams.push(n):this._localStreams=[n]),t.call(this,e,n)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);var t=this._localStreams.indexOf(e);if(-1!==t){this._localStreams.splice(t,1);var n=this,r=e.getTracks();this.getSenders().forEach((function(e){-1!==r.indexOf(e.track)&&n.removeTrack(e)}))}})}},shimRemoteStreamsAPI:function(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){this._onaddstream&&this.removeEventListener("addstream",this._onaddstream),this.addEventListener("addstream",this._onaddstream=e)}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}}))}),t.apply(e,arguments)}}},shimCallbacksAPI:function(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i};var s=function(e,t,n){var r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=s,s=function(e,t,n){var r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=s,s=function(e,t,n){var r=a.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=s}},shimGetUserMedia:function(e){var t=e&&e.navigator;t.getUserMedia||(t.webkitGetUserMedia?t.getUserMedia=t.webkitGetUserMedia.bind(t):t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t)))},shimRTCIceServerUrls:function(e){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var i=[],o=0;o<e.iceServers.length;o++){var a=e.iceServers[o];!a.hasOwnProperty("urls")&&a.hasOwnProperty("url")?(r.deprecated("RTCIceServer.url","RTCIceServer.urls"),(a=JSON.parse(JSON.stringify(a))).urls=a.url,delete a.url,i.push(a)):i.push(e.iceServers[o])}e.iceServers=i}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in e.RTCPeerConnection&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})},shimTrackEventTransceiver:function(e){"object"==typeof e&&e.RTCPeerConnection&&"receiver"in e.RTCTrackEvent.prototype&&!e.RTCTransceiver&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimCreateOfferLegacy:function(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){var n=this;if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var r=n.getTransceivers().find((function(e){return e.sender.track&&"audio"===e.sender.track.kind}));!1===e.offerToReceiveAudio&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveAudio||r||n.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var i=n.getTransceivers().find((function(e){return e.sender.track&&"video"===e.sender.track.kind}));!1===e.offerToReceiveVideo&&i?"sendrecv"===i.direction?i.setDirection("sendonly"):"recvonly"===i.direction&&i.setDirection("inactive"):!0!==e.offerToReceiveVideo||i||n.addTransceiver("video")}return t.apply(n,arguments)}}}},3475:function(e){"use strict";var t=!0,n=!0;function r(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}e.exports={extractVersion:r,wrapPeerConnectionEvent:function(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);var o=function(e){var t=n(e);t&&r(t)};return this._eventMap=this._eventMap||{},this._eventMap[r]=o,i.apply(this,[e,o])};var o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[n])return o.apply(this,arguments);var r=this._eventMap[n];return delete this._eventMap[n],o.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}},disableLog:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(t=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},disableWarnings:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(n=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))},log:function(){if("object"==typeof window){if(t)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},deprecated:function(e,t){n&&console.warn(e+" is deprecated, please use "+t+" instead.")},detectBrowser:function(e){var t=e&&e.navigator,n={browser:null,version:null};if(void 0===e||!e.navigator)return n.browser="Not a browser.",n;if(t.mozGetUserMedia)n.browser="firefox",n.version=r(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia)n.browser="chrome",n.version=r(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))n.browser="edge",n.version=r(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return n.browser="Not a supported browser.",n;n.browser="safari",n.version=r(t.userAgent,/AppleWebKit\/(\d+)\./,1)}return n}}},7187:function(e){function t(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function r(e){return"object"==typeof e&&null!==e}function i(e){return void 0===e}e.exports=t,t.EventEmitter=t,t.prototype._events=void 0,t.prototype._maxListeners=void 0,t.defaultMaxListeners=10,t.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},t.prototype.emit=function(e){var t,o,a,s,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var d=new Error('Uncaught, unspecified "error" event. ('+t+")");throw d.context=t,d}if(i(o=this._events[e]))return!1;if(n(o))switch(arguments.length){case 1:o.call(this);break;case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),o.apply(this,s)}else if(r(o))for(s=Array.prototype.slice.call(arguments,1),a=(u=o.slice()).length,c=0;c<a;c++)u[c].apply(this,s);return!0},t.prototype.addListener=function(e,o){var a;if(!n(o))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(o.listener)?o.listener:o),this._events[e]?r(this._events[e])?this._events[e].push(o):this._events[e]=[this._events[e],o]:this._events[e]=o,r(this._events[e])&&!this._events[e].warned&&(a=i(this._maxListeners)?t.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[e].length>a&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},t.prototype.on=t.prototype.addListener,t.prototype.once=function(e,t){if(!n(t))throw TypeError("listener must be a function");var r=!1;function i(){this.removeListener(e,i),r||(r=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},t.prototype.removeListener=function(e,t){var i,o,a,s;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=(i=this._events[e]).length,o=-1,i===t||n(i.listener)&&i.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(r(i)){for(s=a;s-- >0;)if(i[s]===t||i[s].listener&&i[s].listener===t){o=s;break}if(o<0)return this;1===i.length?(i.length=0,delete this._events[e]):i.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},t.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},t.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},t.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},t.listenerCount=function(e,t){return e.listenerCount(t)}},3339:function(){},2349:function(){},673:function(){},6946:function(){},2379:function(e){"use strict";e.exports=JSON.parse('["ac","com.ac","edu.ac","gov.ac","net.ac","mil.ac","org.ac","ad","nom.ad","ae","co.ae","net.ae","org.ae","sch.ae","ac.ae","gov.ae","mil.ae","aero","accident-investigation.aero","accident-prevention.aero","aerobatic.aero","aeroclub.aero","aerodrome.aero","agents.aero","aircraft.aero","airline.aero","airport.aero","air-surveillance.aero","airtraffic.aero","air-traffic-control.aero","ambulance.aero","amusement.aero","association.aero","author.aero","ballooning.aero","broker.aero","caa.aero","cargo.aero","catering.aero","certification.aero","championship.aero","charter.aero","civilaviation.aero","club.aero","conference.aero","consultant.aero","consulting.aero","control.aero","council.aero","crew.aero","design.aero","dgca.aero","educator.aero","emergency.aero","engine.aero","engineer.aero","entertainment.aero","equipment.aero","exchange.aero","express.aero","federation.aero","flight.aero","fuel.aero","gliding.aero","government.aero","groundhandling.aero","group.aero","hanggliding.aero","homebuilt.aero","insurance.aero","journal.aero","journalist.aero","leasing.aero","logistics.aero","magazine.aero","maintenance.aero","media.aero","microlight.aero","modelling.aero","navigation.aero","parachuting.aero","paragliding.aero","passenger-association.aero","pilot.aero","press.aero","production.aero","recreation.aero","repbody.aero","res.aero","research.aero","rotorcraft.aero","safety.aero","scientist.aero","services.aero","show.aero","skydiving.aero","software.aero","student.aero","trader.aero","trading.aero","trainer.aero","union.aero","workinggroup.aero","works.aero","af","gov.af","com.af","org.af","net.af","edu.af","ag","com.ag","org.ag","net.ag","co.ag","nom.ag","ai","off.ai","com.ai","net.ai","org.ai","al","com.al","edu.al","gov.al","mil.al","net.al","org.al","am","co.am","com.am","commune.am","net.am","org.am","ao","ed.ao","gv.ao","og.ao","co.ao","pb.ao","it.ao","aq","ar","bet.ar","com.ar","coop.ar","edu.ar","gob.ar","gov.ar","int.ar","mil.ar","musica.ar","mutual.ar","net.ar","org.ar","senasa.ar","tur.ar","arpa","e164.arpa","in-addr.arpa","ip6.arpa","iris.arpa","uri.arpa","urn.arpa","as","gov.as","asia","at","ac.at","co.at","gv.at","or.at","sth.ac.at","au","com.au","net.au","org.au","edu.au","gov.au","asn.au","id.au","info.au","conf.au","oz.au","act.au","nsw.au","nt.au","qld.au","sa.au","tas.au","vic.au","wa.au","act.edu.au","catholic.edu.au","nsw.edu.au","nt.edu.au","qld.edu.au","sa.edu.au","tas.edu.au","vic.edu.au","wa.edu.au","qld.gov.au","sa.gov.au","tas.gov.au","vic.gov.au","wa.gov.au","schools.nsw.edu.au","aw","com.aw","ax","az","com.az","net.az","int.az","gov.az","org.az","edu.az","info.az","pp.az","mil.az","name.az","pro.az","biz.az","ba","com.ba","edu.ba","gov.ba","mil.ba","net.ba","org.ba","bb","biz.bb","co.bb","com.bb","edu.bb","gov.bb","info.bb","net.bb","org.bb","store.bb","tv.bb","*.bd","be","ac.be","bf","gov.bf","bg","a.bg","b.bg","c.bg","d.bg","e.bg","f.bg","g.bg","h.bg","i.bg","j.bg","k.bg","l.bg","m.bg","n.bg","o.bg","p.bg","q.bg","r.bg","s.bg","t.bg","u.bg","v.bg","w.bg","x.bg","y.bg","z.bg","0.bg","1.bg","2.bg","3.bg","4.bg","5.bg","6.bg","7.bg","8.bg","9.bg","bh","com.bh","edu.bh","net.bh","org.bh","gov.bh","bi","co.bi","com.bi","edu.bi","or.bi","org.bi","biz","bj","asso.bj","barreau.bj","gouv.bj","bm","com.bm","edu.bm","gov.bm","net.bm","org.bm","bn","com.bn","edu.bn","gov.bn","net.bn","org.bn","bo","com.bo","edu.bo","gob.bo","int.bo","org.bo","net.bo","mil.bo","tv.bo","web.bo","academia.bo","agro.bo","arte.bo","blog.bo","bolivia.bo","ciencia.bo","cooperativa.bo","democracia.bo","deporte.bo","ecologia.bo","economia.bo","empresa.bo","indigena.bo","industria.bo","info.bo","medicina.bo","movimiento.bo","musica.bo","natural.bo","nombre.bo","noticias.bo","patria.bo","politica.bo","profesional.bo","plurinacional.bo","pueblo.bo","revista.bo","salud.bo","tecnologia.bo","tksat.bo","transporte.bo","wiki.bo","br","9guacu.br","abc.br","adm.br","adv.br","agr.br","aju.br","am.br","anani.br","aparecida.br","app.br","arq.br","art.br","ato.br","b.br","barueri.br","belem.br","bhz.br","bib.br","bio.br","blog.br","bmd.br","boavista.br","bsb.br","campinagrande.br","campinas.br","caxias.br","cim.br","cng.br","cnt.br","com.br","contagem.br","coop.br","coz.br","cri.br","cuiaba.br","curitiba.br","def.br","des.br","det.br","dev.br","ecn.br","eco.br","edu.br","emp.br","enf.br","eng.br","esp.br","etc.br","eti.br","far.br","feira.br","flog.br","floripa.br","fm.br","fnd.br","fortal.br","fot.br","foz.br","fst.br","g12.br","geo.br","ggf.br","goiania.br","gov.br","ac.gov.br","al.gov.br","am.gov.br","ap.gov.br","ba.gov.br","ce.gov.br","df.gov.br","es.gov.br","go.gov.br","ma.gov.br","mg.gov.br","ms.gov.br","mt.gov.br","pa.gov.br","pb.gov.br","pe.gov.br","pi.gov.br","pr.gov.br","rj.gov.br","rn.gov.br","ro.gov.br","rr.gov.br","rs.gov.br","sc.gov.br","se.gov.br","sp.gov.br","to.gov.br","gru.br","imb.br","ind.br","inf.br","jab.br","jampa.br","jdf.br","joinville.br","jor.br","jus.br","leg.br","lel.br","log.br","londrina.br","macapa.br","maceio.br","manaus.br","maringa.br","mat.br","med.br","mil.br","morena.br","mp.br","mus.br","natal.br","net.br","niteroi.br","*.nom.br","not.br","ntr.br","odo.br","ong.br","org.br","osasco.br","palmas.br","poa.br","ppg.br","pro.br","psc.br","psi.br","pvh.br","qsl.br","radio.br","rec.br","recife.br","rep.br","ribeirao.br","rio.br","riobranco.br","riopreto.br","salvador.br","sampa.br","santamaria.br","santoandre.br","saobernardo.br","saogonca.br","seg.br","sjc.br","slg.br","slz.br","sorocaba.br","srv.br","taxi.br","tc.br","tec.br","teo.br","the.br","tmp.br","trd.br","tur.br","tv.br","udi.br","vet.br","vix.br","vlog.br","wiki.br","zlg.br","bs","com.bs","net.bs","org.bs","edu.bs","gov.bs","bt","com.bt","edu.bt","gov.bt","net.bt","org.bt","bv","bw","co.bw","org.bw","by","gov.by","mil.by","com.by","of.by","bz","com.bz","net.bz","org.bz","edu.bz","gov.bz","ca","ab.ca","bc.ca","mb.ca","nb.ca","nf.ca","nl.ca","ns.ca","nt.ca","nu.ca","on.ca","pe.ca","qc.ca","sk.ca","yk.ca","gc.ca","cat","cc","cd","gov.cd","cf","cg","ch","ci","org.ci","or.ci","com.ci","co.ci","edu.ci","ed.ci","ac.ci","net.ci","go.ci","asso.ci","aéroport.ci","int.ci","presse.ci","md.ci","gouv.ci","*.ck","!www.ck","cl","co.cl","gob.cl","gov.cl","mil.cl","cm","co.cm","com.cm","gov.cm","net.cm","cn","ac.cn","com.cn","edu.cn","gov.cn","net.cn","org.cn","mil.cn","公司.cn","网络.cn","網絡.cn","ah.cn","bj.cn","cq.cn","fj.cn","gd.cn","gs.cn","gz.cn","gx.cn","ha.cn","hb.cn","he.cn","hi.cn","hl.cn","hn.cn","jl.cn","js.cn","jx.cn","ln.cn","nm.cn","nx.cn","qh.cn","sc.cn","sd.cn","sh.cn","sn.cn","sx.cn","tj.cn","xj.cn","xz.cn","yn.cn","zj.cn","hk.cn","mo.cn","tw.cn","co","arts.co","com.co","edu.co","firm.co","gov.co","info.co","int.co","mil.co","net.co","nom.co","org.co","rec.co","web.co","com","coop","cr","ac.cr","co.cr","ed.cr","fi.cr","go.cr","or.cr","sa.cr","cu","com.cu","edu.cu","org.cu","net.cu","gov.cu","inf.cu","cv","com.cv","edu.cv","int.cv","nome.cv","org.cv","cw","com.cw","edu.cw","net.cw","org.cw","cx","gov.cx","cy","ac.cy","biz.cy","com.cy","ekloges.cy","gov.cy","ltd.cy","mil.cy","net.cy","org.cy","press.cy","pro.cy","tm.cy","cz","de","dj","dk","dm","com.dm","net.dm","org.dm","edu.dm","gov.dm","do","art.do","com.do","edu.do","gob.do","gov.do","mil.do","net.do","org.do","sld.do","web.do","dz","art.dz","asso.dz","com.dz","edu.dz","gov.dz","org.dz","net.dz","pol.dz","soc.dz","tm.dz","ec","com.ec","info.ec","net.ec","fin.ec","k12.ec","med.ec","pro.ec","org.ec","edu.ec","gov.ec","gob.ec","mil.ec","edu","ee","edu.ee","gov.ee","riik.ee","lib.ee","med.ee","com.ee","pri.ee","aip.ee","org.ee","fie.ee","eg","com.eg","edu.eg","eun.eg","gov.eg","mil.eg","name.eg","net.eg","org.eg","sci.eg","*.er","es","com.es","nom.es","org.es","gob.es","edu.es","et","com.et","gov.et","org.et","edu.et","biz.et","name.et","info.et","net.et","eu","fi","aland.fi","fj","ac.fj","biz.fj","com.fj","gov.fj","info.fj","mil.fj","name.fj","net.fj","org.fj","pro.fj","*.fk","com.fm","edu.fm","net.fm","org.fm","fm","fo","fr","asso.fr","com.fr","gouv.fr","nom.fr","prd.fr","tm.fr","aeroport.fr","avocat.fr","avoues.fr","cci.fr","chambagri.fr","chirurgiens-dentistes.fr","experts-comptables.fr","geometre-expert.fr","greta.fr","huissier-justice.fr","medecin.fr","notaires.fr","pharmacien.fr","port.fr","veterinaire.fr","ga","gb","edu.gd","gov.gd","gd","ge","com.ge","edu.ge","gov.ge","org.ge","mil.ge","net.ge","pvt.ge","gf","gg","co.gg","net.gg","org.gg","gh","com.gh","edu.gh","gov.gh","org.gh","mil.gh","gi","com.gi","ltd.gi","gov.gi","mod.gi","edu.gi","org.gi","gl","co.gl","com.gl","edu.gl","net.gl","org.gl","gm","gn","ac.gn","com.gn","edu.gn","gov.gn","org.gn","net.gn","gov","gp","com.gp","net.gp","mobi.gp","edu.gp","org.gp","asso.gp","gq","gr","com.gr","edu.gr","net.gr","org.gr","gov.gr","gs","gt","com.gt","edu.gt","gob.gt","ind.gt","mil.gt","net.gt","org.gt","gu","com.gu","edu.gu","gov.gu","guam.gu","info.gu","net.gu","org.gu","web.gu","gw","gy","co.gy","com.gy","edu.gy","gov.gy","net.gy","org.gy","hk","com.hk","edu.hk","gov.hk","idv.hk","net.hk","org.hk","公司.hk","教育.hk","敎育.hk","政府.hk","個人.hk","个��.hk","箇人.hk","網络.hk","网络.hk","组織.hk","網絡.hk","网絡.hk","组织.hk","組織.hk","組织.hk","hm","hn","com.hn","edu.hn","org.hn","net.hn","mil.hn","gob.hn","hr","iz.hr","from.hr","name.hr","com.hr","ht","com.ht","shop.ht","firm.ht","info.ht","adult.ht","net.ht","pro.ht","org.ht","med.ht","art.ht","coop.ht","pol.ht","asso.ht","edu.ht","rel.ht","gouv.ht","perso.ht","hu","co.hu","info.hu","org.hu","priv.hu","sport.hu","tm.hu","2000.hu","agrar.hu","bolt.hu","casino.hu","city.hu","erotica.hu","erotika.hu","film.hu","forum.hu","games.hu","hotel.hu","ingatlan.hu","jogasz.hu","konyvelo.hu","lakas.hu","media.hu","news.hu","reklam.hu","sex.hu","shop.hu","suli.hu","szex.hu","tozsde.hu","utazas.hu","video.hu","id","ac.id","biz.id","co.id","desa.id","go.id","mil.id","my.id","net.id","or.id","ponpes.id","sch.id","web.id","ie","gov.ie","il","ac.il","co.il","gov.il","idf.il","k12.il","muni.il","net.il","org.il","im","ac.im","co.im","com.im","ltd.co.im","net.im","org.im","plc.co.im","tt.im","tv.im","in","co.in","firm.in","net.in","org.in","gen.in","ind.in","nic.in","ac.in","edu.in","res.in","gov.in","mil.in","info","int","eu.int","io","com.io","iq","gov.iq","edu.iq","mil.iq","com.iq","org.iq","net.iq","ir","ac.ir","co.ir","gov.ir","id.ir","net.ir","org.ir","sch.ir","ایران.ir","ايران.ir","is","net.is","com.is","edu.is","gov.is","org.is","int.is","it","gov.it","edu.it","abr.it","abruzzo.it","aosta-valley.it","aostavalley.it","bas.it","basilicata.it","cal.it","calabria.it","cam.it","campania.it","emilia-romagna.it","emiliaromagna.it","emr.it","friuli-v-giulia.it","friuli-ve-giulia.it","friuli-vegiulia.it","friuli-venezia-giulia.it","friuli-veneziagiulia.it","friuli-vgiulia.it","friuliv-giulia.it","friulive-giulia.it","friulivegiulia.it","friulivenezia-giulia.it","friuliveneziagiulia.it","friulivgiulia.it","fvg.it","laz.it","lazio.it","lig.it","liguria.it","lom.it","lombardia.it","lombardy.it","lucania.it","mar.it","marche.it","mol.it","molise.it","piedmont.it","piemonte.it","pmn.it","pug.it","puglia.it","sar.it","sardegna.it","sardinia.it","sic.it","sicilia.it","sicily.it","taa.it","tos.it","toscana.it","trentin-sud-tirol.it","trentin-süd-tirol.it","trentin-sudtirol.it","trentin-südtirol.it","trentin-sued-tirol.it","trentin-suedtirol.it","trentino-a-adige.it","trentino-aadige.it","trentino-alto-adige.it","trentino-altoadige.it","trentino-s-tirol.it","trentino-stirol.it","trentino-sud-tirol.it","trentino-süd-tirol.it","trentino-sudtirol.it","trentino-südtirol.it","trentino-sued-tirol.it","trentino-suedtirol.it","trentino.it","trentinoa-adige.it","trentinoaadige.it","trentinoalto-adige.it","trentinoaltoadige.it","trentinos-tirol.it","trentinostirol.it","trentinosud-tirol.it","trentinosüd-tirol.it","trentinosudtirol.it","trentinosüdtirol.it","trentinosued-tirol.it","trentinosuedtirol.it","trentinsud-tirol.it","trentinsüd-tirol.it","trentinsudtirol.it","trentinsüdtirol.it","trentinsued-tirol.it","trentinsuedtirol.it","tuscany.it","umb.it","umbria.it","val-d-aosta.it","val-daosta.it","vald-aosta.it","valdaosta.it","valle-aosta.it","valle-d-aosta.it","valle-daosta.it","valleaosta.it","valled-aosta.it","valledaosta.it","vallee-aoste.it","vallée-aoste.it","vallee-d-aoste.it","vallée-d-aoste.it","valleeaoste.it","valléeaoste.it","valleedaoste.it","valléedaoste.it","vao.it","vda.it","ven.it","veneto.it","ag.it","agrigento.it","al.it","alessandria.it","alto-adige.it","altoadige.it","an.it","ancona.it","andria-barletta-trani.it","andria-trani-barletta.it","andriabarlettatrani.it","andriatranibarletta.it","ao.it","aosta.it","aoste.it","ap.it","aq.it","aquila.it","ar.it","arezzo.it","ascoli-piceno.it","ascolipiceno.it","asti.it","at.it","av.it","avellino.it","ba.it","balsan-sudtirol.it","balsan-südtirol.it","balsan-suedtirol.it","balsan.it","bari.it","barletta-trani-andria.it","barlettatraniandria.it","belluno.it","benevento.it","bergamo.it","bg.it","bi.it","biella.it","bl.it","bn.it","bo.it","bologna.it","bolzano-altoadige.it","bolzano.it","bozen-sudtirol.it","bozen-südtirol.it","bozen-suedtirol.it","bozen.it","br.it","brescia.it","brindisi.it","bs.it","bt.it","bulsan-sudtirol.it","bulsan-südtirol.it","bulsan-suedtirol.it","bulsan.it","bz.it","ca.it","cagliari.it","caltanissetta.it","campidano-medio.it","campidanomedio.it","campobasso.it","carbonia-iglesias.it","carboniaiglesias.it","carrara-massa.it","carraramassa.it","caserta.it","catania.it","catanzaro.it","cb.it","ce.it","cesena-forli.it","cesena-forlì.it","cesenaforli.it","cesenaforlì.it","ch.it","chieti.it","ci.it","cl.it","cn.it","co.it","como.it","cosenza.it","cr.it","cremona.it","crotone.it","cs.it","ct.it","cuneo.it","cz.it","dell-ogliastra.it","dellogliastra.it","en.it","enna.it","fc.it","fe.it","fermo.it","ferrara.it","fg.it","fi.it","firenze.it","florence.it","fm.it","foggia.it","forli-cesena.it","forlì-cesena.it","forlicesena.it","forlìcesena.it","fr.it","frosinone.it","ge.it","genoa.it","genova.it","go.it","gorizia.it","gr.it","grosseto.it","iglesias-carbonia.it","iglesiascarbonia.it","im.it","imperia.it","is.it","isernia.it","kr.it","la-spezia.it","laquila.it","laspezia.it","latina.it","lc.it","le.it","lecce.it","lecco.it","li.it","livorno.it","lo.it","lodi.it","lt.it","lu.it","lucca.it","macerata.it","mantova.it","massa-carrara.it","massacarrara.it","matera.it","mb.it","mc.it","me.it","medio-campidano.it","mediocampidano.it","messina.it","mi.it","milan.it","milano.it","mn.it","mo.it","modena.it","monza-brianza.it","monza-e-della-brianza.it","monza.it","monzabrianza.it","monzaebrianza.it","monzaedellabrianza.it","ms.it","mt.it","na.it","naples.it","napoli.it","no.it","novara.it","nu.it","nuoro.it","og.it","ogliastra.it","olbia-tempio.it","olbiatempio.it","or.it","oristano.it","ot.it","pa.it","padova.it","padua.it","palermo.it","parma.it","pavia.it","pc.it","pd.it","pe.it","perugia.it","pesaro-urbino.it","pesarourbino.it","pescara.it","pg.it","pi.it","piacenza.it","pisa.it","pistoia.it","pn.it","po.it","pordenone.it","potenza.it","pr.it","prato.it","pt.it","pu.it","pv.it","pz.it","ra.it","ragusa.it","ravenna.it","rc.it","re.it","reggio-calabria.it","reggio-emilia.it","reggiocalabria.it","reggioemilia.it","rg.it","ri.it","rieti.it","rimini.it","rm.it","rn.it","ro.it","roma.it","rome.it","rovigo.it","sa.it","salerno.it","sassari.it","savona.it","si.it","siena.it","siracusa.it","so.it","sondrio.it","sp.it","sr.it","ss.it","suedtirol.it","südtirol.it","sv.it","ta.it","taranto.it","te.it","tempio-olbia.it","tempioolbia.it","teramo.it","terni.it","tn.it","to.it","torino.it","tp.it","tr.it","trani-andria-barletta.it","trani-barletta-andria.it","traniandriabarletta.it","tranibarlettaandria.it","trapani.it","trento.it","treviso.it","trieste.it","ts.it","turin.it","tv.it","ud.it","udine.it","urbino-pesaro.it","urbinopesaro.it","va.it","varese.it","vb.it","vc.it","ve.it","venezia.it","venice.it","verbania.it","vercelli.it","verona.it","vi.it","vibo-valentia.it","vibovalentia.it","vicenza.it","viterbo.it","vr.it","vs.it","vt.it","vv.it","je","co.je","net.je","org.je","*.jm","jo","com.jo","org.jo","net.jo","edu.jo","sch.jo","gov.jo","mil.jo","name.jo","jobs","jp","ac.jp","ad.jp","co.jp","ed.jp","go.jp","gr.jp","lg.jp","ne.jp","or.jp","aichi.jp","akita.jp","aomori.jp","chiba.jp","ehime.jp","fukui.jp","fukuoka.jp","fukushima.jp","gifu.jp","gunma.jp","hiroshima.jp","hokkaido.jp","hyogo.jp","ibaraki.jp","ishikawa.jp","iwate.jp","kagawa.jp","kagoshima.jp","kanagawa.jp","kochi.jp","kumamoto.jp","kyoto.jp","mie.jp","miyagi.jp","miyazaki.jp","nagano.jp","nagasaki.jp","nara.jp","niigata.jp","oita.jp","okayama.jp","okinawa.jp","osaka.jp","saga.jp","saitama.jp","shiga.jp","shimane.jp","shizuoka.jp","tochigi.jp","tokushima.jp","tokyo.jp","tottori.jp","toyama.jp","wakayama.jp","yamagata.jp","yamaguchi.jp","yamanashi.jp","栃木.jp","愛知.jp","愛媛.jp","兵庫.jp","熊本.jp","茨城.jp","北海道.jp","千葉.jp","和歌山.jp","長崎.jp","長野.jp","新潟.jp","青森.jp","静岡.jp","東京.jp","石川.jp","埼玉.jp","三重.jp","京都.jp","佐賀.jp","大分.jp","大阪.jp","奈良.jp","宮城.jp","宮崎.jp","富山.jp","山口.jp","山形.jp","山梨.jp","岩手.jp","岐阜.jp","岡山.jp","島根.jp","広島.jp","徳島.jp","沖縄.jp","滋賀.jp","神奈川.jp","福井.jp","福岡.jp","福島.jp","秋田.jp","群馬.jp","香川.jp","高知.jp","鳥取.jp","鹿児島.jp","*.kawasaki.jp","*.kitakyushu.jp","*.kobe.jp","*.nagoya.jp","*.sapporo.jp","*.sendai.jp","*.yokohama.jp","!city.kawasaki.jp","!city.kitakyushu.jp","!city.kobe.jp","!city.nagoya.jp","!city.sapporo.jp","!city.sendai.jp","!city.yokohama.jp","aisai.aichi.jp","ama.aichi.jp","anjo.aichi.jp","asuke.aichi.jp","chiryu.aichi.jp","chita.aichi.jp","fuso.aichi.jp","gamagori.aichi.jp","handa.aichi.jp","hazu.aichi.jp","hekinan.aichi.jp","higashiura.aichi.jp","ichinomiya.aichi.jp","inazawa.aichi.jp","inuyama.aichi.jp","isshiki.aichi.jp","iwakura.aichi.jp","kanie.aichi.jp","kariya.aichi.jp","kasugai.aichi.jp","kira.aichi.jp","kiyosu.aichi.jp","komaki.aichi.jp","konan.aichi.jp","kota.aichi.jp","mihama.aichi.jp","miyoshi.aichi.jp","nishio.aichi.jp","nisshin.aichi.jp","obu.aichi.jp","oguchi.aichi.jp","oharu.aichi.jp","okazaki.aichi.jp","owariasahi.aichi.jp","seto.aichi.jp","shikatsu.aichi.jp","shinshiro.aichi.jp","shitara.aichi.jp","tahara.aichi.jp","takahama.aichi.jp","tobishima.aichi.jp","toei.aichi.jp","togo.aichi.jp","tokai.aichi.jp","tokoname.aichi.jp","toyoake.aichi.jp","toyohashi.aichi.jp","toyokawa.aichi.jp","toyone.aichi.jp","toyota.aichi.jp","tsushima.aichi.jp","yatomi.aichi.jp","akita.akita.jp","daisen.akita.jp","fujisato.akita.jp","gojome.akita.jp","hachirogata.akita.jp","happou.akita.jp","higashinaruse.akita.jp","honjo.akita.jp","honjyo.akita.jp","ikawa.akita.jp","kamikoani.akita.jp","kamioka.akita.jp","katagami.akita.jp","kazuno.akita.jp","kitaakita.akita.jp","kosaka.akita.jp","kyowa.akita.jp","misato.akita.jp","mitane.akita.jp","moriyoshi.akita.jp","nikaho.akita.jp","noshiro.akita.jp","odate.akita.jp","oga.akita.jp","ogata.akita.jp","semboku.akita.jp","yokote.akita.jp","yurihonjo.akita.jp","aomori.aomori.jp","gonohe.aomori.jp","hachinohe.aomori.jp","hashikami.aomori.jp","hiranai.aomori.jp","hirosaki.aomori.jp","itayanagi.aomori.jp","kuroishi.aomori.jp","misawa.aomori.jp","mutsu.aomori.jp","nakadomari.aomori.jp","noheji.aomori.jp","oirase.aomori.jp","owani.aomori.jp","rokunohe.aomori.jp","sannohe.aomori.jp","shichinohe.aomori.jp","shingo.aomori.jp","takko.aomori.jp","towada.aomori.jp","tsugaru.aomori.jp","tsuruta.aomori.jp","abiko.chiba.jp","asahi.chiba.jp","chonan.chiba.jp","chosei.chiba.jp","choshi.chiba.jp","chuo.chiba.jp","funabashi.chiba.jp","futtsu.chiba.jp","hanamigawa.chiba.jp","ichihara.chiba.jp","ichikawa.chiba.jp","ichinomiya.chiba.jp","inzai.chiba.jp","isumi.chiba.jp","kamagaya.chiba.jp","kamogawa.chiba.jp","kashiwa.chiba.jp","katori.chiba.jp","katsuura.chiba.jp","kimitsu.chiba.jp","kisarazu.chiba.jp","kozaki.chiba.jp","kujukuri.chiba.jp","kyonan.chiba.jp","matsudo.chiba.jp","midori.chiba.jp","mihama.chiba.jp","minamiboso.chiba.jp","mobara.chiba.jp","mutsuzawa.chiba.jp","nagara.chiba.jp","nagareyama.chiba.jp","narashino.chiba.jp","narita.chiba.jp","noda.chiba.jp","oamishirasato.chiba.jp","omigawa.chiba.jp","onjuku.chiba.jp","otaki.chiba.jp","sakae.chiba.jp","sakura.chiba.jp","shimofusa.chiba.jp","shirako.chiba.jp","shiroi.chiba.jp","shisui.chiba.jp","sodegaura.chiba.jp","sosa.chiba.jp","tako.chiba.jp","tateyama.chiba.jp","togane.chiba.jp","tohnosho.chiba.jp","tomisato.chiba.jp","urayasu.chiba.jp","yachimata.chiba.jp","yachiyo.chiba.jp","yokaichiba.chiba.jp","yokoshibahikari.chiba.jp","yotsukaido.chiba.jp","ainan.ehime.jp","honai.ehime.jp","ikata.ehime.jp","imabari.ehime.jp","iyo.ehime.jp","kamijima.ehime.jp","kihoku.ehime.jp","kumakogen.ehime.jp","masaki.ehime.jp","matsuno.ehime.jp","matsuyama.ehime.jp","namikata.ehime.jp","niihama.ehime.jp","ozu.ehime.jp","saijo.ehime.jp","seiyo.ehime.jp","shikokuchuo.ehime.jp","tobe.ehime.jp","toon.ehime.jp","uchiko.ehime.jp","uwajima.ehime.jp","yawatahama.ehime.jp","echizen.fukui.jp","eiheiji.fukui.jp","fukui.fukui.jp","ikeda.fukui.jp","katsuyama.fukui.jp","mihama.fukui.jp","minamiechizen.fukui.jp","obama.fukui.jp","ohi.fukui.jp","ono.fukui.jp","sabae.fukui.jp","sakai.fukui.jp","takahama.fukui.jp","tsuruga.fukui.jp","wakasa.fukui.jp","ashiya.fukuoka.jp","buzen.fukuoka.jp","chikugo.fukuoka.jp","chikuho.fukuoka.jp","chikujo.fukuoka.jp","chikushino.fukuoka.jp","chikuzen.fukuoka.jp","chuo.fukuoka.jp","dazaifu.fukuoka.jp","fukuchi.fukuoka.jp","hakata.fukuoka.jp","higashi.fukuoka.jp","hirokawa.fukuoka.jp","hisayama.fukuoka.jp","iizuka.fukuoka.jp","inatsuki.fukuoka.jp","kaho.fukuoka.jp","kasuga.fukuoka.jp","kasuya.fukuoka.jp","kawara.fukuoka.jp","keisen.fukuoka.jp","koga.fukuoka.jp","kurate.fukuoka.jp","kurogi.fukuoka.jp","kurume.fukuoka.jp","minami.fukuoka.jp","miyako.fukuoka.jp","miyama.fukuoka.jp","miyawaka.fukuoka.jp","mizumaki.fukuoka.jp","munakata.fukuoka.jp","nakagawa.fukuoka.jp","nakama.fukuoka.jp","nishi.fukuoka.jp","nogata.fukuoka.jp","ogori.fukuoka.jp","okagaki.fukuoka.jp","okawa.fukuoka.jp","oki.fukuoka.jp","omuta.fukuoka.jp","onga.fukuoka.jp","onojo.fukuoka.jp","oto.fukuoka.jp","saigawa.fukuoka.jp","sasaguri.fukuoka.jp","shingu.fukuoka.jp","shinyoshitomi.fukuoka.jp","shonai.fukuoka.jp","soeda.fukuoka.jp","sue.fukuoka.jp","tachiarai.fukuoka.jp","tagawa.fukuoka.jp","takata.fukuoka.jp","toho.fukuoka.jp","toyotsu.fukuoka.jp","tsuiki.fukuoka.jp","ukiha.fukuoka.jp","umi.fukuoka.jp","usui.fukuoka.jp","yamada.fukuoka.jp","yame.fukuoka.jp","yanagawa.fukuoka.jp","yukuhashi.fukuoka.jp","aizubange.fukushima.jp","aizumisato.fukushima.jp","aizuwakamatsu.fukushima.jp","asakawa.fukushima.jp","bandai.fukushima.jp","date.fukushima.jp","fukushima.fukushima.jp","furudono.fukushima.jp","futaba.fukushima.jp","hanawa.fukushima.jp","higashi.fukushima.jp","hirata.fukushima.jp","hirono.fukushima.jp","iitate.fukushima.jp","inawashiro.fukushima.jp","ishikawa.fukushima.jp","iwaki.fukushima.jp","izumizaki.fukushima.jp","kagamiishi.fukushima.jp","kaneyama.fukushima.jp","kawamata.fukushima.jp","kitakata.fukushima.jp","kitashiobara.fukushima.jp","koori.fukushima.jp","koriyama.fukushima.jp","kunimi.fukushima.jp","miharu.fukushima.jp","mishima.fukushima.jp","namie.fukushima.jp","nango.fukushima.jp","nishiaizu.fukushima.jp","nishigo.fukushima.jp","okuma.fukushima.jp","omotego.fukushima.jp","ono.fukushima.jp","otama.fukushima.jp","samegawa.fukushima.jp","shimogo.fukushima.jp","shirakawa.fukushima.jp","showa.fukushima.jp","soma.fukushima.jp","sukagawa.fukushima.jp","taishin.fukushima.jp","tamakawa.fukushima.jp","tanagura.fukushima.jp","tenei.fukushima.jp","yabuki.fukushima.jp","yamato.fukushima.jp","yamatsuri.fukushima.jp","yanaizu.fukushima.jp","yugawa.fukushima.jp","anpachi.gifu.jp","ena.gifu.jp","gifu.gifu.jp","ginan.gifu.jp","godo.gifu.jp","gujo.gifu.jp","hashima.gifu.jp","hichiso.gifu.jp","hida.gifu.jp","higashishirakawa.gifu.jp","ibigawa.gifu.jp","ikeda.gifu.jp","kakamigahara.gifu.jp","kani.gifu.jp","kasahara.gifu.jp","kasamatsu.gifu.jp","kawaue.gifu.jp","kitagata.gifu.jp","mino.gifu.jp","minokamo.gifu.jp","mitake.gifu.jp","mizunami.gifu.jp","motosu.gifu.jp","nakatsugawa.gifu.jp","ogaki.gifu.jp","sakahogi.gifu.jp","seki.gifu.jp","sekigahara.gifu.jp","shirakawa.gifu.jp","tajimi.gifu.jp","takayama.gifu.jp","tarui.gifu.jp","toki.gifu.jp","tomika.gifu.jp","wanouchi.gifu.jp","yamagata.gifu.jp","yaotsu.gifu.jp","yoro.gifu.jp","annaka.gunma.jp","chiyoda.gunma.jp","fujioka.gunma.jp","higashiagatsuma.gunma.jp","isesaki.gunma.jp","itakura.gunma.jp","kanna.gunma.jp","kanra.gunma.jp","katashina.gunma.jp","kawaba.gunma.jp","kiryu.gunma.jp","kusatsu.gunma.jp","maebashi.gunma.jp","meiwa.gunma.jp","midori.gunma.jp","minakami.gunma.jp","naganohara.gunma.jp","nakanojo.gunma.jp","nanmoku.gunma.jp","numata.gunma.jp","oizumi.gunma.jp","ora.gunma.jp","ota.gunma.jp","shibukawa.gunma.jp","shimonita.gunma.jp","shinto.gunma.jp","showa.gunma.jp","takasaki.gunma.jp","takayama.gunma.jp","tamamura.gunma.jp","tatebayashi.gunma.jp","tomioka.gunma.jp","tsukiyono.gunma.jp","tsumagoi.gunma.jp","ueno.gunma.jp","yoshioka.gunma.jp","asaminami.hiroshima.jp","daiwa.hiroshima.jp","etajima.hiroshima.jp","fuchu.hiroshima.jp","fukuyama.hiroshima.jp","hatsukaichi.hiroshima.jp","higashihiroshima.hiroshima.jp","hongo.hiroshima.jp","jinsekikogen.hiroshima.jp","kaita.hiroshima.jp","kui.hiroshima.jp","kumano.hiroshima.jp","kure.hiroshima.jp","mihara.hiroshima.jp","miyoshi.hiroshima.jp","naka.hiroshima.jp","onomichi.hiroshima.jp","osakikamijima.hiroshima.jp","otake.hiroshima.jp","saka.hiroshima.jp","sera.hiroshima.jp","seranishi.hiroshima.jp","shinichi.hiroshima.jp","shobara.hiroshima.jp","takehara.hiroshima.jp","abashiri.hokkaido.jp","abira.hokkaido.jp","aibetsu.hokkaido.jp","akabira.hokkaido.jp","akkeshi.hokkaido.jp","asahikawa.hokkaido.jp","ashibetsu.hokkaido.jp","ashoro.hokkaido.jp","assabu.hokkaido.jp","atsuma.hokkaido.jp","bibai.hokkaido.jp","biei.hokkaido.jp","bifuka.hokkaido.jp","bihoro.hokkaido.jp","biratori.hokkaido.jp","chippubetsu.hokkaido.jp","chitose.hokkaido.jp","date.hokkaido.jp","ebetsu.hokkaido.jp","embetsu.hokkaido.jp","eniwa.hokkaido.jp","erimo.hokkaido.jp","esan.hokkaido.jp","esashi.hokkaido.jp","fukagawa.hokkaido.jp","fukushima.hokkaido.jp","furano.hokkaido.jp","furubira.hokkaido.jp","haboro.hokkaido.jp","hakodate.hokkaido.jp","hamatonbetsu.hokkaido.jp","hidaka.hokkaido.jp","higashikagura.hokkaido.jp","higashikawa.hokkaido.jp","hiroo.hokkaido.jp","hokuryu.hokkaido.jp","hokuto.hokkaido.jp","honbetsu.hokkaido.jp","horokanai.hokkaido.jp","horonobe.hokkaido.jp","ikeda.hokkaido.jp","imakane.hokkaido.jp","ishikari.hokkaido.jp","iwamizawa.hokkaido.jp","iwanai.hokkaido.jp","kamifurano.hokkaido.jp","kamikawa.hokkaido.jp","kamishihoro.hokkaido.jp","kamisunagawa.hokkaido.jp","kamoenai.hokkaido.jp","kayabe.hokkaido.jp","kembuchi.hokkaido.jp","kikonai.hokkaido.jp","kimobetsu.hokkaido.jp","kitahiroshima.hokkaido.jp","kitami.hokkaido.jp","kiyosato.hokkaido.jp","koshimizu.hokkaido.jp","kunneppu.hokkaido.jp","kuriyama.hokkaido.jp","kuromatsunai.hokkaido.jp","kushiro.hokkaido.jp","kutchan.hokkaido.jp","kyowa.hokkaido.jp","mashike.hokkaido.jp","matsumae.hokkaido.jp","mikasa.hokkaido.jp","minamifurano.hokkaido.jp","mombetsu.hokkaido.jp","moseushi.hokkaido.jp","mukawa.hokkaido.jp","muroran.hokkaido.jp","naie.hokkaido.jp","nakagawa.hokkaido.jp","nakasatsunai.hokkaido.jp","nakatombetsu.hokkaido.jp","nanae.hokkaido.jp","nanporo.hokkaido.jp","nayoro.hokkaido.jp","nemuro.hokkaido.jp","niikappu.hokkaido.jp","niki.hokkaido.jp","nishiokoppe.hokkaido.jp","noboribetsu.hokkaido.jp","numata.hokkaido.jp","obihiro.hokkaido.jp","obira.hokkaido.jp","oketo.hokkaido.jp","okoppe.hokkaido.jp","otaru.hokkaido.jp","otobe.hokkaido.jp","otofuke.hokkaido.jp","otoineppu.hokkaido.jp","oumu.hokkaido.jp","ozora.hokkaido.jp","pippu.hokkaido.jp","rankoshi.hokkaido.jp","rebun.hokkaido.jp","rikubetsu.hokkaido.jp","rishiri.hokkaido.jp","rishirifuji.hokkaido.jp","saroma.hokkaido.jp","sarufutsu.hokkaido.jp","shakotan.hokkaido.jp","shari.hokkaido.jp","shibecha.hokkaido.jp","shibetsu.hokkaido.jp","shikabe.hokkaido.jp","shikaoi.hokkaido.jp","shimamaki.hokkaido.jp","shimizu.hokkaido.jp","shimokawa.hokkaido.jp","shinshinotsu.hokkaido.jp","shintoku.hokkaido.jp","shiranuka.hokkaido.jp","shiraoi.hokkaido.jp","shiriuchi.hokkaido.jp","sobetsu.hokkaido.jp","sunagawa.hokkaido.jp","taiki.hokkaido.jp","takasu.hokkaido.jp","takikawa.hokkaido.jp","takinoue.hokkaido.jp","teshikaga.hokkaido.jp","tobetsu.hokkaido.jp","tohma.hokkaido.jp","tomakomai.hokkaido.jp","tomari.hokkaido.jp","toya.hokkaido.jp","toyako.hokkaido.jp","toyotomi.hokkaido.jp","toyoura.hokkaido.jp","tsubetsu.hokkaido.jp","tsukigata.hokkaido.jp","urakawa.hokkaido.jp","urausu.hokkaido.jp","uryu.hokkaido.jp","utashinai.hokkaido.jp","wakkanai.hokkaido.jp","wassamu.hokkaido.jp","yakumo.hokkaido.jp","yoichi.hokkaido.jp","aioi.hyogo.jp","akashi.hyogo.jp","ako.hyogo.jp","amagasaki.hyogo.jp","aogaki.hyogo.jp","asago.hyogo.jp","ashiya.hyogo.jp","awaji.hyogo.jp","fukusaki.hyogo.jp","goshiki.hyogo.jp","harima.hyogo.jp","himeji.hyogo.jp","ichikawa.hyogo.jp","inagawa.hyogo.jp","itami.hyogo.jp","kakogawa.hyogo.jp","kamigori.hyogo.jp","kamikawa.hyogo.jp","kasai.hyogo.jp","kasuga.hyogo.jp","kawanishi.hyogo.jp","miki.hyogo.jp","minamiawaji.hyogo.jp","nishinomiya.hyogo.jp","nishiwaki.hyogo.jp","ono.hyogo.jp","sanda.hyogo.jp","sannan.hyogo.jp","sasayama.hyogo.jp","sayo.hyogo.jp","shingu.hyogo.jp","shinonsen.hyogo.jp","shiso.hyogo.jp","sumoto.hyogo.jp","taishi.hyogo.jp","taka.hyogo.jp","takarazuka.hyogo.jp","takasago.hyogo.jp","takino.hyogo.jp","tamba.hyogo.jp","tatsuno.hyogo.jp","toyooka.hyogo.jp","yabu.hyogo.jp","yashiro.hyogo.jp","yoka.hyogo.jp","yokawa.hyogo.jp","ami.ibaraki.jp","asahi.ibaraki.jp","bando.ibaraki.jp","chikusei.ibaraki.jp","daigo.ibaraki.jp","fujishiro.ibaraki.jp","hitachi.ibaraki.jp","hitachinaka.ibaraki.jp","hitachiomiya.ibaraki.jp","hitachiota.ibaraki.jp","ibaraki.ibaraki.jp","ina.ibaraki.jp","inashiki.ibaraki.jp","itako.ibaraki.jp","iwama.ibaraki.jp","joso.ibaraki.jp","kamisu.ibaraki.jp","kasama.ibaraki.jp","kashima.ibaraki.jp","kasumigaura.ibaraki.jp","koga.ibaraki.jp","miho.ibaraki.jp","mito.ibaraki.jp","moriya.ibaraki.jp","naka.ibaraki.jp","namegata.ibaraki.jp","oarai.ibaraki.jp","ogawa.ibaraki.jp","omitama.ibaraki.jp","ryugasaki.ibaraki.jp","sakai.ibaraki.jp","sakuragawa.ibaraki.jp","shimodate.ibaraki.jp","shimotsuma.ibaraki.jp","shirosato.ibaraki.jp","sowa.ibaraki.jp","suifu.ibaraki.jp","takahagi.ibaraki.jp","tamatsukuri.ibaraki.jp","tokai.ibaraki.jp","tomobe.ibaraki.jp","tone.ibaraki.jp","toride.ibaraki.jp","tsuchiura.ibaraki.jp","tsukuba.ibaraki.jp","uchihara.ibaraki.jp","ushiku.ibaraki.jp","yachiyo.ibaraki.jp","yamagata.ibaraki.jp","yawara.ibaraki.jp","yuki.ibaraki.jp","anamizu.ishikawa.jp","hakui.ishikawa.jp","hakusan.ishikawa.jp","kaga.ishikawa.jp","kahoku.ishikawa.jp","kanazawa.ishikawa.jp","kawakita.ishikawa.jp","komatsu.ishikawa.jp","nakanoto.ishikawa.jp","nanao.ishikawa.jp","nomi.ishikawa.jp","nonoichi.ishikawa.jp","noto.ishikawa.jp","shika.ishikawa.jp","suzu.ishikawa.jp","tsubata.ishikawa.jp","tsurugi.ishikawa.jp","uchinada.ishikawa.jp","wajima.ishikawa.jp","fudai.iwate.jp","fujisawa.iwate.jp","hanamaki.iwate.jp","hiraizumi.iwate.jp","hirono.iwate.jp","ichinohe.iwate.jp","ichinoseki.iwate.jp","iwaizumi.iwate.jp","iwate.iwate.jp","joboji.iwate.jp","kamaishi.iwate.jp","kanegasaki.iwate.jp","karumai.iwate.jp","kawai.iwate.jp","kitakami.iwate.jp","kuji.iwate.jp","kunohe.iwate.jp","kuzumaki.iwate.jp","miyako.iwate.jp","mizusawa.iwate.jp","morioka.iwate.jp","ninohe.iwate.jp","noda.iwate.jp","ofunato.iwate.jp","oshu.iwate.jp","otsuchi.iwate.jp","rikuzentakata.iwate.jp","shiwa.iwate.jp","shizukuishi.iwate.jp","sumita.iwate.jp","tanohata.iwate.jp","tono.iwate.jp","yahaba.iwate.jp","yamada.iwate.jp","ayagawa.kagawa.jp","higashikagawa.kagawa.jp","kanonji.kagawa.jp","kotohira.kagawa.jp","manno.kagawa.jp","marugame.kagawa.jp","mitoyo.kagawa.jp","naoshima.kagawa.jp","sanuki.kagawa.jp","tadotsu.kagawa.jp","takamatsu.kagawa.jp","tonosho.kagawa.jp","uchinomi.kagawa.jp","utazu.kagawa.jp","zentsuji.kagawa.jp","akune.kagoshima.jp","amami.kagoshima.jp","hioki.kagoshima.jp","isa.kagoshima.jp","isen.kagoshima.jp","izumi.kagoshima.jp","kagoshima.kagoshima.jp","kanoya.kagoshima.jp","kawanabe.kagoshima.jp","kinko.kagoshima.jp","kouyama.kagoshima.jp","makurazaki.kagoshima.jp","matsumoto.kagoshima.jp","minamitane.kagoshima.jp","nakatane.kagoshima.jp","nishinoomote.kagoshima.jp","satsumasendai.kagoshima.jp","soo.kagoshima.jp","tarumizu.kagoshima.jp","yusui.kagoshima.jp","aikawa.kanagawa.jp","atsugi.kanagawa.jp","ayase.kanagawa.jp","chigasaki.kanagawa.jp","ebina.kanagawa.jp","fujisawa.kanagawa.jp","hadano.kanagawa.jp","hakone.kanagawa.jp","hiratsuka.kanagawa.jp","isehara.kanagawa.jp","kaisei.kanagawa.jp","kamakura.kanagawa.jp","kiyokawa.kanagawa.jp","matsuda.kanagawa.jp","minamiashigara.kanagawa.jp","miura.kanagawa.jp","nakai.kanagawa.jp","ninomiya.kanagawa.jp","odawara.kanagawa.jp","oi.kanagawa.jp","oiso.kanagawa.jp","sagamihara.kanagawa.jp","samukawa.kanagawa.jp","tsukui.kanagawa.jp","yamakita.kanagawa.jp","yamato.kanagawa.jp","yokosuka.kanagawa.jp","yugawara.kanagawa.jp","zama.kanagawa.jp","zushi.kanagawa.jp","aki.kochi.jp","geisei.kochi.jp","hidaka.kochi.jp","higashitsuno.kochi.jp","ino.kochi.jp","kagami.kochi.jp","kami.kochi.jp","kitagawa.kochi.jp","kochi.kochi.jp","mihara.kochi.jp","motoyama.kochi.jp","muroto.kochi.jp","nahari.kochi.jp","nakamura.kochi.jp","nankoku.kochi.jp","nishitosa.kochi.jp","niyodogawa.kochi.jp","ochi.kochi.jp","okawa.kochi.jp","otoyo.kochi.jp","otsuki.kochi.jp","sakawa.kochi.jp","sukumo.kochi.jp","susaki.kochi.jp","tosa.kochi.jp","tosashimizu.kochi.jp","toyo.kochi.jp","tsuno.kochi.jp","umaji.kochi.jp","yasuda.kochi.jp","yusuhara.kochi.jp","amakusa.kumamoto.jp","arao.kumamoto.jp","aso.kumamoto.jp","choyo.kumamoto.jp","gyokuto.kumamoto.jp","kamiamakusa.kumamoto.jp","kikuchi.kumamoto.jp","kumamoto.kumamoto.jp","mashiki.kumamoto.jp","mifune.kumamoto.jp","minamata.kumamoto.jp","minamioguni.kumamoto.jp","nagasu.kumamoto.jp","nishihara.kumamoto.jp","oguni.kumamoto.jp","ozu.kumamoto.jp","sumoto.kumamoto.jp","takamori.kumamoto.jp","uki.kumamoto.jp","uto.kumamoto.jp","yamaga.kumamoto.jp","yamato.kumamoto.jp","yatsushiro.kumamoto.jp","ayabe.kyoto.jp","fukuchiyama.kyoto.jp","higashiyama.kyoto.jp","ide.kyoto.jp","ine.kyoto.jp","joyo.kyoto.jp","kameoka.kyoto.jp","kamo.kyoto.jp","kita.kyoto.jp","kizu.kyoto.jp","kumiyama.kyoto.jp","kyotamba.kyoto.jp","kyotanabe.kyoto.jp","kyotango.kyoto.jp","maizuru.kyoto.jp","minami.kyoto.jp","minamiyamashiro.kyoto.jp","miyazu.kyoto.jp","muko.kyoto.jp","nagaokakyo.kyoto.jp","nakagyo.kyoto.jp","nantan.kyoto.jp","oyamazaki.kyoto.jp","sakyo.kyoto.jp","seika.kyoto.jp","tanabe.kyoto.jp","uji.kyoto.jp","ujitawara.kyoto.jp","wazuka.kyoto.jp","yamashina.kyoto.jp","yawata.kyoto.jp","asahi.mie.jp","inabe.mie.jp","ise.mie.jp","kameyama.mie.jp","kawagoe.mie.jp","kiho.mie.jp","kisosaki.mie.jp","kiwa.mie.jp","komono.mie.jp","kumano.mie.jp","kuwana.mie.jp","matsusaka.mie.jp","meiwa.mie.jp","mihama.mie.jp","minamiise.mie.jp","misugi.mie.jp","miyama.mie.jp","nabari.mie.jp","shima.mie.jp","suzuka.mie.jp","tado.mie.jp","taiki.mie.jp","taki.mie.jp","tamaki.mie.jp","toba.mie.jp","tsu.mie.jp","udono.mie.jp","ureshino.mie.jp","watarai.mie.jp","yokkaichi.mie.jp","furukawa.miyagi.jp","higashimatsushima.miyagi.jp","ishinomaki.miyagi.jp","iwanuma.miyagi.jp","kakuda.miyagi.jp","kami.miyagi.jp","kawasaki.miyagi.jp","marumori.miyagi.jp","matsushima.miyagi.jp","minamisanriku.miyagi.jp","misato.miyagi.jp","murata.miyagi.jp","natori.miyagi.jp","ogawara.miyagi.jp","ohira.miyagi.jp","onagawa.miyagi.jp","osaki.miyagi.jp","rifu.miyagi.jp","semine.miyagi.jp","shibata.miyagi.jp","shichikashuku.miyagi.jp","shikama.miyagi.jp","shiogama.miyagi.jp","shiroishi.miyagi.jp","tagajo.miyagi.jp","taiwa.miyagi.jp","tome.miyagi.jp","tomiya.miyagi.jp","wakuya.miyagi.jp","watari.miyagi.jp","yamamoto.miyagi.jp","zao.miyagi.jp","aya.miyazaki.jp","ebino.miyazaki.jp","gokase.miyazaki.jp","hyuga.miyazaki.jp","kadogawa.miyazaki.jp","kawaminami.miyazaki.jp","kijo.miyazaki.jp","kitagawa.miyazaki.jp","kitakata.miyazaki.jp","kitaura.miyazaki.jp","kobayashi.miyazaki.jp","kunitomi.miyazaki.jp","kushima.miyazaki.jp","mimata.miyazaki.jp","miyakonojo.miyazaki.jp","miyazaki.miyazaki.jp","morotsuka.miyazaki.jp","nichinan.miyazaki.jp","nishimera.miyazaki.jp","nobeoka.miyazaki.jp","saito.miyazaki.jp","shiiba.miyazaki.jp","shintomi.miyazaki.jp","takaharu.miyazaki.jp","takanabe.miyazaki.jp","takazaki.miyazaki.jp","tsuno.miyazaki.jp","achi.nagano.jp","agematsu.nagano.jp","anan.nagano.jp","aoki.nagano.jp","asahi.nagano.jp","azumino.nagano.jp","chikuhoku.nagano.jp","chikuma.nagano.jp","chino.nagano.jp","fujimi.nagano.jp","hakuba.nagano.jp","hara.nagano.jp","hiraya.nagano.jp","iida.nagano.jp","iijima.nagano.jp","iiyama.nagano.jp","iizuna.nagano.jp","ikeda.nagano.jp","ikusaka.nagano.jp","ina.nagano.jp","karuizawa.nagano.jp","kawakami.nagano.jp","kiso.nagano.jp","kisofukushima.nagano.jp","kitaaiki.nagano.jp","komagane.nagano.jp","komoro.nagano.jp","matsukawa.nagano.jp","matsumoto.nagano.jp","miasa.nagano.jp","minamiaiki.nagano.jp","minamimaki.nagano.jp","minamiminowa.nagano.jp","minowa.nagano.jp","miyada.nagano.jp","miyota.nagano.jp","mochizuki.nagano.jp","nagano.nagano.jp","nagawa.nagano.jp","nagiso.nagano.jp","nakagawa.nagano.jp","nakano.nagano.jp","nozawaonsen.nagano.jp","obuse.nagano.jp","ogawa.nagano.jp","okaya.nagano.jp","omachi.nagano.jp","omi.nagano.jp","ookuwa.nagano.jp","ooshika.nagano.jp","otaki.nagano.jp","otari.nagano.jp","sakae.nagano.jp","sakaki.nagano.jp","saku.nagano.jp","sakuho.nagano.jp","shimosuwa.nagano.jp","shinanomachi.nagano.jp","shiojiri.nagano.jp","suwa.nagano.jp","suzaka.nagano.jp","takagi.nagano.jp","takamori.nagano.jp","takayama.nagano.jp","tateshina.nagano.jp","tatsuno.nagano.jp","togakushi.nagano.jp","togura.nagano.jp","tomi.nagano.jp","ueda.nagano.jp","wada.nagano.jp","yamagata.nagano.jp","yamanouchi.nagano.jp","yasaka.nagano.jp","yasuoka.nagano.jp","chijiwa.nagasaki.jp","futsu.nagasaki.jp","goto.nagasaki.jp","hasami.nagasaki.jp","hirado.nagasaki.jp","iki.nagasaki.jp","isahaya.nagasaki.jp","kawatana.nagasaki.jp","kuchinotsu.nagasaki.jp","matsuura.nagasaki.jp","nagasaki.nagasaki.jp","obama.nagasaki.jp","omura.nagasaki.jp","oseto.nagasaki.jp","saikai.nagasaki.jp","sasebo.nagasaki.jp","seihi.nagasaki.jp","shimabara.nagasaki.jp","shinkamigoto.nagasaki.jp","togitsu.nagasaki.jp","tsushima.nagasaki.jp","unzen.nagasaki.jp","ando.nara.jp","gose.nara.jp","heguri.nara.jp","higashiyoshino.nara.jp","ikaruga.nara.jp","ikoma.nara.jp","kamikitayama.nara.jp","kanmaki.nara.jp","kashiba.nara.jp","kashihara.nara.jp","katsuragi.nara.jp","kawai.nara.jp","kawakami.nara.jp","kawanishi.nara.jp","koryo.nara.jp","kurotaki.nara.jp","mitsue.nara.jp","miyake.nara.jp","nara.nara.jp","nosegawa.nara.jp","oji.nara.jp","ouda.nara.jp","oyodo.nara.jp","sakurai.nara.jp","sango.nara.jp","shimoichi.nara.jp","shimokitayama.nara.jp","shinjo.nara.jp","soni.nara.jp","takatori.nara.jp","tawaramoto.nara.jp","tenkawa.nara.jp","tenri.nara.jp","uda.nara.jp","yamatokoriyama.nara.jp","yamatotakada.nara.jp","yamazoe.nara.jp","yoshino.nara.jp","aga.niigata.jp","agano.niigata.jp","gosen.niigata.jp","itoigawa.niigata.jp","izumozaki.niigata.jp","joetsu.niigata.jp","kamo.niigata.jp","kariwa.niigata.jp","kashiwazaki.niigata.jp","minamiuonuma.niigata.jp","mitsuke.niigata.jp","muika.niigata.jp","murakami.niigata.jp","myoko.niigata.jp","nagaoka.niigata.jp","niigata.niigata.jp","ojiya.niigata.jp","omi.niigata.jp","sado.niigata.jp","sanjo.niigata.jp","seiro.niigata.jp","seirou.niigata.jp","sekikawa.niigata.jp","shibata.niigata.jp","tagami.niigata.jp","tainai.niigata.jp","tochio.niigata.jp","tokamachi.niigata.jp","tsubame.niigata.jp","tsunan.niigata.jp","uonuma.niigata.jp","yahiko.niigata.jp","yoita.niigata.jp","yuzawa.niigata.jp","beppu.oita.jp","bungoono.oita.jp","bungotakada.oita.jp","hasama.oita.jp","hiji.oita.jp","himeshima.oita.jp","hita.oita.jp","kamitsue.oita.jp","kokonoe.oita.jp","kuju.oita.jp","kunisaki.oita.jp","kusu.oita.jp","oita.oita.jp","saiki.oita.jp","taketa.oita.jp","tsukumi.oita.jp","usa.oita.jp","usuki.oita.jp","yufu.oita.jp","akaiwa.okayama.jp","asakuchi.okayama.jp","bizen.okayama.jp","hayashima.okayama.jp","ibara.okayama.jp","kagamino.okayama.jp","kasaoka.okayama.jp","kibichuo.okayama.jp","kumenan.okayama.jp","kurashiki.okayama.jp","maniwa.okayama.jp","misaki.okayama.jp","nagi.okayama.jp","niimi.okayama.jp","nishiawakura.okayama.jp","okayama.okayama.jp","satosho.okayama.jp","setouchi.okayama.jp","shinjo.okayama.jp","shoo.okayama.jp","soja.okayama.jp","takahashi.okayama.jp","tamano.okayama.jp","tsuyama.okayama.jp","wake.okayama.jp","yakage.okayama.jp","aguni.okinawa.jp","ginowan.okinawa.jp","ginoza.okinawa.jp","gushikami.okinawa.jp","haebaru.okinawa.jp","higashi.okinawa.jp","hirara.okinawa.jp","iheya.okinawa.jp","ishigaki.okinawa.jp","ishikawa.okinawa.jp","itoman.okinawa.jp","izena.okinawa.jp","kadena.okinawa.jp","kin.okinawa.jp","kitadaito.okinawa.jp","kitanakagusuku.okinawa.jp","kumejima.okinawa.jp","kunigami.okinawa.jp","minamidaito.okinawa.jp","motobu.okinawa.jp","nago.okinawa.jp","naha.okinawa.jp","nakagusuku.okinawa.jp","nakijin.okinawa.jp","nanjo.okinawa.jp","nishihara.okinawa.jp","ogimi.okinawa.jp","okinawa.okinawa.jp","onna.okinawa.jp","shimoji.okinawa.jp","taketomi.okinawa.jp","tarama.okinawa.jp","tokashiki.okinawa.jp","tomigusuku.okinawa.jp","tonaki.okinawa.jp","urasoe.okinawa.jp","uruma.okinawa.jp","yaese.okinawa.jp","yomitan.okinawa.jp","yonabaru.okinawa.jp","yonaguni.okinawa.jp","zamami.okinawa.jp","abeno.osaka.jp","chihayaakasaka.osaka.jp","chuo.osaka.jp","daito.osaka.jp","fujiidera.osaka.jp","habikino.osaka.jp","hannan.osaka.jp","higashiosaka.osaka.jp","higashisumiyoshi.osaka.jp","higashiyodogawa.osaka.jp","hirakata.osaka.jp","ibaraki.osaka.jp","ikeda.osaka.jp","izumi.osaka.jp","izumiotsu.osaka.jp","izumisano.osaka.jp","kadoma.osaka.jp","kaizuka.osaka.jp","kanan.osaka.jp","kashiwara.osaka.jp","katano.osaka.jp","kawachinagano.osaka.jp","kishiwada.osaka.jp","kita.osaka.jp","kumatori.osaka.jp","matsubara.osaka.jp","minato.osaka.jp","minoh.osaka.jp","misaki.osaka.jp","moriguchi.osaka.jp","neyagawa.osaka.jp","nishi.osaka.jp","nose.osaka.jp","osakasayama.osaka.jp","sakai.osaka.jp","sayama.osaka.jp","sennan.osaka.jp","settsu.osaka.jp","shijonawate.osaka.jp","shimamoto.osaka.jp","suita.osaka.jp","tadaoka.osaka.jp","taishi.osaka.jp","tajiri.osaka.jp","takaishi.osaka.jp","takatsuki.osaka.jp","tondabayashi.osaka.jp","toyonaka.osaka.jp","toyono.osaka.jp","yao.osaka.jp","ariake.saga.jp","arita.saga.jp","fukudomi.saga.jp","genkai.saga.jp","hamatama.saga.jp","hizen.saga.jp","imari.saga.jp","kamimine.saga.jp","kanzaki.saga.jp","karatsu.saga.jp","kashima.saga.jp","kitagata.saga.jp","kitahata.saga.jp","kiyama.saga.jp","kouhoku.saga.jp","kyuragi.saga.jp","nishiarita.saga.jp","ogi.saga.jp","omachi.saga.jp","ouchi.saga.jp","saga.saga.jp","shiroishi.saga.jp","taku.saga.jp","tara.saga.jp","tosu.saga.jp","yoshinogari.saga.jp","arakawa.saitama.jp","asaka.saitama.jp","chichibu.saitama.jp","fujimi.saitama.jp","fujimino.saitama.jp","fukaya.saitama.jp","hanno.saitama.jp","hanyu.saitama.jp","hasuda.saitama.jp","hatogaya.saitama.jp","hatoyama.saitama.jp","hidaka.saitama.jp","higashichichibu.saitama.jp","higashimatsuyama.saitama.jp","honjo.saitama.jp","ina.saitama.jp","iruma.saitama.jp","iwatsuki.saitama.jp","kamiizumi.saitama.jp","kamikawa.saitama.jp","kamisato.saitama.jp","kasukabe.saitama.jp","kawagoe.saitama.jp","kawaguchi.saitama.jp","kawajima.saitama.jp","kazo.saitama.jp","kitamoto.saitama.jp","koshigaya.saitama.jp","kounosu.saitama.jp","kuki.saitama.jp","kumagaya.saitama.jp","matsubushi.saitama.jp","minano.saitama.jp","misato.saitama.jp","miyashiro.saitama.jp","miyoshi.saitama.jp","moroyama.saitama.jp","nagatoro.saitama.jp","namegawa.saitama.jp","niiza.saitama.jp","ogano.saitama.jp","ogawa.saitama.jp","ogose.saitama.jp","okegawa.saitama.jp","omiya.saitama.jp","otaki.saitama.jp","ranzan.saitama.jp","ryokami.saitama.jp","saitama.saitama.jp","sakado.saitama.jp","satte.saitama.jp","sayama.saitama.jp","shiki.saitama.jp","shiraoka.saitama.jp","soka.saitama.jp","sugito.saitama.jp","toda.saitama.jp","tokigawa.saitama.jp","tokorozawa.saitama.jp","tsurugashima.saitama.jp","urawa.saitama.jp","warabi.saitama.jp","yashio.saitama.jp","yokoze.saitama.jp","yono.saitama.jp","yorii.saitama.jp","yoshida.saitama.jp","yoshikawa.saitama.jp","yoshimi.saitama.jp","aisho.shiga.jp","gamo.shiga.jp","higashiomi.shiga.jp","hikone.shiga.jp","koka.shiga.jp","konan.shiga.jp","kosei.shiga.jp","koto.shiga.jp","kusatsu.shiga.jp","maibara.shiga.jp","moriyama.shiga.jp","nagahama.shiga.jp","nishiazai.shiga.jp","notogawa.shiga.jp","omihachiman.shiga.jp","otsu.shiga.jp","ritto.shiga.jp","ryuoh.shiga.jp","takashima.shiga.jp","takatsuki.shiga.jp","torahime.shiga.jp","toyosato.shiga.jp","yasu.shiga.jp","akagi.shimane.jp","ama.shimane.jp","gotsu.shimane.jp","hamada.shimane.jp","higashiizumo.shimane.jp","hikawa.shimane.jp","hikimi.shimane.jp","izumo.shimane.jp","kakinoki.shimane.jp","masuda.shimane.jp","matsue.shimane.jp","misato.shimane.jp","nishinoshima.shimane.jp","ohda.shimane.jp","okinoshima.shimane.jp","okuizumo.shimane.jp","shimane.shimane.jp","tamayu.shimane.jp","tsuwano.shimane.jp","unnan.shimane.jp","yakumo.shimane.jp","yasugi.shimane.jp","yatsuka.shimane.jp","arai.shizuoka.jp","atami.shizuoka.jp","fuji.shizuoka.jp","fujieda.shizuoka.jp","fujikawa.shizuoka.jp","fujinomiya.shizuoka.jp","fukuroi.shizuoka.jp","gotemba.shizuoka.jp","haibara.shizuoka.jp","hamamatsu.shizuoka.jp","higashiizu.shizuoka.jp","ito.shizuoka.jp","iwata.shizuoka.jp","izu.shizuoka.jp","izunokuni.shizuoka.jp","kakegawa.shizuoka.jp","kannami.shizuoka.jp","kawanehon.shizuoka.jp","kawazu.shizuoka.jp","kikugawa.shizuoka.jp","kosai.shizuoka.jp","makinohara.shizuoka.jp","matsuzaki.shizuoka.jp","minamiizu.shizuoka.jp","mishima.shizuoka.jp","morimachi.shizuoka.jp","nishiizu.shizuoka.jp","numazu.shizuoka.jp","omaezaki.shizuoka.jp","shimada.shizuoka.jp","shimizu.shizuoka.jp","shimoda.shizuoka.jp","shizuoka.shizuoka.jp","susono.shizuoka.jp","yaizu.shizuoka.jp","yoshida.shizuoka.jp","ashikaga.tochigi.jp","bato.tochigi.jp","haga.tochigi.jp","ichikai.tochigi.jp","iwafune.tochigi.jp","kaminokawa.tochigi.jp","kanuma.tochigi.jp","karasuyama.tochigi.jp","kuroiso.tochigi.jp","mashiko.tochigi.jp","mibu.tochigi.jp","moka.tochigi.jp","motegi.tochigi.jp","nasu.tochigi.jp","nasushiobara.tochigi.jp","nikko.tochigi.jp","nishikata.tochigi.jp","nogi.tochigi.jp","ohira.tochigi.jp","ohtawara.tochigi.jp","oyama.tochigi.jp","sakura.tochigi.jp","sano.tochigi.jp","shimotsuke.tochigi.jp","shioya.tochigi.jp","takanezawa.tochigi.jp","tochigi.tochigi.jp","tsuga.tochigi.jp","ujiie.tochigi.jp","utsunomiya.tochigi.jp","yaita.tochigi.jp","aizumi.tokushima.jp","anan.tokushima.jp","ichiba.tokushima.jp","itano.tokushima.jp","kainan.tokushima.jp","komatsushima.tokushima.jp","matsushige.tokushima.jp","mima.tokushima.jp","minami.tokushima.jp","miyoshi.tokushima.jp","mugi.tokushima.jp","nakagawa.tokushima.jp","naruto.tokushima.jp","sanagochi.tokushima.jp","shishikui.tokushima.jp","tokushima.tokushima.jp","wajiki.tokushima.jp","adachi.tokyo.jp","akiruno.tokyo.jp","akishima.tokyo.jp","aogashima.tokyo.jp","arakawa.tokyo.jp","bunkyo.tokyo.jp","chiyoda.tokyo.jp","chofu.tokyo.jp","chuo.tokyo.jp","edogawa.tokyo.jp","fuchu.tokyo.jp","fussa.tokyo.jp","hachijo.tokyo.jp","hachioji.tokyo.jp","hamura.tokyo.jp","higashikurume.tokyo.jp","higashimurayama.tokyo.jp","higashiyamato.tokyo.jp","hino.tokyo.jp","hinode.tokyo.jp","hinohara.tokyo.jp","inagi.tokyo.jp","itabashi.tokyo.jp","katsushika.tokyo.jp","kita.tokyo.jp","kiyose.tokyo.jp","kodaira.tokyo.jp","koganei.tokyo.jp","kokubunji.tokyo.jp","komae.tokyo.jp","koto.tokyo.jp","kouzushima.tokyo.jp","kunitachi.tokyo.jp","machida.tokyo.jp","meguro.tokyo.jp","minato.tokyo.jp","mitaka.tokyo.jp","mizuho.tokyo.jp","musashimurayama.tokyo.jp","musashino.tokyo.jp","nakano.tokyo.jp","nerima.tokyo.jp","ogasawara.tokyo.jp","okutama.tokyo.jp","ome.tokyo.jp","oshima.tokyo.jp","ota.tokyo.jp","setagaya.tokyo.jp","shibuya.tokyo.jp","shinagawa.tokyo.jp","shinjuku.tokyo.jp","suginami.tokyo.jp","sumida.tokyo.jp","tachikawa.tokyo.jp","taito.tokyo.jp","tama.tokyo.jp","toshima.tokyo.jp","chizu.tottori.jp","hino.tottori.jp","kawahara.tottori.jp","koge.tottori.jp","kotoura.tottori.jp","misasa.tottori.jp","nanbu.tottori.jp","nichinan.tottori.jp","sakaiminato.tottori.jp","tottori.tottori.jp","wakasa.tottori.jp","yazu.tottori.jp","yonago.tottori.jp","asahi.toyama.jp","fuchu.toyama.jp","fukumitsu.toyama.jp","funahashi.toyama.jp","himi.toyama.jp","imizu.toyama.jp","inami.toyama.jp","johana.toyama.jp","kamiichi.toyama.jp","kurobe.toyama.jp","nakaniikawa.toyama.jp","namerikawa.toyama.jp","nanto.toyama.jp","nyuzen.toyama.jp","oyabe.toyama.jp","taira.toyama.jp","takaoka.toyama.jp","tateyama.toyama.jp","toga.toyama.jp","tonami.toyama.jp","toyama.toyama.jp","unazuki.toyama.jp","uozu.toyama.jp","yamada.toyama.jp","arida.wakayama.jp","aridagawa.wakayama.jp","gobo.wakayama.jp","hashimoto.wakayama.jp","hidaka.wakayama.jp","hirogawa.wakayama.jp","inami.wakayama.jp","iwade.wakayama.jp","kainan.wakayama.jp","kamitonda.wakayama.jp","katsuragi.wakayama.jp","kimino.wakayama.jp","kinokawa.wakayama.jp","kitayama.wakayama.jp","koya.wakayama.jp","koza.wakayama.jp","kozagawa.wakayama.jp","kudoyama.wakayama.jp","kushimoto.wakayama.jp","mihama.wakayama.jp","misato.wakayama.jp","nachikatsuura.wakayama.jp","shingu.wakayama.jp","shirahama.wakayama.jp","taiji.wakayama.jp","tanabe.wakayama.jp","wakayama.wakayama.jp","yuasa.wakayama.jp","yura.wakayama.jp","asahi.yamagata.jp","funagata.yamagata.jp","higashine.yamagata.jp","iide.yamagata.jp","kahoku.yamagata.jp","kaminoyama.yamagata.jp","kaneyama.yamagata.jp","kawanishi.yamagata.jp","mamurogawa.yamagata.jp","mikawa.yamagata.jp","murayama.yamagata.jp","nagai.yamagata.jp","nakayama.yamagata.jp","nanyo.yamagata.jp","nishikawa.yamagata.jp","obanazawa.yamagata.jp","oe.yamagata.jp","oguni.yamagata.jp","ohkura.yamagata.jp","oishida.yamagata.jp","sagae.yamagata.jp","sakata.yamagata.jp","sakegawa.yamagata.jp","shinjo.yamagata.jp","shirataka.yamagata.jp","shonai.yamagata.jp","takahata.yamagata.jp","tendo.yamagata.jp","tozawa.yamagata.jp","tsuruoka.yamagata.jp","yamagata.yamagata.jp","yamanobe.yamagata.jp","yonezawa.yamagata.jp","yuza.yamagata.jp","abu.yamaguchi.jp","hagi.yamaguchi.jp","hikari.yamaguchi.jp","hofu.yamaguchi.jp","iwakuni.yamaguchi.jp","kudamatsu.yamaguchi.jp","mitou.yamaguchi.jp","nagato.yamaguchi.jp","oshima.yamaguchi.jp","shimonoseki.yamaguchi.jp","shunan.yamaguchi.jp","tabuse.yamaguchi.jp","tokuyama.yamaguchi.jp","toyota.yamaguchi.jp","ube.yamaguchi.jp","yuu.yamaguchi.jp","chuo.yamanashi.jp","doshi.yamanashi.jp","fuefuki.yamanashi.jp","fujikawa.yamanashi.jp","fujikawaguchiko.yamanashi.jp","fujiyoshida.yamanashi.jp","hayakawa.yamanashi.jp","hokuto.yamanashi.jp","ichikawamisato.yamanashi.jp","kai.yamanashi.jp","kofu.yamanashi.jp","koshu.yamanashi.jp","kosuge.yamanashi.jp","minami-alps.yamanashi.jp","minobu.yamanashi.jp","nakamichi.yamanashi.jp","nanbu.yamanashi.jp","narusawa.yamanashi.jp","nirasaki.yamanashi.jp","nishikatsura.yamanashi.jp","oshino.yamanashi.jp","otsuki.yamanashi.jp","showa.yamanashi.jp","tabayama.yamanashi.jp","tsuru.yamanashi.jp","uenohara.yamanashi.jp","yamanakako.yamanashi.jp","yamanashi.yamanashi.jp","ke","ac.ke","co.ke","go.ke","info.ke","me.ke","mobi.ke","ne.ke","or.ke","sc.ke","kg","org.kg","net.kg","com.kg","edu.kg","gov.kg","mil.kg","*.kh","ki","edu.ki","biz.ki","net.ki","org.ki","gov.ki","info.ki","com.ki","km","org.km","nom.km","gov.km","prd.km","tm.km","edu.km","mil.km","ass.km","com.km","coop.km","asso.km","presse.km","medecin.km","notaires.km","pharmaciens.km","veterinaire.km","gouv.km","kn","net.kn","org.kn","edu.kn","gov.kn","kp","com.kp","edu.kp","gov.kp","org.kp","rep.kp","tra.kp","kr","ac.kr","co.kr","es.kr","go.kr","hs.kr","kg.kr","mil.kr","ms.kr","ne.kr","or.kr","pe.kr","re.kr","sc.kr","busan.kr","chungbuk.kr","chungnam.kr","daegu.kr","daejeon.kr","gangwon.kr","gwangju.kr","gyeongbuk.kr","gyeonggi.kr","gyeongnam.kr","incheon.kr","jeju.kr","jeonbuk.kr","jeonnam.kr","seoul.kr","ulsan.kr","kw","com.kw","edu.kw","emb.kw","gov.kw","ind.kw","net.kw","org.kw","ky","com.ky","edu.ky","net.ky","org.ky","kz","org.kz","edu.kz","net.kz","gov.kz","mil.kz","com.kz","la","int.la","net.la","info.la","edu.la","gov.la","per.la","com.la","org.la","lb","com.lb","edu.lb","gov.lb","net.lb","org.lb","lc","com.lc","net.lc","co.lc","org.lc","edu.lc","gov.lc","li","lk","gov.lk","sch.lk","net.lk","int.lk","com.lk","org.lk","edu.lk","ngo.lk","soc.lk","web.lk","ltd.lk","assn.lk","grp.lk","hotel.lk","ac.lk","lr","com.lr","edu.lr","gov.lr","org.lr","net.lr","ls","ac.ls","biz.ls","co.ls","edu.ls","gov.ls","info.ls","net.ls","org.ls","sc.ls","lt","gov.lt","lu","lv","com.lv","edu.lv","gov.lv","org.lv","mil.lv","id.lv","net.lv","asn.lv","conf.lv","ly","com.ly","net.ly","gov.ly","plc.ly","edu.ly","sch.ly","med.ly","org.ly","id.ly","ma","co.ma","net.ma","gov.ma","org.ma","ac.ma","press.ma","mc","tm.mc","asso.mc","md","me","co.me","net.me","org.me","edu.me","ac.me","gov.me","its.me","priv.me","mg","org.mg","nom.mg","gov.mg","prd.mg","tm.mg","edu.mg","mil.mg","com.mg","co.mg","mh","mil","mk","com.mk","org.mk","net.mk","edu.mk","gov.mk","inf.mk","name.mk","ml","com.ml","edu.ml","gouv.ml","gov.ml","net.ml","org.ml","presse.ml","*.mm","mn","gov.mn","edu.mn","org.mn","mo","com.mo","net.mo","org.mo","edu.mo","gov.mo","mobi","mp","mq","mr","gov.mr","ms","com.ms","edu.ms","gov.ms","net.ms","org.ms","mt","com.mt","edu.mt","net.mt","org.mt","mu","com.mu","net.mu","org.mu","gov.mu","ac.mu","co.mu","or.mu","museum","academy.museum","agriculture.museum","air.museum","airguard.museum","alabama.museum","alaska.museum","amber.museum","ambulance.museum","american.museum","americana.museum","americanantiques.museum","americanart.museum","amsterdam.museum","and.museum","annefrank.museum","anthro.museum","anthropology.museum","antiques.museum","aquarium.museum","arboretum.museum","archaeological.museum","archaeology.museum","architecture.museum","art.museum","artanddesign.museum","artcenter.museum","artdeco.museum","arteducation.museum","artgallery.museum","arts.museum","artsandcrafts.museum","asmatart.museum","assassination.museum","assisi.museum","association.museum","astronomy.museum","atlanta.museum","austin.museum","australia.museum","automotive.museum","aviation.museum","axis.museum","badajoz.museum","baghdad.museum","bahn.museum","bale.museum","baltimore.museum","barcelona.museum","baseball.museum","basel.museum","baths.museum","bauern.museum","beauxarts.museum","beeldengeluid.museum","bellevue.museum","bergbau.museum","berkeley.museum","berlin.museum","bern.museum","bible.museum","bilbao.museum","bill.museum","birdart.museum","birthplace.museum","bonn.museum","boston.museum","botanical.museum","botanicalgarden.museum","botanicgarden.museum","botany.museum","brandywinevalley.museum","brasil.museum","bristol.museum","british.museum","britishcolumbia.museum","broadcast.museum","brunel.museum","brussel.museum","brussels.museum","bruxelles.museum","building.museum","burghof.museum","bus.museum","bushey.museum","cadaques.museum","california.museum","cambridge.museum","can.museum","canada.museum","capebreton.museum","carrier.museum","cartoonart.museum","casadelamoneda.museum","castle.museum","castres.museum","celtic.museum","center.museum","chattanooga.museum","cheltenham.museum","chesapeakebay.museum","chicago.museum","children.museum","childrens.museum","childrensgarden.museum","chiropractic.museum","chocolate.museum","christiansburg.museum","cincinnati.museum","cinema.museum","circus.museum","civilisation.museum","civilization.museum","civilwar.museum","clinton.museum","clock.museum","coal.museum","coastaldefence.museum","cody.museum","coldwar.museum","collection.museum","colonialwilliamsburg.museum","coloradoplateau.museum","columbia.museum","columbus.museum","communication.museum","communications.museum","community.museum","computer.museum","computerhistory.museum","comunicações.museum","contemporary.museum","contemporaryart.museum","convent.museum","copenhagen.museum","corporation.museum","correios-e-telecomunicações.museum","corvette.museum","costume.museum","countryestate.museum","county.museum","crafts.museum","cranbrook.museum","creation.museum","cultural.museum","culturalcenter.museum","culture.museum","cyber.museum","cymru.museum","dali.museum","dallas.museum","database.museum","ddr.museum","decorativearts.museum","delaware.museum","delmenhorst.museum","denmark.museum","depot.museum","design.museum","detroit.museum","dinosaur.museum","discovery.museum","dolls.museum","donostia.museum","durham.museum","eastafrica.museum","eastcoast.museum","education.museum","educational.museum","egyptian.museum","eisenbahn.museum","elburg.museum","elvendrell.museum","embroidery.museum","encyclopedic.museum","england.museum","entomology.museum","environment.museum","environmentalconservation.museum","epilepsy.museum","essex.museum","estate.museum","ethnology.museum","exeter.museum","exhibition.museum","family.museum","farm.museum","farmequipment.museum","farmers.museum","farmstead.museum","field.museum","figueres.museum","filatelia.museum","film.museum","fineart.museum","finearts.museum","finland.museum","flanders.museum","florida.museum","force.museum","fortmissoula.museum","fortworth.museum","foundation.museum","francaise.museum","frankfurt.museum","franziskaner.museum","freemasonry.museum","freiburg.museum","fribourg.museum","frog.museum","fundacio.museum","furniture.museum","gallery.museum","garden.museum","gateway.museum","geelvinck.museum","gemological.museum","geology.museum","georgia.museum","giessen.museum","glas.museum","glass.museum","gorge.museum","grandrapids.museum","graz.museum","guernsey.museum","halloffame.museum","hamburg.museum","handson.museum","harvestcelebration.museum","hawaii.museum","health.museum","heimatunduhren.museum","hellas.museum","helsinki.museum","hembygdsforbund.museum","heritage.museum","histoire.museum","historical.museum","historicalsociety.museum","historichouses.museum","historisch.museum","historisches.museum","history.museum","historyofscience.museum","horology.museum","house.museum","humanities.museum","illustration.museum","imageandsound.museum","indian.museum","indiana.museum","indianapolis.museum","indianmarket.museum","intelligence.museum","interactive.museum","iraq.museum","iron.museum","isleofman.museum","jamison.museum","jefferson.museum","jerusalem.museum","jewelry.museum","jewish.museum","jewishart.museum","jfk.museum","journalism.museum","judaica.museum","judygarland.museum","juedisches.museum","juif.museum","karate.museum","karikatur.museum","kids.museum","koebenhavn.museum","koeln.museum","kunst.museum","kunstsammlung.museum","kunstunddesign.museum","labor.museum","labour.museum","lajolla.museum","lancashire.museum","landes.museum","lans.museum","läns.museum","larsson.museum","lewismiller.museum","lincoln.museum","linz.museum","living.museum","livinghistory.museum","localhistory.museum","london.museum","losangeles.museum","louvre.museum","loyalist.museum","lucerne.museum","luxembourg.museum","luzern.museum","mad.museum","madrid.museum","mallorca.museum","manchester.museum","mansion.museum","mansions.museum","manx.museum","marburg.museum","maritime.museum","maritimo.museum","maryland.museum","marylhurst.museum","media.museum","medical.museum","medizinhistorisches.museum","meeres.museum","memorial.museum","mesaverde.museum","michigan.museum","midatlantic.museum","military.museum","mill.museum","miners.museum","mining.museum","minnesota.museum","missile.museum","missoula.museum","modern.museum","moma.museum","money.museum","monmouth.museum","monticello.museum","montreal.museum","moscow.museum","motorcycle.museum","muenchen.museum","muenster.museum","mulhouse.museum","muncie.museum","museet.museum","museumcenter.museum","museumvereniging.museum","music.museum","national.museum","nationalfirearms.museum","nationalheritage.museum","nativeamerican.museum","naturalhistory.museum","naturalhistorymuseum.museum","naturalsciences.museum","nature.museum","naturhistorisches.museum","natuurwetenschappen.museum","naumburg.museum","naval.museum","nebraska.museum","neues.museum","newhampshire.museum","newjersey.museum","newmexico.museum","newport.museum","newspaper.museum","newyork.museum","niepce.museum","norfolk.museum","north.museum","nrw.museum","nyc.museum","nyny.museum","oceanographic.museum","oceanographique.museum","omaha.museum","online.museum","ontario.museum","openair.museum","oregon.museum","oregontrail.museum","otago.museum","oxford.museum","pacific.museum","paderborn.museum","palace.museum","paleo.museum","palmsprings.museum","panama.museum","paris.museum","pasadena.museum","pharmacy.museum","philadelphia.museum","philadelphiaarea.museum","philately.museum","phoenix.museum","photography.museum","pilots.museum","pittsburgh.museum","planetarium.museum","plantation.museum","plants.museum","plaza.museum","portal.museum","portland.museum","portlligat.museum","posts-and-telecommunications.museum","preservation.museum","presidio.museum","press.museum","project.museum","public.museum","pubol.museum","quebec.museum","railroad.museum","railway.museum","research.museum","resistance.museum","riodejaneiro.museum","rochester.museum","rockart.museum","roma.museum","russia.museum","saintlouis.museum","salem.museum","salvadordali.museum","salzburg.museum","sandiego.museum","sanfrancisco.museum","santabarbara.museum","santacruz.museum","santafe.museum","saskatchewan.museum","satx.museum","savannahga.museum","schlesisches.museum","schoenbrunn.museum","schokoladen.museum","school.museum","schweiz.museum","science.museum","scienceandhistory.museum","scienceandindustry.museum","sciencecenter.museum","sciencecenters.museum","science-fiction.museum","sciencehistory.museum","sciences.museum","sciencesnaturelles.museum","scotland.museum","seaport.museum","settlement.museum","settlers.museum","shell.museum","sherbrooke.museum","sibenik.museum","silk.museum","ski.museum","skole.museum","society.museum","sologne.museum","soundandvision.museum","southcarolina.museum","southwest.museum","space.museum","spy.museum","square.museum","stadt.museum","stalbans.museum","starnberg.museum","state.museum","stateofdelaware.museum","station.museum","steam.museum","steiermark.museum","stjohn.museum","stockholm.museum","stpetersburg.museum","stuttgart.museum","suisse.museum","surgeonshall.museum","surrey.museum","svizzera.museum","sweden.museum","sydney.museum","tank.museum","tcm.museum","technology.museum","telekommunikation.museum","television.museum","texas.museum","textile.museum","theater.museum","time.museum","timekeeping.museum","topology.museum","torino.museum","touch.museum","town.museum","transport.museum","tree.museum","trolley.museum","trust.museum","trustee.museum","uhren.museum","ulm.museum","undersea.museum","university.museum","usa.museum","usantiques.museum","usarts.museum","uscountryestate.museum","usculture.museum","usdecorativearts.museum","usgarden.museum","ushistory.museum","ushuaia.museum","uslivinghistory.museum","utah.museum","uvic.museum","valley.museum","vantaa.museum","versailles.museum","viking.museum","village.museum","virginia.museum","virtual.museum","virtuel.museum","vlaanderen.museum","volkenkunde.museum","wales.museum","wallonie.museum","war.museum","washingtondc.museum","watchandclock.museum","watch-and-clock.museum","western.museum","westfalen.museum","whaling.museum","wildlife.museum","williamsburg.museum","windmill.museum","workshop.museum","york.museum","yorkshire.museum","yosemite.museum","youth.museum","zoological.museum","zoology.museum","ירושלים.museum","иком.museum","mv","aero.mv","biz.mv","com.mv","coop.mv","edu.mv","gov.mv","info.mv","int.mv","mil.mv","museum.mv","name.mv","net.mv","org.mv","pro.mv","mw","ac.mw","biz.mw","co.mw","com.mw","coop.mw","edu.mw","gov.mw","int.mw","museum.mw","net.mw","org.mw","mx","com.mx","org.mx","gob.mx","edu.mx","net.mx","my","biz.my","com.my","edu.my","gov.my","mil.my","name.my","net.my","org.my","mz","ac.mz","adv.mz","co.mz","edu.mz","gov.mz","mil.mz","net.mz","org.mz","na","info.na","pro.na","name.na","school.na","or.na","dr.na","us.na","mx.na","ca.na","in.na","cc.na","tv.na","ws.na","mobi.na","co.na","com.na","org.na","name","nc","asso.nc","nom.nc","ne","net","nf","com.nf","net.nf","per.nf","rec.nf","web.nf","arts.nf","firm.nf","info.nf","other.nf","store.nf","ng","com.ng","edu.ng","gov.ng","i.ng","mil.ng","mobi.ng","name.ng","net.ng","org.ng","sch.ng","ni","ac.ni","biz.ni","co.ni","com.ni","edu.ni","gob.ni","in.ni","info.ni","int.ni","mil.ni","net.ni","nom.ni","org.ni","web.ni","nl","no","fhs.no","vgs.no","fylkesbibl.no","folkebibl.no","museum.no","idrett.no","priv.no","mil.no","stat.no","dep.no","kommune.no","herad.no","aa.no","ah.no","bu.no","fm.no","hl.no","hm.no","jan-mayen.no","mr.no","nl.no","nt.no","of.no","ol.no","oslo.no","rl.no","sf.no","st.no","svalbard.no","tm.no","tr.no","va.no","vf.no","gs.aa.no","gs.ah.no","gs.bu.no","gs.fm.no","gs.hl.no","gs.hm.no","gs.jan-mayen.no","gs.mr.no","gs.nl.no","gs.nt.no","gs.of.no","gs.ol.no","gs.oslo.no","gs.rl.no","gs.sf.no","gs.st.no","gs.svalbard.no","gs.tm.no","gs.tr.no","gs.va.no","gs.vf.no","akrehamn.no","åkrehamn.no","algard.no","ålgård.no","arna.no","brumunddal.no","bryne.no","bronnoysund.no","brønnøysund.no","drobak.no","drøbak.no","egersund.no","fetsund.no","floro.no","florø.no","fredrikstad.no","hokksund.no","honefoss.no","hønefoss.no","jessheim.no","jorpeland.no","jørpeland.no","kirkenes.no","kopervik.no","krokstadelva.no","langevag.no","langevåg.no","leirvik.no","mjondalen.no","mjøndalen.no","mo-i-rana.no","mosjoen.no","mosjøen.no","nesoddtangen.no","orkanger.no","osoyro.no","osøyro.no","raholt.no","råholt.no","sandnessjoen.no","sandnessjøen.no","skedsmokorset.no","slattum.no","spjelkavik.no","stathelle.no","stavern.no","stjordalshalsen.no","stjørdalshalsen.no","tananger.no","tranby.no","vossevangen.no","afjord.no","åfjord.no","agdenes.no","al.no","ål.no","alesund.no","ålesund.no","alstahaug.no","alta.no","áltá.no","alaheadju.no","álaheadju.no","alvdal.no","amli.no","åmli.no","amot.no","åmot.no","andebu.no","andoy.no","andøy.no","andasuolo.no","ardal.no","årdal.no","aremark.no","arendal.no","ås.no","aseral.no","åseral.no","asker.no","askim.no","askvoll.no","askoy.no","askøy.no","asnes.no","åsnes.no","audnedaln.no","aukra.no","aure.no","aurland.no","aurskog-holand.no","aurskog-høland.no","austevoll.no","austrheim.no","averoy.no","averøy.no","balestrand.no","ballangen.no","balat.no","bálát.no","balsfjord.no","bahccavuotna.no","báhccavuotna.no","bamble.no","bardu.no","beardu.no","beiarn.no","bajddar.no","bájddar.no","baidar.no","báidár.no","berg.no","bergen.no","berlevag.no","berlevåg.no","bearalvahki.no","bearalváhki.no","bindal.no","birkenes.no","bjarkoy.no","bjarkøy.no","bjerkreim.no","bjugn.no","bodo.no","bodø.no","badaddja.no","bådåddjå.no","budejju.no","bokn.no","bremanger.no","bronnoy.no","brønnøy.no","bygland.no","bykle.no","barum.no","bærum.no","bo.telemark.no","bø.telemark.no","bo.nordland.no","bø.nordland.no","bievat.no","bievát.no","bomlo.no","bømlo.no","batsfjord.no","båtsfjord.no","bahcavuotna.no","báhcavuotna.no","dovre.no","drammen.no","drangedal.no","dyroy.no","dyrøy.no","donna.no","dønna.no","eid.no","eidfjord.no","eidsberg.no","eidskog.no","eidsvoll.no","eigersund.no","elverum.no","enebakk.no","engerdal.no","etne.no","etnedal.no","evenes.no","evenassi.no","evenášši.no","evje-og-hornnes.no","farsund.no","fauske.no","fuossko.no","fuoisku.no","fedje.no","fet.no","finnoy.no","finnøy.no","fitjar.no","fjaler.no","fjell.no","flakstad.no","flatanger.no","flekkefjord.no","flesberg.no","flora.no","fla.no","flå.no","folldal.no","forsand.no","fosnes.no","frei.no","frogn.no","froland.no","frosta.no","frana.no","fræna.no","froya.no","frøya.no","fusa.no","fyresdal.no","forde.no","førde.no","gamvik.no","gangaviika.no","gáŋgaviika.no","gaular.no","gausdal.no","gildeskal.no","gildeskål.no","giske.no","gjemnes.no","gjerdrum.no","gjerstad.no","gjesdal.no","gjovik.no","gjøvik.no","gloppen.no","gol.no","gran.no","grane.no","granvin.no","gratangen.no","grimstad.no","grong.no","kraanghke.no","kråanghke.no","grue.no","gulen.no","hadsel.no","halden.no","halsa.no","hamar.no","hamaroy.no","habmer.no","hábmer.no","hapmir.no","hápmir.no","hammerfest.no","hammarfeasta.no","hámmárfeasta.no","haram.no","hareid.no","harstad.no","hasvik.no","aknoluokta.no","ákŋoluokta.no","hattfjelldal.no","aarborte.no","haugesund.no","hemne.no","hemnes.no","hemsedal.no","heroy.more-og-romsdal.no","herøy.møre-og-romsdal.no","heroy.nordland.no","herøy.nordland.no","hitra.no","hjartdal.no","hjelmeland.no","hobol.no","hobøl.no","hof.no","hol.no","hole.no","holmestrand.no","holtalen.no","holtålen.no","hornindal.no","horten.no","hurdal.no","hurum.no","hvaler.no","hyllestad.no","hagebostad.no","hægebostad.no","hoyanger.no","høyanger.no","hoylandet.no","høylandet.no","ha.no","hå.no","ibestad.no","inderoy.no","inderøy.no","iveland.no","jevnaker.no","jondal.no","jolster.no","jølster.no","karasjok.no","karasjohka.no","kárášjohka.no","karlsoy.no","galsa.no","gálsá.no","karmoy.no","karmøy.no","kautokeino.no","guovdageaidnu.no","klepp.no","klabu.no","klæbu.no","kongsberg.no","kongsvinger.no","kragero.no","kragerø.no","kristiansand.no","kristiansund.no","krodsherad.no","krødsherad.no","kvalsund.no","rahkkeravju.no","ráhkkerávju.no","kvam.no","kvinesdal.no","kvinnherad.no","kviteseid.no","kvitsoy.no","kvitsøy.no","kvafjord.no","kvæfjord.no","giehtavuoatna.no","kvanangen.no","kvænangen.no","navuotna.no","návuotna.no","kafjord.no","kåfjord.no","gaivuotna.no","gáivuotna.no","larvik.no","lavangen.no","lavagis.no","loabat.no","loabát.no","lebesby.no","davvesiida.no","leikanger.no","leirfjord.no","leka.no","leksvik.no","lenvik.no","leangaviika.no","leaŋgaviika.no","lesja.no","levanger.no","lier.no","lierne.no","lillehammer.no","lillesand.no","lindesnes.no","lindas.no","lindås.no","lom.no","loppa.no","lahppi.no","láhppi.no","lund.no","lunner.no","luroy.no","lurøy.no","luster.no","lyngdal.no","lyngen.no","ivgu.no","lardal.no","lerdal.no","lærdal.no","lodingen.no","lødingen.no","lorenskog.no","lørenskog.no","loten.no","løten.no","malvik.no","masoy.no","måsøy.no","muosat.no","muosát.no","mandal.no","marker.no","marnardal.no","masfjorden.no","meland.no","meldal.no","melhus.no","meloy.no","meløy.no","meraker.no","meråker.no","moareke.no","moåreke.no","midsund.no","midtre-gauldal.no","modalen.no","modum.no","molde.no","moskenes.no","moss.no","mosvik.no","malselv.no","målselv.no","malatvuopmi.no","málatvuopmi.no","namdalseid.no","aejrie.no","namsos.no","namsskogan.no","naamesjevuemie.no","nååmesjevuemie.no","laakesvuemie.no","nannestad.no","narvik.no","narviika.no","naustdal.no","nedre-eiker.no","nes.akershus.no","nes.buskerud.no","nesna.no","nesodden.no","nesseby.no","unjarga.no","unjárga.no","nesset.no","nissedal.no","nittedal.no","nord-aurdal.no","nord-fron.no","nord-odal.no","norddal.no","nordkapp.no","davvenjarga.no","davvenjárga.no","nordre-land.no","nordreisa.no","raisa.no","ráisa.no","nore-og-uvdal.no","notodden.no","naroy.no","nærøy.no","notteroy.no","nøtterøy.no","odda.no","oksnes.no","øksnes.no","oppdal.no","oppegard.no","oppegård.no","orkdal.no","orland.no","ørland.no","orskog.no","ørskog.no","orsta.no","ørsta.no","os.hedmark.no","os.hordaland.no","osen.no","osteroy.no","osterøy.no","ostre-toten.no","østre-toten.no","overhalla.no","ovre-eiker.no","øvre-eiker.no","oyer.no","øyer.no","oygarden.no","øygarden.no","oystre-slidre.no","øystre-slidre.no","porsanger.no","porsangu.no","porsáŋgu.no","porsgrunn.no","radoy.no","radøy.no","rakkestad.no","rana.no","ruovat.no","randaberg.no","rauma.no","rendalen.no","rennebu.no","rennesoy.no","rennesøy.no","rindal.no","ringebu.no","ringerike.no","ringsaker.no","rissa.no","risor.no","risør.no","roan.no","rollag.no","rygge.no","ralingen.no","rælingen.no","rodoy.no","rødøy.no","romskog.no","rømskog.no","roros.no","røros.no","rost.no","røst.no","royken.no","røyken.no","royrvik.no","røyrvik.no","rade.no","råde.no","salangen.no","siellak.no","saltdal.no","salat.no","sálát.no","sálat.no","samnanger.no","sande.more-og-romsdal.no","sande.møre-og-romsdal.no","sande.vestfold.no","sandefjord.no","sandnes.no","sandoy.no","sandøy.no","sarpsborg.no","sauda.no","sauherad.no","sel.no","selbu.no","selje.no","seljord.no","sigdal.no","siljan.no","sirdal.no","skaun.no","skedsmo.no","ski.no","skien.no","skiptvet.no","skjervoy.no","skjervøy.no","skierva.no","skiervá.no","skjak.no","skjåk.no","skodje.no","skanland.no","skånland.no","skanit.no","skánit.no","smola.no","smøla.no","snillfjord.no","snasa.no","snåsa.no","snoasa.no","snaase.no","snåase.no","sogndal.no","sokndal.no","sola.no","solund.no","songdalen.no","sortland.no","spydeberg.no","stange.no","stavanger.no","steigen.no","steinkjer.no","stjordal.no","stjørdal.no","stokke.no","stor-elvdal.no","stord.no","stordal.no","storfjord.no","omasvuotna.no","strand.no","stranda.no","stryn.no","sula.no","suldal.no","sund.no","sunndal.no","surnadal.no","sveio.no","svelvik.no","sykkylven.no","sogne.no","søgne.no","somna.no","sømna.no","sondre-land.no","søndre-land.no","sor-aurdal.no","sør-aurdal.no","sor-fron.no","sør-fron.no","sor-odal.no","sør-odal.no","sor-varanger.no","sør-varanger.no","matta-varjjat.no","mátta-várjjat.no","sorfold.no","sørfold.no","sorreisa.no","sørreisa.no","sorum.no","sørum.no","tana.no","deatnu.no","time.no","tingvoll.no","tinn.no","tjeldsund.no","dielddanuorri.no","tjome.no","tjøme.no","tokke.no","tolga.no","torsken.no","tranoy.no","tranøy.no","tromso.no","tromsø.no","tromsa.no","romsa.no","trondheim.no","troandin.no","trysil.no","trana.no","træna.no","trogstad.no","trøgstad.no","tvedestrand.no","tydal.no","tynset.no","tysfjord.no","divtasvuodna.no","divttasvuotna.no","tysnes.no","tysvar.no","tysvær.no","tonsberg.no","tønsberg.no","ullensaker.no","ullensvang.no","ulvik.no","utsira.no","vadso.no","vadsø.no","cahcesuolo.no","čáhcesuolo.no","vaksdal.no","valle.no","vang.no","vanylven.no","vardo.no","vardø.no","varggat.no","várggát.no","vefsn.no","vaapste.no","vega.no","vegarshei.no","vegårshei.no","vennesla.no","verdal.no","verran.no","vestby.no","vestnes.no","vestre-slidre.no","vestre-toten.no","vestvagoy.no","vestvågøy.no","vevelstad.no","vik.no","vikna.no","vindafjord.no","volda.no","voss.no","varoy.no","værøy.no","vagan.no","vågan.no","voagat.no","vagsoy.no","vågsøy.no","vaga.no","vågå.no","valer.ostfold.no","våler.østfold.no","valer.hedmark.no","våler.hedmark.no","*.np","nr","biz.nr","info.nr","gov.nr","edu.nr","org.nr","net.nr","com.nr","nu","nz","ac.nz","co.nz","cri.nz","geek.nz","gen.nz","govt.nz","health.nz","iwi.nz","kiwi.nz","maori.nz","mil.nz","māori.nz","net.nz","org.nz","parliament.nz","school.nz","om","co.om","com.om","edu.om","gov.om","med.om","museum.om","net.om","org.om","pro.om","onion","org","pa","ac.pa","gob.pa","com.pa","org.pa","sld.pa","edu.pa","net.pa","ing.pa","abo.pa","med.pa","nom.pa","pe","edu.pe","gob.pe","nom.pe","mil.pe","org.pe","com.pe","net.pe","pf","com.pf","org.pf","edu.pf","*.pg","ph","com.ph","net.ph","org.ph","gov.ph","edu.ph","ngo.ph","mil.ph","i.ph","pk","com.pk","net.pk","edu.pk","org.pk","fam.pk","biz.pk","web.pk","gov.pk","gob.pk","gok.pk","gon.pk","gop.pk","gos.pk","info.pk","pl","com.pl","net.pl","org.pl","aid.pl","agro.pl","atm.pl","auto.pl","biz.pl","edu.pl","gmina.pl","gsm.pl","info.pl","mail.pl","miasta.pl","media.pl","mil.pl","nieruchomosci.pl","nom.pl","pc.pl","powiat.pl","priv.pl","realestate.pl","rel.pl","sex.pl","shop.pl","sklep.pl","sos.pl","szkola.pl","targi.pl","tm.pl","tourism.pl","travel.pl","turystyka.pl","gov.pl","ap.gov.pl","ic.gov.pl","is.gov.pl","us.gov.pl","kmpsp.gov.pl","kppsp.gov.pl","kwpsp.gov.pl","psp.gov.pl","wskr.gov.pl","kwp.gov.pl","mw.gov.pl","ug.gov.pl","um.gov.pl","umig.gov.pl","ugim.gov.pl","upow.gov.pl","uw.gov.pl","starostwo.gov.pl","pa.gov.pl","po.gov.pl","psse.gov.pl","pup.gov.pl","rzgw.gov.pl","sa.gov.pl","so.gov.pl","sr.gov.pl","wsa.gov.pl","sko.gov.pl","uzs.gov.pl","wiih.gov.pl","winb.gov.pl","pinb.gov.pl","wios.gov.pl","witd.gov.pl","wzmiuw.gov.pl","piw.gov.pl","wiw.gov.pl","griw.gov.pl","wif.gov.pl","oum.gov.pl","sdn.gov.pl","zp.gov.pl","uppo.gov.pl","mup.gov.pl","wuoz.gov.pl","konsulat.gov.pl","oirm.gov.pl","augustow.pl","babia-gora.pl","bedzin.pl","beskidy.pl","bialowieza.pl","bialystok.pl","bielawa.pl","bieszczady.pl","boleslawiec.pl","bydgoszcz.pl","bytom.pl","cieszyn.pl","czeladz.pl","czest.pl","dlugoleka.pl","elblag.pl","elk.pl","glogow.pl","gniezno.pl","gorlice.pl","grajewo.pl","ilawa.pl","jaworzno.pl","jelenia-gora.pl","jgora.pl","kalisz.pl","kazimierz-dolny.pl","karpacz.pl","kartuzy.pl","kaszuby.pl","katowice.pl","kepno.pl","ketrzyn.pl","klodzko.pl","kobierzyce.pl","kolobrzeg.pl","konin.pl","konskowola.pl","kutno.pl","lapy.pl","lebork.pl","legnica.pl","lezajsk.pl","limanowa.pl","lomza.pl","lowicz.pl","lubin.pl","lukow.pl","malbork.pl","malopolska.pl","mazowsze.pl","mazury.pl","mielec.pl","mielno.pl","mragowo.pl","naklo.pl","nowaruda.pl","nysa.pl","olawa.pl","olecko.pl","olkusz.pl","olsztyn.pl","opoczno.pl","opole.pl","ostroda.pl","ostroleka.pl","ostrowiec.pl","ostrowwlkp.pl","pila.pl","pisz.pl","podhale.pl","podlasie.pl","polkowice.pl","pomorze.pl","pomorskie.pl","prochowice.pl","pruszkow.pl","przeworsk.pl","pulawy.pl","radom.pl","rawa-maz.pl","rybnik.pl","rzeszow.pl","sanok.pl","sejny.pl","slask.pl","slupsk.pl","sosnowiec.pl","stalowa-wola.pl","skoczow.pl","starachowice.pl","stargard.pl","suwalki.pl","swidnica.pl","swiebodzin.pl","swinoujscie.pl","szczecin.pl","szczytno.pl","tarnobrzeg.pl","tgory.pl","turek.pl","tychy.pl","ustka.pl","walbrzych.pl","warmia.pl","warszawa.pl","waw.pl","wegrow.pl","wielun.pl","wlocl.pl","wloclawek.pl","wodzislaw.pl","wolomin.pl","wroclaw.pl","zachpomor.pl","zagan.pl","zarow.pl","zgora.pl","zgorzelec.pl","pm","pn","gov.pn","co.pn","org.pn","edu.pn","net.pn","post","pr","com.pr","net.pr","org.pr","gov.pr","edu.pr","isla.pr","pro.pr","biz.pr","info.pr","name.pr","est.pr","prof.pr","ac.pr","pro","aaa.pro","aca.pro","acct.pro","avocat.pro","bar.pro","cpa.pro","eng.pro","jur.pro","law.pro","med.pro","recht.pro","ps","edu.ps","gov.ps","sec.ps","plo.ps","com.ps","org.ps","net.ps","pt","net.pt","gov.pt","org.pt","edu.pt","int.pt","publ.pt","com.pt","nome.pt","pw","co.pw","ne.pw","or.pw","ed.pw","go.pw","belau.pw","py","com.py","coop.py","edu.py","gov.py","mil.py","net.py","org.py","qa","com.qa","edu.qa","gov.qa","mil.qa","name.qa","net.qa","org.qa","sch.qa","re","asso.re","com.re","nom.re","ro","arts.ro","com.ro","firm.ro","info.ro","nom.ro","nt.ro","org.ro","rec.ro","store.ro","tm.ro","www.ro","rs","ac.rs","co.rs","edu.rs","gov.rs","in.rs","org.rs","ru","rw","ac.rw","co.rw","coop.rw","gov.rw","mil.rw","net.rw","org.rw","sa","com.sa","net.sa","org.sa","gov.sa","med.sa","pub.sa","edu.sa","sch.sa","sb","com.sb","edu.sb","gov.sb","net.sb","org.sb","sc","com.sc","gov.sc","net.sc","org.sc","edu.sc","sd","com.sd","net.sd","org.sd","edu.sd","med.sd","tv.sd","gov.sd","info.sd","se","a.se","ac.se","b.se","bd.se","brand.se","c.se","d.se","e.se","f.se","fh.se","fhsk.se","fhv.se","g.se","h.se","i.se","k.se","komforb.se","kommunalforbund.se","komvux.se","l.se","lanbib.se","m.se","n.se","naturbruksgymn.se","o.se","org.se","p.se","parti.se","pp.se","press.se","r.se","s.se","t.se","tm.se","u.se","w.se","x.se","y.se","z.se","sg","com.sg","net.sg","org.sg","gov.sg","edu.sg","per.sg","sh","com.sh","net.sh","gov.sh","org.sh","mil.sh","si","sj","sk","sl","com.sl","net.sl","edu.sl","gov.sl","org.sl","sm","sn","art.sn","com.sn","edu.sn","gouv.sn","org.sn","perso.sn","univ.sn","so","com.so","edu.so","gov.so","me.so","net.so","org.so","sr","ss","biz.ss","com.ss","edu.ss","gov.ss","me.ss","net.ss","org.ss","sch.ss","st","co.st","com.st","consulado.st","edu.st","embaixada.st","mil.st","net.st","org.st","principe.st","saotome.st","store.st","su","sv","com.sv","edu.sv","gob.sv","org.sv","red.sv","sx","gov.sx","sy","edu.sy","gov.sy","net.sy","mil.sy","com.sy","org.sy","sz","co.sz","ac.sz","org.sz","tc","td","tel","tf","tg","th","ac.th","co.th","go.th","in.th","mi.th","net.th","or.th","tj","ac.tj","biz.tj","co.tj","com.tj","edu.tj","go.tj","gov.tj","int.tj","mil.tj","name.tj","net.tj","nic.tj","org.tj","test.tj","web.tj","tk","tl","gov.tl","tm","com.tm","co.tm","org.tm","net.tm","nom.tm","gov.tm","mil.tm","edu.tm","tn","com.tn","ens.tn","fin.tn","gov.tn","ind.tn","info.tn","intl.tn","mincom.tn","nat.tn","net.tn","org.tn","perso.tn","tourism.tn","to","com.to","gov.to","net.to","org.to","edu.to","mil.to","tr","av.tr","bbs.tr","bel.tr","biz.tr","com.tr","dr.tr","edu.tr","gen.tr","gov.tr","info.tr","mil.tr","k12.tr","kep.tr","name.tr","net.tr","org.tr","pol.tr","tel.tr","tsk.tr","tv.tr","web.tr","nc.tr","gov.nc.tr","tt","co.tt","com.tt","org.tt","net.tt","biz.tt","info.tt","pro.tt","int.tt","coop.tt","jobs.tt","mobi.tt","travel.tt","museum.tt","aero.tt","name.tt","gov.tt","edu.tt","tv","tw","edu.tw","gov.tw","mil.tw","com.tw","net.tw","org.tw","idv.tw","game.tw","ebiz.tw","club.tw","網路.tw","組織.tw","商業.tw","tz","ac.tz","co.tz","go.tz","hotel.tz","info.tz","me.tz","mil.tz","mobi.tz","ne.tz","or.tz","sc.tz","tv.tz","ua","com.ua","edu.ua","gov.ua","in.ua","net.ua","org.ua","cherkassy.ua","cherkasy.ua","chernigov.ua","chernihiv.ua","chernivtsi.ua","chernovtsy.ua","ck.ua","cn.ua","cr.ua","crimea.ua","cv.ua","dn.ua","dnepropetrovsk.ua","dnipropetrovsk.ua","donetsk.ua","dp.ua","if.ua","ivano-frankivsk.ua","kh.ua","kharkiv.ua","kharkov.ua","kherson.ua","khmelnitskiy.ua","khmelnytskyi.ua","kiev.ua","kirovograd.ua","km.ua","kr.ua","krym.ua","ks.ua","kv.ua","kyiv.ua","lg.ua","lt.ua","lugansk.ua","lutsk.ua","lv.ua","lviv.ua","mk.ua","mykolaiv.ua","nikolaev.ua","od.ua","odesa.ua","odessa.ua","pl.ua","poltava.ua","rivne.ua","rovno.ua","rv.ua","sb.ua","sebastopol.ua","sevastopol.ua","sm.ua","sumy.ua","te.ua","ternopil.ua","uz.ua","uzhgorod.ua","vinnica.ua","vinnytsia.ua","vn.ua","volyn.ua","yalta.ua","zaporizhzhe.ua","zaporizhzhia.ua","zhitomir.ua","zhytomyr.ua","zp.ua","zt.ua","ug","co.ug","or.ug","ac.ug","sc.ug","go.ug","ne.ug","com.ug","org.ug","uk","ac.uk","co.uk","gov.uk","ltd.uk","me.uk","net.uk","nhs.uk","org.uk","plc.uk","police.uk","*.sch.uk","us","dni.us","fed.us","isa.us","kids.us","nsn.us","ak.us","al.us","ar.us","as.us","az.us","ca.us","co.us","ct.us","dc.us","de.us","fl.us","ga.us","gu.us","hi.us","ia.us","id.us","il.us","in.us","ks.us","ky.us","la.us","ma.us","md.us","me.us","mi.us","mn.us","mo.us","ms.us","mt.us","nc.us","nd.us","ne.us","nh.us","nj.us","nm.us","nv.us","ny.us","oh.us","ok.us","or.us","pa.us","pr.us","ri.us","sc.us","sd.us","tn.us","tx.us","ut.us","vi.us","vt.us","va.us","wa.us","wi.us","wv.us","wy.us","k12.ak.us","k12.al.us","k12.ar.us","k12.as.us","k12.az.us","k12.ca.us","k12.co.us","k12.ct.us","k12.dc.us","k12.de.us","k12.fl.us","k12.ga.us","k12.gu.us","k12.ia.us","k12.id.us","k12.il.us","k12.in.us","k12.ks.us","k12.ky.us","k12.la.us","k12.ma.us","k12.md.us","k12.me.us","k12.mi.us","k12.mn.us","k12.mo.us","k12.ms.us","k12.mt.us","k12.nc.us","k12.ne.us","k12.nh.us","k12.nj.us","k12.nm.us","k12.nv.us","k12.ny.us","k12.oh.us","k12.ok.us","k12.or.us","k12.pa.us","k12.pr.us","k12.sc.us","k12.tn.us","k12.tx.us","k12.ut.us","k12.vi.us","k12.vt.us","k12.va.us","k12.wa.us","k12.wi.us","k12.wy.us","cc.ak.us","cc.al.us","cc.ar.us","cc.as.us","cc.az.us","cc.ca.us","cc.co.us","cc.ct.us","cc.dc.us","cc.de.us","cc.fl.us","cc.ga.us","cc.gu.us","cc.hi.us","cc.ia.us","cc.id.us","cc.il.us","cc.in.us","cc.ks.us","cc.ky.us","cc.la.us","cc.ma.us","cc.md.us","cc.me.us","cc.mi.us","cc.mn.us","cc.mo.us","cc.ms.us","cc.mt.us","cc.nc.us","cc.nd.us","cc.ne.us","cc.nh.us","cc.nj.us","cc.nm.us","cc.nv.us","cc.ny.us","cc.oh.us","cc.ok.us","cc.or.us","cc.pa.us","cc.pr.us","cc.ri.us","cc.sc.us","cc.sd.us","cc.tn.us","cc.tx.us","cc.ut.us","cc.vi.us","cc.vt.us","cc.va.us","cc.wa.us","cc.wi.us","cc.wv.us","cc.wy.us","lib.ak.us","lib.al.us","lib.ar.us","lib.as.us","lib.az.us","lib.ca.us","lib.co.us","lib.ct.us","lib.dc.us","lib.fl.us","lib.ga.us","lib.gu.us","lib.hi.us","lib.ia.us","lib.id.us","lib.il.us","lib.in.us","lib.ks.us","lib.ky.us","lib.la.us","lib.ma.us","lib.md.us","lib.me.us","lib.mi.us","lib.mn.us","lib.mo.us","lib.ms.us","lib.mt.us","lib.nc.us","lib.nd.us","lib.ne.us","lib.nh.us","lib.nj.us","lib.nm.us","lib.nv.us","lib.ny.us","lib.oh.us","lib.ok.us","lib.or.us","lib.pa.us","lib.pr.us","lib.ri.us","lib.sc.us","lib.sd.us","lib.tn.us","lib.tx.us","lib.ut.us","lib.vi.us","lib.vt.us","lib.va.us","lib.wa.us","lib.wi.us","lib.wy.us","pvt.k12.ma.us","chtr.k12.ma.us","paroch.k12.ma.us","ann-arbor.mi.us","cog.mi.us","dst.mi.us","eaton.mi.us","gen.mi.us","mus.mi.us","tec.mi.us","washtenaw.mi.us","uy","com.uy","edu.uy","gub.uy","mil.uy","net.uy","org.uy","uz","co.uz","com.uz","net.uz","org.uz","va","vc","com.vc","net.vc","org.vc","gov.vc","mil.vc","edu.vc","ve","arts.ve","bib.ve","co.ve","com.ve","e12.ve","edu.ve","firm.ve","gob.ve","gov.ve","info.ve","int.ve","mil.ve","net.ve","nom.ve","org.ve","rar.ve","rec.ve","store.ve","tec.ve","web.ve","vg","vi","co.vi","com.vi","k12.vi","net.vi","org.vi","vn","com.vn","net.vn","org.vn","edu.vn","gov.vn","int.vn","ac.vn","biz.vn","info.vn","name.vn","pro.vn","health.vn","vu","com.vu","edu.vu","net.vu","org.vu","wf","ws","com.ws","net.ws","org.ws","gov.ws","edu.ws","yt","امارات","հայ","বাংলা","бг","البحرين","бел","中国","中國","الجزائر","مصر","ею","ευ","موريتانيا","გე","ελ","香港","公司.香港","教育.香港","政府.香港","個人.香港","網絡.香港","組織.香港","ಭಾರತ","ଭାରତ","ভাৰত","भारतम्","भारोत","ڀارت","ഭാരതം","भारत","بارت","بھارت","భారత్","ભારત","ਭਾਰਤ","ভারত","இந்தியா","ایران","ايران","عراق","الاردن","한국","қаз","ລາວ","ලංකා","இலங்கை","المغرب","мкд","мон","澳門","澳门","مليسيا","عمان","پاکستان","پاكستان","فلسطين","срб","пр.срб","орг.срб","обр.срб","од.срб","упр.срб","ак.срб","рф","قطر","السعودية","السعودیة","السعودیۃ","السعوديه","سودان","新加坡","சிங்கப்பூர்","سورية","سوريا","ไทย","ศึกษา.ไทย","ธุรกิจ.ไทย","รัฐบาล.ไทย","ทหาร.ไทย","เน็ต.ไทย","องค์กร.ไทย","تونس","台灣","台湾","臺灣","укр","اليمن","xxx","ye","com.ye","edu.ye","gov.ye","net.ye","mil.ye","org.ye","ac.za","agric.za","alt.za","co.za","edu.za","gov.za","grondar.za","law.za","mil.za","net.za","ngo.za","nic.za","nis.za","nom.za","org.za","school.za","tm.za","web.za","zm","ac.zm","biz.zm","co.zm","com.zm","edu.zm","gov.zm","info.zm","mil.zm","net.zm","org.zm","sch.zm","zw","ac.zw","co.zw","gov.zw","mil.zw","org.zw","aaa","aarp","abarth","abb","abbott","abbvie","abc","able","abogado","abudhabi","academy","accenture","accountant","accountants","aco","actor","adac","ads","adult","aeg","aetna","afl","africa","agakhan","agency","aig","airbus","airforce","airtel","akdn","alfaromeo","alibaba","alipay","allfinanz","allstate","ally","alsace","alstom","amazon","americanexpress","americanfamily","amex","amfam","amica","amsterdam","analytics","android","anquan","anz","aol","apartments","app","apple","aquarelle","arab","aramco","archi","army","art","arte","asda","associates","athleta","attorney","auction","audi","audible","audio","auspost","author","auto","autos","avianca","aws","axa","azure","baby","baidu","banamex","bananarepublic","band","bank","bar","barcelona","barclaycard","barclays","barefoot","bargains","baseball","basketball","bauhaus","bayern","bbc","bbt","bbva","bcg","bcn","beats","beauty","beer","bentley","berlin","best","bestbuy","bet","bharti","bible","bid","bike","bing","bingo","bio","black","blackfriday","blockbuster","blog","bloomberg","blue","bms","bmw","bnpparibas","boats","boehringer","bofa","bom","bond","boo","book","booking","bosch","bostik","boston","bot","boutique","box","bradesco","bridgestone","broadway","broker","brother","brussels","bugatti","build","builders","business","buy","buzz","bzh","cab","cafe","cal","call","calvinklein","cam","camera","camp","cancerresearch","canon","capetown","capital","capitalone","car","caravan","cards","care","career","careers","cars","casa","case","cash","casino","catering","catholic","cba","cbn","cbre","cbs","center","ceo","cern","cfa","cfd","chanel","channel","charity","chase","chat","cheap","chintai","christmas","chrome","church","cipriani","circle","cisco","citadel","citi","citic","city","cityeats","claims","cleaning","click","clinic","clinique","clothing","cloud","club","clubmed","coach","codes","coffee","college","cologne","comcast","commbank","community","company","compare","computer","comsec","condos","construction","consulting","contact","contractors","cooking","cookingchannel","cool","corsica","country","coupon","coupons","courses","cpa","credit","creditcard","creditunion","cricket","crown","crs","cruise","cruises","cuisinella","cymru","cyou","dabur","dad","dance","data","date","dating","datsun","day","dclk","dds","deal","dealer","deals","degree","delivery","dell","deloitte","delta","democrat","dental","dentist","desi","design","dev","dhl","diamonds","diet","digital","direct","directory","discount","discover","dish","diy","dnp","docs","doctor","dog","domains","dot","download","drive","dtv","dubai","dunlop","dupont","durban","dvag","dvr","earth","eat","eco","edeka","education","email","emerck","energy","engineer","engineering","enterprises","epson","equipment","ericsson","erni","esq","estate","etisalat","eurovision","eus","events","exchange","expert","exposed","express","extraspace","fage","fail","fairwinds","faith","family","fan","fans","farm","farmers","fashion","fast","fedex","feedback","ferrari","ferrero","fiat","fidelity","fido","film","final","finance","financial","fire","firestone","firmdale","fish","fishing","fit","fitness","flickr","flights","flir","florist","flowers","fly","foo","food","foodnetwork","football","ford","forex","forsale","forum","foundation","fox","free","fresenius","frl","frogans","frontdoor","frontier","ftr","fujitsu","fun","fund","furniture","futbol","fyi","gal","gallery","gallo","gallup","game","games","gap","garden","gay","gbiz","gdn","gea","gent","genting","george","ggee","gift","gifts","gives","giving","glass","gle","global","globo","gmail","gmbh","gmo","gmx","godaddy","gold","goldpoint","golf","goo","goodyear","goog","google","gop","got","grainger","graphics","gratis","green","gripe","grocery","group","guardian","gucci","guge","guide","guitars","guru","hair","hamburg","hangout","haus","hbo","hdfc","hdfcbank","health","healthcare","help","helsinki","here","hermes","hgtv","hiphop","hisamitsu","hitachi","hiv","hkt","hockey","holdings","holiday","homedepot","homegoods","homes","homesense","honda","horse","hospital","host","hosting","hot","hoteles","hotels","hotmail","house","how","hsbc","hughes","hyatt","hyundai","ibm","icbc","ice","icu","ieee","ifm","ikano","imamat","imdb","immo","immobilien","inc","industries","infiniti","ing","ink","institute","insurance","insure","international","intuit","investments","ipiranga","irish","ismaili","ist","istanbul","itau","itv","jaguar","java","jcb","jeep","jetzt","jewelry","jio","jll","jmp","jnj","joburg","jot","joy","jpmorgan","jprs","juegos","juniper","kaufen","kddi","kerryhotels","kerrylogistics","kerryproperties","kfh","kia","kids","kim","kinder","kindle","kitchen","kiwi","koeln","komatsu","kosher","kpmg","kpn","krd","kred","kuokgroup","kyoto","lacaixa","lamborghini","lamer","lancaster","lancia","land","landrover","lanxess","lasalle","lat","latino","latrobe","law","lawyer","lds","lease","leclerc","lefrak","legal","lego","lexus","lgbt","lidl","life","lifeinsurance","lifestyle","lighting","like","lilly","limited","limo","lincoln","linde","link","lipsy","live","living","llc","llp","loan","loans","locker","locus","loft","lol","london","lotte","lotto","love","lpl","lplfinancial","ltd","ltda","lundbeck","luxe","luxury","macys","madrid","maif","maison","makeup","man","management","mango","map","market","marketing","markets","marriott","marshalls","maserati","mattel","mba","mckinsey","med","media","meet","melbourne","meme","memorial","men","menu","merckmsd","miami","microsoft","mini","mint","mit","mitsubishi","mlb","mls","mma","mobile","moda","moe","moi","mom","monash","money","monster","mormon","mortgage","moscow","moto","motorcycles","mov","movie","msd","mtn","mtr","music","mutual","nab","nagoya","natura","navy","nba","nec","netbank","netflix","network","neustar","new","news","next","nextdirect","nexus","nfl","ngo","nhk","nico","nike","nikon","ninja","nissan","nissay","nokia","northwesternmutual","norton","now","nowruz","nowtv","nra","nrw","ntt","nyc","obi","observer","office","okinawa","olayan","olayangroup","oldnavy","ollo","omega","one","ong","onl","online","ooo","open","oracle","orange","organic","origins","osaka","otsuka","ott","ovh","page","panasonic","paris","pars","partners","parts","party","passagens","pay","pccw","pet","pfizer","pharmacy","phd","philips","phone","photo","photography","photos","physio","pics","pictet","pictures","pid","pin","ping","pink","pioneer","pizza","place","play","playstation","plumbing","plus","pnc","pohl","poker","politie","porn","pramerica","praxi","press","prime","prod","productions","prof","progressive","promo","properties","property","protection","pru","prudential","pub","pwc","qpon","quebec","quest","racing","radio","read","realestate","realtor","realty","recipes","red","redstone","redumbrella","rehab","reise","reisen","reit","reliance","ren","rent","rentals","repair","report","republican","rest","restaurant","review","reviews","rexroth","rich","richardli","ricoh","ril","rio","rip","rocher","rocks","rodeo","rogers","room","rsvp","rugby","ruhr","run","rwe","ryukyu","saarland","safe","safety","sakura","sale","salon","samsclub","samsung","sandvik","sandvikcoromant","sanofi","sap","sarl","sas","save","saxo","sbi","sbs","sca","scb","schaeffler","schmidt","scholarships","school","schule","schwarz","science","scot","search","seat","secure","security","seek","select","sener","services","ses","seven","sew","sex","sexy","sfr","shangrila","sharp","shaw","shell","shia","shiksha","shoes","shop","shopping","shouji","show","showtime","silk","sina","singles","site","ski","skin","sky","skype","sling","smart","smile","sncf","soccer","social","softbank","software","sohu","solar","solutions","song","sony","soy","spa","space","sport","spot","srl","stada","staples","star","statebank","statefarm","stc","stcgroup","stockholm","storage","store","stream","studio","study","style","sucks","supplies","supply","support","surf","surgery","suzuki","swatch","swiss","sydney","systems","tab","taipei","talk","taobao","target","tatamotors","tatar","tattoo","tax","taxi","tci","tdk","team","tech","technology","temasek","tennis","teva","thd","theater","theatre","tiaa","tickets","tienda","tiffany","tips","tires","tirol","tjmaxx","tjx","tkmaxx","tmall","today","tokyo","tools","top","toray","toshiba","total","tours","town","toyota","toys","trade","trading","training","travel","travelchannel","travelers","travelersinsurance","trust","trv","tube","tui","tunes","tushu","tvs","ubank","ubs","unicom","university","uno","uol","ups","vacations","vana","vanguard","vegas","ventures","verisign","versicherung","vet","viajes","video","vig","viking","villas","vin","vip","virgin","visa","vision","viva","vivo","vlaanderen","vodka","volkswagen","volvo","vote","voting","voto","voyage","vuelos","wales","walmart","walter","wang","wanggou","watch","watches","weather","weatherchannel","webcam","weber","website","wedding","weibo","weir","whoswho","wien","wiki","williamhill","win","windows","wine","winners","wme","wolterskluwer","woodside","work","works","world","wow","wtc","wtf","xbox","xerox","xfinity","xihuan","xin","कॉम","セール","佛山","慈善","集团","在线","点看","คอม","八卦","موقع","公益","公司","香格里拉","网站","移动","我爱你","москва","католик","онлайн","сайт","联通","קום","时尚","微博","淡马锡","ファッション","орг","नेट","ストア","アマゾン","삼성","商标","商店","商城","дети","ポイント","新闻","家電","كوم","中文网","中信","娱乐","谷歌","電訊盈科","购物","クラウド","通販","网店","संगठन","餐厅","网络","ком","亚马逊","诺基亚","食品","飞利浦","手机","ارامكو","العليان","اتصالات","بازار","ابوظبي","كاثوليك","همراه","닷컴","政府","شبكة","بيتك","عرب","机构","组织机构","健康","招聘","рус","大拿","みんな","グーグル","世界","書籍","网址","닷넷","コム","天主教","游戏","vermögensberater","vermögensberatung","企业","信息","嘉里大酒店","嘉里","广东","政务","xyz","yachts","yahoo","yamaxun","yandex","yodobashi","yoga","yokohama","you","youtube","yun","zappos","zara","zero","zip","zone","zuerich","cc.ua","inf.ua","ltd.ua","611.to","graphox.us","*.devcdnaccesso.com","adobeaemcloud.com","*.dev.adobeaemcloud.com","hlx.live","adobeaemcloud.net","hlx.page","hlx3.page","beep.pl","airkitapps.com","airkitapps-au.com","airkitapps.eu","aivencloud.com","barsy.ca","*.compute.estate","*.alces.network","kasserver.com","altervista.org","alwaysdata.net","cloudfront.net","*.compute.amazonaws.com","*.compute-1.amazonaws.com","*.compute.amazonaws.com.cn","us-east-1.amazonaws.com","cn-north-1.eb.amazonaws.com.cn","cn-northwest-1.eb.amazonaws.com.cn","elasticbeanstalk.com","ap-northeast-1.elasticbeanstalk.com","ap-northeast-2.elasticbeanstalk.com","ap-northeast-3.elasticbeanstalk.com","ap-south-1.elasticbeanstalk.com","ap-southeast-1.elasticbeanstalk.com","ap-southeast-2.elasticbeanstalk.com","ca-central-1.elasticbeanstalk.com","eu-central-1.elasticbeanstalk.com","eu-west-1.elasticbeanstalk.com","eu-west-2.elasticbeanstalk.com","eu-west-3.elasticbeanstalk.com","sa-east-1.elasticbeanstalk.com","us-east-1.elasticbeanstalk.com","us-east-2.elasticbeanstalk.com","us-gov-west-1.elasticbeanstalk.com","us-west-1.elasticbeanstalk.com","us-west-2.elasticbeanstalk.com","*.elb.amazonaws.com","*.elb.amazonaws.com.cn","awsglobalaccelerator.com","s3.amazonaws.com","s3-ap-northeast-1.amazonaws.com","s3-ap-northeast-2.amazonaws.com","s3-ap-south-1.amazonaws.com","s3-ap-southeast-1.amazonaws.com","s3-ap-southeast-2.amazonaws.com","s3-ca-central-1.amazonaws.com","s3-eu-central-1.amazonaws.com","s3-eu-west-1.amazonaws.com","s3-eu-west-2.amazonaws.com","s3-eu-west-3.amazonaws.com","s3-external-1.amazonaws.com","s3-fips-us-gov-west-1.amazonaws.com","s3-sa-east-1.amazonaws.com","s3-us-gov-west-1.amazonaws.com","s3-us-east-2.amazonaws.com","s3-us-west-1.amazonaws.com","s3-us-west-2.amazonaws.com","s3.ap-northeast-2.amazonaws.com","s3.ap-south-1.amazonaws.com","s3.cn-north-1.amazonaws.com.cn","s3.ca-central-1.amazonaws.com","s3.eu-central-1.amazonaws.com","s3.eu-west-2.amazonaws.com","s3.eu-west-3.amazonaws.com","s3.us-east-2.amazonaws.com","s3.dualstack.ap-northeast-1.amazonaws.com","s3.dualstack.ap-northeast-2.amazonaws.com","s3.dualstack.ap-south-1.amazonaws.com","s3.dualstack.ap-southeast-1.amazonaws.com","s3.dualstack.ap-southeast-2.amazonaws.com","s3.dualstack.ca-central-1.amazonaws.com","s3.dualstack.eu-central-1.amazonaws.com","s3.dualstack.eu-west-1.amazonaws.com","s3.dualstack.eu-west-2.amazonaws.com","s3.dualstack.eu-west-3.amazonaws.com","s3.dualstack.sa-east-1.amazonaws.com","s3.dualstack.us-east-1.amazonaws.com","s3.dualstack.us-east-2.amazonaws.com","s3-website-us-east-1.amazonaws.com","s3-website-us-west-1.amazonaws.com","s3-website-us-west-2.amazonaws.com","s3-website-ap-northeast-1.amazonaws.com","s3-website-ap-southeast-1.amazonaws.com","s3-website-ap-southeast-2.amazonaws.com","s3-website-eu-west-1.amazonaws.com","s3-website-sa-east-1.amazonaws.com","s3-website.ap-northeast-2.amazonaws.com","s3-website.ap-south-1.amazonaws.com","s3-website.ca-central-1.amazonaws.com","s3-website.eu-central-1.amazonaws.com","s3-website.eu-west-2.amazonaws.com","s3-website.eu-west-3.amazonaws.com","s3-website.us-east-2.amazonaws.com","t3l3p0rt.net","tele.amune.org","apigee.io","siiites.com","appspacehosted.com","appspaceusercontent.com","appudo.net","on-aptible.com","user.aseinet.ne.jp","gv.vc","d.gv.vc","user.party.eus","pimienta.org","poivron.org","potager.org","sweetpepper.org","myasustor.com","cdn.prod.atlassian-dev.net","translated.page","myfritz.net","onavstack.net","*.awdev.ca","*.advisor.ws","ecommerce-shop.pl","b-data.io","backplaneapp.io","balena-devices.com","rs.ba","*.banzai.cloud","app.banzaicloud.io","*.backyards.banzaicloud.io","base.ec","official.ec","buyshop.jp","fashionstore.jp","handcrafted.jp","kawaiishop.jp","supersale.jp","theshop.jp","shopselect.net","base.shop","*.beget.app","betainabox.com","bnr.la","bitbucket.io","blackbaudcdn.net","of.je","bluebite.io","boomla.net","boutir.com","boxfuse.io","square7.ch","bplaced.com","bplaced.de","square7.de","bplaced.net","square7.net","shop.brendly.rs","browsersafetymark.io","uk0.bigv.io","dh.bytemark.co.uk","vm.bytemark.co.uk","cafjs.com","mycd.eu","drr.ac","uwu.ai","carrd.co","crd.co","ju.mp","ae.org","br.com","cn.com","com.de","com.se","de.com","eu.com","gb.net","hu.net","jp.net","jpn.com","mex.com","ru.com","sa.com","se.net","uk.com","uk.net","us.com","za.bz","za.com","ar.com","hu.com","kr.com","no.com","qc.com","uy.com","africa.com","gr.com","in.net","web.in","us.org","co.com","aus.basketball","nz.basketball","radio.am","radio.fm","c.la","certmgr.org","cx.ua","discourse.group","discourse.team","cleverapps.io","clerk.app","clerkstage.app","*.lcl.dev","*.lclstage.dev","*.stg.dev","*.stgstage.dev","clickrising.net","c66.me","cloud66.ws","cloud66.zone","jdevcloud.com","wpdevcloud.com","cloudaccess.host","freesite.host","cloudaccess.net","cloudcontrolled.com","cloudcontrolapp.com","*.cloudera.site","pages.dev","trycloudflare.com","workers.dev","wnext.app","co.ca","*.otap.co","co.cz","c.cdn77.org","cdn77-ssl.net","r.cdn77.net","rsc.cdn77.org","ssl.origin.cdn77-secure.org","cloudns.asia","cloudns.biz","cloudns.club","cloudns.cc","cloudns.eu","cloudns.in","cloudns.info","cloudns.org","cloudns.pro","cloudns.pw","cloudns.us","cnpy.gdn","codeberg.page","co.nl","co.no","webhosting.be","hosting-cluster.nl","ac.ru","edu.ru","gov.ru","int.ru","mil.ru","test.ru","dyn.cosidns.de","dynamisches-dns.de","dnsupdater.de","internet-dns.de","l-o-g-i-n.de","dynamic-dns.info","feste-ip.net","knx-server.net","static-access.net","realm.cz","*.cryptonomic.net","cupcake.is","curv.dev","*.customer-oci.com","*.oci.customer-oci.com","*.ocp.customer-oci.com","*.ocs.customer-oci.com","cyon.link","cyon.site","fnwk.site","folionetwork.site","platform0.app","daplie.me","localhost.daplie.me","dattolocal.com","dattorelay.com","dattoweb.com","mydatto.com","dattolocal.net","mydatto.net","biz.dk","co.dk","firm.dk","reg.dk","store.dk","dyndns.dappnode.io","*.dapps.earth","*.bzz.dapps.earth","builtwithdark.com","demo.datadetect.com","instance.datadetect.com","edgestack.me","ddns5.com","debian.net","deno.dev","deno-staging.dev","dedyn.io","deta.app","deta.dev","*.rss.my.id","*.diher.solutions","discordsays.com","discordsez.com","jozi.biz","dnshome.de","online.th","shop.th","drayddns.com","shoparena.pl","dreamhosters.com","mydrobo.com","drud.io","drud.us","duckdns.org","bip.sh","bitbridge.net","dy.fi","tunk.org","dyndns-at-home.com","dyndns-at-work.com","dyndns-blog.com","dyndns-free.com","dyndns-home.com","dyndns-ip.com","dyndns-mail.com","dyndns-office.com","dyndns-pics.com","dyndns-remote.com","dyndns-server.com","dyndns-web.com","dyndns-wiki.com","dyndns-work.com","dyndns.biz","dyndns.info","dyndns.org","dyndns.tv","at-band-camp.net","ath.cx","barrel-of-knowledge.info","barrell-of-knowledge.info","better-than.tv","blogdns.com","blogdns.net","blogdns.org","blogsite.org","boldlygoingnowhere.org","broke-it.net","buyshouses.net","cechire.com","dnsalias.com","dnsalias.net","dnsalias.org","dnsdojo.com","dnsdojo.net","dnsdojo.org","does-it.net","doesntexist.com","doesntexist.org","dontexist.com","dontexist.net","dontexist.org","doomdns.com","doomdns.org","dvrdns.org","dyn-o-saur.com","dynalias.com","dynalias.net","dynalias.org","dynathome.net","dyndns.ws","endofinternet.net","endofinternet.org","endoftheinternet.org","est-a-la-maison.com","est-a-la-masion.com","est-le-patron.com","est-mon-blogueur.com","for-better.biz","for-more.biz","for-our.info","for-some.biz","for-the.biz","forgot.her.name","forgot.his.name","from-ak.com","from-al.com","from-ar.com","from-az.net","from-ca.com","from-co.net","from-ct.com","from-dc.com","from-de.com","from-fl.com","from-ga.com","from-hi.com","from-ia.com","from-id.com","from-il.com","from-in.com","from-ks.com","from-ky.com","from-la.net","from-ma.com","from-md.com","from-me.org","from-mi.com","from-mn.com","from-mo.com","from-ms.com","from-mt.com","from-nc.com","from-nd.com","from-ne.com","from-nh.com","from-nj.com","from-nm.com","from-nv.com","from-ny.net","from-oh.com","from-ok.com","from-or.com","from-pa.com","from-pr.com","from-ri.com","from-sc.com","from-sd.com","from-tn.com","from-tx.com","from-ut.com","from-va.com","from-vt.com","from-wa.com","from-wi.com","from-wv.com","from-wy.com","ftpaccess.cc","fuettertdasnetz.de","game-host.org","game-server.cc","getmyip.com","gets-it.net","go.dyndns.org","gotdns.com","gotdns.org","groks-the.info","groks-this.info","ham-radio-op.net","here-for-more.info","hobby-site.com","hobby-site.org","home.dyndns.org","homedns.org","homeftp.net","homeftp.org","homeip.net","homelinux.com","homelinux.net","homelinux.org","homeunix.com","homeunix.net","homeunix.org","iamallama.com","in-the-band.net","is-a-anarchist.com","is-a-blogger.com","is-a-bookkeeper.com","is-a-bruinsfan.org","is-a-bulls-fan.com","is-a-candidate.org","is-a-caterer.com","is-a-celticsfan.org","is-a-chef.com","is-a-chef.net","is-a-chef.org","is-a-conservative.com","is-a-cpa.com","is-a-cubicle-slave.com","is-a-democrat.com","is-a-designer.com","is-a-doctor.com","is-a-financialadvisor.com","is-a-geek.com","is-a-geek.net","is-a-geek.org","is-a-green.com","is-a-guru.com","is-a-hard-worker.com","is-a-hunter.com","is-a-knight.org","is-a-landscaper.com","is-a-lawyer.com","is-a-liberal.com","is-a-libertarian.com","is-a-linux-user.org","is-a-llama.com","is-a-musician.com","is-a-nascarfan.com","is-a-nurse.com","is-a-painter.com","is-a-patsfan.org","is-a-personaltrainer.com","is-a-photographer.com","is-a-player.com","is-a-republican.com","is-a-rockstar.com","is-a-socialist.com","is-a-soxfan.org","is-a-student.com","is-a-teacher.com","is-a-techie.com","is-a-therapist.com","is-an-accountant.com","is-an-actor.com","is-an-actress.com","is-an-anarchist.com","is-an-artist.com","is-an-engineer.com","is-an-entertainer.com","is-by.us","is-certified.com","is-found.org","is-gone.com","is-into-anime.com","is-into-cars.com","is-into-cartoons.com","is-into-games.com","is-leet.com","is-lost.org","is-not-certified.com","is-saved.org","is-slick.com","is-uberleet.com","is-very-bad.org","is-very-evil.org","is-very-good.org","is-very-nice.org","is-very-sweet.org","is-with-theband.com","isa-geek.com","isa-geek.net","isa-geek.org","isa-hockeynut.com","issmarterthanyou.com","isteingeek.de","istmein.de","kicks-ass.net","kicks-ass.org","knowsitall.info","land-4-sale.us","lebtimnetz.de","leitungsen.de","likes-pie.com","likescandy.com","merseine.nu","mine.nu","misconfused.org","mypets.ws","myphotos.cc","neat-url.com","office-on-the.net","on-the-web.tv","podzone.net","podzone.org","readmyblog.org","saves-the-whales.com","scrapper-site.net","scrapping.cc","selfip.biz","selfip.com","selfip.info","selfip.net","selfip.org","sells-for-less.com","sells-for-u.com","sells-it.net","sellsyourhome.org","servebbs.com","servebbs.net","servebbs.org","serveftp.net","serveftp.org","servegame.org","shacknet.nu","simple-url.com","space-to-rent.com","stuff-4-sale.org","stuff-4-sale.us","teaches-yoga.com","thruhere.net","traeumtgerade.de","webhop.biz","webhop.info","webhop.net","webhop.org","worse-than.tv","writesthisblog.com","ddnss.de","dyn.ddnss.de","dyndns.ddnss.de","dyndns1.de","dyn-ip24.de","home-webserver.de","dyn.home-webserver.de","myhome-server.de","ddnss.org","definima.net","definima.io","ondigitalocean.app","*.digitaloceanspaces.com","bci.dnstrace.pro","ddnsfree.com","ddnsgeek.com","giize.com","gleeze.com","kozow.com","loseyourip.com","ooguy.com","theworkpc.com","casacam.net","dynu.net","accesscam.org","camdvr.org","freeddns.org","mywire.org","webredirect.org","myddns.rocks","blogsite.xyz","dynv6.net","e4.cz","eero.online","eero-stage.online","elementor.cloud","elementor.cool","en-root.fr","mytuleap.com","tuleap-partners.com","encr.app","encoreapi.com","onred.one","staging.onred.one","eu.encoway.cloud","eu.org","al.eu.org","asso.eu.org","at.eu.org","au.eu.org","be.eu.org","bg.eu.org","ca.eu.org","cd.eu.org","ch.eu.org","cn.eu.org","cy.eu.org","cz.eu.org","de.eu.org","dk.eu.org","edu.eu.org","ee.eu.org","es.eu.org","fi.eu.org","fr.eu.org","gr.eu.org","hr.eu.org","hu.eu.org","ie.eu.org","il.eu.org","in.eu.org","int.eu.org","is.eu.org","it.eu.org","jp.eu.org","kr.eu.org","lt.eu.org","lu.eu.org","lv.eu.org","mc.eu.org","me.eu.org","mk.eu.org","mt.eu.org","my.eu.org","net.eu.org","ng.eu.org","nl.eu.org","no.eu.org","nz.eu.org","paris.eu.org","pl.eu.org","pt.eu.org","q-a.eu.org","ro.eu.org","ru.eu.org","se.eu.org","si.eu.org","sk.eu.org","tr.eu.org","uk.eu.org","us.eu.org","eurodir.ru","eu-1.evennode.com","eu-2.evennode.com","eu-3.evennode.com","eu-4.evennode.com","us-1.evennode.com","us-2.evennode.com","us-3.evennode.com","us-4.evennode.com","twmail.cc","twmail.net","twmail.org","mymailer.com.tw","url.tw","onfabrica.com","apps.fbsbx.com","ru.net","adygeya.ru","bashkiria.ru","bir.ru","cbg.ru","com.ru","dagestan.ru","grozny.ru","kalmykia.ru","kustanai.ru","marine.ru","mordovia.ru","msk.ru","mytis.ru","nalchik.ru","nov.ru","pyatigorsk.ru","spb.ru","vladikavkaz.ru","vladimir.ru","abkhazia.su","adygeya.su","aktyubinsk.su","arkhangelsk.su","armenia.su","ashgabad.su","azerbaijan.su","balashov.su","bashkiria.su","bryansk.su","bukhara.su","chimkent.su","dagestan.su","east-kazakhstan.su","exnet.su","georgia.su","grozny.su","ivanovo.su","jambyl.su","kalmykia.su","kaluga.su","karacol.su","karaganda.su","karelia.su","khakassia.su","krasnodar.su","kurgan.su","kustanai.su","lenug.su","mangyshlak.su","mordovia.su","msk.su","murmansk.su","nalchik.su","navoi.su","north-kazakhstan.su","nov.su","obninsk.su","penza.su","pokrovsk.su","sochi.su","spb.su","tashkent.su","termez.su","togliatti.su","troitsk.su","tselinograd.su","tula.su","tuva.su","vladikavkaz.su","vladimir.su","vologda.su","channelsdvr.net","u.channelsdvr.net","edgecompute.app","fastly-terrarium.com","fastlylb.net","map.fastlylb.net","freetls.fastly.net","map.fastly.net","a.prod.fastly.net","global.prod.fastly.net","a.ssl.fastly.net","b.ssl.fastly.net","global.ssl.fastly.net","fastvps-server.com","fastvps.host","myfast.host","fastvps.site","myfast.space","fedorainfracloud.org","fedorapeople.org","cloud.fedoraproject.org","app.os.fedoraproject.org","app.os.stg.fedoraproject.org","conn.uk","copro.uk","hosp.uk","mydobiss.com","fh-muenster.io","filegear.me","filegear-au.me","filegear-de.me","filegear-gb.me","filegear-ie.me","filegear-jp.me","filegear-sg.me","firebaseapp.com","fireweb.app","flap.id","onflashdrive.app","fldrv.com","fly.dev","edgeapp.net","shw.io","flynnhosting.net","forgeblocks.com","id.forgerock.io","framer.app","framercanvas.com","*.frusky.de","ravpage.co.il","0e.vc","freebox-os.com","freeboxos.com","fbx-os.fr","fbxos.fr","freebox-os.fr","freeboxos.fr","freedesktop.org","freemyip.com","wien.funkfeuer.at","*.futurecms.at","*.ex.futurecms.at","*.in.futurecms.at","futurehosting.at","futuremailing.at","*.ex.ortsinfo.at","*.kunden.ortsinfo.at","*.statics.cloud","independent-commission.uk","independent-inquest.uk","independent-inquiry.uk","independent-panel.uk","independent-review.uk","public-inquiry.uk","royal-commission.uk","campaign.gov.uk","service.gov.uk","api.gov.uk","gehirn.ne.jp","usercontent.jp","gentapps.com","gentlentapis.com","lab.ms","cdn-edges.net","ghost.io","gsj.bz","githubusercontent.com","githubpreview.dev","github.io","gitlab.io","gitapp.si","gitpage.si","glitch.me","nog.community","co.ro","shop.ro","lolipop.io","angry.jp","babyblue.jp","babymilk.jp","backdrop.jp","bambina.jp","bitter.jp","blush.jp","boo.jp","boy.jp","boyfriend.jp","but.jp","candypop.jp","capoo.jp","catfood.jp","cheap.jp","chicappa.jp","chillout.jp","chips.jp","chowder.jp","chu.jp","ciao.jp","cocotte.jp","coolblog.jp","cranky.jp","cutegirl.jp","daa.jp","deca.jp","deci.jp","digick.jp","egoism.jp","fakefur.jp","fem.jp","flier.jp","floppy.jp","fool.jp","frenchkiss.jp","girlfriend.jp","girly.jp","gloomy.jp","gonna.jp","greater.jp","hacca.jp","heavy.jp","her.jp","hiho.jp","hippy.jp","holy.jp","hungry.jp","icurus.jp","itigo.jp","jellybean.jp","kikirara.jp","kill.jp","kilo.jp","kuron.jp","littlestar.jp","lolipopmc.jp","lolitapunk.jp","lomo.jp","lovepop.jp","lovesick.jp","main.jp","mods.jp","mond.jp","mongolian.jp","moo.jp","namaste.jp","nikita.jp","nobushi.jp","noor.jp","oops.jp","parallel.jp","parasite.jp","pecori.jp","peewee.jp","penne.jp","pepper.jp","perma.jp","pigboat.jp","pinoko.jp","punyu.jp","pupu.jp","pussycat.jp","pya.jp","raindrop.jp","readymade.jp","sadist.jp","schoolbus.jp","secret.jp","staba.jp","stripper.jp","sub.jp","sunnyday.jp","thick.jp","tonkotsu.jp","under.jp","upper.jp","velvet.jp","verse.jp","versus.jp","vivian.jp","watson.jp","weblike.jp","whitesnow.jp","zombie.jp","heteml.net","cloudapps.digital","london.cloudapps.digital","pymnt.uk","homeoffice.gov.uk","ro.im","goip.de","run.app","a.run.app","web.app","*.0emm.com","appspot.com","*.r.appspot.com","codespot.com","googleapis.com","googlecode.com","pagespeedmobilizer.com","publishproxy.com","withgoogle.com","withyoutube.com","*.gateway.dev","cloud.goog","translate.goog","*.usercontent.goog","cloudfunctions.net","blogspot.ae","blogspot.al","blogspot.am","blogspot.ba","blogspot.be","blogspot.bg","blogspot.bj","blogspot.ca","blogspot.cf","blogspot.ch","blogspot.cl","blogspot.co.at","blogspot.co.id","blogspot.co.il","blogspot.co.ke","blogspot.co.nz","blogspot.co.uk","blogspot.co.za","blogspot.com","blogspot.com.ar","blogspot.com.au","blogspot.com.br","blogspot.com.by","blogspot.com.co","blogspot.com.cy","blogspot.com.ee","blogspot.com.eg","blogspot.com.es","blogspot.com.mt","blogspot.com.ng","blogspot.com.tr","blogspot.com.uy","blogspot.cv","blogspot.cz","blogspot.de","blogspot.dk","blogspot.fi","blogspot.fr","blogspot.gr","blogspot.hk","blogspot.hr","blogspot.hu","blogspot.ie","blogspot.in","blogspot.is","blogspot.it","blogspot.jp","blogspot.kr","blogspot.li","blogspot.lt","blogspot.lu","blogspot.md","blogspot.mk","blogspot.mr","blogspot.mx","blogspot.my","blogspot.nl","blogspot.no","blogspot.pe","blogspot.pt","blogspot.qa","blogspot.re","blogspot.ro","blogspot.rs","blogspot.ru","blogspot.se","blogspot.sg","blogspot.si","blogspot.sk","blogspot.sn","blogspot.td","blogspot.tw","blogspot.ug","blogspot.vn","goupile.fr","gov.nl","awsmppl.com","günstigbestellen.de","günstigliefern.de","fin.ci","free.hr","caa.li","ua.rs","conf.se","hs.zone","hs.run","hashbang.sh","hasura.app","hasura-app.io","pages.it.hs-heilbronn.de","hepforge.org","herokuapp.com","herokussl.com","ravendb.cloud","myravendb.com","ravendb.community","ravendb.me","development.run","ravendb.run","homesklep.pl","secaas.hk","hoplix.shop","orx.biz","biz.gl","col.ng","firm.ng","gen.ng","ltd.ng","ngo.ng","edu.scot","sch.so","hostyhosting.io","häkkinen.fi","*.moonscale.io","moonscale.net","iki.fi","ibxos.it","iliadboxos.it","impertrixcdn.com","impertrix.com","smushcdn.com","wphostedmail.com","wpmucdn.com","tempurl.host","wpmudev.host","dyn-berlin.de","in-berlin.de","in-brb.de","in-butter.de","in-dsl.de","in-dsl.net","in-dsl.org","in-vpn.de","in-vpn.net","in-vpn.org","biz.at","info.at","info.cx","ac.leg.br","al.leg.br","am.leg.br","ap.leg.br","ba.leg.br","ce.leg.br","df.leg.br","es.leg.br","go.leg.br","ma.leg.br","mg.leg.br","ms.leg.br","mt.leg.br","pa.leg.br","pb.leg.br","pe.leg.br","pi.leg.br","pr.leg.br","rj.leg.br","rn.leg.br","ro.leg.br","rr.leg.br","rs.leg.br","sc.leg.br","se.leg.br","sp.leg.br","to.leg.br","pixolino.com","na4u.ru","iopsys.se","ipifony.net","iservschule.de","mein-iserv.de","schulplattform.de","schulserver.de","test-iserv.de","iserv.dev","iobb.net","mel.cloudlets.com.au","cloud.interhostsolutions.be","users.scale.virtualcloud.com.br","mycloud.by","alp1.ae.flow.ch","appengine.flow.ch","es-1.axarnet.cloud","diadem.cloud","vip.jelastic.cloud","jele.cloud","it1.eur.aruba.jenv-aruba.cloud","it1.jenv-aruba.cloud","keliweb.cloud","cs.keliweb.cloud","oxa.cloud","tn.oxa.cloud","uk.oxa.cloud","primetel.cloud","uk.primetel.cloud","ca.reclaim.cloud","uk.reclaim.cloud","us.reclaim.cloud","ch.trendhosting.cloud","de.trendhosting.cloud","jele.club","amscompute.com","clicketcloud.com","dopaas.com","hidora.com","paas.hosted-by-previder.com","rag-cloud.hosteur.com","rag-cloud-ch.hosteur.com","jcloud.ik-server.com","jcloud-ver-jpc.ik-server.com","demo.jelastic.com","kilatiron.com","paas.massivegrid.com","jed.wafaicloud.com","lon.wafaicloud.com","ryd.wafaicloud.com","j.scaleforce.com.cy","jelastic.dogado.eu","fi.cloudplatform.fi","demo.datacenter.fi","paas.datacenter.fi","jele.host","mircloud.host","paas.beebyte.io","sekd1.beebyteapp.io","jele.io","cloud-fr1.unispace.io","jc.neen.it","cloud.jelastic.open.tim.it","jcloud.kz","upaas.kazteleport.kz","cloudjiffy.net","fra1-de.cloudjiffy.net","west1-us.cloudjiffy.net","jls-sto1.elastx.net","jls-sto2.elastx.net","jls-sto3.elastx.net","faststacks.net","fr-1.paas.massivegrid.net","lon-1.paas.massivegrid.net","lon-2.paas.massivegrid.net","ny-1.paas.massivegrid.net","ny-2.paas.massivegrid.net","sg-1.paas.massivegrid.net","jelastic.saveincloud.net","nordeste-idc.saveincloud.net","j.scaleforce.net","jelastic.tsukaeru.net","sdscloud.pl","unicloud.pl","mircloud.ru","jelastic.regruhosting.ru","enscaled.sg","jele.site","jelastic.team","orangecloud.tn","j.layershift.co.uk","phx.enscaled.us","mircloud.us","myjino.ru","*.hosting.myjino.ru","*.landing.myjino.ru","*.spectrum.myjino.ru","*.vps.myjino.ru","jotelulu.cloud","*.triton.zone","*.cns.joyent.com","js.org","kaas.gg","khplay.nl","ktistory.com","kapsi.fi","keymachine.de","kinghost.net","uni5.net","knightpoint.systems","koobin.events","oya.to","kuleuven.cloud","ezproxy.kuleuven.be","co.krd","edu.krd","krellian.net","webthings.io","git-repos.de","lcube-server.de","svn-repos.de","leadpages.co","lpages.co","lpusercontent.com","lelux.site","co.business","co.education","co.events","co.financial","co.network","co.place","co.technology","app.lmpm.com","linkyard.cloud","linkyard-cloud.ch","members.linode.com","*.nodebalancer.linode.com","*.linodeobjects.com","ip.linodeusercontent.com","we.bs","*.user.localcert.dev","localzone.xyz","loginline.app","loginline.dev","loginline.io","loginline.services","loginline.site","servers.run","lohmus.me","krasnik.pl","leczna.pl","lubartow.pl","lublin.pl","poniatowa.pl","swidnik.pl","glug.org.uk","lug.org.uk","lugs.org.uk","barsy.bg","barsy.co.uk","barsyonline.co.uk","barsycenter.com","barsyonline.com","barsy.club","barsy.de","barsy.eu","barsy.in","barsy.info","barsy.io","barsy.me","barsy.menu","barsy.mobi","barsy.net","barsy.online","barsy.org","barsy.pro","barsy.pub","barsy.ro","barsy.shop","barsy.site","barsy.support","barsy.uk","*.magentosite.cloud","mayfirst.info","mayfirst.org","hb.cldmail.ru","cn.vu","mazeplay.com","mcpe.me","mcdir.me","mcdir.ru","mcpre.ru","vps.mcdir.ru","mediatech.by","mediatech.dev","hra.health","miniserver.com","memset.net","messerli.app","*.cloud.metacentrum.cz","custom.metacentrum.cz","flt.cloud.muni.cz","usr.cloud.muni.cz","meteorapp.com","eu.meteorapp.com","co.pl","*.azurecontainer.io","azurewebsites.net","azure-mobile.net","cloudapp.net","azurestaticapps.net","1.azurestaticapps.net","centralus.azurestaticapps.net","eastasia.azurestaticapps.net","eastus2.azurestaticapps.net","westeurope.azurestaticapps.net","westus2.azurestaticapps.net","csx.cc","mintere.site","forte.id","mozilla-iot.org","bmoattachments.org","net.ru","org.ru","pp.ru","hostedpi.com","customer.mythic-beasts.com","caracal.mythic-beasts.com","fentiger.mythic-beasts.com","lynx.mythic-beasts.com","ocelot.mythic-beasts.com","oncilla.mythic-beasts.com","onza.mythic-beasts.com","sphinx.mythic-beasts.com","vs.mythic-beasts.com","x.mythic-beasts.com","yali.mythic-beasts.com","cust.retrosnub.co.uk","ui.nabu.casa","pony.club","of.fashion","in.london","of.london","from.marketing","with.marketing","for.men","repair.men","and.mom","for.mom","for.one","under.one","for.sale","that.win","from.work","to.work","cloud.nospamproxy.com","netlify.app","4u.com","ngrok.io","nh-serv.co.uk","nfshost.com","*.developer.app","noop.app","*.northflank.app","*.build.run","*.code.run","*.database.run","*.migration.run","noticeable.news","dnsking.ch","mypi.co","n4t.co","001www.com","ddnslive.com","myiphost.com","forumz.info","16-b.it","32-b.it","64-b.it","soundcast.me","tcp4.me","dnsup.net","hicam.net","now-dns.net","ownip.net","vpndns.net","dynserv.org","now-dns.org","x443.pw","now-dns.top","ntdll.top","freeddns.us","crafting.xyz","zapto.xyz","nsupdate.info","nerdpol.ovh","blogsyte.com","brasilia.me","cable-modem.org","ciscofreak.com","collegefan.org","couchpotatofries.org","damnserver.com","ddns.me","ditchyourip.com","dnsfor.me","dnsiskinky.com","dvrcam.info","dynns.com","eating-organic.net","fantasyleague.cc","geekgalaxy.com","golffan.us","health-carereform.com","homesecuritymac.com","homesecuritypc.com","hopto.me","ilovecollege.info","loginto.me","mlbfan.org","mmafan.biz","myactivedirectory.com","mydissent.net","myeffect.net","mymediapc.net","mypsx.net","mysecuritycamera.com","mysecuritycamera.net","mysecuritycamera.org","net-freaks.com","nflfan.org","nhlfan.net","no-ip.ca","no-ip.co.uk","no-ip.net","noip.us","onthewifi.com","pgafan.net","point2this.com","pointto.us","privatizehealthinsurance.net","quicksytes.com","read-books.org","securitytactics.com","serveexchange.com","servehumour.com","servep2p.com","servesarcasm.com","stufftoread.com","ufcfan.org","unusualperson.com","workisboring.com","3utilities.com","bounceme.net","ddns.net","ddnsking.com","gotdns.ch","hopto.org","myftp.biz","myftp.org","myvnc.com","no-ip.biz","no-ip.info","no-ip.org","noip.me","redirectme.net","servebeer.com","serveblog.net","servecounterstrike.com","serveftp.com","servegame.com","servehalflife.com","servehttp.com","serveirc.com","serveminecraft.net","servemp3.com","servepics.com","servequake.com","sytes.net","webhop.me","zapto.org","stage.nodeart.io","pcloud.host","nyc.mn","static.observableusercontent.com","cya.gg","omg.lol","cloudycluster.net","omniwe.site","service.one","nid.io","opensocial.site","opencraft.hosting","orsites.com","operaunite.com","tech.orange","authgear-staging.com","authgearapps.com","skygearapp.com","outsystemscloud.com","*.webpaas.ovh.net","*.hosting.ovh.net","ownprovider.com","own.pm","*.owo.codes","ox.rs","oy.lc","pgfog.com","pagefrontapp.com","pagexl.com","*.paywhirl.com","bar0.net","bar1.net","bar2.net","rdv.to","art.pl","gliwice.pl","krakow.pl","poznan.pl","wroc.pl","zakopane.pl","pantheonsite.io","gotpantheon.com","mypep.link","perspecta.cloud","lk3.ru","on-web.fr","bc.platform.sh","ent.platform.sh","eu.platform.sh","us.platform.sh","*.platformsh.site","*.tst.site","platter-app.com","platter-app.dev","platterp.us","pdns.page","plesk.page","pleskns.com","dyn53.io","onporter.run","co.bn","postman-echo.com","pstmn.io","mock.pstmn.io","httpbin.org","prequalifyme.today","xen.prgmr.com","priv.at","prvcy.page","*.dweb.link","protonet.io","chirurgiens-dentistes-en-france.fr","byen.site","pubtls.org","pythonanywhere.com","eu.pythonanywhere.com","qoto.io","qualifioapp.com","qbuser.com","cloudsite.builders","instances.spawn.cc","instantcloud.cn","ras.ru","qa2.com","qcx.io","*.sys.qcx.io","dev-myqnapcloud.com","alpha-myqnapcloud.com","myqnapcloud.com","*.quipelements.com","vapor.cloud","vaporcloud.io","rackmaze.com","rackmaze.net","g.vbrplsbx.io","*.on-k3s.io","*.on-rancher.cloud","*.on-rio.io","readthedocs.io","rhcloud.com","app.render.com","onrender.com","repl.co","id.repl.co","repl.run","resindevice.io","devices.resinstaging.io","hzc.io","wellbeingzone.eu","wellbeingzone.co.uk","adimo.co.uk","itcouldbewor.se","git-pages.rit.edu","rocky.page","биз.рус","ком.рус","крым.рус","мир.рус","мск.рус","орг.рус","самара.рус","сочи.рус","спб.рус","я.рус","*.builder.code.com","*.dev-builder.code.com","*.stg-builder.code.com","sandcats.io","logoip.de","logoip.com","fr-par-1.baremetal.scw.cloud","fr-par-2.baremetal.scw.cloud","nl-ams-1.baremetal.scw.cloud","fnc.fr-par.scw.cloud","functions.fnc.fr-par.scw.cloud","k8s.fr-par.scw.cloud","nodes.k8s.fr-par.scw.cloud","s3.fr-par.scw.cloud","s3-website.fr-par.scw.cloud","whm.fr-par.scw.cloud","priv.instances.scw.cloud","pub.instances.scw.cloud","k8s.scw.cloud","k8s.nl-ams.scw.cloud","nodes.k8s.nl-ams.scw.cloud","s3.nl-ams.scw.cloud","s3-website.nl-ams.scw.cloud","whm.nl-ams.scw.cloud","k8s.pl-waw.scw.cloud","nodes.k8s.pl-waw.scw.cloud","s3.pl-waw.scw.cloud","s3-website.pl-waw.scw.cloud","scalebook.scw.cloud","smartlabeling.scw.cloud","dedibox.fr","schokokeks.net","gov.scot","service.gov.scot","scrysec.com","firewall-gateway.com","firewall-gateway.de","my-gateway.de","my-router.de","spdns.de","spdns.eu","firewall-gateway.net","my-firewall.org","myfirewall.org","spdns.org","seidat.net","sellfy.store","senseering.net","minisite.ms","magnet.page","biz.ua","co.ua","pp.ua","shiftcrypto.dev","shiftcrypto.io","shiftedit.io","myshopblocks.com","myshopify.com","shopitsite.com","shopware.store","mo-siemens.io","1kapp.com","appchizi.com","applinzi.com","sinaapp.com","vipsinaapp.com","siteleaf.net","bounty-full.com","alpha.bounty-full.com","beta.bounty-full.com","small-web.org","vp4.me","try-snowplow.com","srht.site","stackhero-network.com","musician.io","novecore.site","static.land","dev.static.land","sites.static.land","storebase.store","vps-host.net","atl.jelastic.vps-host.net","njs.jelastic.vps-host.net","ric.jelastic.vps-host.net","playstation-cloud.com","apps.lair.io","*.stolos.io","spacekit.io","customer.speedpartner.de","myspreadshop.at","myspreadshop.com.au","myspreadshop.be","myspreadshop.ca","myspreadshop.ch","myspreadshop.com","myspreadshop.de","myspreadshop.dk","myspreadshop.es","myspreadshop.fi","myspreadshop.fr","myspreadshop.ie","myspreadshop.it","myspreadshop.net","myspreadshop.nl","myspreadshop.no","myspreadshop.pl","myspreadshop.se","myspreadshop.co.uk","api.stdlib.com","storj.farm","utwente.io","soc.srcf.net","user.srcf.net","temp-dns.com","supabase.co","supabase.in","supabase.net","su.paba.se","*.s5y.io","*.sensiosite.cloud","syncloud.it","dscloud.biz","direct.quickconnect.cn","dsmynas.com","familyds.com","diskstation.me","dscloud.me","i234.me","myds.me","synology.me","dscloud.mobi","dsmynas.net","familyds.net","dsmynas.org","familyds.org","vpnplus.to","direct.quickconnect.to","tabitorder.co.il","taifun-dns.de","beta.tailscale.net","ts.net","gda.pl","gdansk.pl","gdynia.pl","med.pl","sopot.pl","site.tb-hosting.com","edugit.io","s3.teckids.org","telebit.app","telebit.io","*.telebit.xyz","gwiddle.co.uk","*.firenet.ch","*.svc.firenet.ch","reservd.com","thingdustdata.com","cust.dev.thingdust.io","cust.disrec.thingdust.io","cust.prod.thingdust.io","cust.testing.thingdust.io","reservd.dev.thingdust.io","reservd.disrec.thingdust.io","reservd.testing.thingdust.io","tickets.io","arvo.network","azimuth.network","tlon.network","torproject.net","pages.torproject.net","bloxcms.com","townnews-staging.com","tbits.me","12hp.at","2ix.at","4lima.at","lima-city.at","12hp.ch","2ix.ch","4lima.ch","lima-city.ch","trafficplex.cloud","de.cool","12hp.de","2ix.de","4lima.de","lima-city.de","1337.pictures","clan.rip","lima-city.rocks","webspace.rocks","lima.zone","*.transurl.be","*.transurl.eu","*.transurl.nl","site.transip.me","tuxfamily.org","dd-dns.de","diskstation.eu","diskstation.org","dray-dns.de","draydns.de","dyn-vpn.de","dynvpn.de","mein-vigor.de","my-vigor.de","my-wan.de","syno-ds.de","synology-diskstation.de","synology-ds.de","typedream.app","pro.typeform.com","uber.space","*.uberspace.de","hk.com","hk.org","ltd.hk","inc.hk","name.pm","sch.tf","biz.wf","sch.wf","org.yt","virtualuser.de","virtual-user.de","upli.io","urown.cloud","dnsupdate.info","lib.de.us","2038.io","vercel.app","vercel.dev","now.sh","router.management","v-info.info","voorloper.cloud","neko.am","nyaa.am","be.ax","cat.ax","es.ax","eu.ax","gg.ax","mc.ax","us.ax","xy.ax","nl.ci","xx.gl","app.gp","blog.gt","de.gt","to.gt","be.gy","cc.hn","blog.kg","io.kg","jp.kg","tv.kg","uk.kg","us.kg","de.ls","at.md","de.md","jp.md","to.md","indie.porn","vxl.sh","ch.tc","me.tc","we.tc","nyan.to","at.vg","blog.vu","dev.vu","me.vu","v.ua","*.vultrobjects.com","wafflecell.com","*.webhare.dev","reserve-online.net","reserve-online.com","bookonline.app","hotelwithflight.com","wedeploy.io","wedeploy.me","wedeploy.sh","remotewd.com","pages.wiardweb.com","wmflabs.org","toolforge.org","wmcloud.org","panel.gg","daemon.panel.gg","messwithdns.com","woltlab-demo.com","myforum.community","community-pro.de","diskussionsbereich.de","community-pro.net","meinforum.net","affinitylottery.org.uk","raffleentry.org.uk","weeklylottery.org.uk","wpenginepowered.com","js.wpenginepowered.com","wixsite.com","editorx.io","half.host","xnbay.com","u2.xnbay.com","u2-local.xnbay.com","cistron.nl","demon.nl","xs4all.space","yandexcloud.net","storage.yandexcloud.net","website.yandexcloud.net","official.academy","yolasite.com","ybo.faith","yombo.me","homelink.one","ybo.party","ybo.review","ybo.science","ybo.trade","ynh.fr","nohost.me","noho.st","za.net","za.org","bss.design","basicserver.io","virtualserver.io","enterprisecloud.nu"]')}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.u=function(e){if(348===e)return"voxeet-dvwc-worker.js"},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.p="",n.b=typeof document!=='undefined'?document.baseURI||self.location.href:'';var r={};return function(){"use strict";n.d(r,{default:function(){return jp}});var e={};n.r(e),n.d(e,{VideoPresentationPause:function(){return b},VideoPresentationPlay:function(){return w},VideoPresentationSeek:function(){return k},VideoPresentationStarted:function(){return y},VideoPresentationStopped:function(){return _}});var t={};n.r(t),n.d(t,{FileConversionProgress:function(){return x},FileConverted:function(){return I},FilePresentationStarted:function(){return E},FilePresentationStopped:function(){return T},FilePresentationUpdated:function(){return C}});var i={};n.r(i),n.d(i,{ActiveSpeakerChange:function(){return Z},BandwidthRestrictionChanged:function(){return ne},ConferenceDestroyed:function(){return Y},ConferenceEnded:function(){return V},ConferenceGlobalError:function(){return B},ConferenceGlobalTrace:function(){return W},ConferenceJoined:function(){return A},ConferenceJoining:function(){return D},ConferenceLeaving:function(){return U},ConferenceLeft:function(){return N},ConferenceStats:function(){return O},ConferenceVideoFilterUpdate:function(){return J},DvcsMetric:function(){return $},OfferCreated:function(){return F},OwnParticipantSwitched:function(){return H},ParticipantAdded:function(){return L},ParticipantKicked:function(){return K},ParticipantSwitched:function(){return G},ParticipantUpdated:function(){return z},RtsStatusUpdated:function(){return re},StreamAdded:function(){return Q},StreamRemoved:function(){return ee},StreamUpdated:function(){return te},UpdateToken:function(){return X},UserAction:function(){return ie},VideoForwardedChanged:function(){return q}});var o={};n.r(o),n.d(o,{RecordingStatusUpdated:function(){return oe}});var a={};n.r(a),n.d(a,{ConferenceMessageReceived:function(){return ae}});var s={};n.r(s),n.d(s,{ActiveParticipants:function(){return ye},ConferenceCreatedNotification:function(){return pe},ConferenceEndedNotification:function(){return fe},ConferenceStatusNotification:function(){return me},InvitationReceived:function(){return he},ParticipantJoinedNotification:function(){return ge},ParticipantLeftNotification:function(){return ve}});var c={};n.r(c),n.d(c,{SessionClosed:function(){return we},SessionOpened:function(){return _e}});var u={};n.r(u),n.d(u,{LocalVideoStarted:function(){return be},LocalVideoStopped:function(){return ke},LocalVideoUpdated:function(){return Se}});var d={};n.r(d),n.d(d,{AudioUpdated:function(){return Ee}});var l,h,p,f=n(7187),m=n.n(f);class g{constructor(e){this.type=e}}class v extends g{constructor(e,t,n){super(e),this.conferenceId=t,this.userId=n}}class y extends v{constructor(e){super(Ce.VideoPresentationStarted,e.conferenceId,e.userId),this.url=e.url,this.timestamp=e.timestamp}static fromData(e){return new y(Object.assign({},e))}}class _ extends v{constructor(e){super(Ce.VideoPresentationStopped,e.conferenceId,e.userId)}static fromData(e){return new _(Object.assign({},e))}}class w extends v{constructor(e){super(Ce.VideoPresentationPlay,e.conferenceId,e.userId),this.timestamp=e.timestamp}static fromData(e){return new w(Object.assign({},e))}}class b extends v{constructor(e){super(Ce.VideoPresentationPause,e.conferenceId,e.userId),this.timestamp=e.timestamp}static fromData(e){return new b(Object.assign({},e))}}class k extends v{constructor(e){super(Ce.VideoPresentationSeek,e.conferenceId,e.userId),this.timestamp=e.timestamp}static fromData(e){return new k(Object.assign({},e))}}class S{constructor(e){this.position=0,this.id=e}}class E extends g{constructor(e){super(Ce.FilePresentationStarted),this.file=e}static fromData(e){const t=new S(e.fileId);return t.imageCount=e.imageCount,t.position=e.position,t.ownerId=e.userId,new E(t)}}class T extends g{constructor(e){super(Ce.FilePresentationStopped),this.file=e}static fromData(e){const t=new S(e.fileId);return t.ownerId=e.userId,new T(t)}}class C extends g{constructor(e){super(Ce.FilePresentationUpdated),this.file=e}static fromData(e){const t=new S(e.fileId);return t.ownerId=e.userId,t.position=e.position,new C(t)}}class j{constructor(e,t,n,r,i){this.userId=e,this.fileId=t,this.currentStep=n,this.stepCount=r,this.progress=i}}class x extends g{constructor(e){super(Ce.FileConversionProgress),this.fileConversion=e}static fromData(e){const t=new j(e.userId,e.fileId,e.currentStep,e.stepCount,e.progress);return new x(t)}}class P{constructor(e,t){this.id=e,this.imageCount=t}}class I extends g{constructor(){super(Ce.FileConverted),this.files=[]}static fromData(e){const t=new I;return t.error=e.error||"",e.files&&e.files.forEach((e=>{const n=new P(e.fileId,e.nbImageConverted);n.name=e.filename,n.size=e.filesize,n.ownerId=e.owner,t.files.push(n)})),t}}class M{constructor(){}static fromJoinData(e){const t=new M;return t.currentLanguage=e.currentLanguage,t.dolbyVoice="true"===e.dolbyVoice,t.liveRecording=e.liveRecording,t.mode=e.mode,t.rtcpMode=e.rtcpMode,t.stats=e.stats,t.ttl=e.ttl,t.videoCodec=e.videoCodec,t.spatialAudioStyle=e.spatialAudioStyle,t}}!function(e){e.Regular="regular",e.Mixed="mixed"}(l||(l={}));class R{}!function(e){e.None="none",e.SendOnly="sendonly",e.RecvOnly="recvonly",e.SendRecv="sendrecv"}(h||(h={}));class A extends g{constructor(){super(Ce.ConferenceJoined)}static fromData(e){const t=new A;return t.conferenceId=e&&e.conferenceId?e.conferenceId:null,t.recordingStatus=e.recordingStatus,t.recordingParticipant=e.recordingUser,t.recordingStartTimestamp=e.startRecordTimestamp,t.parameters=M.fromJoinData(e.metadata),t.listenOnly=e.listenOnly,t}isJoinedAsRTSViewer(){var e;return(null===(e=this.listenOnly)||void 0===e?void 0:e.type)===l.Mixed}}class D extends g{constructor(e){super(Ce.ConferenceJoining),this.conferenceId=e}}class O extends g{constructor(){super(Ce.ConferenceStats)}static fromData(e){const t=new O;return t.stats=e.participantStats,t}}class N extends g{constructor(){super(Ce.ConferenceLeft)}static fromData(e){const t=new N;return t.stateDump=e,t}}class F extends g{constructor(){super(Ce.OfferCreated)}withMaster(e){return this.master=e,this}withUserId(e){return this.userId=e,this}withConferenceId(e){return this.conferenceId=e,this}withDescription(e){return this.description=e,this}withCandidates(e){return this.candidates=e,this}withState(e){return this.state=e,this}static fromData(e){return(new F).withMaster(e.master).withUserId(e.user_id).withConferenceId(e.conference_id).withDescription(e.description).withCandidates(e.candidates).withState(e.state)}}class L extends g{constructor(){super(Ce.ParticipantAdded)}static fromData(e){const t=new L;return t.userId=e.user_id,t.externalId=e.externalId,t.name=e.name,t.avatarUrl=e.avatarUrl,t.status=e.status,t.metadata=e.metadata,t.participantType=e.participantType,t.audio=e.audio||!1,t.audioReceivingStopped=e.audioReceivingStopped||!1,t.video=(null==e?void 0:e.video)||!1,t}}class z extends g{constructor(){super(Ce.ParticipantUpdated)}static fromData(e){const t=new z;return t.userId=e.user_id,t.status=e.status,t.participantType=e.participantType,t.audio=e.audio,t.audioReceivingStopped=e.audioReceivingStopped,t.name=e.name,t.avatarUrl=e.avatarUrl,t.externalId=e.externalId,t.video=(null==e?void 0:e.video)||!1,t}static fromParticipant(e){const t=new z;return t.userId=e.id,t.status=e.status,t.participantType=e.type,t.externalId=e.info.externalId,t.name=e.info.name,t.avatarUrl=e.info.avatarUrl,t.audio=e.audioTransmitting||!1,t.video=e.videoTransmitting||!1,t}}class U extends g{constructor(){super(Ce.ConferenceLeaving)}}class V extends g{constructor(){super(Ce.ConferenceEnded)}}class B extends g{constructor(e,t){super(Ce.ConferenceGlobalError),this.error=e,t&&(this.code=t)}static fromData(e,t){return new B(e,t)}}class W extends g{constructor(e){super(Ce.ConferenceGlobalTrace),e.description&&(this.description=e.description),this.data=e.data,this.api=e.api,this.ts=Date.now()}static fromData(e){return new W(e)}}class G extends g{constructor(){super(Ce.ParticipantSwitched)}static fromData(e){const t=new G;return t.userId=e.user_id,t}}class H extends g{constructor(){super(Ce.OwnParticipantSwitched)}}class Y extends g{constructor(){super(Ce.ConferenceDestroyed)}static fromData(e){const t=new Y;return t.conferenceId=e.conferenceId,t.conferenceAlias=e.conferenceAlias,t}}class $ extends g{constructor(){super(Ce.DvcsMetric)}static fromData(e){const t=new $;return t.name=e.name,t.userId=e.userId,t.value=e.value,t}}class Z extends g{constructor(){super(Ce.ActiveSpeakerChange),this.speakers=[],this.conferenceId=""}static fromData(e){const t=new Z;return t.speakers=e.activeSpeakers,t.conferenceId=e.conferenceId,t}}class q extends g{constructor(){super(Ce.VideoForwardedChanged),this.videoForwardedId=[],this.conferenceId=""}static fromData(e){const t=new q;return t.videoForwardedId=e.videoForwardedId,t.conferenceId=e.conferenceId,t}}class X extends g{constructor(){super(Ce.UpdateToken)}static fromData(e){const t=new X;return t.conferenceId=e.conferenceId,t.userId=e.userId,t.conferenceAccessToken=e.content.access_token,t}}class K extends g{constructor(){super(Ce.ParticipantKicked)}static fromData(e){const t=new K;return t.userId=e.userId,t.status=e.status,t.participantType=e.participantType,t.audio=e.audio,t.audioReceivingStopped=e.audioReceivingStopped,t}}class J extends g{constructor(){super(Ce.ConferenceVideoFilterUpdate)}static fromData(e){const t=new J;return t.filter=e.filter,t.filterOptions=e.filterOptions?e.filterOptions:{},t}}class Q extends g{constructor(){super(Ce.StreamAdded)}static fromData(e){const t=new Q;return t.peerId=null==e?void 0:e.peerId,t.stream=null==e?void 0:e.stream,t}}class ee extends g{constructor(){super(Ce.StreamRemoved)}static fromData(e){const t=new ee;return t.peerId=null==e?void 0:e.peerId,t.stream=null==e?void 0:e.stream,t}}class te extends g{constructor(){super(Ce.StreamUpdated)}static fromData(e){const t=new te;return t.peerId=null==e?void 0:e.peerId,t.stream=null==e?void 0:e.stream,t}}class ne extends g{constructor(){super(Ce.BandwidthRestrictionChanged)}static fromData(e){const t=new ne;return t.bandwidth=null==e?void 0:e.bandwidth,t}}class re extends g{constructor(){super(Ce.RtsStatusUpdated)}static fromData(e){const t=new re;return t.status=e.status,t.streamName=e.streamName,t.streamAccountId=e.streamAccountId,t.subscribeToken=e.subscribeToken,t.conferenceId=e.conferenceId,t}}class ie extends g{constructor(e){super(Ce.UserAction),this.level=e.level,this.action=e.action,this.description=e.description,this.component=e.component,this.api=e.api,this.payload=e.payload,this.timestamp=e.timestamp}static fromData(e){return new ie(e)}}class oe extends g{constructor(){super(Ce.RecordingStatusUpdated)}static fromData(e){const t=new oe;return t.participantId=e.user_id,t.status=e.recording_status,t.startTimestamp=e.start_record_timestamp,t}static fromJoinEvent(e){const t=new oe;return t.participantId=e.recordingParticipant,t.status=e.recordingStatus,t.startTimestamp=e.recordingStartTimestamp,t}}class ae extends g{constructor(){super(Ce.ConferenceMessageReceived)}static fromData(e){const t=new ae;return t.message=e.message,t.conferenceId=e.conference_id,t.participantId=e.user_id,t}}!function(e){e.USER="user",e.SPEAKER="speaker",e.LISTENER="listener",e.DOLBYVOICE="dolbyVoice",e.PSTN="pstn",e.MIXER="mixer",e.NONE="none",e.ROBOT="robot",e.MIXER_MIX="mixer_mix"}(p||(p={}));const se=e=>{switch(e){case"USER":default:return p.USER;case"SPEAKER":return p.SPEAKER;case"LISTENER":return p.LISTENER;case"MIXER":return p.MIXER;case"NONE":return p.NONE;case"ROBOT":return p.ROBOT;case"DOLBYVOICE":return p.DOLBYVOICE;case"MIXER_MIX":return p.MIXER_MIX}};var ce;!function(e){e.RESERVED="Reserved",e.INACTIVE="Inactive",e.DECLINE="Decline",e.CONNECTING="Connecting",e.CONNECTED="Connected",e.LEFT="Left",e.WARNING="Warning",e.ERROR="Error",e.KICKED="Kicked"}(ce||(ce={}));const ue=e=>{switch(e){case"RESERVED":return ce.RESERVED;case"INACTIVE":return ce.INACTIVE;case"DECLINE":return ce.DECLINE;case"CONNECTING":default:return ce.CONNECTING;case"ON_AIR":case"CONNECTED":return ce.CONNECTED;case"LEFT":return ce.LEFT;case"WARNING":return ce.WARNING;case"ERROR":return ce.ERROR;case"KICKED":return ce.KICKED}};var de;!function(e){e.Status="status"}(de||(de={}));class le extends f.EventEmitter{constructor(e,t="CONNECTING",n="USER"){super(),this.info=new R,this.streams=new Array,this.audioQuality=-1,this.audioTransmitting=!1,this.videoTransmitting=!1,this._audioReceivingStopped=!1,this.id=e,this.status=ue(t),this.type=se(n)}init(e){this.updateStatus(e.status),this.info=new R,this.info.name=e.name,this.info.externalId=e.externalId,this.info.avatarUrl=e.avatarUrl,this.audioTransmitting=e.audio,this._audioReceivingStopped=e.audioReceivingStopped,this.metadata=e.metadata,this.level=0,this.active=!1,this.type=se(e.participantType),this.videoTransmitting=(null==e?void 0:e.video)||!1}update(e){this.updateStatus(e.status),this.updateType(e.participantType),this.updateAudioReceivingStopped(e.audioReceivingStopped||!1),this.updateName(e.name),this.updateAvatarUrl(e.avatarUrl),this.updateExternalId(e.externalId),this.updateVideoTransmitting((null==e?void 0:e.video)||!1)}updateAudioTransmitting(e){this.audioTransmitting=e||!1}updateVideoTransmitting(e){this.videoTransmitting=e||!1}updateAudioReceivingStopped(e){this._audioReceivingStopped=e||!1}get audioReceivingFrom(){return this.audioTransmitting&&!this._audioReceivingStopped}get audio(){return this.audioTransmitting}updateType(e){this.type=se(e)}updateStatus(e){const t=this.status;this.status=ue(e),t!==this.status&&this.emit(de.Status)}updateName(e){this.info.name=e}updateAvatarUrl(e){this.info.avatarUrl=e}updateExternalId(e){this.info.externalId=e}}class he extends g{constructor(){super(Ce.InvitationReceived)}static fromData(e){const t=new he;return t.conferenceId=e.conferenceId,t.conferenceAlias=e.confAlias,t.conferenceToken=e.confToken,t.participant=new le(e.inviter.userId,"ON_AIR"),t.participant.info.name=e.inviter.nickName,t.participant.info.externalId=e.inviter.externalId,t.participant.info.avatarUrl=e.inviter.externalAvatarUrl,t}}class pe extends g{constructor(){super(Ce.ConferenceCreatedNotification)}static fromData(e){const t=new pe;return t.conferenceId=e.conference.confId,t.conferenceAlias=e.conference.confAlias,t}}class fe extends g{constructor(){super(Ce.ConferenceEndedNotification)}static fromData(e){const t=new fe;return t.conferenceId=e.conference.confId,t.conferenceAlias=e.conference.confAlias,t}}class me extends g{constructor(){super(Ce.ConferenceStatusNotification),this.participants=new Array}static fromData(e){const t=new me;return t.conferenceId=e.confId,t.conferenceAlias=e.confAlias,t.live=e.live,e.participants.forEach((e=>{const n=new le(e.userId,e.status);n.info.name=e.externalName,n.info.externalId=e.externalId,t.participants.push(n)})),t}}class ge extends g{constructor(){super(Ce.ParticipantJoinedNotification)}static fromData(e){const t=new ge;return t.conferenceId=e.conference.confId,t.conferenceAlias=e.conference.confAlias,t.participant=new le(e.participant.userId,"ON_AIR"),t.participant.info.externalId=e.participant.externalId,t.participant.info.name=e.participant.externalName,t}}class ve extends g{constructor(){super(Ce.ParticipantLeftNotification)}static fromData(e){const t=new ve;return t.conferenceId=e.conference.confId,t.conferenceAlias=e.conference.confAlias,t.participant=new le(e.participant.userId,"LEFT"),t.participant.info.externalId=e.participant.externalId,t.participant.info.name=e.participant.externalName,t}}class ye extends g{constructor(){super(Ce.ActiveParticipants),this.participants=[],this.participantCount=0,this.viewerCount=0}static fromData(e){const t=new ye;return t.participants=e.participants.map((e=>{const t=new le(e.userId,e.participantStatus,e.participantType);return t.updateName(e.externalName),t.updateExternalId(e.externalId),t})),t.conferenceId=e.conference.confId,t.conferenceAlias=e.conference.confAlias,t.participantCount=e.participantCount===e.participants.length?e.participantCount:e.participants.length,e.viewerCount&&(t.viewerCount=e.viewerCount),t}}class _e extends g{constructor(){super(Ce.SessionOpened)}static fromData(){return new _e}}class we extends g{constructor(){super(Ce.SessionClosed)}static fromData(){return new we}}class be extends g{constructor(){super(Ce.LocalVideoStarted)}static fromData(e){const t=new be;return t.track=null==e?void 0:e.track,t}}class ke extends g{constructor(){super(Ce.LocalVideoStopped)}static fromData(e){const t=new ke;return t.track=null==e?void 0:e.track,t}}class Se extends g{constructor(){super(Ce.LocalVideoUpdated)}static fromData(e){const t=new Se;return t.track=null==e?void 0:e.track,t}}class Ee extends Event{constructor(e,t,n){super(Ce.AudioStopped),this.participant=e,this.previousAudioTransmitting=t,this.audioTransmitting=n}}const Te=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},i),t),e),o),a),s),c),u),d),Ce={};Object.keys(Te).forEach((e=>Ce[e]=e));var je=n(5130),xe=n.n(je);const Pe=xe()("vxt:events");class Ie extends f.EventEmitter{constructor(){super()}register(e,t){t.map((t=>{e.__proto__["on"+t]?this.on(t,e.__proto__["on"+t].bind(e)):e["on"+t]?this.on(t,e["on"+t].bind(e)):this.on(t,(n=>e.emit(t.toString(),n)))}))}send(e){!e&&Pe("Received undefined event"),e&&Pe("EventBus: "+e.type),e&&this.emit(e.type,e)}}const Me=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},i),o),t),e),a),s),c);const Re=new Ie;Re.setMaxListeners(18);var Ae=Re;class De extends Error{constructor(e,t){super(t),this.message=t,this.name=e}}class Oe extends Error{constructor(e,t,n,r){super(t),this.message=t,this.name=e,this.peerId=n,this.underlyingError=r}}class Ne extends Error{constructor(e){super(e.message),this.message=e.message,this.name=e.name,e.constraint&&(this.constraint=e.constraint)}toString(){return this.constraint?`${this.name}: ${this.message} '${this.constraint}'`:`${this.name}: ${this.message}`}}class Fe extends Error{constructor(e){super(e),this.message=e,this.name="MediaError"}}class Le extends Error{constructor(e,t){super(t),this.message=t,this.name=e}}class ze extends Error{constructor(e,t){super(t),this.message=t,this.name=e}}class Ue extends Error{constructor(e){super("ServerError"),this.name="ServerError",this.data=e.response?e.response.data:{},this.status=e.response?e.response.status:"",this.statusText=e.response?e.response.statusText:"",this.code=e.response?e.response.data.error_code:"",this.reason=e.response?e.response.data.error_reason:"",this.description=e.response?e.response.data.error_description:"",this.message=this.description}}class Ve extends Error{constructor(e){super(),this.name="WebSocketError",this.message=e}}class Be extends Error{constructor(e="Your client does not support this functionality."){super(),this.name="UnsupportedError",this.message=e}}class We extends Error{constructor(e){super(),this.name="VideoForwardingError",this.message=e}}class Ge extends Error{constructor(e){super(),this.name="SpatialAudioError",this.message=e}}class He extends Error{constructor(e){super(e),this.name="VideoServiceError",this.message=e}}class Ye extends Error{constructor(e){super(),this.name="ParameterError",this.message=e}}class $e extends Error{constructor(e){super(),this.message=e,this.name="SessionError"}}class Ze extends Error{constructor(e,t){super(),this.message=`Failed to select ${t} device. Reason: ${e}`,this.name="DeviceChangeError"}}class qe extends Error{constructor(e,t){super(),this.message=t,this.name=e}}const Xe=e=>new Oe("NotFoundError","Unable to find peer.",e),Ke=e=>new Oe("InvalidPeerOfferError","Received an offer with media description for invalid peerId: "+e),Je=()=>new De("InsufficientPermissionsError","Insufficient permissions for this operation"),Qe=e=>new Oe("PeerConnectionFailedError","Peer connection has failed to connect.",e),et=()=>new De("UninitializedError","Conference is not initialized."),tt=()=>new $e("Refresh token is null or undefined, please check your callback."),nt=(e,t)=>new Oe("DataChannelError","Data channel connection failed. Reason: "+t,e),rt=(e,t)=>{let n=t||"Video processor exception";return e&&("string"==typeof e||e instanceof String?n+=`, error: "${e}"`:(e.name&&(n+=`, name: "${e.name}"`),e.message&&(n+=`, message: "${e.message}"`))),new He(n)},it=(e,t)=>{let n;switch(e){case 1:n="MEDIA_ERR_ABORTED";break;case 2:n="MEDIA_ERR_NETWORK";break;case 3:n="MEDIA_ERR_DECODE";break;case 4:n="MEDIA_ERR_SRC_NOT_SUPPORTED";break;default:n="UNDEFINED"}return new Ne({name:"AudioRendererError",message:`The error ${n}(${e}) occured while rendering the audio. Error message: '${t}'`})};var ot,at=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},st=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class ct extends f.EventEmitter{constructor(e){super(),this._sdk=e}}class ut extends ct{constructor(e){super(e),ot.set(this,!1),Ae.register(this,[Ce.ConferenceJoined,Ce.ConferenceLeft,Ce.SessionOpened,Ce.SessionClosed])}onConferenceJoined(e){this._conferenceId=e.conferenceId}onConferenceLeft(e){this._conferenceId=null}checkConference(){if(!this._conferenceId)throw et()}onSessionOpened(){at(this,ot,!0,"f")}onSessionClosed(){at(this,ot,!1,"f")}get isSessionOpened(){return st(this,ot,"f")}checkSession(e="Session is not open"){if(!st(this,ot,"f"))throw new $e(e)}}function dt(e){return function(t){let n=function(...n){let r=function(){return new t(...n)};r.prototype=t.prototype;let i=new r;return Ae.register(i,e),i};return n.prototype=t.prototype,n}}ot=new WeakMap;var lt=n(9644),ht=n.n(lt),pt=n(9640),ft=n.n(pt),mt=n(5595);class gt{constructor(e,t,n,r,i,o,a,s,c,u){this.getHost=a,this.map=s,this.accessToken=null,this.conferenceToken=null,this.getToken=t,this.setToken=n,this.getCurrentConferenceToken=o,this.getUserToken=r,this.getRefreshTokenCb=i,this.hashId=e,this.isTokenExpired=c,this.getLeavingCallback=u,"undefined"==typeof global||global.window||(this.cookie=null,this.cookiejar=new mt.US,ht().interceptors.request.use((e=>(this.cookiejar.getCookies(e.url,((t,n)=>{e.headers.cookie=n.join("; ")})),e))),ht().interceptors.response.use((e=>(e.headers["set-cookie"]instanceof Array&&e.headers["set-cookie"].forEach((t=>{const n=mt.Vj.parse(t);"vxtk"===n.key&&(this.cookiejar.setCookie(n,e.config.url,(function(e,t){})),this.cookie=n.value)})),e)))),ht().interceptors.response.use((e=>e),(e=>{const{response:{status:t}}=e;return 401===t?(this.getLeavingCallback(),Promise.reject(e)):Promise.reject(e)})),this.inject()}handleRequest(e,t,n){return r=this,i=void 0,a=function*(){const r=n&&n.data?n.data:{},i=n&&n.queryParams?n.queryParams:{};let o=n&&n.headers?n.headers:{},a=this.getHost()+this.templateUri(e,n)+this.appendQueryParams(i);this.isTokenExpired()&&(yield this.getRefreshTokenCb()),this.accessToken=this.getToken(),this.jwtUserToken=this.getUserToken?this.getUserToken():null,this.conferenceToken=this.getCurrentConferenceToken?this.getCurrentConferenceToken():null,o=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},o),{"Content-Type":"application/json","Voxeet-Id":this.hashId}),this.accessToken&&{Authorization:`Bearer ${this.accessToken}`}),this.jwtUserToken&&{"X-Token":this.jwtUserToken}),this.conferenceToken&&{"X-conf-access-token":this.conferenceToken}),{"X-Request-ID":`${this.hashId}_${Date.now()}_${Math.random().toString(16).slice(2,10)}`});const s={method:t,headers:o,withCredentials:!0};return n&&n.keepAlive?(s.keepalive=!0,s.body=JSON.stringify(r),fetch(a,s)):(s.data=r,s.url=a,ht()(s).then((e=>e)).catch((e=>{throw e.response&&114===e.response.data.error_code?Je():new Ue(e)})))},new((o=void 0)||(o=Promise))((function(e,t){function n(e){try{c(a.next(e))}catch(e){t(e)}}function s(e){try{c(a.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(n,s)}c((a=a.apply(r,i||[])).next())}));var r,i,o,a}appendQueryParams(e){let t=[];for(let n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.length>0?"?"+t.join("&"):""}templateUri(e,t){return e.replace(/\{([^\{\}]+)\}/g,((n,r)=>(t[r]||ft().debug("Failed to find parameter :",r,"for uri: ",e),t[r])))}inject(){this.getCookie=function(){return this.cookie};for(let e in this.map)this[e]=function(t){return this.handleRequest(this.map[e].uri,this.map[e].method,t)}}}class vt{static inject(e,t,n,r,i,o,a,s,c=!1,u,d){const l=vt.generateId(40);for(let h in s)c?(e[h]=new gt(l,t,n,r,i,o,a,s[h],u,d),e.getHashId=function(){return l}):(e.prototype[h]=new gt(l,t,n,r,i,o,a,s[h],u,d),e.prototype.getHashId=function(){return l});return e.prototype.getHashId=function(){return l},e}static byteToHex(e){return("0"+e.toString(16)).slice(-2)}static generateId(e){return Array(e+1).join((Math.random().toString(36)+"00000000000000000").slice(2,18)).slice(0,e)}}var yt=vt;class _t{static getToken(){return _t.accessToken}static setToken(e){_t.accessToken=e}static setAccessTokenExpiration(e){_t.accessTokenExpiration=e}static getJwtToken(){return _t.jwtToken}static setJwtToken(e){_t.jwtToken=e}static getTokenCallback(){return _t.tokenCallback}static getHost(){return _t.host}static getAccessTokenExpiration(){return _t.accessTokenExpiration}static getLeavingCallback(){return _t.leavingCallback}static isTokenExpired(){return _t.accessTokenExpiration-(new Date).getTime()/1e3<0}static setRegion(e){e&&2===e.length&&"devssl"!==this.flavor&&"development"!==this.flavor?(_t.host="staging"===this.flavor?`https://${e}.comms.sdk.staging.dolbyio.com`:`https://${e}.comms.sdk.dolby.io`,_t.wsHost="staging"===this.flavor?`wss://${e}.comms.sdk.staging.dolbyio.com`:`wss://${e}.comms.sdk.dolby.io`):(_t.host="https://comms.sdk.dolby.io",_t.wsHost="wss://comms.sdk.dolby.io")}static getCurrentConferenceToken(){return _t.currentConferenceToken}static setCurrentConferenceToken(e){_t.currentConferenceToken=_t.conferenceTokens.get(e)}static getConferenceToken(e){return _t.conferenceTokens.get(e)}static setConferenceTokens(e,t){_t.conferenceTokens=_t.conferenceTokens.set(e,t)}static clearConferenceTokens(){_t.conferenceTokens.clear()}}_t.conferenceTokens=new Map,_t.host="https://comms.sdk.dolby.io",_t.wsHost="wss://comms.sdk.dolby.io",_t.flavor="production",yt.inject(_t,_t.getToken,_t.setToken,_t.getJwtToken,_t.getTokenCallback,_t.getCurrentConferenceToken,_t.getHost,{version:"2.0",init:{register:{method:"POST",uri:"/v1/oauth2/token"},refresh:{method:"POST",uri:"/v1/oauth2/refresh"},invalidate:{method:"POST",uri:"/v1/oauth2/invalidate"},identify:{method:"POST",uri:"/v2/users/identify"},logout:{method:"POST",uri:"/v1/users/logout"},updateParticipantInfo:{method:"POST",uri:"/v2/users/update"}},conferences:{updatePermissions:{method:"POST",uri:"/v1/conferences/{conferenceId}/permissions"},kick:{method:"POST",uri:"/v1/conferences/{conferenceId}/kick/{peerId}"},invite:{method:"POST",uri:"/v1/conferences/{conferenceId}/invite"},answer:{method:"POST",uri:"/v1/conferences/{conferenceId}/answer/{peerId}"},candidates:{method:"POST",uri:"/v1/conferences/{conferenceId}/candidates/{peerId}"},broadcast:{method:"POST",uri:"/v1/conferences/{conferenceId}/send"},create:{method:"POST",uri:"/v1/conferences/create"},getDemo:{method:"GET",uri:"/v1/conferences/demo"},joinRoom:{method:"POST",uri:"/v1/conferences/{conferenceId}/join"},leave:{method:"POST",uri:"/v1/conferences/{conferenceId}/leave"},videoForwarding:{method:"POST",uri:"/v1/conferences/{conferenceId}/videoforwarding"},stopVideo:{method:"GET",uri:"/v1/conferences/{conferenceId}/video/{peerId}/stop"},startVideo:{method:"GET",uri:"/v1/conferences/{conferenceId}/video/{peerId}/start"},stopMedia:{method:"POST",uri:"/v1/conferences/{conferenceId}/media/{peerId}/stop"},startMedia:{method:"POST",uri:"/v1/conferences/{conferenceId}/media/{peerId}/start"},subscribe:{method:"GET",uri:"/v1/conferences/{conferenceId}/subscribe"},unsubscribe:{method:"DELETE",uri:"/v1/conferences/{conferenceId}/subscribe"},status:{method:"POST",uri:"/v1/conferences/{conferenceId}/status"},postRenegociate:{method:"POST",uri:"/v1/conferences/{conferenceId}/renegociate"},renegociate:{method:"GET",uri:"/v1/conferences/{conferenceId}/renegociate"},startRecording:{method:"POST",uri:"/v1/conferences/{conferenceId}/recording/start"},stopRecording:{method:"GET",uri:"/v1/conferences/{conferenceId}/recording/stop"},replay:{method:"POST",uri:"/v1/conferences/{conferenceId}/replay"},reserve:{method:"POST",uri:"/v1/conferences/{conferenceId}/reserve"},setMode:{method:"POST",uri:"/v1/conferences/{conferenceId}/mode"},mix:{method:"POST",uri:"/v1/conferences/{conferenceId}/mix"},download:{method:"GET",uri:"/v1/conferences/{conferenceId}/download"},mixUrl:{method:"GET",uri:"/v1/conferences/{conferenceId}/url"},wait:{method:"GET",uri:"/v1/conferences/{conferenceId}/wait"},getStats:{method:"GET",uri:"/v1/conferences/{conferenceId}/stats"},simulcast:{method:"POST",uri:"/v1/conferences/{conferenceId}/simulcast"},error:{method:"POST",uri:"/v1/conferences/{conferenceId}/error"},audioUpdate:{method:"POST",uri:"/v1/conferences/{conferenceId}/audio/{peerId}/update"}},screen:{start:{method:"GET",uri:"/v1/conferences/{conferenceId}/sharing/start"},stop:{method:"GET",uri:"/v1/conferences/{conferenceId}/sharing/stop"}},fileshare:{start:{method:"POST",uri:"/v1/conferences/{conferenceId}/filepresentation/start"},update:{method:"POST",uri:"/v1/conferences/{conferenceId}/filepresentation/update"},stop:{method:"POST",uri:"/v1/conferences/{conferenceId}/filepresentation/stop"}},externallive:{start:{method:"POST",uri:"/v1/conferences/mix/{conferenceId}/live/start"},stop:{method:"POST",uri:"/v1/conferences/mix/{conferenceId}/live/stop"}},hls:{start:{method:"POST",uri:"/v1/conferences/mix/{conferenceId}/hls/start"},stop:{method:"POST",uri:"/v1/conferences/mix/{conferenceId}/hls/stop"}},videoshare:{start:{method:"POST",uri:"/v1/conferences/{conferenceId}/videopresentation/start"},stop:{method:"POST",uri:"/v1/conferences/{conferenceId}/videopresentation/stop"},play:{method:"POST",uri:"/v1/conferences/{conferenceId}/videopresentation/play"},pause:{method:"POST",uri:"/v1/conferences/{conferenceId}/videopresentation/pause"},seek:{method:"POST",uri:"/v1/conferences/{conferenceId}/videopresentation/seek"}},tyw:{speaker:{method:"GET",uri:"/v1/conferences/{conferenceId}/speaker"},setMetadata:{method:"POST",uri:"/v1/conferences/{conferenceId}/metadata"}},subscription:{post:{method:"POST",uri:"/v1/subscriptions"},delete:{method:"DELETE",uri:"/v1/subscriptions"}}},!0,_t.isTokenExpired,_t.getLeavingCallback);var wt=_t;class bt{constructor(e,t,n){this.ownerId=e,this.url=t,this.timestamp=n}}var kt,St,Et,Tt,Ct,jt,xt=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Pt=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},It=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},Mt=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};!function(e){e.PLAYING="playing",e.PAUSED="paused",e.STOPPED="stopped"}(Ct||(Ct={})),function(e){e.Started="started",e.Stopped="stopped",e.Played="played",e.Pause="paused",e.Seek="sought"}(jt||(jt={}));let Rt=class extends ut{constructor(e,t){super(e),kt.set(this,void 0),St.set(this,void 0),Et.set(this,void 0),Tt.set(this,!1),It(this,Et,t,"f"),this.clear()}clear(){It(this,kt,null,"f"),It(this,St,Ct.STOPPED,"f")}start(e){return Pt(this,void 0,void 0,(function*(){if(Mt(this,Tt,"f"))return Promise.reject(new Be("A client who joined as a listener cannot start sharing a video file."));yield wt.videoshare.start({conferenceId:this._conferenceId,data:{url:e}})}))}stop(){return Pt(this,void 0,void 0,(function*(){yield wt.videoshare.stop({conferenceId:this._conferenceId})}))}play(){return Pt(this,void 0,void 0,(function*(){yield wt.videoshare.play({conferenceId:this._conferenceId})}))}pause(e){return Pt(this,void 0,void 0,(function*(){yield wt.videoshare.pause({conferenceId:this._conferenceId,data:{timestamp:e}})}))}seek(e){return Pt(this,void 0,void 0,(function*(){yield wt.videoshare.seek({conferenceId:this._conferenceId,data:{timestamp:e}})}))}onVideoPresentationStarted(e){It(this,kt,new bt(e.userId,e.url,e.timestamp),"f"),Mt(this,kt,"f").owner=Mt(this,Et,"f").participants.get(e.userId),It(this,St,Ct.PLAYING,"f"),this.emit(jt.Started,Mt(this,kt,"f"))}onVideoPresentationStopped(e){this.clear(),this.emit(jt.Stopped)}onVideoPresentationPlay(e){It(this,St,Ct.PLAYING,"f"),Mt(this,kt,"f").timestamp=e.timestamp,this.emit(jt.Played,Mt(this,kt,"f"))}onVideoPresentationPause(e){It(this,St,Ct.PAUSED,"f"),Mt(this,kt,"f").timestamp=e.timestamp,this.emit(jt.Pause,Mt(this,kt,"f"))}onVideoPresentationSeek(e){Mt(this,kt,"f").timestamp=e.timestamp,this.emit(jt.Seek,Mt(this,kt,"f"))}get current(){return Mt(this,kt,"f")}get state(){return Mt(this,St,"f")}onConferenceJoined(e){super.onConferenceJoined(e),It(this,Tt,!!e.listenOnly,"f")}onConferenceLeft(e){Mt(this,kt,"f")&&(this.clear(),this.emit(jt.Stopped)),super.onConferenceLeft(e),It(this,Tt,!1,"f")}};kt=new WeakMap,St=new WeakMap,Et=new WeakMap,Tt=new WeakMap,xt([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],Rt.prototype,"start",null),xt([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],Rt.prototype,"stop",null),xt([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],Rt.prototype,"play",null),xt([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],Rt.prototype,"pause",null),xt([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],Rt.prototype,"seek",null),Rt=xt([dt([Ce.VideoPresentationStarted,Ce.VideoPresentationStopped,Ce.VideoPresentationPlay,Ce.VideoPresentationPause,Ce.VideoPresentationSeek])],Rt);class At{static getHost(){return At.host}static setRegion(e){e&&2===e.length&&"devssl"!==this.flavor&&"development"!==this.flavor?At.host="staging"===this.flavor?`https://${e}.comms.sdk.staging.dolbyio.com`:`https://${e}.comms.sdk.dolby.io`:At.host="https://comms.sdk.dolby.io"}}At.host="https://comms.sdk.dolby.io",At.flavor="production",At.endpoints={file:{convert:{method:"POST",uri:"/v1/files/convert"},urlConvert:{method:"POST",uri:"/v1/files/urlConvert"},getImage:{method:"GET",uri:"/v1/files/{fileId}/converted/{page}"},getThumbnail:{method:"GET",uri:"/v1/files/{fileId}/converted/{page}/thumbnail"}}},yt.inject(At,wt.getToken,wt.setToken,wt.getJwtToken,wt.getTokenCallback,(()=>{}),At.getHost,At.endpoints,!0,wt.isTokenExpired,wt.getLeavingCallback);var Dt,Ot,Nt,Ft,Lt=At,zt=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Ut=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Vt=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},Bt=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};!function(e){e.Converted="converted",e.ConversionProgress="conversionProgress",e.Started="started",e.Updated="updated",e.Stopped="stopped"}(Ft||(Ft={}));let Wt=class extends ut{constructor(e,t){super(e),Dt.set(this,void 0),Ot.set(this,!1),Nt.set(this,null),Vt(this,Dt,t,"f")}convert(e){if(e.size>262144e3)throw new Error("File size exceeds 250 MB, the maximum file size.");let t=new FormData;return t.append("file",e),Lt.file.convert({data:t})}convertUrl(e,t){return Lt.file.urlConvert({data:{filename:e,url:t}})}start(e){return Bt(this,Ot,"f")?Promise.reject(new Be("A client who joined as a listener cannot share a file.")):wt.fileshare.start({conferenceId:this._conferenceId,data:{fileId:e.id,imageCount:e.imageCount}}).then((e=>e.data))}update(e){return Ut(this,void 0,void 0,(function*(){return this.checkPresentation(),(yield wt.fileshare.update({conferenceId:this._conferenceId,data:{fileId:Bt(this,Nt,"f").id,position:e}})).data}))}stop(){return Ut(this,void 0,void 0,(function*(){return this.checkPresentation(),(yield wt.fileshare.stop({conferenceId:this._conferenceId,data:{fileId:Bt(this,Nt,"f").id}})).data}))}image(e,t){let n=t;return n||(this.checkPresentation(),n=Bt(this,Nt,"f").id),Promise.resolve(`${Lt.host}/v1/files/${n}/converted/${e}?token=${wt.jwtToken}&hashId=${wt.getHashId()}`)}thumbnail(e,t){let n=t;return n||(this.checkPresentation(),n=Bt(this,Nt,"f").id),Promise.resolve(`${Lt.host}/v1/files/${n}/converted/${e}/thumbnail/?token=${wt.jwtToken}&hashId=${wt.getHashId()}`)}checkPresentation(){if(!Bt(this,Nt,"f"))throw new Error("File Presentation not stated")}onFileConverted(e){this.emit(Ft.Converted,e.files[0])}onFileConversionProgress(e){this.emit(Ft.ConversionProgress,e.fileConversion)}onFilePresentationStarted(e){Vt(this,Nt,e.file,"f"),Bt(this,Nt,"f").owner=Bt(this,Dt,"f").participants.get(e.file.ownerId),this.emit(Ft.Started,Bt(this,Nt,"f"))}onFilePresentationUpdated(e){Bt(this,Nt,"f").position=e.file.position,this.emit(Ft.Updated,Bt(this,Nt,"f"))}onFilePresentationStopped(e){const t=Bt(this,Nt,"f");Vt(this,Nt,null,"f"),this.emit(Ft.Stopped,t)}get current(){return Bt(this,Nt,"f")}onConferenceJoined(e){super.onConferenceJoined(e),Vt(this,Ot,!!e.listenOnly,"f")}onConferenceLeft(e){if(Bt(this,Nt,"f")){const e=Bt(this,Nt,"f");Vt(this,Nt,null,"f"),this.emit(Ft.Stopped,e)}super.onConferenceLeft(e),Vt(this,Ot,!1,"f")}};Dt=new WeakMap,Ot=new WeakMap,Nt=new WeakMap,zt([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],Wt.prototype,"start",null),zt([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],Wt.prototype,"update",null),zt([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],Wt.prototype,"stop",null),Wt=zt([dt([Ce.FileConversionProgress,Ce.FileConverted,Ce.FilePresentationStarted,Ce.FilePresentationStopped,Ce.FilePresentationUpdated])],Wt);var Gt=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};class Ht extends ut{constructor(e){super(e)}start({uri:e="",hls:t=!1}){return t?wt.hls.start({conferenceId:this._conferenceId}):wt.externallive.start({conferenceId:this._conferenceId,data:{uri:e}})}stop({hls:e=!1}={}){return e?wt.hls.stop({conferenceId:this._conferenceId}):wt.externallive.stop({conferenceId:this._conferenceId})}}Gt([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],Ht.prototype,"start",null),Gt([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],Ht.prototype,"stop",null);class Yt extends(m()){constructor(){super();try{this._isAvailable=DolbyVoice.prototype.hasOwnProperty("setTransparentMode")}catch(e){this._isAvailable=!1}}isAvailable(){return this._isAvailable}}var $t,Zt,qt,Xt,Kt,Jt,Qt,en,tn,nn,rn,on,an,sn,cn,un,dn,ln,hn,pn,fn,mn,gn=Yt,vn=n(2382),yn=n.n(vn),_n=n(7160),wn=n.n(_n);class bn{static get parsed(){return"undefined"!=typeof window&&void 0!==window.navigator&&void 0!==window.navigator.userAgent?wn().getParser(window.navigator.userAgent):null}}bn.isFirefox=null!==(Zt=null===($t=bn.parsed)||void 0===$t?void 0:$t.is("Firefox"))&&void 0!==Zt&&Zt,bn.isChrome=null!==(Xt=null===(qt=bn.parsed)||void 0===qt?void 0:qt.is("Chrome"))&&void 0!==Xt&&Xt,bn.isEdge=null!==(Jt=null===(Kt=bn.parsed)||void 0===Kt?void 0:Kt.is("Microsoft Edge"))&&void 0!==Jt&&Jt,bn.isSafari=null!==(en=null===(Qt=bn.parsed)||void 0===Qt?void 0:Qt.is("Safari"))&&void 0!==en&&en,bn.isElectron=null!==(nn=null===(tn=bn.parsed)||void 0===tn?void 0:tn.is("Electron"))&&void 0!==nn&&nn,bn.isExplorer=null!==(on=null===(rn=bn.parsed)||void 0===rn?void 0:rn.is("Internet Explorer"))&&void 0!==on&&on,bn.isAndroid=null!==(sn=null===(an=bn.parsed)||void 0===an?void 0:an.is("android"))&&void 0!==sn&&sn,bn.isIOS=null!==(un=null===(cn=bn.parsed)||void 0===cn?void 0:cn.is("ios"))&&void 0!==un&&un,bn.isDesktop="desktop"===(null===(dn=bn.parsed)||void 0===dn?void 0:dn.getPlatformType()),bn.isMobile="mobile"===(null===(ln=bn.parsed)||void 0===ln?void 0:ln.getPlatformType()),bn.isWindows="windows"===(null===(hn=bn.parsed)||void 0===hn?void 0:hn.getOSName()),bn.isMacOS="macOS"===(null===(pn=bn.parsed)||void 0===pn?void 0:pn.getOSName()),bn.isVideoProcessingSupported=null===(fn=bn.parsed)||void 0===fn?void 0:fn.satisfies({desktop:{electron:">=13",chrome:">=91",edge:">=91",safari:">=16.4",firefox:">=109"}}),bn.requiresScreenshareWorkaround=bn.isIOS&&bn.isSafari||bn.isSafari&&!(null===(mn=bn.parsed)||void 0===mn?void 0:mn.satisfies({safari:">16.2"}));const kn="00000000-0000-0000-0000-000000000000",Sn="undefined"!=typeof global&&!global.window,En=bn.isElectron;bn.parsed,Sn?(global.WebSocket=n(6946),global.navigator=global.window||{},En?(global.Buffer=n(2349).Buffer,global.window=global.window||{}):(global.navigator.mediaDevices={},global.navigator.mediaDevices.enumerateDevices=function(){},global.MediaStream=class{getTracks(){return[]}getAudioTracks(){return[]}getVideoTracks(){return[]}},global.self=globalThis,global.location={href:""}),"undefined"==typeof btoa&&(global.btoa=function(e){return new Buffer(e).toString("base64")}),"undefined"==typeof atob&&(global.atob=function(e){return new Buffer(e,"base64").toString()})):yn()(window,{shimChrome:!1,shimFirefox:!1,shimEdge:!0,shimSafari:!1});const Tn=new gn;var Cn=Sn?{}:window.RTCIceCandidate||window.webkitRTCIceCandidate||window.mozRTCIceCandidate,jn=Sn?{}:window.RTCPeerConnection||window.webkitRTCPeerConnection||window.mozRTCPeerConnection,xn=Sn?{}:window.RTCSessionDescription||window.webkitRTCSessionDescription||window.mozRTCSessionDescription,Pn=Sn?{}:window.AudioContext||window.webkitAudioContext||window.mozAudioContext;const In=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;navigator.getUserMedia=(e={})=>new Promise(((t,n)=>{In.call(window.navigator,e,(e=>{t(e)}),(e=>{n(e)}))})),!navigator.mediaDevices||navigator.mediaDevices.getDisplayMedia&&!En||(navigator.mediaDevices.getDisplayMedia=e=>{return t=void 0,n=void 0,i=function*(){let t={},n=e&&e.sourceId;return window.getScreenSourceId&&(n=yield window.getScreenSourceId()),n&&(bn.isElectron||bn.isChrome?t={video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:n,maxWidth:1920,maxHeight:1080}}}:bn.isFirefox&&(t={video:{mediaSource:e.sourceId,maxWidth:1920,maxHeight:1080}})),navigator.mediaDevices.getUserMedia(t)},new((r=void 0)||(r=Promise))((function(e,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(a,s)}c((i=i.apply(t,n||[])).next())}));var t,n,r,i});var Mn=bn.isExplorer,Rn=function(e,t){if(Mn)e&&"VIDEO"===e.nodeName&&(e.videoRenderer&&VideoRenderer.unhandle(e),VideoRenderer.handle(e)),e.srcObject=t;else if(void 0!==(null==e?void 0:e.srcObject))if(bn.isSafari){const n=e.srcObject&&e.srcObject.getAudioTracks(),r=t&&t.getAudioTracks();e&&e instanceof HTMLVideoElement?requestAnimationFrame((()=>{e.srcObject=t})):(!n||!r||n.length!==r.length||n.length>0&&r.length>0&&n[0].id!==r[0].id)&&(e.srcObject=t)}else e.srcObject=t;else void 0!==(null==e?void 0:e.mozSrcObject)?e.mozSrcObject=t:void 0!==(null==e?void 0:e.src)?e.src=null===t?"":URL.createObjectURL(t):ft().error("Error attaching stream to element.");return e};navigator.attachMediaStream=Rn;class An extends ct{constructor(e){super(e)}hasElectron(){return Tn.isAvailable()}}var Dn,On,Nn,Fn=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};!function(e){e.Camera="Camera",e.ScreenShare="ScreenShare",e.Custom="Custom",e.CustomVideo="CustomVideo"}(On||(On={})),function(e){e[e.Camera=0]="Camera",e[e.ScreenShare=1]="ScreenShare",e[e.Custom=2]="Custom"}(Nn||(Nn={}));class Ln extends MediaStream{constructor(e){super(e),this.type=On.Camera,Dn.set(this,[]),Fn(this,Dn,"f").push(new zn)}addTrack(e){e instanceof MediaStreamTrack?super.addTrack(e):Fn(this,Dn,"f").push(e)}removeTrack(e){e instanceof MediaStreamTrack?super.removeTrack(e):Fn(this,Dn,"f").shift()}getAudioTracks(){return Fn(this,Dn,"f")}getTracks(){return[...super.getTracks(),...this.getAudioTracks()]}}Dn=new WeakMap;class zn{constructor(){this.id="fakeAudioTrack",this.kind="audio",this.enabled=!0}applyConstraints(e){return Promise.resolve()}clone(){return this}getCapabilities(){return null}getConstraints(){return null}getSettings(){return null}stop(){}addEventListener(){}removeEventListener(){}dispatchEvent(e){return!0}}var Un=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class Vn extends f.EventEmitter{constructor(){super()}addPeer({peerId:e,description:t,candidates:n,isMaster:r,state:i="default",wasmEnabled:o}){return Un(this,void 0,void 0,(function*(){const{peer:a,isNew:s}=yield this.createPeerConnection(e,i,r);yield this.updateMasterStream(e,i,r),this.initAudioOutputSelection(),yield this.setRemoteDescription(e,this.getSsrc(t.sdp),t.type,t.sdp,t.oid),s&&!Sn&&a&&a.isMaster&&(yield this.addMasterStream(a)),yield Promise.all(n.map((t=>Un(this,void 0,void 0,(function*(){yield this.setPeerCandidate(e,t.mid,t.mline_index,t.sdp)}))))),yield this.createAnswer(e,i,t.oid,o)}))}setRemoteSdp(e,t,n,r){return Un(this,void 0,void 0,(function*(){return yield this.setRemoteDescription(e,this.getSsrc(t.sdp),t.type,t.sdp,t.oid,r)}))}removePeer(e){this.closePeerConnection(e).catch((e=>console.warn("Peer connection close error",e.message))),this.removePeerConnection(e)}getSsrc(e){var t=/a=ssrc\:(.*?)\s/gm.exec(e);return ft().trace("VoxeetRTC.getSsrc",t),t&&null!=t[1]?t[1]:"0"}checkStream(e){let t=/([0-9]*)_?([a-zA-Z0-9]*)_?([0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12})/gm.exec(e.id);return t[1]==Nn.Camera?e.type=On.Camera:t[1]==Nn.ScreenShare?e.type=On.ScreenShare:t[1]>=Nn.Custom?(e.label=t[2],e.type=On.Custom):e.type=On.Camera,t[3]}updateMasterStream(e,t,n){return Promise.resolve()}sessionCreatedEvent(e,t,n,r,i,o,a){ft().trace("VoxeetRTC.onSessionCreated",e,t,n,a),this.emit("sessionCreated",e,t,n,r,i,o,a)}addStreamEvent(e,t){ft().trace("VoxeetRTC.addStream",e,t),this.emit("addStream",e,t)}updateStreamEvent(e,t){ft().trace("VoxeetRTC.updateStream",e,t),this.emit("updateStream",e,t)}removeStreamEvent(e){ft().trace("VoxeetRTC.removeStream",e),this.emit("removeStream",e)}addScreenStreamEvent(e,t){ft().trace("VoxeetRTC.addScreenStream",e,t),this.emit("addScreenStream",e,t)}removeScreenStreamEvent(e,t){ft().trace("VoxeetRTC.removeScreenStream"),this.emit("removeScreenStream",e,t)}endedScreenStreamEvent(){this.emit("endedScreenStream")}updateScreenStreamEvent(e,t){this.emit("updateScreenStream",e,t)}iceCandidatesGatheringCompleteEvent(e,t){this.emit("iceCandidatesGatheringComplete",e,t)}connectionStatusEvent(e){this.emit("connectionStatus",e)}initializeCallstats(e,t){return Promise.resolve()}init({constraints:e,processCb:t,listenOnly:n,ownerId:r,options:i}){ft().error("abstract implementation init")}release(){return Un(this,void 0,void 0,(function*(){ft().error("abstract implementation release")}))}createPeerConnection(e,t,n){ft().error("abstract implementation createPeerConnection")}closePeerConnection(e){ft().error("abstract implementation closePeerConnection")}removePeerConnection(e){ft().error("abstract implementation removePeerConnection")}createAnswer(e,t="default",n,r){ft().error("abstract implementation createAnswer")}setRemoteDescription(e,t,n,r,i,o){ft().error("abstract implementation setRemoteDescription")}setPeerCandidate(e,t,n,r){ft().error("abstract implementation setPeerCandidate")}toggleMute(e){ft().error("abstract implementation")}toggleOwnMute(){ft().error("abstract implementation")}mutePeer(e,t){ft().error("abstract implementation")}getLevel(e,t){ft().error("abstract implementation")}isSpeaking(e,t){ft().error("abstract implementation")}initAudioOutputSelection(){ft().error("abstract implementation")}setPeerPosition(e,t,n){ft().error("abstract implementation setPeerPosition")}getPeerPosition(e){ft().error("abstract implementation getPeerPosition")}setVolume(e,t){ft().error("abstract implementation")}setConferenceVolume(e){ft().error("abstract implementation")}startVideoForPeer(e,t){ft().error("abstract implementation")}stopVideoForPeer(e){ft().error("abstract implementation")}startScreenShare(e){ft().error("abstract implementation")}stopScreenShare(){ft().error("abstract implementation")}changeRecordingDevice(){ft().error("abstract implementation")}selectAudioInput(e){ft().error("abstract implementation")}selectVideoInput(e){ft().error("abstract implementation")}selectAudioOutput(e){ft().error("abstract implementation")}getInboundRtpStats(){return ft().warn("Abstract getInboundRtpStats"),Promise.resolve()}configureStateDump(e=60){return Un(this,void 0,void 0,(function*(){return Promise.resolve()}))}getStateDumpConfiguration(){return Un(this,void 0,void 0,(function*(){return Promise.resolve(0)}))}createStateDump(e){return Un(this,void 0,void 0,(function*(){return Promise.resolve()}))}setTransparentMode(e){return Un(this,void 0,void 0,(function*(){ft().error("abstract implementation setTransparentMode")}))}setComfortNoiseLevel(e){return Un(this,void 0,void 0,(function*(){ft().error("abstract implementation setComfortNoiseLevel")}))}getComfortNoiseLevel(){return Un(this,void 0,void 0,(function*(){ft().error("abstract implementation getComfortNoiseLevel")}))}stopRtsView(){ft().error("abstract implementation stopRtsView")}startRtsView(e,t,n){return Un(this,void 0,void 0,(function*(){ft().error("abstract implementation startRtsView")}))}muteOutput(e){ft().error("abstract implementation muteOutput")}setVideoForwarding(e){ft().error("abstract implementation setVideoForwarding")}removeVideoForwarding(e){ft().error("abstract implementation removeVideoForwarding")}}var Bn=Vn,Wn=n(673),Gn=n.n(Wn);class Hn extends Bn{constructor(){super(),this.engine=null,this.ownerId=null,this.peers=[],this.isMuted=!1,this.mutedPeer=[],this.speechThreshold=.05,this.ssMsid="none"}enumerateAudioDevices(e){return"input"===e?Promise.resolve(this.engine.enumerateAudioDevices()):Promise.resolve(this.engine.enumerateAudioOutputDevices())}static enumerateAudioDevices(e){return Promise.resolve([])}static enumerateVideoDevices(){return Promise.resolve(MediaEngine.enumerateVideoDevices())}init({constraints:e,processCb:t,listenOnly:n,ownerId:r,mixing:i}){return new Promise(((e,t)=>{try{this.ownerId=r,-1===i.uri.search("rtmp://")&&(i.uri=Gn().join("out/",i.uri)),this.engine=new MediaEngine,i.enabled?this.engine.initMixer(i.uri):this.engine.init(),this.engine.on("sessionCreated",this.onSessionCreated.bind(this)),this.engine.on("sessionError",this.onSessionError.bind(this)),this.engine.on("streamAdded",this.onStreamAdded.bind(this)),this.engine.on("streamUpdated",this.onStreamUpdated.bind(this)),this.engine.on("streamRemoved",this.onStreamRemoved.bind(this)),this.engine.on("screenStreamAdded",this.onScreenStreamAdded.bind(this)),this.engine.on("screenStreamRemoved",this.onScreenStreamRemoved.bind(this)),e()}catch(e){t(e)}}))}release(){this.engine&&(this.engine.release(),this.engine=null)}onSessionCreated(e,t,n){console.log("--- session created",e,t),super.sessionCreatedEvent(e,{type:t,sdp:n},null,this.ssMsid,"default")}onSessionError(e,t){console.log("--- session error",e,t)}onStreamAdded(e,t){console.log("--- stream added",e,t),this.addStreamEvent(e,t)}onStreamUpdated(e,t){console.log("--- stream updated, peerId, stream"),this.updateStreamEvent(e,t)}onStreamRemoved(e,t){console.log("--- stream removed",e),this.removeStreamEvent(e)}onScreenStreamAdded(e,t){console.log("--- screen stream added",e),this.ssMsid=t.label(),this.addScreenStreamEvent(e,t)}onScreenStreamRemoved(e,t){console.log("--- screen stream removed",e),this.ssMsid="none",this.removeScreenStreamEvent()}attachMediaStream(e,t,n){return new Promise(((r,i)=>{try{this.engine.attachMediaStream(e,t,n),r()}catch(e){i(e)}}))}createPeerConnection(e,t,n){return new Promise(((t,r)=>{try{this.engine.createPeerConnection(e,n),t({peer:{},isNew:!1})}catch(e){r(e)}}))}closePeerConnection(e){return new Promise(((t,n)=>{try{this.engine.closePeerConnection(e),t()}catch(e){n(e)}}))}removePeerConnection(e){}setRemoteDescription(e,t,n,r,i){return new Promise(((i,o)=>{try{this.engine.setRemoteDescription(e,t,n,r),i()}catch(e){o(e)}}))}setPeerCandidate(e,t,n,r){return new Promise(((i,o)=>{try{this.engine.setPeerCandidate(e,t,n,r),i()}catch(e){o(e)}}))}createAnswer(e){return new Promise(((t,n)=>{try{const n=this.engine.createAnswer(e);this.engine.setLocalDescription(e,"answer",n),t()}catch(e){n(e)}}))}startVideoForPeer(e,t){return new Promise(((e,n)=>{try{console.log(t),this.engine.startVideo(),e()}catch(e){n(e)}}))}stopVideoForPeer(e){return new Promise(((e,t)=>{try{this.engine.stopVideo(),e()}catch(e){t(e)}}))}selectAudioInput(e){return new Promise(((t,n)=>{try{this.engine.selectAudioDevice(e),t()}catch(e){n(e)}}))}selectAudioOutput(e){return new Promise(((t,n)=>{try{this.engine.selectAudioOutputDevice(e),t()}catch(e){n(e)}}))}selectVideoInput(e){return new Promise(((t,n)=>{try{this.engine.selectVideoDevice(e),t()}catch(e){n(e)}}))}getLevel(e,t){try{t(parseFloat(this.engine.getLevel(e)))}catch(e){console.error(e)}}isSpeaking(e,t){this.getLevel(e,(e=>{e>this.speechThreshold?t(!0):t(!1)}))}setPeerPosition(e,t,n){return new Promise(((r,i)=>{try{let i=90-180*Math.atan2(n,t)/Math.PI;const o=Math.sqrt(Math.pow(t,2)+Math.pow(n,2));i/=90,console.log(e,t,n,o,i),NaN!==o&&NaN!==i&&this.engine.setPeerPosition(e,i,o),r()}catch(e){i(e)}}))}getPeerPosition(){return{x:0,y:0}}toggleMute(e){let t=!1;try{e==this.ownerId?(this.isMuted=!this.isMuted,t=this.isMuted,this.engine.setMute(this.isMuted)):(this.mutedPeer.find((t=>t===e))?(this.mutedPeer=this.mutedPeer.filter((t=>t!==e)),t=!1):(this.mutedPeer.push(e),t=!0),this.engine.setParticipantMute(e,t))}catch(e){console.error(e)}return t}enable3DAudio(e){return new Promise(((t,n)=>{try{this.engine.enable3DAudio(e),t()}catch(e){console.error(e),n(e)}}))}hasScreenShare(){return!1}startScreenShare(e){return new Promise(((e,t)=>{try{this.engine.startScreenshare(),e()}catch(e){console.error(e),t()}}))}stopScreenShare(){try{this.engine.stopScreenshare()}catch(e){console.error(e)}}}var Yn=n(6850),$n=n.n(Yn);function Zn(e){let t=e||!1;return(bn.isMobile||"undefined"!=typeof navigator&&"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1||!bn.isChrome&&!bn.isSafari&&!bn.isFirefox&&!bn.isEdge)&&(t=!1),t}n(1344);const qn=({requestedConstraints:e={audio:!0,video:!1},mixingEnabled:t=!1,dolbyProcessing:n=!1,dapm:r=!1}={},i)=>{if(t)return{audio:!1,video:!1};const o=r?$n().media.dapm.constraints:n?$n().media.dolbyProcessing.constraints:$n().media.constraints;return Object.assign(Object.assign({},o),{audio:void 0===e.audio?Object.assign({},o.audio):e.audio&&Object.assign(Object.assign({},i?{}:o.audio),e.audio),video:void 0===e.video?Object.assign({},o.video):e.video&&Object.assign(Object.assign({},o.video),e.video)})},Xn=()=>{const e=localStorage.getItem("audioTweaks");if(!e)return null;try{return JSON.parse(e)}catch(e){return debug("Incorrect audioTweaks override format - ignoring"),null}},Kn=e=>{const t=Xn(),n=Object.assign(Object.assign({},t),e);return!(null==n?void 0:n.hasOwnProperty("dapmEnabled"))||!1!==n.dapmEnabled};var Jn,Qn=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};!function(e){e.HD="hd",e.MD="md",e.SD="sd",e.Auto="auto"}(Jn||(Jn={}));const er=3e4,tr=(e,t,n)=>{const r=t+2*n+20;let i=93.2-(r<160?r/4:r-120)/10;return i-=2.5*e,i=Math.max(0,i),100*(1+.035*i+7e-6*i*(i-60)*(100-i))/100},nr=e=>Math.pow(10,2.069924867*Math.pow(Math.log10(e),.6250223771)),rr=(e,t,n=!0)=>{let r=0;if(e){const i=e.filter((e=>"inbound-rtp"===e.type&&"video"===e.kind)),o=t.filter((e=>"inbound-rtp"===e.type&&"video"===e.kind)),a=n?e=>"track"===e.type:e=>"track"===e.type&&"video"===e.kind,s=t.filter(a);if(i.length>0&&o.length>0&&s.length>0){parseInt(o[0].packetsLost),parseInt(o[0].packetsReceived),parseInt(i[0].packetsLost),parseInt(i[0].packetsReceived);const e=(parseInt(o[0].packetsLost),parseInt(i[0].packetsLost),parseInt(o[0].timestamp)-parseInt(i[0].timestamp));let t=8*(parseInt(o[0].bytesReceived)-parseInt(i[0].bytesReceived))/(e/1e3);const n=nr(parseInt(s[0].frameHeight)*parseInt(s[0].frameWidth));t>3e4&&(t=Math.min(t,n),r=Math.log(t/er)/Math.log(n/er)*4+1)}}return r},ir=(e,t,n)=>{let r=0;if(e){const i=e.filter((e=>"outbound-rtp"===e.type&&"video"===e.kind)),o=t.filter((e=>"outbound-rtp"===e.type&&"video"===e.kind));if(i.length>0&&o.length>0&&n.length>0){const e=parseInt(o[0].timestamp)-parseInt(i[0].timestamp);let t=8*(parseInt(o[0].bytesSent)-parseInt(i[0].bytesSent))/(e/1e3);const a=nr(parseInt(n[0].getSettings().height)*parseInt(n[0].getSettings().width));t>3e4&&(t=Math.min(t,a),r=Math.log(t/er)/Math.log(a/er)*4+1)}}return r},or=e=>{const t=e.split("\n").map((e=>e.trim()));let n=!1;for(let e=0;e<t.length;++e)t[e].startsWith("m=")&&(n=t[e].startsWith("m=audio")),n&&(t[e].startsWith("a=sendonly")||t[e].startsWith("a=recvonly")||t[e].startsWith("a=sendrecv"))&&(t[e]="a=inactive");return t.join("\r\n")};var ar,sr,cr,ur,dr,lr,hr,pr,fr=class{constructor(e,t,n=!1,r=!1){this.stream=t,this.isLocal=n,this.audio3D=r,this.connected=!1,this.level=0,this.context=e,this.dbrange=36,this.dblimit=0,this.x=0,this.y=.5}connectSource(){this.source.connect(this.analyserNode)}updateStream(e){this.stream=e,this.source.disconnect(),this.analyserNode.disconnect(),this.source=this.context.createMediaStreamSource(this.stream),this.connectSource()}connect(){this.source=this.context.createMediaStreamSource(this.stream),this.analyserNode=new AnalyserNode(this.context,{fftSize:256,smoothingTimeConstant:1}),this.data=new Uint8Array(this.analyserNode.fftSize),this.connectSource(),this.isLocal||(this.gainNode=this.context.createGain(),this.gainNode.gain.value=0,this.audio3D?(this.stereoPanner=this.context.createPanner(),this.stereoPanner.channelCount=1,this.stereoPanner.setOrientation(0,0,0),this.stereoPanner.setPosition(this.x,0,-this.y),bn.isFirefox&&bn.isWindows?this.stereoPanner.panningModel="equalpower":this.stereoPanner.panningModel="HRTF",this.stereoPanner.distanceModel=Yn.audioSettings.distanceModel,this.stereoPanner.refDistance=Yn.audioSettings.refDistance,this.stereoPanner.maxDistance=Yn.audioSettings.maxDistance,this.stereoPanner.rolloffFactor=Yn.audioSettings.rollOffFactor,this.analyserNode.connect(this.stereoPanner),this.stereoPanner.connect(this.gainNode)):this.analyserNode.connect(this.gainNode),this.gainNode.connect(this.context.destination)),this.connected=!0}disconnect(){this.isLocal||(this.audio3D&&this.stereoPanner.disconnect(),this.gainNode.disconnect(),this.context.destination.disconnect()),this.analyserNode.disconnect(),this.source.disconnect()}update(){if(this.connected){this.analyserNode.getByteTimeDomainData(this.data);let e=this.calculateRms(this.data),t=this.toDb(e);this.level=this.db2vu(t)}else this.level=0}calculateRms(e){let t=0;return e.forEach((e=>{let n=e-127;t+=n*n})),Math.sqrt(t/e.length)}toDb(e){return 20*Math.log10(e)}db2vu(e){if(e===-1/0||e<this.dblimit)return 0;let t=e/this.dbrange,n=Math.PI/2+Math.PI/2*t,r=1-Math.sin(n);return r>1?1:r}setGain(e){!this.isLocal&&this.audio3D&&(this.gainNode.gain.value=e)}setPosition(e,t){!this.isLocal&&this.audio3D&&(isFinite(e)&&isFinite(t)?(this.x=e,this.y=Math.max(Yn.audioSettings.refDistance,Math.min(1,t)),this.stereoPanner.setPosition(this.x,0,this.y)):ft().debug("setPosition received non finite position"))}getLevel(){return this.level}setLevel(e){this.level=e}},mr=new class{constructor(){this.level="debug",ft().setLevel("debug")}trace(...e){ft().trace(...e)}info(...e){ft().info(...e)}debug(...e){ft().debug(...e)}warn(...e){ft().warn(...e)}error(...e){ft().error(...e)}setLevel(e){this.level=e,ft().setLevel(e)}setConferenceId(e){}setUserContext(e){}},gr=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},vr=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class yr{constructor(e,t){ar.set(this,0),sr.set(this,null),gr(this,ar,e,"f"),gr(this,sr,t,"f")}get timestamp(){return vr(this,ar,"f")}get data(){return vr(this,sr,"f")}}function _r(e,t){return e?pr.DVWC:t?pr.DV_OPUS:pr.NON_DV_OPUS}function wr(e,t,n){let r;if(t===pr.DVWC)r=$n().media.unprocessed.constraints.audio;else switch(e.mode){case cr.Unprocessed:r=$n().media.unprocessed.constraints.audio;break;case cr.Music:r=function(e){var t;const n=$n().media.music;return("off"===(null===(t=e.modeOptions)||void 0===t?void 0:t.echoCancellation)?n.echoCancellationOff:n.default).constraints.audio}(e);break;case cr.Standard:r=function(e,t,n){var r,i,o;if(e.mode===cr.Standard&&"low"===(null===(r=e.modeOptions)||void 0===r?void 0:r.noiseReductionLevel))return $n().media.constraints.audio;if(e.mode===cr.Standard&&"high"===(null===(i=e.modeOptions)||void 0===i?void 0:i.noiseReductionLevel)||e.mode===cr.Standard&&!(null===(o=e.modeOptions)||void 0===o?void 0:o.noiseReductionLevel)){if(n)return $n().media.dapm.constraints.audio;if(t===pr.DV_OPUS)return $n().media.dolbyProcessing.constraints.audio;if(t===pr.NON_DV_OPUS)return $n().media.constraints.audio}return $n().media.constraints.audio}(e,t,n);break;default:r=$n().media.constraints.audio}return Object.assign({},r)}ar=new WeakMap,sr=new WeakMap,function(e){e.Unprocessed="unprocessed",e.Standard="standard",e.Music="music"}(cr||(cr={})),function(e){e.High="high",e.Low="low"}(ur||(ur={})),function(e){e.None="none",e.BrokenRobot="brokenRobot",e.Abyss="abyss",e.Helium="helium",e.StarshipCaptain="starshipCaptain",e.Feminine="feminine",e.AMRadio="amRadio",e.Interference="interference",e.Swarm="swarm",e.DarkModulation="darkModulation",e.NervousRobot="nervousRobot",e.Wobble="wobble",e.Masculine="masculine"}(dr||(dr={})),function(e){e.Default="default",e.On="on",e.Off="off"}(lr||(lr={})),function(e){e.Bitrate18k="18Kbps",e.Bitrate32k="32Kbps",e.Bitrate64k="64Kbps",e.Bitrate80k="80Kbps",e.Bitrate96k="96Kbps",e.Bitrate128k="128Kbps"}(hr||(hr={})),function(e){e[e.DVWC=0]="DVWC",e[e.DV_OPUS=1]="DV_OPUS",e[e.NON_DV_OPUS=2]="NON_DV_OPUS"}(pr||(pr={}));var br=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const kr=xe()("vxt:rtc");var Sr=class extends Bn{constructor(e){super(),this.mediaManager=e,this.conferenceId=null,this.connection=null,this.peers=[],this.localMediaStream=null,this.sharingStream=null,this.sharingPeerConnection=null,this.audioTrack=null,this.speechThreshold=.2,this.constraints=null,this.processCb=null,this.listenOnly=!1,this.dolbyVoice=!1,this.lastStats=[],this.recentlySeenRTT=0,this.audioTags=new class{constructor(e,t){this.audio3D=t,this.rtc=e,this.sinkId=null,this.playAudioPromise=null,this.conferenceVolume=Yn.audioSettings.gain}playAudioTag(e){const t=this.getAudioTagElement(e);t&&t.play()}createAudioTag(e,t,n,r=this.conferenceVolume){return Qn(this,void 0,void 0,(function*(){if("undefined"!=typeof document&&t&&t.getAudioTracks().length>0){var i=document.createElement("audio");return i.setAttribute("id","audio-"+e),i.setAttribute("class","vxt-audio"),this.sinkId&&(yield i.setSinkId(this.sinkId)),i.volume=r,i.addEventListener("error",(e=>{var t;n&&n(null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.error)})),document.body.appendChild(i),Rn(i,t),this.playAudioPromise=i.play(),this.playAudioPromise}return Promise.resolve(!0)}))}updateAudioTag(e,t,n=this.conferenceVolume){return Qn(this,void 0,void 0,(function*(){if(t&&t.getAudioTracks().length>0){const r=this.getAudioTagElement(e);return r?(this.playAudioPromise&&(yield this.playAudioPromise),r.volume=n,Rn(r,t),r.play()):this.createAudioTag(e,t,null,n)}return Promise.resolve(!0)}))}removeAudioTag(e){const t=this.getAudioTagElement(e);t&&t.parentNode.removeChild(t)}removeAllAudioTags(){"undefined"!=typeof document&&document.querySelectorAll(".vxt-audio").forEach((e=>e.parentNode.removeChild(e)))}setAudioTagVolume(e,t,n){const r=this.getAudioTagElement(e);if(r&&bn.isChrome&&this.audio3D){let e=Yn.audioSettings.chromeCutOffVolume;const i=Math.sqrt(Math.pow(t,2)+Math.pow(n,2)),o=4;e*=Math.exp(-o*i),(e<.001||!isFinite(e))&&(e=.001),r.volume=e}}setVolume(e,t){const n=this.getAudioTagElement(e);n&&(n.volume=t)}setConferenceVolume(e){if(this.conferenceVolume=e,"undefined"!=typeof document){const t=document.querySelectorAll(".vxt-audio");for(const n of t)n.volume=e}}isMuted(e){const t=this.getAudioTagElement(e);return!!t&&0===t.volume}muteAudioTag(e,t){const n=this.getAudioTagElement(e);if(n)if(t)n.volume=0;else if(this.audio3D){let t=this.rtc.getPeerPosition(e);this.setAudioTagVolume(e,t.x,t.y)}else n.volume=1}toggleMute(e){const t=this.isMuted(e);return this.muteAudioTag(e,!t),!t}setSinkId(e){return Qn(this,void 0,void 0,(function*(){this.sinkId=e,yield this.updateSinks()}))}updateSinks(){return Qn(this,void 0,void 0,(function*(){if("undefined"!=typeof document){const e=document.querySelectorAll(".vxt-audio");for(const t of e)try{yield t.setSinkId(this.sinkId)}catch(e){console.error(e)}}}))}getAudioTagElement(e){if("undefined"!=typeof document)return document.getElementById("audio-"+e)}restartAudioTags(){return Qn(this,void 0,void 0,(function*(){if("undefined"!=typeof document){const e=document.querySelectorAll(".vxt-audio");for(const t of e)yield t.pause(),yield t.play()}}))}}(this,this.audio3D),this.blockedPeers=[],this.currentConstraints=null,this.bandwidth=null,this.audioTransceiver=null,this.videoTransceiver=null,this.screenAudioTransceiver=null,this.screenTransceiver=null,this.remoteScreenStream=[],this.userMediaPromise=Promise.resolve(),this.rtpStatsCache=new yr(0,null),this.rtpStatsForTelemetryCache=new yr(0,null),this.isLeavingConference=!1,this.isOutputMuted=!1,this.clonedAudioTrack=null}autoplayBlockedEvent(){kr("autoplayBlockedEvent"),this.emit("autoplayBlocked")}playBlockedAudio(){return br(this,void 0,void 0,(function*(){this.blockedPeers.forEach((e=>{this.peers.filter((t=>t.peerId===e&&!t.isMaster)).map((()=>{this.audioTags&&this.audioTags.playAudioTag(e)}))})),yield this.audioContext.resume(),this.blockedPeers=[]}))}createAudioTag(e,t,n){return br(this,void 0,void 0,(function*(){try{yield this.audioTags.createAudioTag(e,t,this.onAudioTagError.bind(this),n)}catch(t){0===this.blockedPeers.length&&this.autoplayBlockedEvent(),this.blockedPeers.push(e)}}))}updateAudioTag(e,t,n){return br(this,void 0,void 0,(function*(){try{yield this.audioTags.updateAudioTag(e,t,n)}catch(t){this.autoplayBlockedEvent(e)}}))}initAudioOutputSelection(){if(!this.mediaManager.isOutputSelectorValid&&bn.isDesktop&&(bn.isChrome||bn.isEdge||bn.isElectron)&&(this.mediaManager.selectAudioOutputDevice=this.selectAudioOutput.bind(this),bn.isWindows)){const e=this.mediaManager.audioOutputDevices.find((e=>"communications"===e.deviceId));e&&(this.selectAudioOutput(e),this.mediaManager.selectedAudioOutputDevice=e)}}addStreamEvent(e,t){kr("addStreamEvent",e,t);const n=this.peers.find((t=>t.peerId===e));n&&(n.streamAddedEmitted=!0),this.localMediaStream&&this.localMediaStream.id===t.id&&(t.type=On.Camera),this.emit("addStream",e,t)}updateStreamEvent(e,t){kr("updateStreamEvent",e,t);let n=this.peers.find((t=>t.peerId===e));n&&!n.closed&&(this.localMediaStream&&this.localMediaStream.id===t.id&&(t.type=On.Camera),this.emit("updateStream",e,t))}removeStreamEvent(e,t){kr("removeStreamEvent",e);let n=this.peers.find((t=>t.peerId===e));n&&(n.streamAddedEmitted=!1),n&&!n.isMaster&&this.audioTags.removeAudioTag(e),n&&!n.closed&&(this.localMediaStream&&this.localMediaStream.id===t.id&&(t.type=On.Camera),n.stream=null,this.emit("removeStream",e,t))}getDefaultAudioConstraints(e=this.dolbyVoice,t){if(!t){let t=qn({dolbyProcessing:e});return bn.isWindows&&this.mediaManager.audioInputDevices.find((e=>"communications"===e.deviceId))&&(t.audio.deviceId={exact:"communications"}),t.audio}let n=!1;return"function"==typeof this.isDapm&&(n=this.isDapm()),wr(t,_r(!1,e),n)}updateSelectedInputAudioDevice(){return br(this,void 0,void 0,(function*(){const e=yield this.mediaManager.getConnectedAudioInputDevices();if(!e||0===e.length)return;let t=null;if(this.localMediaStream){const e=this.localMediaStream.getAudioTracks();t=e.length>0&&e[0]}if(t){const n=t.getSettings(),r=e.find((e=>e.deviceId===n.deviceId));r&&(this.mediaManager.selectedAudioInputDevice=r)}else{let t=null;bn.isWindows&&(t=e.find((e=>"communications"===e.deviceId))),t||(t=e.find((e=>"default"===e.deviceId))),this.mediaManager.selectedAudioInputDevice=t||e[0]}}))}registerLocalAudioTrackEvents(e){e.onended=()=>this.onAudioTrackEnded()}unregisterAudioTrackEvents(e){e.onended=null}updateInternalAudioProcessing(e,t){return e}getUserMediaWithChecks(e,t){return br(this,void 0,void 0,(function*(){kr("Get media from WebRTC with audio constraints:",null==e?void 0:e.audio);const t=yield navigator.mediaDevices.getUserMedia(e),n=t.getAudioTracks();return n[0]&&(this.registerLocalAudioTrackEvents(n[0]),(e=>{const t=e.getSettings();return!(!t||!("echoCancellation"in t))&&!!e.getConstraints()&&((e,t,n)=>!(t in e)||("object"!=typeof e[t]?e[t]:"exact"in e[t]?e[t].exact:"ideal"in e[t]&&e[t].ideal))(e.getConstraints(),"echoCancellation")&&!e.getSettings().echoCancellation})(n[0])&&this.emit("error",new Ne({name:"EchoCancellationError",message:"Echo Cancellation is disabled."}))),this.customAudio=!1,t}))}init({constraints:e,captureMode:t,processCb:n,listenOnly:r,ownerId:i,options:o,videoTrack:a,audioTrack:s,dolbyVoice:c}){var u;return br(this,void 0,void 0,(function*(){if(this.constraints=Object.assign({},e),this.initWithoutAudioConstraints=!1===(null===(u=this.constraints)||void 0===u?void 0:u.audio),this.constraints.video=!1,this.processCb=n,this.options=o,this.listenOnly=r,this.dolbyVoice=c,this.mediaManager.selectAudioInputDevice=this.selectAudioInput.bind(this),yield this.initAudioContext(),bn.isWindows&&this.constraints.audio&&!this.constraints.audio.deviceId&&this.mediaManager.audioInputDevices.find((e=>"communications"===e.deviceId))&&(this.constraints.audio.deviceId={exact:"communications"}),s)this.constraints.audio=this.updateInternalAudioProcessing(this.constraints.audio,t),this.audioTrack=(yield this.applyAudioProcessing(s)).audioTrack,this.localMediaStream?this.localMediaStream.addTrack(this.audioTrack):this.localMediaStream=new MediaStream([this.audioTrack]),this.customAudio=!0;else if(!r&&(this.constraints.audio||this.constraints.video))try{this.constraints.audio=this.updateInternalAudioProcessing(this.constraints.audio,t),this.localMediaStream=yield this.getUserMediaWithChecks(this.constraints,t),this.audioTrack=this.localMediaStream.getAudioTracks()[0]}catch(e){throw new Ne(e)}a&&(this.localMediaStream?this.localMediaStream.addTrack(a):this.localMediaStream=new MediaStream([a])),yield this.updateSelectedInputAudioDevice()}))}release(){return br(this,void 0,void 0,(function*(){this.peers.map((e=>{this.closePeerConnection(e.peerId)})),this.peers=[],this.audioTrack&&(this.audioTrack.onended=null,this.audioTrack.onmute=null,this.audioTrack.onunmute=null,this.audioTrack.stop()),this.clonedAudioTrack&&this.clonedAudioTrack.stop(),this.localMediaStream&&this.localMediaStream.getAudioTracks().forEach((e=>e.stop())),this.sharingStream&&this.stopScreenShare(),this.audioContext&&this.audioContext.close(),this.mediaManager.initSelectAudioDevice(),this.mediaManager.getComfortNoiseLevel=void 0,this.mediaManager.setComfortNoiseLevel=void 0}))}initAudioContext(){var e;return br(this,void 0,void 0,(function*(){bn.isExplorer||(this.audioContext=new Pn(null===(e=this.options)||void 0===e?void 0:e.audioContextOptions),this.audioContext.resume(),this.audioContext.onstatechange=()=>{this.checkAutoplayBlocked()})}))}checkAutoplayBlocked(){"suspended"===this.audioContext.state&&this.emit("autoplayBlocked")}isPeerConnectionStable(){const e=this.peers.filter((e=>e.connection));return e.length>0&&"stable"===e[0].connection.signalingState}ensurePeer(e){var{peerId:t,isMaster:n}=e,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["peerId","isMaster"]);let i=this.peers.find((e=>e.peerId===t));return i||(i=Object.assign({peerId:t,connection:null,stream:null,process:null,isMaster:n},r),this.peers.push(i)),i}createPeerConnection(e,t,n){return br(this,void 0,void 0,(function*(){let r=!1,i=this.ensurePeer({peerId:e,isMaster:n}),{connection:o}=i;return o&&"close"===t&&(o.close(),o=null),o||(r=!0,$n().peerConnection.config.sdpSemantics="unified-plan",o=new jn($n().peerConnection.config,$n().peerConnection.constraints),o.candidates=[],i.connection=o,yield this.addConnectionListeners(i),yield this.addTrackListeners(e,i,{x:0,y:.2},o),o.onicecandidate=t=>{t.candidate?o.candidates.push({sdpMid:t.candidate.sdpMid,sdpMLineIndex:t.candidate.sdpMLineIndex,sdp:t.candidate.candidate}):this.iceCandidatesGatheringCompleteEvent(e,o.candidates)}),kr("createPeerConnection",this.peers),{peer:i,isNew:r}}))}addMasterStream(e){return br(this,void 0,void 0,(function*(){if(kr("addMasterStream",e),this.localMediaStream){const t=!e.stream;yield this.addStream(this.localMediaStream,e.connection),e.stream=this.localMediaStream,this.audioContext&&this.localMediaStream.getAudioTracks().length>0&&(e.process=new fr(this.audioContext,this.localMediaStream,!0,this.audio3D,this.processCb),e.process.connect()),t?this.addStreamEvent(e.peerId,this.localMediaStream):this.updateStreamEvent(e.peerId,this.localMediaStream)}}))}addConnectionListeners({peerId:e,connection:t}){return br(this,void 0,void 0,(function*(){t.oniceconnectionstatechange=t=>{this.connectionStatusEvent({peerId:e,connectionStatus:t.target.iceConnectionState,signalingState:t.target.signalingState})},t.onsignalingstatechange=t=>{this.connectionStatusEvent({peerId:e,connectionStatus:t.target.iceConnectionState,signalingState:t.target.signalingState})}}))}updateMasterStream(e,t,n){if(n){if("active"===t&&this.constraints.audio)return this.startAudioForPeer(e);if("inactive"===t)return this.stopAudioForPeer(e)}return Promise.resolve()}closePeerConnection(e){kr("closePeerConnection",e);const t=this.peers.find((t=>t.peerId===e));return t&&this._closePeerConnectionForPeer(t),Promise.resolve()}removePeerConnection(e){var t=-1,n=[];if(this.peers.filter((t=>t.peerId===e)).map((e=>{t=this.peers.indexOf(e)})),bn.isSafari&&-1!==t){const e=this.peers[t],n=this.remoteScreenStream.findIndex((t=>t.peerId===e.peerId));setTimeout((()=>{e&&e.sharedScreen&&n>-1&&(e.sharedScreen=!1,this.removeScreenStreamEvent(e.peerId,this.remoteScreenStream[n].stream),this.remoteScreenStream.splice(n,1))}),0)}return-1!==t&&(n=this.peers.splice(t,1)),n}hasScreenShare(){return null!==this.sharingStream}createAnswer(e,t="default",n,r){var i,o,a,s,c,u;return br(this,void 0,void 0,(function*(){kr("createAnswer",e,n);const d=this.peers.find((t=>t.peerId===e)),l=void 0!==r?r:{enabled:!1};if(!d)throw Xe(e);let h=this.sharingStream?this.sharingStream.id:"none";try{const r=yield d.connection.createAnswer();this.emit("traceRtcEvent",Te.ConferenceGlobalTrace.fromData({api:"VoxeetRTCNative.createAnswer",data:{oid:n}})),(null===(i=this.options)||void 0===i?void 0:i.preferSendMono)&&(null===(o=this.options)||void 0===o?void 0:o.preferRecvMono)||(r.sdp=((e="",t=!1,n=!1)=>t||n?e.split("\n").map((e=>(e.includes("fmtp:111 minptime=10")&&(t&&!e.includes("sprop-stereo=1")&&(e=e.replace("fmtp:111 minptime=10","fmtp:111 minptime=10;sprop-stereo=1")),n&&!e.includes(";stereo=1")&&(e=e.replace("fmtp:111 minptime=10","fmtp:111 minptime=10;stereo=1"))),e))).join("\n"):e)(r.sdp,!(null===(a=this.options)||void 0===a?void 0:a.preferSendMono),!(null===(s=this.options)||void 0===s?void 0:s.preferRecvMono))),(null===(c=this.options)||void 0===c?void 0:c.audioBitrate)&&(r.sdp=((e="",t)=>{let n=e.split("\n");const r=(e=>{if("string"==typeof e)switch(e.toLowerCase()){case"18kbps":return 18e3;case"64kbps":return 64e3;case"80kbps":return 8e4;case"96kbps":return 96e3;case"128kbps":return 128e3}else{if([18e3,64e3,8e4,96e3,128e3].includes(e))return e;if([18,64,80,96,128].includes(e))return 1e3*e}})(t);return n.map((e=>(e.includes("fmtp:111 minptime=10")&&(e=e.includes("maxaveragebitrate=")?e.replace(/maxaveragebitrate=\d+/,"maxaveragebitrate="+r):e.replace("fmtp:111 minptime=10","fmtp:111 minptime=10; maxaveragebitrate="+r)),e))).join("\n")})(r.sdp,null===(u=this.options)||void 0===u?void 0:u.audioBitrate)),kr("Answer",r.sdp),yield d.connection.setLocalDescription(r),this.emit("traceRtcEvent",Te.ConferenceGlobalTrace.fromData({api:"VoxeetRTCNative.setLocalDescription",data:{oid:n}})),this.sessionCreatedEvent(e,d.connection.localDescription,null,h,t,n,l)}catch(e){throw mr.error("webrtc","VoxeetRTCNative.createAnswer",e),((e,t)=>new Oe("CreateAnswerError",e.message,t,e))(e,d.peerId)}}))}createOffer(e){mr.trace("createOffer, peerId");var t=this.peers.find((t=>t.peerId===e));return t?t.connection.createOffer().then((e=>t.connection.setLocalDescription(e))).then((()=>{kr("Offer",t.connection.localDescription)})).catch((e=>{throw e})):Promise.reject(new Xe(e))}setRemoteDescription(e,t,n,r,i,o){return br(this,void 0,void 0,(function*(){kr("setRemoteDescription"),kr("Offer",r),this.bandwidth=(e=>{const t=bn.isFirefox?"TIAS":"AS",n=e.split("\n").map((e=>e.trim())).find((e=>0===e.indexOf(`b=${t}:`)));if(!n)return;const r=new RegExp(":(.*)");return bn.isFirefox?parseInt(n.match(r)[1])/1e3:parseInt(n.match(r)[1])})(r),this.emit("onBandwidthRestrictionChanged",this.bandwidth),yield Promise.all(this.peers.filter((t=>t.peerId===e)).map((t=>br(this,void 0,void 0,(function*(){try{yield t.connection.setRemoteDescription(new xn({type:n,sdp:r})),this.emit("traceRtcEvent",Te.ConferenceGlobalTrace.fromData({api:"VoxeetRTCNative.setRemoteDescription",data:{oid:i}}))}catch(n){throw mr.error("webrtc","VoxeetRTC.setRemoteDescription error: ",e,n),((e,t)=>new Oe("RemoteDescriptionError",e.message,t,e))(n,t.peerId)}}))))),bn.requiresScreenshareWorkaround&&this.peers.filter((t=>t.peerId===e)).forEach((e=>{if(this.remoteScreenStream.length>0){let e=r.split("\n").map((e=>e.trim())),t="";e.forEach((function(n,r){if(0===n.indexOf("a=mid:")&&(t=n),n.startsWith("a=inactive")&&t.startsWith("a=mid:screenshare")&&e[r+1].startsWith("a=msid:")){const t=/a=msid:1_screen_([a-z0-9-]+)/,n=e[r+1].match(t);if(n){const e=n[1],t=this.peers.find((t=>t.peerId===e&&t.hasOwnProperty("sharedScreen")&&!0===t.sharedScreen));if(t){const e=this.remoteScreenStream.findIndex((e=>e.peerId===t.peerId));e>-1&&(t.sharedScreen=!1,this.removeScreenStreamEvent(t.peerId,this.remoteScreenStream[e].stream),this.remoteScreenStream.splice(e,1))}}}}),this)}}))}))}setPeerCandidate(e,t,n,r){return br(this,void 0,void 0,(function*(){yield Promise.all(this.peers.filter((t=>t.peerId===e)).map((e=>br(this,void 0,void 0,(function*(){yield e.connection.addIceCandidate(new Cn({candidate:r,sdpMLineIndex:n,sdpMid:t}))})))))}))}setPeerPosition(e,t,n){}mutePeer(e,t){this.peers.filter((t=>t.peerId===e)).forEach((e=>{this.setMute(t,e)}))}toggleMute(e){var t=!1;return this.peers.filter((t=>t.peerId===e)).forEach((e=>{t=this.togglePeerMute(e)})),t}isOwnMuted(){return!this.audioTrack||!this.audioTrack.enabled}setMute(e,t){var n;const r=null===(n=t.stream)||void 0===n?void 0:n.getAudioTracks();(null==r?void 0:r.length)&&r[0]&&(t.isMaster&&(e?(this.clonedAudioTrack=this.audioTrack.clone(),t.process.updateStream(new MediaStream([this.clonedAudioTrack]))):(t.process.updateStream(t.stream),this.clonedAudioTrack&&(this.clonedAudioTrack.stop(),this.clonedAudioTrack=null))),r[0].enabled=!e,this.emit("onTrackMute",e,t.isMaster?void 0:t.peerId))}togglePeerMute(e){var t;const n=null===(t=e.stream)||void 0===t?void 0:t.getAudioTracks();if(null==n?void 0:n.length)return this.setMute(n[0].enabled,e),!n[0].enabled}muteOutput(e){this.peers.filter((e=>!e.isMaster)).forEach((t=>{this.setMute(e,t)})),this.isOutputMuted=e}setConferenceVolume(e){this.audioTags&&this.audioTags.setConferenceVolume(e)}setVolume(e,t){var n=this.peers.find((t=>t.peerId===e));if(!n)throw Xe(e);n.volume=t,this.audioTags&&this.audioTags.setVolume(e,t)}getPeerPosition(e){var t=this.peers.find((t=>t.peerId===e));return t&&t.process&&this.audio3D?{x:t.process.x,y:t.process.y}:{x:0,y:.5}}getLevel(e,t){var n=this.peers.find((t=>t.peerId===e));return n?this._getProcessLevel(n).then((e=>{t(e)})):t(0)}isSpeaking(e,t){this.getLevel(e,(e=>{e>this.speechThreshold?t(!0):t(!1)}))}callWithoutConcurrency(e,...t){return br(this,void 0,void 0,(function*(){let n=null;this.userMediaPromise=this.userMediaPromise.then((()=>e.call(this,...t))).catch((e=>{n=e}));const r=yield this.userMediaPromise;if(n)throw n;return r}))}stopAudioForPeer(e){return br(this,void 0,void 0,(function*(){yield this.callWithoutConcurrency(this.stopAudioForPeerInternal,e)}))}startAudioForPeer(e,t,n){return br(this,void 0,void 0,(function*(){return yield this.callWithoutConcurrency(this.startAudioForPeerInternal,e,t,n)}))}stopVideoForPeer(e){return br(this,void 0,void 0,(function*(){yield this.callWithoutConcurrency(this.stopVideoForPeerInternal,e)}))}updateLocalVideo(e){return br(this,void 0,void 0,(function*(){yield this.callWithoutConcurrency(this.updateLocalVideoInternal,e)}))}startVideoForPeer(e,t){return br(this,void 0,void 0,(function*(){yield this.callWithoutConcurrency(this.startVideoForPeerInternal,e,t)}))}selectAudioInput(e){return br(this,void 0,void 0,(function*(){yield this.callWithoutConcurrency(this.selectAudioInputInternal,e)}))}selectAudioOutput(e){return br(this,void 0,void 0,(function*(){yield this.callWithoutConcurrency(this.selectAudioOutputInternal,e)}))}stopVideoForPeerInternal(e){return br(this,void 0,void 0,(function*(){for(const n of this.peers.filter((t=>t.peerId===e)))if(n.stream&&n.isMaster){if(!this.localMediaStream||0===this.localMediaStream.getVideoTracks().length)return;var t=this.localMediaStream.getVideoTracks()[0];this.localMediaStream.removeTrack(t),yield this.removeTrack(t,n.connection,this.localMediaStream),this.localMediaStream.getTracks().length?this.updateStreamEvent(e,this.localMediaStream):(this.removeStreamEvent(e,this.localMediaStream),this.localMediaStream=null)}}))}updateLocalVideoInternal(e){return br(this,void 0,void 0,(function*(){const t=this.peers.find((e=>e.isMaster));this.localMediaStream?(this.videoTrack=e,this.localMediaStream.getVideoTracks().forEach((e=>{this.localMediaStream.removeTrack(e)})),yield this.onVideoTrackUpdated(t)):(this.localMediaStream=new MediaStream([e]),this.localMediaStream.type=On.Camera,t.stream=this.localMediaStream,this.addStreamEvent(t.id,this.localMediaStream))}))}startVideoForPeerInternal(e,t){return br(this,void 0,void 0,(function*(){for(const n of this.peers.filter((t=>t.peerId===e)))if(n.isMaster){if(this.localMediaStream&&this.localMediaStream.getVideoTracks().length>0)return;this.videoTrack=t;try{this.localMediaStream?(this.localMediaStream.addTrack(t),yield this.addTrack(t,n.connection,this.localMediaStream,"video"),this.updateStreamEvent(e,this.localMediaStream)):(this.localMediaStream=new MediaStream([t]),this.localMediaStream.type=On.Camera,n.stream=this.localMediaStream,yield this.addStream(this.localMediaStream,n.connection),this.addStreamEvent(e,this.localMediaStream))}catch(e){throw new Ne(e)}}}))}stopAudioForPeerInternal(e){return br(this,void 0,void 0,(function*(){for(const t of this.peers.filter((t=>t.peerId===e)))if(t.stream&&t.isMaster){if(!this.localMediaStream||0===this.localMediaStream.getAudioTracks().length)throw new Fe("Already stopped");let n=this.audioTrack;this.unregisterAudioTrackEvents(n),n.stop(),n.enabled=!1,this.originalTrack&&this.originalTrack.stop(),yield this.removeTrack(n,t.connection,this.localMediaStream),this.localMediaStream.removeTrack(n),this.customAudio=!1,this.audioContext&&t.process&&t.process.disconnect(),this.localMediaStream.getTracks().length?this.updateStreamEvent(e,this.localMediaStream):(this.removeStreamEvent(e,this.localMediaStream),this.localMediaStream=null)}}))}startAudioForPeerInternal(e,t,n){return br(this,void 0,void 0,(function*(){for(const r of this.peers.filter((t=>t.peerId===e)))if(r.isMaster){if(this.localMediaStream&&this.localMediaStream.getAudioTracks().length>0)throw new Fe("Already started");try{let i=null;if(t instanceof MediaStreamTrack)this.updateInternalAudioProcessing(this.constraints.audio,n),this.audioTrack=(yield this.applyAudioProcessing(t)).audioTrack,this.customAudio=!0,i=new MediaStream([this.audioTrack]);else{let e=JSON.parse(JSON.stringify(this.constraints));this.initWithoutAudioConstraints&&(e.audio=!1),e.video=!1,t?e.audio=this.constraints.audio=t:e.audio||(e.audio=this.constraints.audio=this.getDefaultAudioConstraints(this.dolbyVoice,n)),e.audio=this.updateInternalAudioProcessing(e.audio,n),i=yield this.getUserMediaWithChecks(e,n),this.audioTrack=i.getAudioTracks()[0]}return this.clonedAudioTrack&&(this.clonedAudioTrack=this.audioTrack.clone(),this.audioTrack.enabled=!1),this.localMediaStream?(this.localMediaStream.addTrack(this.audioTrack),yield this.addTrack(this.audioTrack,r.connection,this.localMediaStream,"audio"),this.updateStreamEvent(e,this.localMediaStream)):(this.localMediaStream=i,this.localMediaStream.type=On.Camera,r.stream=i,yield this.addStream(this.localMediaStream,r.connection),this.addStreamEvent(e,this.localMediaStream)),yield this.updateSelectedInputAudioDevice(),this.audioContext&&(this.clonedAudioTrack?(r.process=new fr(this.audioContext,new MediaStream([this.clonedAudioTrack]),!0,this.audio3D),r.process.connect()):(r.process=new fr(this.audioContext,this.localMediaStream,!0,this.audio3D),r.process.connect())),this.audioTrack}catch(e){throw new Ne(e)}}}))}getAudioTrackSettings(){return this.audioTrack.getSettings()}updateAudioProcessing(e){return br(this,void 0,void 0,(function*(){if(!this.customAudio)for(const t of this.peers.filter((e=>!0===e.isMaster))){if("object"==typeof this.constraints.audio&&(delete this.constraints.audio.autoGainControl,delete this.constraints.audio.googAutoGainControl,delete this.constraints.audio.noiseSuppression),this.audioTrack){const t=this.getAudioTrackSettings();t&&t.deviceId&&(e.deviceId={exact:t.deviceId})}const n=yield this.updateAudioTrack(e);if(!n)return;this.audioTrack=n.getAudioTracks()[0],yield this.onAudioTrackUpdated(t)}}))}preserveAudioConstraintsSettings(e){this.constraints.audio=e}updateAudioTrack(e,t=!0){return br(this,void 0,void 0,(function*(){const n="object"==typeof this.constraints.audio?this.constraints.audio:this.getDefaultAudioConstraints(),r=Object.assign(Object.assign({},n),e);if(t&&(this.constraints.audio=r),!this.localMediaStream||0===this.localMediaStream.getAudioTracks().length)return;const i=this.audioTrack.enabled;let o;this.audioTrack.enabled=!1,this.unregisterAudioTrackEvents(this.audioTrack),this.audioTrack.stop(),this.localMediaStream.removeTrack(this.localMediaStream.getAudioTracks()[0]);try{const e={audio:r,video:!1};o=yield this.getUserMediaWithChecks(e),this.constraints.audio=r}catch(e){throw e}return bn.isSafari&&r.hasOwnProperty("echoCancellation")&&!r.echoCancellation&&(yield this.restartAudioElemets()),o.getAudioTracks()[0].enabled=i,o}))}onAudioTrackUpdated(e){return br(this,void 0,void 0,(function*(){this.localMediaStream.addTrack(this.audioTrack),yield this.replaceTrack(this.audioTrack,e.connection),this.audioContext&&e.process&&(this.audioTrack.enabled?e.process.updateStream(this.localMediaStream):(this.clonedAudioTrack=this.audioTrack.clone(),this.clonedAudioTrack.enabled=!0,e.process.updateStream(new MediaStream([this.clonedAudioTrack])))),this.updateStreamEvent(e.peerId,e.stream)}))}onVideoTrackUpdated(e){return br(this,void 0,void 0,(function*(){this.localMediaStream.addTrack(this.videoTrack),yield this.replaceTrack(this.videoTrack,e.connection,this.localMediaStream),this.updateStreamEvent(e.peerId,e.stream)}))}getDefaultMicrophone(){var e,t;let n=null===(t=null===(e=this.constraints)||void 0===e?void 0:e.audio)||void 0===t?void 0:t.deviceId;return n||(bn.isWindows&&this.mediaManager.audioInputDevices.find((e=>"communications"===e.deviceId))?n="communications":this.mediaManager.audioInputDevices.find((e=>"default"===e.deviceId))?n="default":this.mediaManager.audioInputDevices.length&&(n=this.mediaManager.audioInputDevices[0].deviceId)),n}restartInputAudio(){return br(this,void 0,void 0,(function*(){if(this.customAudio)return;const e=this.getDefaultMicrophone();yield this.selectAudioInput(e)}))}onAudioTrackEnded(){return br(this,void 0,void 0,(function*(){const e=this.audioTrack.getSettings().groupId;(yield this.mediaManager.getConnectedAudioInputDevices()).find((t=>t.groupId===e))&&(this.emit("onTrackEnded",new Ne({name:"TrackEndedError",message:"Audio track has unexpectedly ended."})),this.restartInputAudio())}))}selectAudioInputInternal(e){return br(this,void 0,void 0,(function*(){for(const t of this.peers.filter((e=>!0===e.isMaster))){let n=yield this.updateAudioTrack({deviceId:{exact:e.deviceId}});if(!n||n.type===On.ScreenShare)return;let r=n.getAudioTracks()[0];const i=r.getSettings();if(i.deviceId!==e.deviceId||i.groupId&&i.groupId!==e.groupId){const t=(yield this.mediaManager.getConnectedAudioInputDevices()).find((t=>e.groupId===t.groupId&&t.deviceId!==i.deviceId));if(t){const e=r.enabled;r.stop();const i=Object.assign(Object.assign({},this.constraints),{video:!1});i.audio.deviceId=t.deviceId,n=yield this.getUserMediaWithChecks(i),r=n.getAudioTracks()[0],r.enabled=e}}if(bn.isSafari){const t=r.clone();if(this.audioTrack=t,!n.active||"live"!==this.audioTrack.readyState)throw new Fe("Failed to start input audio track");t.onended=()=>br(this,void 0,void 0,(function*(){kr("Failed to start device, restarting...",e),yield this.selectAudioInput(e)})),setTimeout((()=>{t.onended=null}),45e3),r.stop()}else this.audioTrack=r;this.registerLocalAudioTrackEvents(this.audioTrack),this.customAudio=!1,yield this.onAudioTrackUpdated(t)}}))}selectAudioOutputInternal(e){return br(this,void 0,void 0,(function*(){const t=e.deviceId;if(t&&this.audioTags)for(const e of this.peers.filter((e=>!0===e.isMaster)))return yield this.audioTags.setSinkId(t),Promise.resolve();return Promise.reject(new Error("Unavailable"))}))}startScreenShare(e){return br(this,void 0,void 0,(function*(){return this.sharingStream?Promise.reject(new Error("Unable to start more than one screen share at a time.")):(bn.isChrome||bn.isEdge?e.hasOwnProperty("audio")&&!0!==e.audio||(e.audio={echoCancellation:!1,autoGainControl:!1,noiseSuppression:!1}):e.audio&&(console.warn("Screen-share with audio is not supported on this browser."),e.audio=!1),this.sharingStream=yield navigator.mediaDevices.getDisplayMedia(e),this.sharingStream.type=On.ScreenShare,Promise.resolve(this.sharingStream))}))}releaseScreenShare(){this.sharingStream&&this.sharingStream.getVideoTracks().length>0&&(this.sharingStream.getVideoTracks()[0].onended=null,this.sharingStream.getVideoTracks()[0].stop(),this.sharingStream.getAudioTracks()[0].onended=null,this.sharingStream.getAudioTracks()[0].stop(),this.sharingStream=null)}addMasterScreenStream(e,t="audioshare",n="screenshare"){return br(this,void 0,void 0,(function*(){const r=this.peers.find((e=>e.isMaster));r&&e&&(yield this.addScreenStream(e,r.connection,t,n),this.sharingStream.getVideoTracks()[0].onended=e=>{this.endedScreenStreamEvent()},this.addScreenStreamEvent(r.peerId,this.sharingStream))}))}changeScreenShare(e){return br(this,void 0,void 0,(function*(){if(this.sharingStream){this.sharingStream.getVideoTracks()[0].onended=null,yield Promise.all(this.peers.filter((e=>e.isMaster)).map((e=>br(this,void 0,void 0,(function*(){yield this.removeScreenStream(this.sharingStream,e.connection)}))))),this.sharingStream.getVideoTracks()[0].stop(),this.sharingStream=null;try{const t=yield navigator.mediaDevices.getDisplayMedia({video:!0,sourceId:e});return this.sharingStream!==t&&(this.sharingStream=t,yield Promise.all(this.peers.filter((e=>e.isMaster)).map((e=>br(this,void 0,void 0,(function*(){this.sharingStream&&(yield this.addScreenStream(this.sharingStream,e.connection),this.sharingStream.getVideoTracks()[0].onended=e=>{this.endedScreenStreamEvent()},this.updateScreenStreamEvent(e.peerId,this.sharingStream))})))))),this.sharingStream}catch(e){throw new Ne(e)}}}))}stopScreenShare(){return br(this,void 0,void 0,(function*(){this.sharingStream&&(this.sharingStream.getVideoTracks()[0].onended=null,yield Promise.all(this.peers.filter((e=>e.isMaster)).map((e=>br(this,void 0,void 0,(function*(){yield this.removeScreenStream(this.sharingStream,e.connection)}))))),yield Promise.all(this.peers.filter((e=>e.isMaster)).map((e=>br(this,void 0,void 0,(function*(){this.removeScreenStreamEvent(e.peerId,this.sharingStream),this.sharingStream.getVideoTracks()[0].stop(),this.sharingStream.getAudioTracks().length>0&&this.sharingStream.getAudioTracks()[0].stop(),this.sharingStream=null}))))))}))}changeRecordingDevice(){getUserMedia(constraints,(e=>{}))}_getRtcForTrack(e,t){return bn.isChrome?e.getStats().then((e=>[...e.values()].filter((e=>"track"===e.type&&e.trackIdentifier===t.id)))).then((e=>e[0].audioLevel)):e.getStats(t).then((e=>e.ssrc&&e.ssrc.audioInputLevel?e.ssrc.audioInputLevel:e.ssrc.audioOutputLevel))}_getRtcLevel(e,t){return e.stream?this._getRtcForTrack(e.connection,e.stream.getAudioTracks()[0]).then((e=>(20*Math.log10(e)+70)/80)).catch((e=>0)):Promise.resolve(0)}_getProcessLevel(e){var t=0;return e.process&&(e.process.update(),t=e.process.getLevel()),Promise.resolve(t)}_getStats(e,t){return e.getStats(t)}getInboundRtpStats(){return new Promise(((e,t)=>{let n={bytesReceived:0,packetsReceived:0};this.peers.filter((e=>!e.isMaster)).map((t=>{t.connection.getStats().then((t=>{t.forEach((e=>{"inbound-rtp"===e.type&&(n.bytesReceived+=e.bytesReceived,n.packetsReceived+=e.packetsReceived)})),e(n)}))}))}))}setVideoForwarding(e){var t;const n=this.ensurePeer({peerId:e,isMaster:!1,forwarded:!0});n.forwarded=!0,(null===(t=n.cachedVideoTracks)||void 0===t?void 0:t.length)&&(n.stream?(n.cachedVideoTracks.forEach((e=>{n.stream.addTrack(e)})),n.streamAddedEmitted?this.updateStreamEvent(e,n.stream):this.addStreamEvent(e,n.stream)):(n.stream=new MediaStream(n.cachedVideoTracks),this.addStreamEvent(e,n.stream))),n.cachedVideoTracks=[]}removeVideoForwarding(e){var t;const n=this.ensurePeer({peerId:e,isMaster:!1});n.forwarded=!1;const r=null===(t=n.stream)||void 0===t?void 0:t.getVideoTracks();n.cachedVideoTracks=r,(null==r?void 0:r.length)&&(n.stream&&r.forEach((e=>{n.stream.removeTrack(e)})),n.stream.getTracks().length>0?this.updateStreamEvent(e,n.stream):this.removeStreamEvent(e,n.stream))}handleIncomingMediaStream(e,t){if(!e.forwarded&&e.peerId!==kn){const n=t.getVideoTracks();if(null==n?void 0:n.length)return e.cachedVideoTracks=n,e.cachedVideoTracks.forEach((e=>{t.removeTrack(e)})),void(e.stream=t)}e.peerId!==kn&&this.dolbyVoice&&!t.getVideoTracks().length&&t.getAudioTracks().length||t.getTracks().length&&(e.streamAddedEmitted?this.updateStreamEvent(e.peerId,t):this.addStreamEvent(e.peerId,t)),e.stream=t}addFakeAudio(e){let t=this.peers.find((t=>t.peerId===e));t||(t=this.ensurePeer({peerId:e,isMaster:!1,forwarded:!1})),t.audioTransmitting=!0,t.stream?t.stream.getTracks().length||(t.stream=new Ln(t.stream),t.streamAddedEmitted?this.updateStreamEvent(e,t.stream):this.addStreamEvent(e,t.stream)):(t.stream=new Ln(new MediaStream),this.addStreamEvent(e,t.stream))}removeFakeAudio(e){const t=this.peers.find((t=>t.peerId===e));if(!(null==t?void 0:t.stream)||0===t.stream.getAudioTracks().length)return;t.audioTransmitting=!1;const n=t.stream.getAudioTracks().filter((e=>e instanceof zn));n.length&&(n.forEach((e=>{t.stream.removeTrack(e)})),t.stream.getTracks().length>0?this.updateStreamEvent(e,t.stream):this.removeStreamEvent(e,t.stream))}getRTCPeerConnections(){return this.peers.filter((e=>e.connection)).map((e=>e.connection))}getRtpStats(){return br(this,void 0,void 0,(function*(){const e=(new Date).getTime();return this.rtpStatsCache.timestamp+500<e&&(this.rtpStatsCache=new yr(e,yield this.getLocalRtpStats())),this.rtpStatsCache.data}))}getLocalRtpStats(){return br(this,void 0,void 0,(function*(){const e=this.peers.find((e=>e.isMaster)),t=yield this.getRtpStatsForTelemetry(),n=null==t?void 0:t.metrics;if(e){const t=n.get(e.peerId).filter((e=>"candidate-pair"===e.type));for(const[r,i]of n){let o=0,a=0;if(r===e.peerId){const e=i.filter((e=>("remote-inbound-rtp"===e.type||"inbound-rtp"===e.type)&&"audio"===e.kind)),n=i.filter((e=>"outbound-rtp"===e.type&&"audio"===e.kind));let s=[];if(this.lastStats[r]&&(s=this.lastStats[r].filter((e=>"outbound-rtp"===e.type&&"audio"===e.kind))),e.length>0&&n.length>0&&s.length>0&&n[0].bytesSent>s[0].bytesSent){let r=t[0].currentRoundTripTime?t[0].currentRoundTripTime:e[0].roundTripTime;r=r||this.recentlySeenRTT,this.recentlySeenRTT=r;const i=parseFloat(e[0].packetsLost)/parseFloat(n[0].packetsSent);o=tr(parseFloat(100*i),1e3*parseFloat(r),1e3*parseFloat(e[0].jitter))}if(this.localMediaStream){let e=this.localMediaStream.getVideoTracks();a=ir(this.lastStats[r],i,e)}}else{const e=i.filter((e=>"inbound-rtp"===e.type&&"audio"===e.kind));if(e.length>0&&t.length>0){const n=parseFloat(e[0].packetsLost)/parseFloat(e[0].packetsReceived);o=tr(parseFloat(100*n),1e3*parseFloat(t[0].currentRoundTripTime),1e3*parseFloat(e[0].jitter))}const n=this.peers.findIndex((e=>e.peerId===kn))>-1;a=rr(this.lastStats[r],i,n)}this.lastStats[r]=[...i],n.set(r,[...i,{id:"Scores",audio:o,video:a}])}}return n}))}getRemoteScreenStreamInfo(e){let t=null,n=null,r=null;return e&&(t=/([0-9]*)_?([a-zA-Z0-9]*)_?([0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12})/gm.exec(e.id)[3],n=e.id,r=e.getTracks().map((e=>e.id))),[t,n,r]}getRemoteStats(e,t){let n=new Map,r=e.getReceivers(),i=new Map(r.map((e=>[e.track.id,e.getSynchronizationSources().map((e=>e.source))])));return this.peers.forEach((({stream:e,peerId:r,isMaster:o})=>{if(!e)return;if(o)return;const a=this.remoteScreenStream.findIndex((e=>e.peerId===r)),s=a>-1?this.remoteScreenStream[a].stream:null,c=((e,t)=>{const n=[...e.getAudioTracks(),...e.getVideoTracks()];return t&&n.push(...t.getTracks()),n})(e,s),[u,d,l]=this.getRemoteScreenStreamInfo(s);let h=c.flatMap((n=>{if(!((e,t,n)=>e.find((e=>{var r;return"inbound-rtp"===e.type&&(null===(r=t.get(n))||void 0===r?void 0:r.includes(e.ssrc))})))(t,i,n.id))return[];const r=((e,t)=>{let n=null;return e.some((e=>"track"===e.type))?(n=e.find((e=>"track"===e.type&&e.trackIdentifier===t.id)),n.kind=t.kind):n={type:"track",id:t.id,kind:t.kind,trackIdentifier:t.id},n})(t,n),o=((e,t,n)=>{const r=e.find((e=>"inbound-rtp"===e.type&&t.get(n.trackIdentifier).includes(e.ssrc)));return r.trackId=n.id,r})(t,i,r),a=((e,t,n,r,i)=>e.some((e=>"stream"===e.type))?e.find((e=>"stream"===e.type&&e.trackIds.includes(n.id))):r&&r.includes(n.trackIdentifier)?{type:"stream",id:i,streamIdentifier:i,trackIds:[n.id]}:{type:"stream",id:t.id,streamIdentifier:t.id,trackIds:[n.id]})(t,e,r,l,d);return[o,r,a]}));n.set(r,h)})),n}getLocalScreenShareInfo(){return br(this,void 0,void 0,(function*(){if(null==this.screenTransceiver||null==this.screenTransceiver.sender||null==this.screenTransceiver.sender.track)return[null,null];let e=[...(yield this.screenTransceiver.sender.getStats()).values()].filter((e=>"outbound-rtp"===e.type));return e[0]?[e[0].ssrc,this.screenTransceiver.sender.track.id]:[null,null]}))}addContentTypeToScreenShareOutboundRtpStats(e,t,n){t&&n&&e.filter((e=>"outbound-rtp"===e.type)).forEach((e=>{e.ssrc===t&&(e.hasOwnProperty("contentType")||(e.contentType="screenshare"),e.hasOwnProperty("trackId")||(e.trackId=n))}))}getRtpStatsForTelemetry(){return br(this,void 0,void 0,(function*(){const e=(new Date).getTime();return this.rtpStatsForTelemetryCache.timestamp+500<e&&(this.rtpStatsForTelemetryCache=new yr(e,yield this.getLocalRtpStatsForTelemetry())),Object.assign({},this.rtpStatsForTelemetryCache.data)}))}getLocalRtpStatsForTelemetry(){return br(this,void 0,void 0,(function*(){const e=this.peers.find((e=>e.isMaster)),t={metrics:new Map};if(!e)return t;if(!e.connection)return t.metrics.set(e.peerId,[]),t;let n=yield e.connection.getStats(null);n=[...n.values()];const[r,i]=yield this.getLocalScreenShareInfo(),o=[];return n.filter((e=>"media-source"===e.type||"outbound-rtp"===e.type||"remote-inbound-rtp"===e.type&&e.localId||"candidate-pair"===e.type||"track"===e.type&&!1===e.remoteSource)).forEach((e=>{o.push(e)})),o.forEach((e=>{!e.hasOwnProperty("kind")&&e.hasOwnProperty("mediaType")&&(e.kind=e.mediaType)})),this.addContentTypeToScreenShareOutboundRtpStats(o,r,i),t.metrics.set(e.peerId,o),t.metrics=new Map([...t.metrics,...this.getRemoteStats(e.connection,n)]),t}))}_closePeerConnectionForPeer(e){if(e.process&&e.process.disconnect(),e&&e.stream&&(this.removeStreamEvent(e.peerId,e.stream),e.stream=null),e.connection&&"closed"!==e.connection.signalingState){if(this.screenTransceiver&&"inactive"!==this.screenTransceiver.currentDirection){const t=new MediaStream;t.type=On.ScreenShare,this.removeScreenStreamEvent(e.peerId,t),this.screenTransceiver.sender.track&&this.screenTransceiver.sender.track.stop()}e.connection.close()}e&&(e.close=!0)}onRemoveTrack(e,t){var n,r;if(kr("stream onRemoveTrack",t),-1!==t.currentTarget.id.search("screen_"))this.removeScreenStream(e,t.target);else{let i=this.peers.find((t=>t.peerId===e));if(!t.target.getTracks().length)return this.dolbyVoice&&(null==i?void 0:i.audioTransmitting)?(i.stream=new Ln(new MediaStream),void this.updateStreamEvent(e,i.stream)):void this.removeStreamEvent(e,t.target);if(this.dolbyVoice&&(null==i?void 0:i.audioTransmitting)&&(null===(n=t.target)||void 0===n?void 0:n.getVideoTracks().length)&&!(null===(r=t.target)||void 0===r?void 0:r.getAudioTracks().length))return void(i.stream=new Ln(t.target));this.updateStreamEvent(e,t.target)}}onScreenRemoveTrack(e,t){if(!t.target.getTracks().length){let n=this.peers.find((t=>t.peerId===e));n&&(n.sharedScreen=!1),kr("stream onScreenRemoveTrack",t),t.target.type=On.ScreenShare;const r=this.remoteScreenStream.findIndex((t=>t.peerId===e));r>-1&&(this.removeScreenStreamEvent(e,this.remoteScreenStream[r].stream),this.remoteScreenStream.splice(r,1))}}addStream(e,t,n=Nn.Camera){return br(this,void 0,void 0,(function*(){let r,i;if(kr("addStream",t.getTransceivers(),t.getSenders()),n==Nn.Camera?(this.audioTransceiver=t.getTransceivers().find((e=>"audio"===e.mid)),this.videoTransceiver=t.getTransceivers().find((e=>"video"===e.mid)),r=this.audioTransceiver,i=this.videoTransceiver):(r=t.getTransceivers().find((e=>e.mid===`audio${n}`)),i=t.getTransceivers().find((e=>e.mid===`video${n}`))),r&&e.getAudioTracks().length>0&&!this.wasm&&this.addTrack(e.getAudioTracks()[0],t,null),i&&(e.getVideoTracks().length>0&&this.addTrack(e.getVideoTracks()[0],t,null),this.options&&this.options.simulcast))try{const e=i.sender.getParameters();e.encodings||(e.encodings=[{rid:"l",active:!0},{rid:"m",active:!0},{rid:"h",active:!0}]),e.encodings[0]&&(e.encodings[0].scaleResolutionDownBy=4,e.encodings[0].maxBitrate=2e5,e.encodings[0].maxFramerate=20),e.encodings[1]&&(e.encodings[1].scaleResolutionDownBy=2,e.encodings[1].maxBitrate=7e5,e.encodings[1].maxFramerate=25),e.encodings[2]&&(e.encodings[2].scaleResolutionDownBy=1,e.encodings[2].maxBitrate=24e5,e.encodings[2].maxFramerate=25),yield i.sender.setParameters(e)}catch(e){console.error("Simulcast can't be activated"),kr("simulcast error",e)}}))}setDirection(e,t){e.setDirection?e.setDirection(t):e.direction=t}addScreenStream(e,t,n="audioshare",r="screenshare"){return br(this,void 0,void 0,(function*(){yield Promise.all(t.getTransceivers().map((t=>br(this,void 0,void 0,(function*(){t.mid===r?(this.screenTransceiver=t,this.setDirection(t,"sendonly"),yield t.sender.replaceTrack(e.getVideoTracks()[0])):t.mid===n&&(this.screenAudioTransceiver=t,this.setDirection(t,"sendonly"),yield t.sender.replaceTrack(e.getAudioTracks()[0]))})))))}))}removeScreenStream(e,t){return br(this,void 0,void 0,(function*(){this.screenAudioTransceiver&&(this.setDirection(this.screenAudioTransceiver,"recvonly"),yield this.screenAudioTransceiver.sender.replaceTrack(null)),this.screenTransceiver&&(this.setDirection(this.screenTransceiver,"recvonly"),yield this.screenTransceiver.sender.replaceTrack(null))}))}addTrack(e,t,n){return br(this,void 0,void 0,(function*(){yield Promise.all(t.getTransceivers().map((t=>br(this,void 0,void 0,(function*(){if(t.mid===e.kind){this.setDirection(t,"audio"===t.mid?"sendrecv":"sendonly"),yield t.sender.replaceTrack(e);const n={track:{readyState:null==e?void 0:e.readyState,kind:null==e?void 0:e.kind,enabled:null==e?void 0:e.enabled,id:null==e?void 0:e.id}};this.emit("traceRtcEvent",Te.ConferenceGlobalTrace.fromData({api:"VoxeetRTCNative.addTrack",data:n}))}})))))}))}removeTrack(e,t,n){return br(this,void 0,void 0,(function*(){yield Promise.all(t.getTransceivers().map((t=>br(this,void 0,void 0,(function*(){if(t.mid===e.kind){this.setDirection(t,"audio"===t.mid?"recvonly":"inactive"),yield t.sender.replaceTrack(null);const n={track:{readyState:null==e?void 0:e.readyState,kind:null==e?void 0:e.kind,enabled:null==e?void 0:e.enabled,id:null==e?void 0:e.id}};this.emit("traceRtcEvent",Te.ConferenceGlobalTrace.fromData({api:"VoxeetRTCNative.removeTrack",data:n}))}})))))}))}replaceTrack(e,t){return br(this,void 0,void 0,(function*(){yield Promise.all(t.getTransceivers().map((t=>br(this,void 0,void 0,(function*(){if(t.mid===e.kind){yield t.sender.replaceTrack(e);const n={track:{readyState:null==e?void 0:e.readyState,kind:null==e?void 0:e.kind,enabled:null==e?void 0:e.enabled,id:null==e?void 0:e.id}};this.emit("traceRtcEvent",Te.ConferenceGlobalTrace.fromData({api:"VoxeetRTCNative.replaceTrack",data:n}))}})))))}))}onAudioTagError(e){return br(this,void 0,void 0,(function*(){this.emit("error",it(null==e?void 0:e.code,null==e?void 0:e.message)),bn.isAndroid&&(this.audioTags.removeAllAudioTags(),yield this.callWithoutConcurrency(this.restartAllAudioTrackInstances))}))}restartAllAudioTrackInstances(){return br(this,void 0,void 0,(function*(){for(let e of this.peers)if(e.connection){const t=e.connection.remoteDescription,n=new xn({type:t.type,sdp:or(t.sdp)});try{yield e.connection.setRemoteDescription(n)}catch(t){console.error("webrtc","VoxeetRTC.restartAllAudioTrackInstances error: ",e.peerId,t)}try{yield e.connection.setRemoteDescription(t)}catch(t){console.error("webrtc","VoxeetRTC.restartAllAudioTrackInstances error: ",e.peerId,t)}}}))}updateOptions(e){this.options=Object.assign(Object.assign({},this.options),e)}restartAudioElemets(){return br(this,void 0,void 0,(function*(){this.audioTags&&(yield this.audioTags.restartAudioTags())}))}},Er=n(1665);function Tr(){let e;return"undefined"!=typeof document&&(e=function(){let e,t;if(e=document.currentScript,e)t=e.src.split("?")[0];else{const e=document.getElementsByTagName("script");if(!e||0===e.length)return;if(e[e.length-1].src.includes("voxeet-sdk.js"))t=e[e.length-1].src.split("?")[0];else{const n=Array.from(e).find((e=>e.src.includes("voxeet-sdk.js")));n&&(t=n.src.split("?")[0])}}if(t)return t.split("/").slice(0,-1).join("/")+"/"}()),e?e||"/":"//"}let Cr=Tr();function jr(){return Cr}function xr(e,t="9323e086e16f3241de2cc31184d7b5ea"){return Cr+e+"?"+t}class Pr{static get wasmFileUrl(){return xr("dapm_impl.wasm","2febc590a084ffcb3bb2bfb2b8da4a15")}static get dnrLibraryFileUrl(){return xr("dvdnr.wasm","3fce421b27d87403287e7d94e770f57e")}static get dnrModelFileUrl(){return xr("audio_dnr.bin","3fce421b27d87403287e7d94e770f57e")}}var Ir=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const Mr=xe()("vxt:rtc:uplan:dapm");class Rr{constructor(){this.dapm=null,this.dapmProcessing=null,this.processSettings={aceMode:Er.AceMode.STANDARD,agc:!1,noiseSuppression:!0},this.noProcessSettings={aceMode:Er.AceMode.PASSTHROUGH,agc:!1,noiseSuppression:!1},this.voicefontOnlySettings={aceMode:Er.AceMode.VOICEFONT_ONLY,agc:!1,noiseSuppression:!1},this.audioLoggingLength=0,this.aceConfiguration=this.processSettings,this.voiceFont="none",this.streamProcessor=null,this.streamGenerator=null,this.streamTransformer=null,this.abortController=null}static onDapmLog(e,t,n,r){let i=`${e} ${n}: (line: ${r}): ${t}`;switch(e){case Er.LogSeverity.DEBUG:mr.debug(i);break;case Er.LogSeverity.INFO:mr.info(i);break;case Er.LogSeverity.WARNING:mr.warn(i);break;case Er.LogSeverity.ERROR:mr.error(i);break;default:mr.info(i)}}loadDapmModule(e){return Ir(this,void 0,void 0,(function*(){try{this.dapm||(this.dapm=yield Er.getDapm({wasmFilePath:e}),this.dapm.registerLoggerCallback(Rr.onDapmLog))}catch(e){return Mr(e),!1}return!0}))}init(e,t,n){return Ir(this,void 0,void 0,(function*(){try{if(!(yield this.loadDapmModule(e)))return{initialized:!1,reason:"fetch"};const r=()=>this.aceConfiguration.aceMode===Er.AceMode.STANDARD&&!0===this.aceConfiguration.noiseSuppression,i=e=>{switch(e){case 16e3:return Er.SampleRate._16kHz;case 32e3:return Er.SampleRate._32kHz;case 48e3:return Er.SampleRate._48kHz;default:throw new Error("Bad sample_rate :"+e)}};let o=r()?Pr.dnrLibraryFileUrl:"",a=r()?Pr.dnrModelFileUrl:"",s=i(t.sampleRate);Mr("DAPM (",Er.getVersion(),") create in ace mode: ",this.aceConfiguration.aceMode,"[standard/passthrough/voicefont_only]");let c=Mr.enabled||!1;this.dapmProcessing=yield this.dapm.createAudioProcessing({sample_rate:s,num_channels:t.channelCount,input_scaling:1,enable_audio_logging:!0,audio_logging_length:0,mode:this.aceConfiguration.aceMode,dnr_lib_path:o,dnr_model_path:a,access_token:wt.accessToken,log_severity:c?Er.LogSeverity.DEBUG:Er.LogSeverity.INFO},n,null),null!=this.aceConfiguration.agc&&(Mr("DAPM set agc: ",this.aceConfiguration.agc,"[true/false]"),this.dapmProcessing.setAgcEnable(this.aceConfiguration.agc)),this.aceConfiguration.aceMode==Er.AceMode.STANDARD&&null!=this.aceConfiguration.noiseSuppression?(Mr("DAPM set noise suppression: ",this.aceConfiguration.noiseSuppression,"[true/false]"),this.dapmProcessing.setNoiseSupressionEnable(this.aceConfiguration.noiseSuppression)):Mr("DAPM noise suppression: false (AceMode not supporting NS)"),null!=this.voiceFont&&(Mr("DAPM use voice font: ",this.voiceFont),this.dapmProcessing.setVoiceFont(this.voiceFont))}catch(e){return console.warn(e),{initialized:!1,reason:e}}return{initialized:!0}}))}reset(){this.dapm&&this.dapmProcessing&&(this.dapm.clean(),this.dapmProcessing=null)}getProcessedTrack(e){return Ir(this,void 0,void 0,(function*(){if(!bn.isChrome&&!bn.isEdge)return e;this.streamProcessor=new MediaStreamTrackProcessor(e),this.streamGeneratorClass=class extends MediaStreamTrackGenerator{constructor(e,t){super(e),this.baseTrack=t}getCapabilities(){return this.baseTrack.getCapabilities()}getSettings(){return this.baseTrack.getSettings()}getConstraints(){return this.baseTrack.getConstraints()}applyConstraints(){return this.baseTrack.applyConstraints()}},this.streamGenerator&&this.streamGenerator.stop(),this.streamGenerator=new this.streamGeneratorClass("audio",e);const t=this.streamProcessor.readable,n=this.streamGenerator.writable;this.streamTransformer=new TransformStream({transform:this.dapmTransformer()}),this.abortController=new AbortController;const r=this.abortController.signal;return t.pipeThrough(this.streamTransformer,{signal:r}).pipeTo(n).catch((e=>{t.cancel(e),n.abort(e)})),this.streamGenerator}))}dapmTransformer(){return(e,t)=>{t.enqueue(new AudioData({format:"f32-planar",sampleRate:e.sampleRate,numberOfFrames:e.numberOfFrames,numberOfChannels:e.numberOfChannels,timestamp:e.timestamp,data:this.dapmProcessing.process(e)}))}}getStateDump(e){let t=Er.StateDumpMode.STANDARD;return("boolean"==typeof e&&e||"object"==typeof e&&e.hasOwnProperty("liteMode")&&e.liteMode)&&(t=Er.StateDumpMode.LITE),this.dapmProcessing.getStateDump(t)}setAudioLoggingLength(e){this.dapmProcessing.setAudioLoggingLength(e),this.audioLoggingLength=e}updateAudioProcessing(e){var t,n;let r=void 0!==(null===(t=e.modeOptions)||void 0===t?void 0:t.noiseReductionLevel)?e.modeOptions.noiseReductionLevel:ur.High;this.voiceFont=void 0!==(null===(n=e.modeOptions)||void 0===n?void 0:n.voiceFont)?e.modeOptions.voiceFont:"none",this.aceConfiguration=this.captureModeToAceMode(e,r)}captureModeToAceMode(e,t){if(e&&e.mode)switch(e.mode){case cr.Unprocessed:case cr.Music:return this.noProcessSettings;case cr.Standard:switch(t){case ur.Low:return this.voicefontOnlySettings;default:case ur.High:return this.processSettings}}throw new Error("Failed to convert audio processing options to DAPM options")}enableNoiseSuppression(e){this.dapmProcessing&&this.dapmProcessing.setNoiseSupressionEnable(e)&&(this.aceConfiguration.noiseSuppression=e),Mr("DAPM NS update aceConfiguration: ",this.aceConfiguration)}getDvcStats(){return Ir(this,void 0,void 0,(function*(){const e={};return this.dapmProcessing&&(e.inputAudioStats=this.dapmProcessing.getStats()),e}))}}var Ar,Dr=Rr;!function(e){e["N/A"]="N/A",e.NONE="NONE",e.FETCHED="FETCHED",e.FAILED="FAILED",e.FETCHING="FETCHING"}(Ar||(Ar={}));var Or=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const Nr=xe()("vxt:rtc:uplan"),Fr="DAPM_WASM_FILE_FETCHED";class Lr extends Sr{constructor(e){super(e),this.originalTrack=null,this.dapmEnabled=!1,this.shouldDapmBeUsed=!1,this.dapmAudioProcess=null,this.mediaManager.getComfortNoiseLevel=()=>Promise.reject(new Error("not supported")),this.mediaManager.setComfortNoiseLevel=e=>Promise.reject(new Error("not supported"))}init({constraints:e,captureMode:t,processCb:n,listenOnly:r,ownerId:i,options:o,videoTrack:a,audioTrack:s,dolbyVoice:c}){const u=Object.create(null,{init:{get:()=>super.init}});return Or(this,void 0,void 0,(function*(){this.dapmEnabled=Kn(null==o?void 0:o.audioTweaks),this.shouldDapmBeUsed=(bn.isChrome||bn.isEdge)&&this.dapmEnabled,Nr("Dapm",this.shouldDapmBeUsed?"will":"will not","be used. Details: [(chrome || edge) && dapm_enabled]: ",bn.isChrome,bn.isEdge,this.dapmEnabled),this.shouldDapmBeUsed?this.dapmAudioProcess?Nr("dapm already inited"):this.dapmWasmFileStatus=Ar.NONE:this.dapmWasmFileStatus=Ar["N/A"],yield u.init.call(this,{constraints:e,captureMode:t,processCb:n,listenOnly:r,ownerId:i,options:o,videoTrack:a,audioTrack:s,dolbyVoice:c})}))}release(){const e=Object.create(null,{release:{get:()=>super.release}});return Or(this,void 0,void 0,(function*(){this.dapmAudioProcess&&this.dapmAudioProcess.reset(),this.originalTrack&&this.originalTrack.stop(),e.release.call(this)}))}onAddTrack(e,t,n){if(Nr("stream onAddTrack",n),n.track&&"audio"===n.track.kind){const r=this.getPeerPosition(e);this.audioContext&&(t.process?t.process.updateStream(n.target):(t.process=new fr(this.audioContext,n.target,!1,this.audio3D),t.process.connect())),this.setPeerPosition(e,r.x,r.y)}this.updateStreamEvent(e,n.target)}addStreamEvent(e,t){super.addStreamEvent(e,t),this.peers.findIndex((e=>e.peerId===kn))>-1?this.peers.filter((t=>t.peerId===e&&!t.isMaster&&t.peerId===kn)).forEach((()=>Or(this,void 0,void 0,(function*(){yield this.callWithoutConcurrency(this.createAudioTag,e,t)})))):this.peers.filter((t=>t.peerId===e&&!t.isMaster)).forEach((n=>Or(this,void 0,void 0,(function*(){yield this.callWithoutConcurrency(this.createAudioTag,e,t,n.volume)}))))}isDapm(){return this.shouldDapmBeUsed}isDapmEnabled(){return this.dapmEnabled}getAudioTrackSettings(){return null!=this.originalTrack?this.originalTrack.getSettings():super.getAudioTrackSettings()}modifyConstraintsForFailedDapm(e,t){return wr(t,_r(!1,this.dolbyVoice),!1)}updateInternalAudioProcessing(e,t){var n;return t&&this.shouldDapmBeUsed?this.dapmWasmFileStatus==Ar.FAILED?this.modifyConstraintsForFailedDapm(e,t):(this.dapmAudioProcess||this.dapmWasmFileStatus!=Ar.NONE||(this.dapmAudioProcess=new Dr),null===(n=this.dapmAudioProcess)||void 0===n||n.updateAudioProcessing(t),e):e}getUserMediaWithChecks(e,t){const n=Object.create(null,{getUserMediaWithChecks:{get:()=>super.getUserMediaWithChecks}});var r;return Or(this,void 0,void 0,(function*(){let i=null,o=this.dapmWasmFileStatus==Ar.FETCHED;if(this.dapmWasmFileStatus==Ar.NONE&&this.dapmAudioProcess&&(this.dapmWasmFileStatus=Ar.FETCHING,o=yield null===(r=this.dapmAudioProcess)||void 0===r?void 0:r.loadDapmModule(Pr.wasmFileUrl),this.dapmWasmFileStatus=o?Ar.FETCHED:Ar.FAILED,this.emit(Fr)),o||(e.audio=this.updateInternalAudioProcessing(e.audio,t)),i=yield n.getUserMediaWithChecks.call(this,e),o){let{audioTrack:r,dapmFailed:o}=yield this.applyAudioProcessing(i.getAudioTracks()[0]);if(o){const o=i.getAudioTracks()[0];this.unregisterAudioTrackEvents(o),o.stop(),o.enabled=!1,e.audio=this.updateInternalAudioProcessing(e.audio,t),r=(yield n.getUserMediaWithChecks.call(this,e)).getAudioTracks()[0]}i.removeTrack(i.getAudioTracks()[0]),i.addTrack(r)}return i}))}applyAudioProcessing(e){var t,n;return Or(this,void 0,void 0,(function*(){const r=function(e){switch(e){case Er.DnrStatus.NOT_CONFIGURED:case Er.DnrStatus.CONFIGURED_DISABLED:this.dnrEvent(!1);break;case Er.DnrStatus.CONFIGURED_ENABLED:this.dnrEvent(!0)}}.bind(this);if(this.shouldDapmBeUsed&&this.dapmWasmFileStatus!==Ar.FAILED){this.originalTrack=e;const i=this.originalTrack.getSettings();this.dapmAudioProcess||(this.dapmAudioProcess=new Dr);const{initialized:o,reason:a}=yield this.dapmAudioProcess.init(Pr.wasmFileUrl,i,r);if(!o)return null===(n=null===(t=this.dapmAudioProcess)||void 0===t?void 0:t.release)||void 0===n||n.call(t),this.dapmAudioProcess=null,this.originalTrack=null,"fetch"===a?this.dapmWasmFileStatus=Ar.FAILED:a instanceof Error&&(this.dapmWasmFileStatus=Ar.FETCHED),Nr("Dapm creation failed"),this.emit(Fr),{audioTrack:e,dapmFailed:!0};this.dapmWasmFileStatus=Ar.FETCHED,this.emit(Fr),Nr("Dapm is ready"),e=yield this.dapmAudioProcess.getProcessedTrack(this.originalTrack)}return{audioTrack:e,dapmFailed:!1}}))}getDapmWasmFileStatus(){return this.dapmWasmFileStatus}awaitDapmReady(e){return new Promise(((t,n)=>{null==e||e.addEventListener("abort",(()=>n("aborted"))),(null==e?void 0:e.aborted)&&n("aborted"),this.isDapm()&&this.dapmWasmFileStatus!==Ar["N/A"]&&this.dapmWasmFileStatus!==Ar.FAILED?this.dapmWasmFileStatus===Ar.FETCHED?t(!0):this.dapmWasmFileStatus===Ar.NONE||this.dapmWasmFileStatus===Ar.FETCHING?(Nr("await DAPM wasm file"),this.once(Fr,(()=>t(this.dapmWasmFileStatus===Ar.FETCHED)))):n("unknown dapm file status"):t(!1)}))}updateAudioProcessing(e,t){const n=Object.create(null,{updateAudioProcessing:{get:()=>super.updateAudioProcessing}});return Or(this,void 0,void 0,(function*(){e=this.updateInternalAudioProcessing(e,t),this.customAudio&&this.originalTrack?(this.audioTrack=(yield this.applyAudioProcessing(this.originalTrack)).audioTrack,this.dapmAudioProcess&&(this.localMediaStream&&this.localMediaStream.removeTrack(this.localMediaStream.getAudioTracks()[0]),yield this.onAudioTrackUpdated(this.peers.find((e=>e.isMaster))))):yield n.updateAudioProcessing.call(this,e)}))}updateAudioTrack(e,t=!0){const n=Object.create(null,{updateAudioTrack:{get:()=>super.updateAudioTrack}});return Or(this,void 0,void 0,(function*(){return this.originalTrack&&this.originalTrack.stop(),yield n.updateAudioTrack.call(this,e,t)}))}updateStreamEvent(e,t){super.updateStreamEvent(e,t),this.peers.findIndex((e=>e.peerId===kn))>-1?this.peers.filter((t=>t.peerId===e&&!t.isMaster&&t.peerId===kn)).forEach((()=>Or(this,void 0,void 0,(function*(){yield this.callWithoutConcurrency(this.updateAudioTag,e,t)})))):this.peers.filter((t=>t.peerId===e&&!t.isMaster)).forEach((n=>Or(this,void 0,void 0,(function*(){yield this.callWithoutConcurrency(this.updateAudioTag,e,t,n.volume)}))))}configureStateDump(e){if(!this.shouldDapmBeUsed||!this.dapmAudioProcess)throw new Be("Configuring state dumps is unsupported in current configuration");this.dapmAudioProcess.setAudioLoggingLength(e)}createStateDump(e){if(!this.shouldDapmBeUsed||!this.dapmAudioProcess)throw new Be("Creating state dumps is unsupported in current configuration");var t=this.dapmAudioProcess.getStateDump(e);return t.component="dapm",t}dnrEvent(e){this.emit("onDnrStatusChange",e)}addTrackListeners(e,t,n,r){return Or(this,void 0,void 0,(function*(){r.ontrack=e=>{let t=e.streams[0];if(t){let n=this.checkStream(t);const r=this.ensurePeer({peerId:n,isMaster:!1});if(r.closed=!1,-1===e.streams[0].id.search("screen_"))e.streams[0].getAudioTracks().length>0&&(this.audioContext&&(r.process?r.process.updateStream(e.streams[0]):(r.process=new fr(this.audioContext,e.streams[0],!1,this.audio3D,this.conferenceGain),r.process.connect())),e.streams[0].getAudioTracks()[0].enabled=!this.isOutputMuted),e.streams[0].onremovetrack=e=>this.onRemoveTrack(n,e),this.handleIncomingMediaStream(r,e.streams[0]);else{e.streams[0].onremovetrack=e=>this.onScreenRemoveTrack(n,e);const t=e.streams[0];t.type=On.ScreenShare,this.remoteScreenStream.push({stream:t,peerId:n}),setTimeout((()=>{r.sharedScreen&&!0===r.sharedScreen?this.updateScreenStreamEvent(n,e.streams[0]):(this.addScreenStreamEvent(n,e.streams[0]),r.sharedScreen=!0)}),1)}}}}))}getLocalRtpStatsForTelemetry(){const e=Object.create(null,{getLocalRtpStatsForTelemetry:{get:()=>super.getLocalRtpStatsForTelemetry}});return Or(this,void 0,void 0,(function*(){const t=yield e.getLocalRtpStatsForTelemetry.call(this);return this.dapmAudioProcess&&(t.dvcStats=yield this.dapmAudioProcess.getDvcStats()),t}))}}var zr=class{static create(e){return Sn?new Hn:new Lr(e)}static sdpSemantics(){return"unified-plan"}static sdpVersion(){return"SDP_V6"}static createDvwcOptions(e,t){return bn.isDesktop&&(bn.isChrome||bn.isEdge)&&e&&t&&t.enabled?"boolean"==typeof e?t:Object.assign(t,e):null}},Ur=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};xe()("vxt:rtc:electron");class Vr{constructor(e){this.audioContext=e,this.oscillator=null,this.fakeAudioSendStream=null}release(){this.stopFakeAudioSendStreamTrack()}addMasterStream(e,t,n){return Ur(this,void 0,void 0,(function*(){t||(yield this.addFakeAudioSendStreamTrack(e.connection,t,n))}))}addStream(e,t,n){return Ur(this,void 0,void 0,(function*(){e.getAudioTracks().length||(yield this.addFakeAudioSendStreamTrack(t,e,n))}))}addTrack(e,t,n,r){return Ur(this,void 0,void 0,(function*(){yield this.removeFakeAudioSendStreamTrack(e,t,n,r)}))}removeTrack(e,t,n){return Ur(this,void 0,void 0,(function*(){yield this.addFakeAudioSendStreamTrack(e,t,n)}))}addFakeAudioSendStreamTrack(e,t,n){return Ur(this,void 0,void 0,(function*(){e.dvc().setListenerMode(!0),yield n(this.startFakeAudioSendStreamTrack(),e,t)}))}removeFakeAudioSendStreamTrack(e,t,n,r){return Ur(this,void 0,void 0,(function*(){yield r(e,t,n),this.stopFakeAudioSendStreamTrack(),t.dvc().setListenerMode(!1),e.enabled=!1,e.enabled=!0}))}startFakeAudioSendStreamTrack(){return this.fakeAudioSendStream||(this.oscillator=this.audioContext.createOscillator(),this.fakeAudioSendStream=this.audioContext.createMediaStreamDestination(),this.oscillator.connect(this.fakeAudioSendStream),this.oscillator.start()),this.fakeAudioSendStream.stream.getAudioTracks()[0]}stopFakeAudioSendStreamTrack(){this.fakeAudioSendStream&&(this.oscillator.stop(),this.oscillator.disconnect(),this.oscillator=null,this.fakeAudioSendStream=null)}}class Br extends Lr{constructor(e){super(e),this.engine=null,this.dvcConference=null,this.dvc=null,this.dvc2FakeAudioTrackHelper=null}db2vu(e){if(e===-1/0||e<-100)return 0;if(e>=0)return 1;let t=e/100,n=Math.PI/2+Math.PI/2*t,r=1-Math.cos(n);return r>1?1:r}addPeer({peerId:e,description:t,candidates:n,isMaster:r,state:i="default"}){const o=Object.create(null,{addPeer:{get:()=>super.addPeer}});return Ur(this,void 0,void 0,(function*(){yield o.addPeer.call(this,{peerId:e,description:t,candidates:n,isMaster:r,state:i});const a=this.peers.find((t=>t.peerId===e));a&&a.isMaster&&(this.dvcConference=a.connection.dvc(),this.dvcConference.setConferenceDisconnectedErrorCallback(this.conferenceDisconnectedErrorCallback.bind(this)),this.dvc=new DolbyVoice,this.dvc.setFatalErrorCallback(this.fatalErrorCallback.bind(this)),this.mediaManager.getComfortNoiseLevel=this.getComfortNoiseLevel.bind(this),this.mediaManager.setComfortNoiseLevel=this.setComfortNoiseLevel.bind(this))}))}configureStateDump(e=60){return Ur(this,void 0,void 0,(function*(){if(!this.dvc)throw et();return Br.throwIfNotSupported(this.dvc,"setAudioLoggingLength"),this.dvc.setAudioLoggingLength(e)}))}getStateDumpConfiguration(){return Ur(this,void 0,void 0,(function*(){if(!this.dvc)throw et();return Br.throwIfNotSupported(this.dvc,"getAudioLoggingLength"),this.dvc.getAudioLoggingLength()}))}createStateDump(e){return Ur(this,void 0,void 0,(function*(){if(!this.dvcConference)throw et();Br.throwIfNotSupported(this.dvcConference,"createStateDump");const t=yield this.createStateDumpBuffer(e);return{type:"zip",content:new Blob([t])}}))}createStateDumpBuffer(e){return Ur(this,void 0,void 0,(function*(){if(!e)return this.dvcConference.createStateDump();const t=yield this.getStateDumpConfiguration();0!=t&&(yield this.configureStateDump(0));const n=yield this.dvcConference.createStateDump();return 0!=t&&(yield this.configureStateDump(t)),n}))}getLevel(e,t){const n=this.peers.find((t=>t.peerId===e));n&&n.isMaster?t(0):n&&!n.isMaster?this.dvcConference.getTalkingLevels().then((n=>{const r=n.find((t=>t.clientId.split("@")[0]===e));t(r.talkingLevel)})).catch((e=>t(0))):t(0)}setRemoteDescription(e,t,n,r,i){const o=Object.create(null,{setRemoteDescription:{get:()=>super.setRemoteDescription}});return Ur(this,void 0,void 0,(function*(){yield o.setRemoteDescription.call(this,e,t,n,r,null,i),((e,t,n)=>{const r=(e=>e.split("m=").slice(1).map((e=>"m="+e)))(e),i=r.find((e=>((e,t)=>{const n=(e=>{const t=/^a=mid:(.*)$/m.exec(e);return!t||t.length<2?null:t[1]})(e);return!!n&&"audio"===n})(e)));return!!i&&RegExp("^a=rtpmap:.*DVC-2.*$","m").test(i)})(r)&&!this.dvc2FakeAudioTrackHelper&&(this.dvc2FakeAudioTrackHelper=new Vr(this.audioContext))}))}addMasterStream(e){const t=Object.create(null,{addMasterStream:{get:()=>super.addMasterStream},addTrack:{get:()=>super.addTrack}});return Ur(this,void 0,void 0,(function*(){if(yield t.addMasterStream.call(this,e),this.dvc2FakeAudioTrackHelper)return this.dvc2FakeAudioTrackHelper.addMasterStream(e,this.localMediaStream,((e,n,r)=>Ur(this,void 0,void 0,(function*(){return t.addTrack.call(this,e,n,r)}))))}))}addStream(e,t){const n=Object.create(null,{addStream:{get:()=>super.addStream},addTrack:{get:()=>super.addTrack}});return Ur(this,void 0,void 0,(function*(){if(yield n.addStream.call(this,e,t),this.dvc2FakeAudioTrackHelper)return this.dvc2FakeAudioTrackHelper.addStream(e,t,((e,t,r)=>Ur(this,void 0,void 0,(function*(){return n.addTrack.call(this,e,t,r)}))))}))}addTrack(e,t,n){const r=Object.create(null,{addTrack:{get:()=>super.addTrack}});return Ur(this,void 0,void 0,(function*(){if(this.dvc2FakeAudioTrackHelper&&"audio"===e.kind)return this.dvc2FakeAudioTrackHelper.addTrack(e,t,n,((e,t,n)=>Ur(this,void 0,void 0,(function*(){return r.addTrack.call(this,e,t,n)}))));yield r.addTrack.call(this,e,t,n)}))}removeTrack(e,t,n){const r=Object.create(null,{replaceTrack:{get:()=>super.replaceTrack},removeTrack:{get:()=>super.removeTrack}});return Ur(this,void 0,void 0,(function*(){if(this.dvc2FakeAudioTrackHelper&&"audio"===e.kind)return this.dvc2FakeAudioTrackHelper.removeTrack(t,n,((e,t,n)=>Ur(this,void 0,void 0,(function*(){return r.replaceTrack.call(this,e,t,n)}))));yield r.removeTrack.call(this,e,t,n)}))}release(){super.release(),this.dvcConference&&this.dvcConference.setConferenceDisconnectedErrorCallback(null),this.dvc=null,this.dvcConference=null,this.dvc2FakeAudioTrackHelper&&this.dvc2FakeAudioTrackHelper.release()}setTransparentMode(e){this.dvc.setTransparentMode(e)}setComfortNoiseLevel(e){return this.dvc.setComfortNoise(e)}getComfortNoiseLevel(){return this.dvc.getComfortNoise()}conferenceDisconnectedErrorCallback(e){this.emit("error",new qe("ConferenceDisconnectedError",e))}fatalErrorCallback(){this.dvc=null,this.dvcConference=null,this.emit("error",new qe("FatalError","DolbyVoice process has crashed, please reload your app."))}addFakePeer(e){this.ensurePeer({peerId:e,isMaster:!1})}static throwIfNotSupported(e,t){if(!(t in e))throw new Be(`'${t}' is unsupported by ${e.constructor.name} object. Please try the latest NDS version.`)}}function Wr(e,t){if(!t)return e;const{customPath:n}=t;return n?n():e}class Gr{static get dnrLibraryFileUrl(){return xr("dvdnr.wasm","3fce421b27d87403287e7d94e770f57e")}static get mainModelUrl(){const e="audio_dnr.bin";return{name:e,fileUrl:xr(e,"3fce421b27d87403287e7d94e770f57e")}}static get sideModelsUrls(){return[]}}var Hr=n(4590),Yr=n.n(Hr),$r=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};let Zr=!1;class qr{constructor(e,t,n,r){this.audioPort=e,this.audioContext=t,this.enableInput=n.enableInput,this.config=n,this.reportCallback=r,Zr||(this.workletModuleLoaded=this.fetchWorkletScript())}fetchWorkletScript(){const e=xr(Yr());return fetch(e).then((e=>e.text())).then((e=>{const t=new Blob([e],{type:"application/javascript; charset=utf-8"}),n=URL.createObjectURL(t);return this.audioContext.audioWorklet.addModule(n).finally((()=>URL.revokeObjectURL(n)))})).then(Zr=!0)}createWorklet(){"undefined"!=typeof window&&(this.audioNode=new window.AudioWorkletNode(this.audioContext,"dvwc-worklet",{outputChannelCount:[2],processorOptions:Object.assign({namespaces:localStorage.getItem("debug")},this.config)}))}createAudioNode(){return $r(this,void 0,void 0,(function*(){if(!this.audioNode){if(yield this.workletModuleLoaded,this.audioNode)return;try{this.createWorklet()}catch(e){yield this.fetchWorkletScript(),this.createWorklet()}this.audioNode.port.onmessage=e=>this.reportCallback(e.data);const e={audioPort:this.audioPort};this.audioNode.port.postMessage(e,[this.audioPort])}}))}freeAudioResources(){this.audioNode.port.postMessage({action:"stop"}),this.audioNode&&this.audioNode.disconnect(),this.audioNode=null}}class Xr{constructor(e){const t=URL.createObjectURL(new Blob([`importScripts(${JSON.stringify(e.toString())});`],{type:"application/javascript"}));this.worker=new Worker(t),URL.revokeObjectURL(t)}getWorker(){return this.worker}}self.location.href,Object.freeze([1,5,3]);const Kr=Object.freeze({FEC_BITRATE_6P4:"FEC_BITRATE_6P4",FEC_BITRATE_8P0:"FEC_BITRATE_8P0",FEC_BITRATE_9P6:"FEC_BITRATE_9P6",FEC_BITRATE_11P2:"FEC_BITRATE_11P2",FEC_BITRATE_12P8:"FEC_BITRATE_12P8",FEC_BITRATE_14P4:"FEC_BITRATE_14P4",FEC_BITRATE_16P0:"FEC_BITRATE_16P0",FEC_BITRATE_17P6:"FEC_BITRATE_17P6",FEC_BITRATE_19P2:"FEC_BITRATE_19P2",FEC_BITRATE_20P8:"FEC_BITRATE_20P8",FEC_BITRATE_22P4:"FEC_BITRATE_22P4",FEC_BITRATE_24P0:"FEC_BITRATE_24P0"}),Jr=(Object.freeze({COMFORT_NOISE_DEFAULT:"COMFORT_NOISE_DEFAULT",COMFORT_NOISE_MEDIUM:"COMFORT_NOISE_MEDIUM",COMFORT_NOISE_LOW:"COMFORT_NOISE_LOW",COMFORT_NOISE_OFF:"COMFORT_NOISE_OFF"}),Object.freeze({ALARM_SEVERITY_GREEN:"green",ALARM_SEVERITY_AMBER:"amber",ALARM_SEVERITY_RED:"red"}),Object.freeze({LOG_NONE:"NONE",LOG_CRITICAL:"CRITICAL",LOG_ERROR:"ERROR",LOG_WARNING:"WARNING",LOG_INFO:"INFO",LOG_DEBUG:"DEBUG"})),Qr=(Object.freeze({[Jr.LOG_NONE]:1,[Jr.LOG_CRITICAL]:8,[Jr.LOG_ERROR]:16,[Jr.LOG_WARNING]:32,[Jr.LOG_INFO]:128,[Jr.LOG_DEBUG]:512}),Object.freeze({CONNECTION_STATUS_PENDING:"CONNECTION_STATUS_PENDING",CONNECTION_STATUS_CONNECTING:"CONNECTION_STATUS_CONNECTING",CONNECTION_STATUS_CONNECTED:"CONNECTION_STATUS_CONNECTED",CONNECTION_STATUS_FAILED:"CONNECTION_STATUS_FAILED",CONNECTION_STATUS_CONNECTED_DEGRADED_DOWNLINK:"CONNECTION_STATUS_CONNECTED_DEGRADED_DOWNLINK",CONNECTION_STATUS_CONNECTED_DEGRADED_UPLINK:"CONNECTION_STATUS_CONNECTED_DEGRADED_UPLINK",CONNECTION_STATUS_CONNECTED_DEGRADED:"CONNECTION_STATUS_CONNECTED_DEGRADED"}),Object.freeze({OUTPUT_DEVICE_TYPE_SPEAKERS:"OUTPUT_DEVICE_TYPE_SPEAKERS",OUTPUT_DEVICE_TYPE_HEADPHONES:"OUTPUT_DEVICE_TYPE_HEADPHONES"}),Object.freeze({CAPTURE_MODE_PERSONAL:"CAPTURE_MODE_PERSONAL",CAPTURE_MODE_GROUP:"CAPTURE_MODE_GROUP",CAPTURE_MODE_TRANSPARENT:"CAPTURE_MODE_TRANSPARENT",CAPTURE_MODE_UNIVERSAL:"CAPTURE_MODE_UNIVERSAL",CAPTURE_MODE_MUSIC:"CAPTURE_MODE_MUSIC"}),Object.freeze({DEFAULT:"Default",ON:"On",OFF:"Off"}),Object.freeze({ON:"On",OFF:"Off"}),Object.freeze({DEFAULT:"None",MASCULINE:"Masculine",FEMININE:"Feminine",HELIUM:"Helium",DARKMODULATION:"DarkModulation",BROKENROBOT:"BrokenRobot",INTERFERENCE:"Interference",ABYSS:"Abyss",WOBBLE:"Wobble",STARSHIPCAPTAIN:"StarshipCaptain",NERVOUSROBOT:"NervousRobot",SWARM:"Swarm",AMRADIO:"AMRadio"}));Object.freeze({[Qr.DEFAULT]:0,[Qr.MASCULINE]:1,[Qr.FEMININE]:2,[Qr.HELIUM]:3,[Qr.DARKMODULATION]:4,[Qr.BROKENROBOT]:5,[Qr.INTERFERENCE]:6,[Qr.ABYSS]:7,[Qr.WOBBLE]:8,[Qr.STARSHIPCAPTAIN]:9,[Qr.NERVOUSROBOT]:10,[Qr.SWARM]:11,[Qr.AMRADIO]:12}),Object.freeze({STATE_DUMP_MODE_NORMAL:"STATE_DUMP_MODE_NORMAL",STATE_DUMP_MODE_LITE:"STATE_DUMP_MODE_LITE"});class ei extends Error{constructor(e,t){super(e),this.name="DolbyVoiceCreateError",this._createStateDumpImpl=t}createStateDump(){return this._createStateDumpImpl()}}class ti extends Error{constructor(e){super("Parameter "+e+" has invalid value"),this.name="InvalidParamError"}}class ni extends Error{constructor(e){super("Attempted to perform an action on an invalidated object. "+e),this.name="ObjectInvalidatedError"}}class ri extends Error{constructor(e){super("Dolby Voice is not in the required state for the specified action to happen. "+e),this.name="AlreadyCreatedError"}}class ii extends Error{constructor(e){super(e),this.name="InternalError"}}Object.freeze({API:"API",JS:"JS"}),Object.freeze({VERSION_INFO:"JS001",WASM_LOAD_ERROR:"JS002",WASM_LOG_INIT_ERROR:"JS003",WASM_LOG_ERROR:"JS004",WASM_ASYNC_ERROR:"JS005",WASM_DNR_LOAD_ERROR:"JS006",API_ENTRY:"API01",API_EXIT:"API02",API_THROW:"API03"});var oi=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const ai=xe()("vxt:rtc:dolbyvoice"),si=e=>new De("DolbyVoiceError",e);class ci{constructor(){this.micClipping=ci.Severity.unknown,this.networkDownlink=ci.Severity.unknown,this.networkUplink=ci.Severity.unknown,this.noiseLevel=ci.Severity.unknown}update(e){for(let t in e)e.hasOwnProperty(t)&&(this[t]=ci.Severity[e[t]])}}ci.Severity=Object.freeze({green:0,amber:1,red:2,unknown:3});class ui{constructor(e){this.worker=e,this.requests={}}request(e,t,n){return oi(this,void 0,void 0,(function*(){return this.requests[e]||(this.requests[e]=[]),new Promise(((r,i)=>{this.requests[e].push({resolve:r,reject:i}),n?this.worker.postMessage({type:e+"-request",data:t},n):this.worker.postMessage({type:e+"-request",data:t})}))}))}handleResponse(e,t){if(this.requests[e]){const n=this.requests[e].shift();n&&(t.error?n.reject(si(t.error)):n.resolve(t.result))}}}var di,li,hi,pi,fi=class extends Sr{constructor(e){super(e),this.worker=null,this.workerAsyncCall=null,this.audioChannel=null,this.initResolve=null,this.initReject=null,this.audio=null,this.dvcAudioMuted=!1,this.ragAlarms=new ci,this.haveSession=!1,this.debugDvwc=xe()("vxt:rtc:dvwc"),this.workerLoadResolve=null,this.workerLoadReject=null,this.pendingLevelCallbacks=null,this.cachedLevels=null,this.cachedAudioMode=null,this.cachedEchoCancellation=null,this.cachedComfortNoiseLevel=null,this.stopSessionResolve=null,this.stopSessionReject=null,this.onConnectionStatus=null}stopSession(){return oi(this,void 0,void 0,(function*(){if(this.haveSession){let e=new Promise(((e,t)=>{this.stopSessionReject=t,this.stopSessionResolve=e}));return this.worker.postMessage({type:"leave"}),e}}))}resolveStopSession(){this.haveSession=!1,this.stopSessionResolve?(this.stopSessionResolve(),this.stopSessionResolve=null,this.stopSessionReject=null):this.handleUnexpectedLeave()}rejectStopSession(e){this.haveSession=!1,this.stopSessionReject?(this.stopSessionReject(si(e)),this.stopSessionResolve=null,this.stopSessionReject=null):this.onSessionStopped()}release(){const e=Object.create(null,{release:{get:()=>super.release}});return oi(this,void 0,void 0,(function*(){yield this.stopSession(),yield this.onSessionStopped(),yield e.release.call(this)}))}setClientRotation(e,t,n){this.worker.postMessage({type:"set-client-rotation",yaw:e,pitch:t,roll:n})}onSessionStopped(){return oi(this,void 0,void 0,(function*(){this.audio&&(this.audio.stopInputAudio(),this.audio.stopOutputAudio(),this.audio=null),this.worker&&(yield this.workerAsyncCall.request("release"),this.worker.terminate()),this.stopDataFlow()}))}handleUnexpectedLeave(){return oi(this,void 0,void 0,(function*(){let e=yield this.createStateDump(!0);this.emit("sessionEnded",e),this.release()}))}_closePeerConnectionForPeer(e){e.audioConnection&&"closed"!==e.connection.audioConnection&&e.audioConnection.close(),super._closePeerConnectionForPeer(e)}addPeer({peerId:e,description:t,candidates:n,wasmDescription:r,wasmCandidates:i,isMaster:o,state:a="default"}){const s=Object.create(null,{addPeer:{get:()=>super.addPeer}});return oi(this,void 0,void 0,(function*(){const c={enabled:!0};try{!r&&(null==t?void 0:t.oid)&&-1!==(null==t?void 0:t.oid.search("WASM"))&&(r=t,i=n,t=null,n=null),t&&(yield s.addPeer.call(this,{peerId:e,description:t,candidates:n,isMaster:o,state:a,wasmEnabled:c})),r&&(yield this.addPeerWasm({peerId:e,description:r,candidates:i,isMaster:o,state:a}))}catch(t){throw mr.error("webrtc","VoxeetRTCDolbyVoice.addPeer error: ",e,t),t}}))}addPeerWasm({peerId:e,description:t,candidates:n,isMaster:r,state:i}){return oi(this,void 0,void 0,(function*(){yield this.createPeerConnectionWasm(e,r,i),yield this.setRemoteDescriptionWasm(e,this.getSsrc(t.sdp),t.type,t.sdp,t.oid),n&&(yield Promise.all(n.map((t=>oi(this,void 0,void 0,(function*(){yield this.setPeerCandidateWasm(e,t.mid,t.mline_index,t.sdp)})))))),yield this.createAnswerWasm(e,i,t.oid)}))}ensurePeer({peerId:e,isMaster:t}){return super.ensurePeer({peerId:e,isMaster:t,closed:!1})}createPeerConnectionWasm(e,t,n){return oi(this,void 0,void 0,(function*(){let r=this.ensurePeer({peerId:e,isMaster:t}),i=r.audioConnection;if(i&&"close"===n){if(ai("Reconnecting data channel"),this.dataChannel){let e=this.dataChannel;e.onopen=()=>{},e.onclose=()=>{},e.onerror=e=>{},e.onmessage=e=>{},e.close(),this.dataChannel=null}i&&(i.close(),i=null,r.audioConnection=null)}if(!i){let t=$n().peerConnection.config;t.sdpSemantics="unified-plan",delete t.bundlePolicy,i=new jn(t,$n().peerConnection.constraints),i.candidates=new Array,i.onicecandidate=t=>{t.candidate?i.candidates.push({sdpMid:t.candidate.sdpMid,sdpMLineIndex:t.candidate.sdpMLineIndex,sdp:t.candidate.candidate}):this.iceCandidatesGatheringCompleteEvent(e,i.candidates)},ai("createPeerConnection",e," for Data Channel"),r.audioConnection=i,this.dataChannel?ai("createPeerConnection","Failed to create datachannel for peer ",e," for Data Channel"):(this.dataChannel=r.audioConnection.createDataChannel("DVC",{maxRetransmits:0,negotiated:!1,ordered:!1,id:0}),this.dataChannel.binaryType="arraybuffer",this.addDataChannelListeners(this.dataChannel,e),this.addConnectionListeners(r))}}))}setPeerCandidateWasm(e,t,n,r){return oi(this,void 0,void 0,(function*(){yield Promise.all(this.peers.filter((t=>t.peerId===e)).map((e=>oi(this,void 0,void 0,(function*(){yield e.audioConnection.addIceCandidate(new Cn({candidate:r,sdpMLineIndex:n,sdpMid:t}))})))))}))}setRemoteDescriptionWasm(e,t,n,r,i,o){return oi(this,void 0,void 0,(function*(){ai("setRemoteDescriptionWasm"),ai("Offer",r),yield Promise.all(this.peers.filter((t=>t.peerId===e)).map((t=>oi(this,void 0,void 0,(function*(){try{yield t.audioConnection.setRemoteDescription(new xn({type:n,sdp:r})),this.emit("traceRtcEvent",Te.ConferenceGlobalTrace.fromData({api:"VoxeetRTCDolbyVoice.setRemoteDescriptionWasm",data:{oid:i}}))}catch(n){throw mr.error("webrtc","VoxeetRTCDolbyVoice.setRemoteDescriptionWasm error: ",e,n),RemoteDescriptionError(n,t.peerId)}})))))}))}createAnswer(e,t="default",n){const r=Object.create(null,{createAnswer:{get:()=>super.createAnswer}});return oi(this,void 0,void 0,(function*(){r.createAnswer.call(this,e,t,n,{enabled:!0,audio:!(this.listenOnly||!this.isInputAudio())})}))}createAnswerWasm(e,t="default",n){return oi(this,void 0,void 0,(function*(){ai("createAnswerWasm",e,n),this.emit("traceRtcEvent",Te.ConferenceGlobalTrace.fromData({api:"VoxeetRTCDolbyVoice.createAnswerWasm",data:{oid:n}}));const r=this.peers.find((t=>t.peerId===e));if(!r)throw Xe(e);try{const i=yield r.audioConnection.createAnswer();ai("Answer",i.sdp),yield r.audioConnection.setLocalDescription(i),this.emit("traceRtcEvent",Te.ConferenceGlobalTrace.fromData({api:"VoxeetRTCDolbyVoice.setLocalDescriptionWasm",data:{oid:n}}));const o={enabled:!0,audio:!(this.listenOnly||!this.isInputAudio())};this.sessionCreatedEvent(e,r.audioConnection.localDescription,null,"none",t,n,o)}catch(e){throw mr.error("webrtc","VoxeetRTCDolbyVoice.createAnswerWasm",e),CreateAnswerError(e,r.peerId)}}))}addMasterStream(e){return oi(this,void 0,void 0,(function*(){if(ai("addMasterStream",e),this.localMediaStream){const t=!e.stream;yield this.addStream(this.localMediaStream,e.connection),e.stream=this.localMediaStream,t?this.addStreamEvent(e.peerId,this.localMediaStream):this.updateStreamEvent(e.peerId,this.localMediaStream)}}))}addTrackListeners(e,t,n,r){return oi(this,void 0,void 0,(function*(){r.ontrack=e=>{let t=e.streams[0];if(t){let n=this.checkStream(t),r=this.ensurePeer({peerId:n,isMaster:!1});if(r.closed=!1,-1===e.streams[0].id.search("screen_"))e.streams[0].onremovetrack=e=>this.onRemoveTrack(n,e),this.handleIncomingMediaStream(r,e.streams[0]);else{e.streams[0].onremovetrack=e=>this.onScreenRemoveTrack(n,e);const t=e.streams[0];t.type=On.ScreenShare,this.remoteScreenStream.push({stream:t,peerId:n}),setTimeout((()=>{r.sharedScreen&&!0===r.sharedScreen?this.updateScreenStreamEvent(n,e.streams[0]):(this.addScreenStreamEvent(n,e.streams[0]),r.sharedScreen=!0)}),1)}}},r.onremovestream=e=>{ai("onremovestream",e),e.stream.id.search("screen_")}}))}startScreenShare(e){return e.audio&&console.warn("Screen-share with audio is not supported in Dolby Voice conferences for participants who use the Dolby Voice Codec. Sharing will be continued without audio."),e.audio=!1,super.startScreenShare(e)}_startInputAudio(e){return this.worker.postMessage({type:"start-input-audio",inputAudioConfig:e}),this.cachedAudioMode&&this.setCaptureMode(this.cachedAudioMode),this.cachedEchoCancellation&&this.setEchoCancellation(this.cachedEchoCancellation),this.audio.startInputAudio(this.localMediaStream)}_createInputAudioConfig(e){let t="inputAudioConfig"in this.wasm?this.wasm.inputAudioConfig:{typingNoiseSuppression:!0};return(null==e?void 0:e.hasOwnProperty("refBulkGainDb"))&&(t.refBulkGainDb=e.refBulkGainDb),t}getDefaultAudioConstraints(){let e=super.getDefaultAudioConstraints();return e.autoGainControl=!1,e.googAutoGainControl=!1,e.echoCancellation=!1,e.noiseSuppression=!1,e}initDvwcAudio(e){return oi(this,void 0,void 0,(function*(){const t=new MessageChannel,n=Xn(),r=Object.assign(Object.assign(Object.assign({},{outputQueueMs:30,crossFadeMs:10,rampMs:50}),n),this.options.audioTweaks),i=1.5*this.audioContext.baseLatency;r.outputQueueMs<i&&(r.outputQueueMs=i),r.hasOwnProperty("enableOutputChange")?this.enableOutputChange=r.enableOutputChange:this.enableOutputChange=!0,this.audio=new class{constructor(e,t,n){if(this.audioContext=t,!this.audioContext.audioWorklet)throw new Le("NotSupportedError","This operation is not supported on this browser");this.impl=new qr(e,this.audioContext,n,(e=>this.collectAudioReport(e))),this.audioReport=this.initialAudioReport(),this.enableOutputChange=n.enableOutputChange}get audioNode(){return this.impl.audioNode||null}createAudioNode(){return this.impl.createAudioNode()}startInputAudio(e){return $r(this,void 0,void 0,(function*(){try{let t=this.mediaStreamSource=this.audioContext.createMediaStreamSource(e);yield this.createAudioNode(),t.connect(this.audioNode),mr.info("webrtc","DvcAudio.startInputAudio","Input started")}catch(e){throw mr.error("webrtc","DvcAudio.startInputAudio",e),e}}))}freeInputAudioResources(){this.mediaStreamSource&&this.mediaStreamSource.disconnect(),this.mediaStreamSource=null}freeAudioResources(){this.impl.freeAudioResources(),this.audioContext=null}stopInputAudio(){try{this.freeInputAudioResources(),mr.info("webrtc","DvcAudio.stopInputAudio","Input destroyed")}catch(e){mr.error("webrtc","DvcAudio.stopInputAudio",e)}}startOutputAudio(){return $r(this,void 0,void 0,(function*(){try{yield this.createAudioNode();let e=this.enableOutputChange?this.audioContext.createMediaStreamDestination():this.audioContext.destination;return this.audioNode.connect(e),mr.info("webrtc","DvcAudio.startOutputAudio","Output started"),e.stream}catch(e){throw mr.error("webrtc","DvcAudio.startOutputAudio",e),e}}))}stopOutputAudio(){try{this.freeAudioResources(),mr.info("webrtc","DvcAudio.stopOutputAudio","Output destroyed")}catch(e){mr.error("webrtc","DvcAudio.stopOutputAudio",e)}}initialAudioReport(){return{outputBuffer:{overrun:{have:!1,times:0,longestTicks:0,sumTicksDuration:0},underrun:{have:!1,times:0,longestTicks:0,sumTicksDuration:0}}}}collectAudioReport(e){if("output-buffer-condition"===e.type){let t;switch(e.condition){case"overrun":t=this.audioReport.outputBuffer.overrun;break;case"underrun":t=this.audioReport.outputBuffer.underrun;break;default:return}switch(e.event){case"start":t.have=!0;break;case"end":t.have=!1,t.times++,e.count>t.longestTicks&&(t.longestTicks=e.count),t.sumTicksDuration+=e.count;break;default:return}}}createAudioReport(){const e=structuredClone(this.audioReport),t=this.audioReport.outputBuffer;return t.overrun.times=0,t.overrun.longestTicks=0,t.overrun.sumTicksDuration=0,t.underrun.times=0,t.underrun.longestTicks=0,t.underrun.sumTicksDuration=0,e}}(t.port1,this.audioContext,{enableInput:Boolean(this.localMediaStream),outputQueueMs:r.outputQueueMs,crossFadeMs:r.crossFadeMs,rampMs:r.rampMs,enableOutputChange:this.enableOutputChange});const o={debug:this.debugDvwc.enabled||!1,namespaces:localStorage.getItem("debug"),audioPort:t.port2,sampleRate:this.audio.audioContext.sampleRate,outputAudioConfig:"outputAudioConfig"in this.wasm?this.wasm.outputAudioConfig:{},dnrConfig:(null==r?void 0:r.hasOwnProperty("dnrEnabled"))&&!1===r.dnrEnabled?null:{libraryUrl:Gr.dnrLibraryFileUrl,mainModel:Gr.mainModelUrl,sideModels:Gr.sideModelsUrls},urlPrefix:jr(),osIsWindows:bn.isWindows};yield this.workerAsyncCall.request(e,o,[t.port2]);const a=this._createInputAudioConfig(r);!this.listenOnly&&this.constraints.audio&&this.isInputAudio()&&(yield this._startInputAudio(a),this.cachedAudioMode&&(yield this.setCaptureMode(this.cachedAudioMode)));const s=yield this.audio.startOutputAudio();this.cachedComfortNoiseLevel&&(yield this.setComfortNoiseLevel(this.cachedComfortNoiseLevel)),this.enableOutputChange&&(yield this.createAudioElement(s))}))}init({constraints:e,processCb:t,listenOnly:n,ownerId:r,options:i,dvwc:o,videoTrack:a,audioTrack:s,dolbyVoice:c,captureMode:u}){const d=Object.create(null,{init:{get:()=>super.init}});return oi(this,void 0,void 0,(function*(){const l=Object.assign(Object.assign({},e),{audio:!!e.audio&&Object.assign(Object.assign({},e.audio),{autoGainControl:!1,googAutoGainControl:!1,echoCancellation:!1,noiseSuppression:!1})});i.audioContextOptions={sampleRate:48e3},yield d.init.call(this,{constraints:l,processCb:t,listenOnly:n,ownerId:r,options:i,videoTrack:a,audioTrack:s,dolbyVoice:c}),yield this.initDvwc(o),this.mediaManager.getComfortNoiseLevel=this.getComfortNoiseLevel.bind(this),this.mediaManager.setComfortNoiseLevel=this.setComfortNoiseLevel.bind(this),u&&(yield this.setCaptureMode(u))}))}initDvwc(e){return oi(this,void 0,void 0,(function*(){if(e&&!this.worker)try{const t=new Promise(((e,t)=>{this.workerLoadResolve=e,this.workerLoadReject=t}));this.wasm=e;const r=new Wr(new URL(n.p+n.u(348),n.b),{name:"worker",customPath:()=>new URL(xr("voxeet-dvwc-worker.js"))}),i=new Xr(r);this.worker=i.getWorker(),this.workerAsyncCall=new ui(this.worker),this.worker.onmessage=e=>this.onWorkerMessage(e.data),this.worker.onerror=()=>{this.workerLoadReject({message:"Unable to load DVWC worker file"})},yield t,yield this.initDvwcAudio("init"),this.ensurePeer({peerId:kn,isMaster:null})}catch(e){throw ai(`Dvwc init failed: reason ${e}`),yield this.release(),e}}))}handleDvwcLog(e){this.debugDvwc(`Log: ${e.timestamp.toISOString()} ${e.level.padStart(10," ")} ${e.component} ${e.msgId} ${e.message}\n`)}onWorkerMessage(e){switch(e.type){case"worker-loaded":this.workerLoadResolve&&this.workerLoadResolve();break;case"packet":this.sendPacket(e.packet);break;case"session-stopped":this.resolveStopSession();break;case"session-stop-rejected":this.rejectStopSession(e.reason);break;case"log":this.handleDvwcLog(e.entry);break;case"alarms":this.onAlarms(e.alarms);break;case"input-level":this.onAudioLevel(e.level);break;case"talkers":this.onTalkers(e.levels);break;case"status":this.onConnectionStatus(e.status);break;case"output-buffer-condition":this.onAudioReport(e);break;case"callback-gap-detected":this.onCallbackGapDetected();break;case"no-op":break;default:const t=e.type.match(/(.*)-response/);t&&this.workerAsyncCall.handleResponse(t[1],e)}}restartAudio(){return oi(this,void 0,void 0,(function*(){return this.callWithoutConcurrency((()=>oi(this,void 0,void 0,(function*(){yield this.restartAudioInternal()}))))}))}restartAudioInternal(){return oi(this,void 0,void 0,(function*(){yield this.workerAsyncCall.request("release");let e=!1;if(this.customAudio||(this.audioTrack&&(e=this.audioTrack.enabled,this.audioTrack.stop()),this.localMediaStream&&this.localMediaStream.getAudioTracks().forEach((e=>e.stop()))),this.audio&&(this.audio.stopInputAudio(),this.audio.stopOutputAudio(),this.audio=null),!this.listenOnly&&this.constraints.audio&&this.isInputAudio()&&!this.customAudio){const t=yield this.getUserMediaWithChecks(Object.assign(Object.assign({},this.constraints),{video:!1}));this.localMediaStream.removeTrack(this.localMediaStream.getAudioTracks()[0]),this.audioTrack=t.getAudioTracks()[0],this.audioTrack.enabled=e,this.localMediaStream.addTrack(this.audioTrack)}yield this.initDvwcAudio("reconnect-audio")}))}onCallbackGapDetected(){return oi(this,void 0,void 0,(function*(){this.isLeavingConference||(yield this.restartAudio())}))}onDeviceChanged(){return oi(this,void 0,void 0,(function*(){yield this.restartAudio()}))}onAudioElementError(e){return oi(this,void 0,void 0,(function*(){this.emit("error",it(null==e?void 0:e.code,null==e?void 0:e.message))}))}createAudioElement(e){return oi(this,void 0,void 0,(function*(){e&&e.getAudioTracks().length>0&&(this.audioElement||(this.audioElement=new Audio,this.audioElement.addEventListener("error",(e=>{var t;return this.onAudioElementError(null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.error)}))),this.conferenceVolume&&(this.audioElement.volume=this.conferenceVolume),Rn(this.audioElement,e),yield this.audioElement.play())}))}addDataChannelListeners(e,t){e.onopen=()=>this.startDataFlow(e),e.onclose=()=>this.stopDataFlow(),e.onerror=e=>{e.error&&e.error.message&&"Protocol Violation"==e.error.message?(mr.error("webrtc","VoxeetRTCDolbyVoice.dataChannel.onerror reconnecting datachannel ",e.error),this.emit("reconnect",nt(t,e.error?e.error.message:void 0))):(mr.error("webrtc","VoxeetRTCDolbyVoice.dataChannel.onerror",e.error),this.emit("error",nt(t,e.error?e.error.message:void 0)),this.handleUnexpectedLeave())}}addConnectionListeners({peerId:e,connection:t}){this.onConnectionStatus=t=>{t.startsWith("FAILED")&&this.emit("error",(e=>new Oe("MediaServerConnectionError","Connnection to media server has failed",e))(e))},t.oniceconnectionstatechange=t=>{this.connectionStatusEvent({peerId:e,connectionStatus:t.target.iceConnectionState,signalingState:t.target.signalingState})},t.onsignalingstatechange=t=>{this.connectionStatusEvent({peerId:e,connectionStatus:t.target.iceConnectionState,signalingState:t.target.signalingState})}}startDataFlow(e){if(!this.haveSession){const e={type:"join"};"object"==typeof this.wasm&&"sessionConfig"in this.wasm?e.sessionConfig=this.wasm.sessionConfig:e.sessionConfig={};const t=Xn();e.sessionConfig.networkProbingConfig=(null==t?void 0:t.hasOwnProperty("networkProbingConfig"))?t.networkProbingConfig:{gapLength:0,burstLength:20},e.sessionConfig.fec=(null==t?void 0:t.hasOwnProperty("fec"))?t.fec:{delay:0,bitrate:Kr.FEC_BITRATE_16P0,dynamicThresholds:[1],dynamicDecay:60},this.worker.postMessage(e),this.haveSession=!0}e.onmessage=this.receiveDataChannelPacket.bind(this)}sendPacket(e){let t=this.dataChannel;t&&"open"===t.readyState&&t.send(e)}stopDataFlow(){try{if(this.dataChannel){let e=this.dataChannel;this.dataChannel=null,e.close()}}catch(e){console.log(e)}}renegociate({peerId:e,description:t,candidates:n}){return oi(this,void 0,void 0,(function*(){try{yield this.addPeerWasm({peerId:e,description:t,candidates:n,isMaster:!0,state:"close"})}catch(t){throw mr.error("webrtc","VoxeetRTCDolbyVoice.renegociate: ",e,t),t}}))}receiveDataChannelPacket(e){let t=e.data;this.worker.postMessage({type:"packet",packet:t},[t])}mutePeer(e,t){this.peers.filter((t=>t.peerId===e)).map((n=>{n.isMaster?this.haveSession?(this.dvcAudioMuted=t,"sessionConfig"in this.wasm||(this.wasm.sessionConfig={}),this.wasm.sessionConfig.inputMute=t,this.worker.postMessage({type:"input-mute",mute:this.dvcAudioMuted})):this.audioTrack&&(this.audioTrack.enabled=!t):(n.process&&n.process.mute(t),this.audioTags&&this.audioTags.muteAudioTag(e,t))}))}muteOutput(e){this.enableOutputChange?this.audioElement.muted=e:this.worker.postMessage({type:"set-output-mute",isMuted:e})}toggleMute(e){let t=!1;return this.peers.filter((t=>t.peerId===e)).map((n=>{if(n.isMaster)t=this.toggleOwnMute();else if(n.process&&(t=n.process.toggleMute()),this.audioTags){const n=this.audioTags.toggleMute(e);this.audio3D||(t=n)}})),t}isOwnMuted(){return this.haveSession?this.dvcAudioMuted:!this.audioTrack.enabled}toggleOwnMute(){return this.haveSession?(this.dvcAudioMuted=!this.dvcAudioMuted,this.worker.postMessage({type:"input-mute",mute:this.dvcAudioMuted}),this.dvcAudioMuted):(this.audioTrack.enabled=!this.audioTrack.enabled,!this.audioTrack.enabled)}setVolume(e,t){throw new Be}db2vu(e){if(e===-1/0||e<-100)return 0;if(e>=0)return 1;let t=e/100,n=Math.PI/2+Math.PI/2*t,r=1-Math.cos(n);return r>1?1:r}getLevel(e,t){this.worker||t(0);let n=this.peers.find((t=>t.peerId===e));if(n&&n.isMaster)this.audioLevelCallback=e=>{const n=this.db2vu(e);t(n)},this.worker.postMessage({type:"get-input-level"});else if(this.cachedLevels)t(this.cachedLevels.get(e)||0);else{this.pendingLevelCallbacks||(this.pendingLevelCallbacks=new Map,this.worker.postMessage({type:"get-talkers"}));let n=this.pendingLevelCallbacks.get(e);n?n.push(t):this.pendingLevelCallbacks.set(e,[t])}}onAlarms(e){this.ragAlarms.update(e)}onAudioLevel(e){if(this.audioLevelCallback){const t=this.audioLevelCallback;this.audioLevelCallback=null,t(e)}}onTalkers(e){this.cachedLevels=new Map;for(const t of e){const e=t.id.split("@")[0],n=t.level;this.cachedLevels.set(e,n)}for(const[e,t]of this.pendingLevelCallbacks){const n=this.cachedLevels.get(e)||0;for(const e of t)try{e(n)}catch(e){}}this.pendingLevelCallbacks=null,setTimeout((()=>this.cachedLevels=null),100)}isSpeaking(e,t){this.getLevel(e,(e=>{e>this.speechThreshold?t(!0):t(!1)}))}isInputAudio(){return this.localMediaStream&&this.localMediaStream.getAudioTracks().length>0}onAudioReport(e){this.audio&&this.audio.collectAudioReport(e)}stopAudioForPeerInternal(e){return oi(this,void 0,void 0,(function*(){for(const t of this.peers.filter((t=>t.peerId===e)))if(t.stream&&t.isMaster){if(!this.isInputAudio())throw new Fe("Already stopped");let t=this.audioTrack;t.stop(),this.audio&&this.audio.stopInputAudio(),this.worker&&this.worker.postMessage({type:"stop-input-audio"}),this.localMediaStream.removeTrack(t),this.localMediaStream.getTracks().length?this.updateStreamEvent(e,this.localMediaStream):(this.removeStreamEvent(e,this.localMediaStream),this.localMediaStream=null)}}))}startAudioForPeerInternal(e,t){return oi(this,void 0,void 0,(function*(){for(const n of this.peers.filter((t=>t.peerId===e)))if(n.isMaster){if(this.localMediaStream&&this.localMediaStream.getAudioTracks().length>0)throw new Fe("Already started");try{let r=null;if(t instanceof MediaStreamTrack)this.audioTrack=t,r=new MediaStream([t]),this.customAudio=!0;else{let e=JSON.parse(JSON.stringify(this.constraints));e.video=!1,t?e.audio=this.constraints.audio=t:e.audio||(e.audio=this.constraints.audio=this.getDefaultAudioConstraints()),r=yield this.getUserMediaWithChecks(e),this.audioTrack=r.getAudioTracks()[0]}return this.localMediaStream?(this.localMediaStream.addTrack(this.audioTrack),this.worker?this.audio&&this._startInputAudio():yield this.addTrack(this.audioTrack,n.audioConnection,this.localMediaStream,"audio"),this.updateStreamEvent(e,this.localMediaStream)):(this.localMediaStream=r,this.localMediaStream.type=On.Camera,n.stream=r,this.worker&&this.audio&&this._startInputAudio(),yield this.addStream(this.localMediaStream,n.audioConnection),this.addStreamEvent(e,this.localMediaStream)),yield this.updateSelectedInputAudioDevice(),this.audioTrack}catch(e){throw new Ne(e)}}}))}selectAudioInput(e){return oi(this,void 0,void 0,(function*(){for(const t of this.peers.filter((e=>!0===e.isMaster))){"object"!=typeof this.constraints.audio&&(this.constraints.audio=this.getDefaultAudioConstraints()),this.constraints=Object.assign(Object.assign({},this.constraints),{audio:Object.assign(Object.assign({},this.constraints.audio),{deviceId:{exact:e.deviceId}})});try{yield this.onDeviceChanged(),this.localMediaStream&&this.updateStreamEvent(t.peerId,this.localMediaStream)}catch(e){throw e}}}))}selectAudioOutput(e){return oi(this,void 0,void 0,(function*(){const t=e.deviceId;if(!this.enableOutputChange)throw new Be;if(t&&this.audioElement)return yield this.audioElement.setSinkId(t),void(yield this.onDeviceChanged());throw new Error("Unavailable")}))}getLocalRtpStats(){return oi(this,void 0,void 0,(function*(){const e=this.peers.find((e=>e.isMaster)),t=yield this.getRtpStatsForTelemetry(),n=null==t?void 0:t.metrics;if(e){const r=n.get(e.peerId).filter((e=>"candidate-pair"===e.type)),i=t.dvcStats?t.dvcStats:{};for(const[t,o]of n){let a=0,s=0;if(t===e.peerId){const e=o.filter((e=>("remote-inbound-rtp"===e.type||"inbound-rtp"===e.type)&&"audio"===e.kind)),n=o.filter((e=>"outbound-rtp"===e.type&&"audio"===e.kind));let c=[];if(this.lastStats[t]&&(c=this.lastStats[t].filter((e=>"outbound-rtp"===e.type&&"audio"===e.kind))),i.length>0){const e=parseFloat(i[0].uplinkPacketLossCount)/parseFloat(i[0].uplinkPacketCount);a=tr(parseFloat(100*e),parseFloat(i[0].roundTripTime),parseFloat(i[0].uplinkJitter))}else if(e.length>0&&n.length>0&&c.length>0&&n[0].bytesSent>c[0].bytesSent){let t=r[0].currentRoundTripTime?r[0].currentRoundTripTime:e[0].roundTripTime;t=t||this.recentlySeenRTT,this.recentlySeenRTT=t;const i=parseFloat(e[0].packetsLost)/parseFloat(n[0].packetsSent);a=tr(parseFloat(100*i),1e3*parseFloat(t),1e3*parseFloat(e[0].jitter))}if(this.localMediaStream){let e=this.localMediaStream.getVideoTracks();s=ir(this.lastStats[t],o,e)}}else{const e=o.filter((e=>"inbound-rtp"===e.type&&"audio"===e.kind));if(i.length>0){const e=parseFloat(i[0].downlinkPacketLossCount)/parseFloat(i[0].downlinkPacketCount);a=tr(parseFloat(100*e),parseFloat(i[0].roundTripTime),parseFloat(i[0].downlinkJitter))}else if(e.length>0&&r.length>0){const t=parseFloat(e[0].packetsLost)/parseFloat(e[0].packetsReceived);a=tr(parseFloat(100*t),1e3*parseFloat(r[0].currentRoundTripTime),1e3*parseFloat(e[0].jitter))}const n=this.peers.findIndex((e=>e.peerId===kn))>-1;s=rr(this.lastStats[t],o,n)}this.lastStats[t]=[...o],n.set(t,[...o,{id:"Scores",audio:a,video:s}])}}return n}))}getDvcStats(){return this.workerAsyncCall.request("stats")}getRagAlarms(){return this.ragAlarms}getLocalRtpStatsForTelemetry(){return oi(this,void 0,void 0,(function*(){const e=this.peers.find((e=>e.isMaster)),t={metrics:new Map};if(e){let n=yield e.connection.getStats(null),r=e.audioConnection?yield e.audioConnection.getStats(null):[];n=[...n.values()],r=[...r.values()];const i=[];if(n.filter((e=>"media-source"===e.type||"outbound-rtp"===e.type||"remote-inbound-rtp"===e.type&&e.localId||"candidate-pair"===e.type||"track"===e.type&&!1===e.remoteSource)).forEach((e=>{i.push(e)})),r.filter((e=>"data-channel"==e.type||"candidate-pair"===e.type||"transport"===e.type)).forEach((e=>{i.push(e)})),i.forEach((e=>{!e.hasOwnProperty("kind")&&e.hasOwnProperty("mediaType")&&(e.kind=e.mediaType)})),t.metrics.set(e.peerId,i),bn.isChrome?n.filter((e=>"stream"===e.type)).forEach((e=>{const r=/([0-9]*)_?([a-zA-Z0-9]*)_?([0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12})/gm.exec(e.streamIdentifier);if(r&&r[3]){const i=new Array;i.push(e),e.trackIds.forEach((e=>{n.filter((t=>t.id==e||t.trackId==e)).forEach((e=>i.push(e)))})),t.metrics.get(r[3])&&i.push(...t.metrics.get(r[3])),t.metrics.set(r[3],i)}else mr.error("webrtc","VoxeetRTCNative.getLocalRtpStatsForTelemetry","Unable to found peer for stream telemetry")})):this.peers.forEach((({stream:e,peerId:r})=>{if(!e)return;const i=[...e.getAudioTracks(),...e.getVideoTracks()].flatMap((e=>n.filter((t=>t.trackIdentifier===e.id)))),o=i.flatMap((e=>n.filter((t=>t.trackId===e.id&&"inbound-rtp"===t.type)))),a=[...i,...o],s=[];t.metrics.get(r)&&s.push(...t.metrics.get(r)),t.metrics.set(r,[...a,...s])})),t.metrics.set(kn,[]),this.worker){const n=yield this.getDvcStats(),r=this.getRagAlarms();if(t.dvcStats=n,t.ragAlarms=r,n){const r={ssrc:2,trackId:"",mediaType:"audio",packetsSent:n.uplinkPacketCount,bytesSent:n.uplinkPayloadBytes,retransmittedPacketsSent:0,retransmittedBytesSent:0,type:"outbound-rtp"},i={ssrc:2,kind:"audio",packetLost:n.uplinkPacketLossCount,jitter:.001*n.uplinkJitter,roundTripTime:n.roundTripTime,type:"remote-inbound-rtp"},o={kind:"audio",audioLevel:n.outputLevel,totalAudioEnergy:n.totalAudioEnergy,totalSamplesDuration:n.totalSamplesDuration,type:"media-source"};t.metrics.set(e.peerId,t.metrics.get(e.peerId).concat(Object.assign({id:"RTCOutboundRTPAudioStream_2"},r)).concat(Object.assign({id:"RTCRemoteInboundRTPAudioStream_2"},i)).concat(Object.assign({id:"RTCAudioSource_2"},o)));const a={audioLevel:n.outputLevel,bytesReceived:n.downlinkPayloadBytes,jitter:.001*n.downlinkJitter,mediaType:"audio",packetsLost:n.downlinkPacketLossCount,packetsReceived:n.downlinkPacketCount,ssrc:2,trackId:"RTCMediaStreamTrack_receiver_1",transportId:"RTCTransport_audio_1",type:"inbound-rtp"},s={type:"track",kind:"audio",audioLevel:n.outputLevel};t.metrics.set(kn,[Object.assign({id:"RTCInboundRTPAudioStream_2"},a),Object.assign({id:"RTCMediaStreamTrack_receiver_1"},s)])}}if(this.audio){const e=this.audio.createAudioReport(),n={type:"audio",bufferIsOverrun:e.outputBuffer.overrun.have,bufferOverrunTimes:e.outputBuffer.overrun.times,bufferOverrunMaxLength:e.outputBuffer.overrun.longestTicks,bufferOverrunDuration:e.outputBuffer.overrun.sumTicksDuration,bufferIsUnderrun:e.outputBuffer.underrun.have,bufferUnderrunTimes:e.outputBuffer.underrun.times,bufferUnderrunMaxLength:e.outputBuffer.underrun.longestTicks,bufferUnderrunDuration:e.outputBuffer.underrun.sumTicksDuration};t.metrics.set(kn,t.metrics.get(kn).concat(Object.assign({id:"WebAudioStats"},n)))}const o=this.getRemoteStats(e.connection,n);t.metrics=new Map([...o,...t.metrics])}return t}))}createStateDump(e){return this.workerAsyncCall.request("state-dump",{liteMode:e})}configureStateDump(e){this.worker.postMessage({type:"audio-logging-length",length:e})}setTransparentMode(e){return oi(this,void 0,void 0,(function*(){yield this.workerAsyncCall.request("set-transparent-mode",{transparent:e})}))}getCaptureMode(){return oi(this,void 0,void 0,(function*(){return(yield this.workerAsyncCall.request("get-capture-mode"))||this.cachedAudioMode}))}setCaptureMode(e){return oi(this,void 0,void 0,(function*(){this.cachedAudioMode=e,yield this.workerAsyncCall.request("set-capture-mode",e)}))}setEchoCancellation(e){return oi(this,void 0,void 0,(function*(){this.cachedEchoCancellation=e,yield this.workerAsyncCall.request("set-echo-cancellation",e)}))}setComfortNoiseLevel(e){return oi(this,void 0,void 0,(function*(){this.cachedComfortNoiseLevel=e,yield this.workerAsyncCall.request("set-comfort-noise",{level:e})}))}getComfortNoiseLevel(){return oi(this,void 0,void 0,(function*(){return this.workerAsyncCall.request("get-comfort-noise")}))}setConferenceVolume(e){this.conferenceVolume=e,this.audioElement&&(this.audioElement.volume=e)}},mi=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},gi=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class vi{constructor(e,t,n){this.resolve=e,this.reject=t,this.fn=n}}di=new WeakMap,li=new WeakMap,hi=new WeakMap,pi=new WeakMap;var yi;!function(e){e.LastSpeaker="lastSpeakerStrategy",e.ClosestUser="closestUserStrategy"}(yi||(yi={}));class _i{constructor(e,t){this.userId=e,this.streamIndex=t}}var wi=n(7806),bi=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const ki=xe()("vxt:rtc:millicast");var Si=class extends Sr{constructor(e){super(e),this.autoReconnect=!0,this.millicastView=null,this.peerId=null,this.stream=null,this.liveStreamActive=!1,wi.Logger.setLevel((null==ki?void 0:ki.enabled)?wi.Logger.DEBUG:wi.Logger.WARN)}release(){const e=Object.create(null,{release:{get:()=>super.release}});return bi(this,void 0,void 0,(function*(){this.stopRtsView(),yield e.release.call(this)}))}stopRtsView(){this.millicastView&&(this.millicastView.removeAllListeners(),this.millicastView.stop(),this.millicastView=null,this.removePeer(this.peerId),this.peerId=null,this.stream=null,this.liveStreamActive=!1)}startRtsView(e,t,n){return bi(this,void 0,void 0,(function*(){this.stopRtsView(),wi.Director.setEndpoint("https://director.millicast.com"),this.millicastView=new wi.View(e,(()=>wi.Director.getSubscriber(e,t,n)),null,this.autoReconnect),this.millicastView.on("broadcastEvent",(e=>{this.onBroadcastEvent(e).catch((e=>{this.emit("error",e)}))})),this.millicastView.on("track",(e=>{this.onTrack(e).catch((e=>{this.emit("error",e)}))}));const r={disableVideo:!1,disableAudio:!1,peerConfig:Object.assign(Object.assign({},$n().peerConnection.config),{sdpSemantics:"unified-plan"})};yield this.millicastView.connect(r);const i=this.peers.find((e=>e.isMaster));i&&i.connection!==this.millicastView.webRTCPeer.getRTCPeer()&&(i.connection=this.millicastView.webRTCPeer.getRTCPeer(),yield this.addConnectionListeners(i)),ki("RTS Viewer connected")}))}selectSimulcastLayer(e){return bi(this,void 0,void 0,(function*(){if(!this.millicastView)throw new Error("Viewer service is not available");const t=(e=>{let t;switch(e){case Jn.SD:t="l";break;case Jn.MD:t="m";break;case Jn.HD:t="h"}return t})(e);yield this.millicastView.select({encodingId:t})}))}onTrack(e){return bi(this,void 0,void 0,(function*(){ki("Got Millicast stream",e),this.stream=e.streams[0],this.stream.getAudioTracks()[0].enabled=!this.isOutputMuted,this.liveStreamActive&&(yield this.addStream(this.stream))}))}onBroadcastEvent(e){return bi(this,void 0,void 0,(function*(){ki("Got Millicast event",e),this.liveStreamActive?"active"!==e.name&&(this.liveStreamActive=!1,this.stream&&this.removeStream(this.stream)):"active"==e.name&&(this.liveStreamActive=!0,this.stream&&(yield this.addStream(this.stream)))}))}addStream(e){return bi(this,void 0,void 0,(function*(){ki("addStream",e),this.peerId||(this.peerId=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))));const t=this.ensurePeer({peerId:this.peerId,isMaster:!1});e.onremovetrack=e=>this.onRemoveTrack(this.peerId,e),t.stream?(ki("addStream->updateStreamEvent",e),this.updateStreamEvent(this.peerId,e),yield this.callWithoutConcurrency(this.updateAudioTag,this.peerId,e)):(t.stream=e,ki("addStream->addStreamEvent",e),this.addStreamEvent(this.peerId,e),yield this.callWithoutConcurrency(this.createAudioTag,this.peerId,e))}))}removeStream(e){ki("removeStream",e);const t=this.peerId;t&&(this.ensurePeer({peerId:t,isMaster:!1}),ki("removeStream->removeStreamEvent",e),this.removeStreamEvent(t,e))}};class Ei extends Error{constructor(e){super(),this.name="TimeoutError",this.message=e}}const Ti=new Ei("Timeout occurred"),Ci=36e5,ji=2*Ci;function xi(e,t,n){let r;return Promise.race([new Promise(((e,i)=>{r=setTimeout((()=>i(function(e){return e?new Ei(`Timeout occurred in: ${e}`):Ti}(n))),t)})),e.then((e=>(clearTimeout(r),e)))])}const Pi={[cr.Standard]:{audioBitrate:hr.Bitrate32k,preferSendMono:!0},[cr.Music]:{audioBitrate:hr.Bitrate96k,preferSendMono:!0},[cr.Unprocessed]:{audioBitrate:hr.Bitrate128k,preferSendMono:!1}},Ii=Pi.standard.audioBitrate;var Mi,Ri,Ai,Di,Oi,Ni,Fi,Li,zi,Ui,Vi,Bi,Wi,Gi,Hi,Yi,$i,Zi,qi,Xi,Ki,Ji,Qi,eo,to,no,ro,io,oo=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},ao=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},so=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};const co=xe()("vxt:conference");var uo;!function(e){e[e.PSTN_QUALITY=0]="PSTN_QUALITY",e[e.ULTRA_LOW=1]="ULTRA_LOW",e[e.LOW=1]="LOW",e[e.MEDIUM=2]="MEDIUM",e[e.HIGH=3]="HIGH",e[e.ULTRA_HIGH=3]="ULTRA_HIGH"}(uo||(uo={})),Mi=new WeakMap,Ri=new WeakMap,Ai=new WeakMap,Di=new WeakMap,Oi=new WeakMap,Ni=new WeakMap,Fi=new WeakMap,Li=new WeakMap,zi=new WeakMap,Ui=new WeakMap,Vi=new WeakMap,Bi=new WeakMap,Wi=new WeakMap,Gi=new WeakMap,Hi=new WeakMap,Yi=new WeakMap,$i=new WeakMap,Zi=new WeakMap,qi=new WeakMap,Xi=new WeakMap,Ki=new WeakMap,Ji=new WeakMap,Qi=new WeakMap,eo=new WeakMap,to=new WeakMap,no=new WeakMap,ro=new WeakMap,io=new WeakMap;var lo,ho,po,fo,mo,go,vo,yo,_o,wo,bo,ko,So=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},Eo=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};!function(e){e.Created="created",e.Joined="joined",e.Ended="ended",e.Left="left",e.Destroyed="destroyed",e.Error="error"}(bo||(bo={})),function(e){e.Invite="INVITE",e.UpdatePermissions="UPDATE_PERMISSIONS",e.Kick="KICK",e.Join="JOIN",e.SendAudio="SEND_AUDIO",e.SendVideo="SEND_VIDEO",e.ShareScreen="SHARE_SCREEN",e.ShareVideo="SHARE_VIDEO",e.ShareFile="SHARE_FILE",e.SendMessage="SEND_MESSAGE",e.Record="RECORD",e.Stream="STREAM"}(ko||(ko={}));class To{constructor(e){lo.set(this,void 0),ho.set(this,void 0),po.set(this,void 0),fo.set(this,void 0),mo.set(this,void 0),go.set(this,void 0),vo.set(this,void 0),yo.set(this,void 0),_o.set(this,void 0),wo.set(this,void 0),So(this,lo,e,"f"),So(this,_o,new Set(Object.values(ko)),"f")}get id(){return Eo(this,lo,"f")}get alias(){return Eo(this,ho,"f")}get isNew(){return Eo(this,po,"f")}get isProtected(){return Eo(this,fo,"f")}get isAudioOnly(){return Eo(this,mo,"f")}get pinCode(){return Eo(this,go,"f")}get status(){return Eo(this,vo,"f")}set status(e){So(this,vo,e,"f")}get params(){return Eo(this,yo,"f")}set id(e){So(this,lo,e,"f")}set alias(e){So(this,ho,e,"f")}set isProtected(e){So(this,fo,e,"f")}set isAudioOnly(e){So(this,mo,e,"f")}set isNew(e){So(this,po,e,"f")}set pinCode(e){So(this,go,e,"f")}set params(e){So(this,yo,e,"f")}get participants(){return Eo(this,wo,"f").call(this)}set participantsGetter(e){So(this,wo,e,"f")}get permissions(){return Eo(this,_o,"f")}set permissions(e){So(this,_o,e,"f")}static fromCreateData(e){const t=new To(e.conferenceId);return t.status=bo.Created,t.alias=e.conferenceAlias,t.pinCode=e.conferencePincode,t.isNew=e.isNew,t.isProtected=e.isProtected,t.isAudioOnly=e.isAudioOnly,t.params=new M,t.params.dolbyVoice=e.isDolbyVoice,e.isProtected&&(t.permissions=new Set),t}}function Co(e){this.message=e}lo=new WeakMap,ho=new WeakMap,po=new WeakMap,fo=new WeakMap,mo=new WeakMap,go=new WeakMap,vo=new WeakMap,yo=new WeakMap,_o=new WeakMap,wo=new WeakMap,Co.prototype=new Error,Co.prototype.name="InvalidCharacterError";var jo="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new Co("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,i=0,o=0,a="";r=t.charAt(o++);~r&&(n=i%4?64*n+r:r,i++%4)?a+=String.fromCharCode(255&n>>(-2*i&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return a};function xo(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(jo(e).replace(/(.)/g,(function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(e){return jo(t)}}function Po(e){this.message=e}Po.prototype=new Error,Po.prototype.name="InvalidTokenError";var Io,Mo=function(e,t){if("string"!=typeof e)throw new Po("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(xo(e.split(".")[n]))}catch(e){throw new Po("Invalid token specified: "+e.message)}};!function(e){e.Disabled="disabled",e.Individual="individual",e.Shared="shared"}(Io||(Io={}));const Ro=(e,t)=>{const n=Math.pow(10,t||0);return Math.round(e*n)/n},Ao=e=>e*(180/Math.PI),Do=e=>e*(Math.PI/180),Oo=(e,t)=>e.x*t.x+e.y*t.y+e.z*t.z,No=(e,t)=>({x:0===e.scale.x?0:t.x/e.scale.x,y:0===e.scale.y?0:t.y/e.scale.y,z:0===e.scale.z?0:t.z/e.scale.z}),Fo=(e,t)=>({x:Oo(t,e.right),y:Oo(t,e.up),z:Oo(t,e.forward)}),Lo=e=>{if(0!==e.forward.x&&1!==Math.abs(e.forward.x)||0!==e.forward.y&&1!==Math.abs(e.forward.y)||0!==e.forward.z&&1!==Math.abs(e.forward.z)||Math.abs(e.forward.x)+Math.abs(e.forward.y)+Math.abs(e.forward.z)!=1)throw new Ye("SpatialEnvironment::forward must be a unit vector aligned with the global x,y or z axis but instead was provided with "+JSON.stringify(e.forward));if(0!==e.up.x&&1!==Math.abs(e.up.x)||0!==e.up.y&&1!==Math.abs(e.up.y)||0!==e.up.z&&1!==Math.abs(e.up.z)||Math.abs(e.up.x)+Math.abs(e.up.y)+Math.abs(e.up.z)!=1)throw new Ye("SpatialEnvironment::up must be a unit vector aligned with the global x,y or z axis but instead was provided with "+JSON.stringify(e.up));if(0!==e.right.x&&1!==Math.abs(e.right.x)||0!==e.right.y&&1!==Math.abs(e.right.y)||0!==e.right.z&&1!==Math.abs(e.right.z)||Math.abs(e.right.x)+Math.abs(e.right.y)+Math.abs(e.right.z)!=1)throw new Ye("SpatialEnvironment::right must be a unit vector aligned with the global x,y or z axis but instead was provided with "+JSON.stringify(e.right));if(0!==Oo(e.forward,e.up))throw new Ye("SpatialEnvironment::forward and SpatialEnvironment::up parameters must be orthogonal vectors");if(0!==Oo(e.forward,e.right))throw new Ye("SpatialEnvironment::forward and SpatialEnvironment::right parameters must be orthogonal vectors");if(0!==Oo(e.right,e.up))throw new Ye("SpatialEnvironment::right and SpatialEnvironment::up parameters must be orthogonal vectors");if(e.scale.x<=0)throw new Ye("Scale.x must be a positive non-zero number");if(e.scale.y<=0)throw new Ye("Scale.y must be a positive non-zero number");if(e.scale.z<=0)throw new Ye("Scale.z must be a positive non-zero number");return!0};var zo,Uo,Vo,Bo,Wo,Go,Ho,Yo,$o,Zo,qo,Xo=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},Ko=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class Jo{constructor(e,t){zo.set(this,void 0),Uo.set(this,void 0),Vo.set(this,void 0),Bo.set(this,void 0),Wo.set(this,{}),Go.set(this,{}),Ho.set(this,!1),Yo.set(this,void 0),$o.set(this,void 0),Zo.set(this,void 0),qo.set(this,void 0),Xo(this,zo,{x:0,y:0,z:0},"f"),Xo(this,Uo,{x:0,y:0,z:0},"f"),Xo(this,Bo,{forward:{x:0,y:0,z:1},up:{x:0,y:1,z:0},right:{x:1,y:0,z:0},scale:{x:1,y:1,z:1}},"f"),Xo(this,Yo,e,"f"),Xo(this,Zo,t,"f"),Xo(this,$o,{},"f")}release(){Ko(this,qo,"f")&&clearTimeout(Ko(this,qo,"f"))}setEnvironment(e){Lo(e)&&(Xo(this,Bo,e,"f"),this.updateRelativePositions())}setParticipantPosition(e,t){Ko(this,$o,"f")[e.id]=t,e.id===Ko(this,Zo,"f")&&Xo(this,zo,t,"f"),this.updateRelativePositions()}setLocalDirection(e){Xo(this,Uo,e,"f"),this.updateRelativePositions()}transformRemotePosition(e){const t=((e,t)=>({x:e.x-t.x,y:e.y-t.y,z:e.z-t.z}))(e,Ko(this,zo,"f")),n=No(Ko(this,Bo,"f"),t),r=(e=>{const t=Math.cos(.5*Do(e.x)),n=Math.sin(.5*Do(e.x)),r=Math.cos(.5*Do(e.y)),i=Math.sin(.5*Do(e.y)),o=Math.cos(.5*Do(e.z)),a=Math.sin(.5*Do(e.z));return{w:t*r*o+n*i*a,x:-1*(n*r*o+t*i*a),y:-1*(t*i*o-n*r*a),z:-1*(t*r*a-n*i*o)}})(Fo(Ko(this,Bo,"f"),Ko(this,Uo,"f")));return((e,t)=>{const n=t.w*t.w,r=t.x*t.x,i=t.y*t.y,o=t.z*t.z,a=t.w*t.x,s=t.w*t.y,c=t.w*t.z,u=t.x*t.y,d=t.x*t.z,l=t.y*t.z;return{x:n*e.x+2*s*e.z-2*c*e.y+r*e.x+2*u*e.y+2*d*e.z-o*e.x-i*e.x,y:2*u*e.x+i*e.y+2*l*e.z+2*c*e.x-o*e.y+n*e.y-2*a*e.z-r*e.y,z:2*d*e.x+2*l*e.y+o*e.z-2*s*e.x-i*e.z+2*a*e.y-r*e.z+n*e.z}})(Fo(Ko(this,Bo,"f"),n),r)}computeRemoteParticipantsPolarPositions(e){return Object.entries(e).reduce(((e,[t,n])=>{const r=(e=>{const t=(e=>Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z))(e);return 0===t?{distance:0,elevation:0,azimuth:0}:{distance:t,elevation:Ao(Math.asin(e.y/t)),azimuth:Ao(Math.atan2(-1*e.x,e.z))}})(this.transformRemotePosition(n)),i=Object.entries(r).reduce(((e,[t,n])=>Object.assign(Object.assign({},e),{[t]:Ro(n,2)})),{distance:0,elevation:0,azimuth:0});return Object.assign(Object.assign({},e),{[t]:i})}),{})}updateRelativePositions(){const e=Object.entries(Ko(this,$o,"f")).reduce(((e,[t,n])=>t!==Ko(this,Zo,"f")?Object.assign(Object.assign({},e),{[t]:n}):e),{}),t=this.computeRemoteParticipantsPolarPositions(e);for(const e in t)Ko(this,Go,"f")[e]&&(n=t[e],r=Ko(this,Go,"f")[e],Math.round(100*n.distance)===Math.round(100*r.distance)&&Math.round(100*n.azimuth)===Math.round(100*r.azimuth)&&Math.round(100*n.elevation)===Math.round(100*r.elevation))||(Ko(this,Wo,"f")[e]=t[e]);var n,r;Ko(this,Ho,"f")||(Xo(this,Ho,!0,"f"),Xo(this,qo,setTimeout((()=>{this.sendPositions()}),300),"f"))}sendPositions(){return e=this,t=void 0,r=function*(){const e={conferenceId:Ko(this,Yo,"f"),peerId:Ko(this,Zo,"f"),data:{spatialPositions:Object.assign({},Ko(this,Wo,"f"))}};if(Xo(this,Go,Object.assign(Object.assign({},Ko(this,Go,"f")),Ko(this,Wo,"f")),"f"),Xo(this,Wo,{},"f"),Xo(this,Ho,!1,"f"),Object.keys(e.data.spatialPositions).length>0)try{yield wt.conferences.audioUpdate(e)}catch(e){Ae.send(Te.ConferenceGlobalError.fromData(new Ge("Unable to set spatial audio position: reason: "+e.reason)))}},new((n=void 0)||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}));var e,t,n,r}get environment(){return Ko(this,Bo,"f")}removeParticipant(e){e in Ko(this,$o,"f")&&delete Ko(this,$o,"f")[e],e in Ko(this,Go,"f")&&delete Ko(this,Go,"f")[e]}}zo=new WeakMap,Uo=new WeakMap,Vo=new WeakMap,Bo=new WeakMap,Wo=new WeakMap,Go=new WeakMap,Ho=new WeakMap,Yo=new WeakMap,$o=new WeakMap,Zo=new WeakMap,qo=new WeakMap;var Qo,ea,ta,na,ra,ia,oa,aa,sa,ca,ua,da=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},la=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class ha{constructor(e,t,n,r=""){Qo.set(this,void 0),ea.set(this,void 0),ta.set(this,!1),na.set(this,void 0),ra.set(this,void 0),ia.set(this,void 0),oa.set(this,null),aa.set(this,""),sa.set(this,{forward:{x:0,y:0,z:1},up:{x:0,y:1,z:0},right:{x:1,y:0,z:0},scale:{x:1,y:1,z:1}}),ca.set(this,{x:0,y:0,z:0}),ua.set(this,{x:0,y:0,z:0}),da(this,ea,t,"f"),da(this,Qo,e,"f"),n&&da(this,oa,n,"f"),da(this,aa,r,"f")}release(){la(this,na,"f")&&clearTimeout(la(this,na,"f")),la(this,ra,"f")&&clearTimeout(la(this,ra,"f")),la(this,ia,"f")&&clearTimeout(la(this,ia,"f"))}setEnvironment(e){Lo(e)&&(da(this,sa,e,"f"),this.sendPosition())}setParticipantPosition(e,t){if(la(this,ea,"f")!==e.id)throw new Be;da(this,ua,t,"f"),la(this,ta,"f")||(da(this,ta,!0,"f"),da(this,na,setTimeout((()=>{this.sendPosition()}),300),"f"))}sendPosition(){return e=this,t=void 0,r=function*(){const e=No(la(this,sa,"f"),la(this,ua,"f")),t=Fo(la(this,sa,"f"),e),n=Fo(la(this,sa,"f"),la(this,ca,"f"));da(this,ta,!1,"f");const r={conferenceId:la(this,Qo,"f"),peerId:la(this,ea,"f"),data:{selfSpatialPosition:t,selfSpatialDirection:n,selfSpatialAttenuationName:la(this,aa,"f")}};try{yield wt.conferences.audioUpdate(r)}catch(e){Ae.send(Te.ConferenceGlobalError.fromData(new Ge("Unable to set spatial audio parameters: reason: "+e.reason)))}},new((n=void 0)||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}));var e,t,n,r}setLocalDirection(e){if(la(this,oa,"f")){const t=Fo(la(this,sa,"f"),e);la(this,oa,"f").call(this,t.y>0?t.y:360+t.y,t.x>0?t.x:360+t.x,t.z>0?t.z:360+t.z)}else da(this,ca,e,"f"),la(this,ta,"f")||(da(this,ta,!0,"f"),da(this,ra,setTimeout((()=>{this.sendPosition()}),300),"f"))}setLocalAudioAttenuation(e){da(this,aa,e,"f"),la(this,ta,"f")||(da(this,ta,!0,"f"),da(this,ia,setTimeout((()=>{this.sendPosition()}),300),"f"))}}Qo=new WeakMap,ea=new WeakMap,ta=new WeakMap,na=new WeakMap,ra=new WeakMap,ia=new WeakMap,oa=new WeakMap,aa=new WeakMap,sa=new WeakMap,ca=new WeakMap,ua=new WeakMap;var pa,fa=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class ma{constructor(){pa.set(this,new Map)}clear(){fa(this,pa,"f").clear()}delete(e){return fa(this,pa,"f").delete(e)}get(e){return fa(this,pa,"f").get(e)}has(e){return fa(this,pa,"f").has(e)}set(e,t){fa(this,pa,"f").set(e,t)}get size(){return fa(this,pa,"f").size}}pa=new WeakMap;var ga,va,ya,_a,wa,ba,ka=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},Sa=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};const Ea=xe()("vxt:confevtmgr");let Ta=class{constructor(e,t,n,r){ga.set(this,void 0),va.set(this,void 0),ya.set(this,[]),_a.set(this,void 0),wa.set(this,void 0),ba.set(this,void 0),ka(this,ga,e,"f"),ka(this,va,t,"f"),ka(this,ba,n,"f"),ka(this,wa,new ma,"f"),ka(this,_a,r,"f")}get participants(){return Sa(this,va,"f")?Sa(this,va,"f").participants:new Map}get conference(){return Sa(this,_a,"f").call(this)}get dolbyVoice(){var e;return null===(e=this.conference.params)||void 0===e?void 0:e.dolbyVoice}onLeave(){Sa(this,va,"f").isRts()||Sa(this,va,"f").participants.forEach(((e,t)=>{if(e.id!==Sa(this,ga,"f").participant.id){const t=e.streams.filter((e=>e.type===On.Camera)),n=e.streams.filter((e=>e.type===On.ScreenShare)),r=t.length>0&&t[0].getVideoTracks()[0];if(n.length>0&&Sa(this,ba,"f").onStreamRemoved(e,n[0]),this.dolbyVoice&&e.audioTransmitting&&!r){Sa(this,ba,"f").onStreamRemoved(e,new Ln(new MediaStream));const t=Sa(this,ya,"f").indexOf(e.id);t>-1&&Sa(this,ya,"f").splice(t,1)}}}))}onVideoForwardedChanged(e){Ae.send(Te.ConferenceGlobalTrace.fromData({api:"onVideoForwardedChanged",data:{videoForwardedId:e.videoForwardedId}})),Array.from(e.videoForwardedId).filter((e=>!Array.from(Sa(this,va,"f").forwardedParticipants.keys()).includes(e)&&e!==Sa(this,ga,"f").participant.id)).forEach((e=>{Sa(this,va,"f").setVideoForwarding(e)})),Array.from(Sa(this,va,"f").forwardedParticipants.keys()).filter((t=>!Array.from(e.videoForwardedId).includes(t)&&t!==Sa(this,ga,"f").participant.id)).forEach((e=>{Sa(this,va,"f").removeVideoForwarding(e)}))}onParticipantAdded(e){var t,n;let r=this.participants.get(e.userId);r?(r=Sa(this,va,"f").updateParticipant(e),Sa(this,ba,"f").onParticipantUpdated(r),Ea("participant updated: ",r)):(r=Sa(this,va,"f").addParticipant(e),Sa(this,ba,"f").onParticipantAdded(r),Ea("participant added: ",r));const i=null===(n=null===(t=this.conference)||void 0===t?void 0:t.params)||void 0===n?void 0:n.dolbyVoice;if(Sa(this,wa,"f").has(e.userId)){const t=Sa(this,wa,"f").get(e.userId);this.onStreamAdded(te.fromData({peerId:e.userId,stream:t})),Sa(this,wa,"f").delete(e.userId)}else if(i&&!Sa(this,va,"f").isRts()){const e=r.audioTransmitting,t=r.streams.filter((e=>e.type===On.Camera)),n=t.length>0&&t[0].getVideoTracks(),i=n.length>0&&n[0];e&&!i&&(Sa(this,ya,"f").push(r.id),Sa(this,va,"f").rtc.addFakeAudio(r.id))}}onParticipantUpdated(e){const t=this.participants.get(e.userId),n=t&&t.audioTransmitting,r=Sa(this,va,"f").updateParticipant(e);Ea("participant updated: ",r),t?Sa(this,ba,"f").onParticipantUpdated(r):Sa(this,ba,"f").onParticipantAdded(r),this.onParticipantUpdatedHandleStreams(r,n,r.audioTransmitting)}onParticipantUpdatedHandleStreams(e,t,n){var r,i;e.id!==Sa(this,ga,"f").participant.id&&(null===(i=null===(r=this.conference)||void 0===r?void 0:r.params)||void 0===i?void 0:i.dolbyVoice)&&!Sa(this,va,"f").isRts()&&(n&&!t?Sa(this,va,"f").rtc.addFakeAudio(e.id):!n&&t&&Sa(this,va,"f").rtc.removeFakeAudio(e.id))}onAudioUpdated(e){this.onParticipantUpdatedHandleStreams(e.participant,e.previousAudioTransmitting,e.audioTransmitting)}onStreamAdded(e){const t=e.peerId,n=e.stream;let r=this.participants.get(t);if(!r){if(/^0{8}-0{4}-0{4}-0{4}-0{12}$/gm.test(t))return;if(!Sa(this,va,"f").isRts())return console.warn(`Unable to find participant: ${t}`),Sa(this,ba,"f").onConferenceGlobalError(B.fromData(Ke(t))),void Sa(this,wa,"f").set(t,n);{r=new le(t,"CONNECTED");const e=this.createMixerMixParticipantData(t,n);this.onParticipantAdded(L.fromData(e)),Sa(this,va,"f").forwardedParticipants.set(t,r)}}r.streams.push(n),Sa(this,ba,"f").onStreamAdded(r,n)}onStreamUpdated(e){var t,n;const r=e.peerId,i=e.stream;let o=this.participants.get(r);if(o){if(Sa(this,va,"f").isRts()){const e=!!i&&(null===(t=i.getAudioTracks())||void 0===t?void 0:t.length)>0,r=!!i&&(null===(n=i.getVideoTracks())||void 0===n?void 0:n.length)>0;(o.audioTransmitting!==e||o.videoTransmitting!==r)&&(o.updateVideoTransmitting(r),o.updateAudioTransmitting(e),Sa(this,ba,"f").onParticipantUpdated(o))}}else{if(/^0{8}-0{4}-0{4}-0{4}-0{12}$/gm.test(r))return;if(!Sa(this,va,"f").isRts())return console.warn(`Unable to find participant: ${r}`),Sa(this,ba,"f").onConferenceGlobalError(B.fromData(Ke(r))),void Sa(this,wa,"f").set(r,i);{o=new le(r,"CONNECTED");const e=this.createMixerMixParticipantData(r,i);this.onParticipantAdded(L.fromData(e)),Sa(this,va,"f").forwardedParticipants.set(r,o)}}if(o.id===Sa(this,ga,"f").participant.id&&i.type===On.Camera){const e=o.videoTransmitting,t=i.getVideoTracks().length>0;e!==t&&(o.updateVideoTransmitting(t),Sa(this,ba,"f").onParticipantUpdated(o))}o.streams=o.streams.filter((e=>e.id!==i.id)),o.streams=o.streams.filter((e=>e.getTracks().length)),o.streams=o.streams.filter((e=>!(e.getAudioTracks().length&&"fakeAudioTrack"===e.getAudioTracks()[0].id))),o.streams.push(i),Sa(this,ba,"f").onStreamUpdated(o,i)}onStreamRemoved(e){const t=e.peerId,n=e.stream;let r=this.participants.get(t);if(!r){if(/^0{8}-0{4}-0{4}-0{4}-0{12}$/gm.test(t))return;return console.warn(`Unable to find participant: ${t}`),Sa(this,ba,"f").onConferenceGlobalError(B.fromData(Ke(t))),void Sa(this,wa,"f").set(t,n)}Sa(this,va,"f").isRts()&&(r.updateVideoTransmitting(!1),r.updateAudioTransmitting(!1),r.updateStatus("LEFT"),Sa(this,ba,"f").onParticipantUpdated(r)),r.streams=r.streams.filter((e=>e.id!==n.id)),r.id===Sa(this,ga,"f").participant.id&&n.type===On.Camera&&r.videoTransmitting&&(r.updateVideoTransmitting(!1),Sa(this,va,"f").isLeaving||Sa(this,ba,"f").onParticipantUpdated(r)),Sa(this,ba,"f").onStreamRemoved(r,n)}createMixerMixParticipantData(e,t){var n,r;const i=!!t&&(null===(n=t.getAudioTracks())||void 0===n?void 0:n.length)>0;return{user_id:e,externalId:"mixer_mix",name:"Mixer Mix",avatarUrl:"",status:"ON_AIR",metadata:{},participantType:"MIXER_MIX",audio:i,audioReceivingStopped:!i,video:!!t&&(null===(r=t.getVideoTracks())||void 0===r?void 0:r.length)>0}}};ga=new WeakMap,va=new WeakMap,ya=new WeakMap,_a=new WeakMap,wa=new WeakMap,ba=new WeakMap,Ta=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}([dt([Ce.ParticipantAdded,Ce.ParticipantUpdated,Ce.VideoForwardedChanged,Ce.AudioUpdated,Ce.StreamAdded,Ce.StreamUpdated,Ce.StreamRemoved])],Ta);var Ca,ja=Ta,xa=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};function Pa(e){return`${e.name?e.name:"undefined"}: ${e.message?e.message:"undefined"}`}function Ia(e){let t="<image";return t+=` width:${e.width}`,t+=` height:${e.height}`,t+=` complete:${e.complete}`,t+=">",t}class Ma{constructor(){this.payload={}}addProcessor(e){return void 0!==e&&(null===e?this.payload.processor=null:(this.payload.processor={},function(e,t={}){"type"in e&&(t.type=e.type),"image"in e&&(e.image instanceof HTMLImageElement?t.image=Ia(e.image):t.image=String(e.image))}(e,this.payload.processor),function(e,t={}){"virtualBackground"in e&&(!1===e.virtualBackground||"bokeh"===e.virtualBackground?t.virtualBackground=e.virtualBackground:e.virtualBackground instanceof HTMLVideoElement?t.virtualBackground=function(e){let t="<video";return t+=` videoWidth:${e.videoWidth}`,t+=` videoHeight:${e.videoHeight}`,t+=` readyState:${e.readyState}`,e.error&&(t+=` error:{code:${e.error.code}, message:'${e.error.message}'}`),t+=">",t}(e.virtualBackground):e.virtualBackground instanceof HTMLImageElement?t.virtualBackground=Ia(e.virtualBackground):t.virtualBackground=String(e.virtualBackground)),"facialSmoothing"in e&&(t.facialSmoothing=e.facialSmoothing),"autoBrightness"in e&&(t.autoBrightness=e.autoBrightness),"spotLight"in e&&(t.spotLight=e.spotLight),"noiseReduction"in e&&(t.noiseReduction=e.noiseReduction),"autoFraming"in e&&(t.autoFraming=e.autoFraming)}(e,this.payload.processor))),this}addConstraints(e){return void 0!==e&&(this.payload.constraints=e),this}build(){return this.payload}}class Ra{constructor(e){Ca.set(this,void 0),function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===r?i.call(e,n):i?i.value=n:t.set(e,n)}(this,Ca,e,"f")}cameraVideoStarted(e,t,n){this.sendUserActionInfo({action:"CameraVideoStarted",description:"Camera video started",api:e,payload:[(new Ma).addConstraints(t).addProcessor(n).build()]})}cameraVideoStartFailed(e,t,n,r){this.sendUserActionError({action:"CameraVideoStartFailed",description:t?Pa(t):"Camera video failed to start for an unknown reason",api:e,payload:[(new Ma).addConstraints(n).addProcessor(r).build()]})}customVideoStarted(e,t){this.sendUserActionInfo({action:"CustomVideoStarted",description:"Custom video started",api:e,payload:[(new Ma).addProcessor(t).build()]})}customVideoStartFailed(e,t,n){this.sendUserActionError({action:"CustomVideoStartFailed",description:t?Pa(t):"Custom video failed to start for an unknown reason",api:e,payload:[(new Ma).addProcessor(n).build()]})}localVideoStopFailed(e,t){this.sendUserActionError({action:"LocalVideoStopFailed",description:t?Pa(t):"Local video failed to stop for an unknown reason",api:e})}localVideoStopped(e){this.sendUserActionInfo({action:"LocalVideoStopped",description:"Local video stopped",api:e})}videoProcessorDisabled(e){this.sendUserActionInfo({action:"VideoProcessorDisabled",description:"Video processor disabled",api:e})}videoProcessorDisableFailed(e,t){this.sendUserActionError({action:"VideoProcessorDisableFailed",description:t?Pa(t):"Video processor failed to disable for an unknown reason",api:e})}videoProcessorEnabled(e,t){this.sendUserActionInfo({action:"VideoProcessorEnabled",description:"Video processor enabled",api:e,payload:[(new Ma).addProcessor(t).build()]})}videoProcessorEnableFailed(e,t,n){this.sendUserActionError({action:"VideoProcessorEnableFailed",description:t?Pa(t):"Video processor failed to enable for an unknown reason",api:e,payload:[(new Ma).addProcessor(n).build()]})}videoConstraintsApplied(e,t){this.sendUserActionInfo({action:"VideoConstraintsApplied",description:"Video constraints applied",api:e,payload:[(new Ma).addConstraints(t).build()]})}videoConstraintsApplyField(e,t,n){this.sendUserActionError({action:"VideoConstraintsApplyFailed",description:t?Pa(t):"Video constraints failed to apply for an unknown reason",api:e,payload:[(new Ma).addConstraints(n).build()]})}sendUserActionInfo(e){this.send(new ie(Object.assign(Object.assign({level:"info",component:xa(this,Ca,"f")},e),{timestamp:Date.now()})))}sendUserActionError(e){this.send(new ie(Object.assign(Object.assign({level:"error",component:xa(this,Ca,"f")},e),{timestamp:Date.now()})))}send(e){setTimeout((()=>{try{Ae.send(e)}catch(e){console.warn(e)}}))}}Ca=new WeakMap;var Aa,Da,Oa=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},Na=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class Fa extends Error{constructor(e){super(),this.name="ExecutionTimeoutError",this.message=e}}class La{constructor(e){this.kDefaultmaxExecutionTimeMsMs=5e3,Aa.set(this,this.kDefaultmaxExecutionTimeMsMs),Da.set(this,Promise.resolve()),Oa(this,Aa,null!=e?e:this.kDefaultmaxExecutionTimeMsMs,"f")}execute(e,t){const{customMaxExecutionTimeMs:n,info:r}=t||{};return new Promise(((t,i)=>{const o=Symbol(),a="number"==typeof n?n:Na(this,Aa,"f");Oa(this,Da,Na(this,Da,"f").then((()=>{const t=e();return La.isPromise(t)?this.waitForFulfillment(t,o,a):t})).then((e=>t(e))).catch((t=>{if(t===o){const n=e.name?`'${e.name}'`:"anonymous function";t=new Fa(`${n} ${r?`(${r}) `:""}execution timeout, limit: ${a}[ms]`)}i(t)})),"f")}))}static isPromise(e){return"object"==typeof e&&"function"==typeof e.then}waitForFulfillment(e,t,n){let r;return Promise.race([e,new Promise(((e,i)=>{r=setTimeout(i,n,t)}))]).finally((()=>clearTimeout(r)))}}Aa=new WeakMap,Da=new WeakMap;var za,Ua,Va,Ba,Wa,Ga,Ha,Ya,$a,Za,qa,Xa,Ka,Ja,Qa,es,ts=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},ns=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},rs=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},is=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};xe()("vxt:confservice"),function(e){e.Created="created",e.Joined="joined",e.Left="left",e.Ended="ended",e.Destroyed="destroyed",e.Stats="stats",e.Switched="switched",e.Error="error",e.QualityIndicators="qualityIndicators",e.ParticipantAdded="participantAdded",e.ParticipantUpdated="participantUpdated",e.ParticipantLeft="participantLeft",e.AutoplayBlocked="autoplayBlocked",e.StreamAdded="streamAdded",e.StreamUpdated="streamUpdated",e.StreamRemoved="streamRemoved",e.PermissionsUpdated="permissionsUpdated"}(es||(es={}));const os="ConferenceService";let as=class extends ut{constructor(e,t,n,r,i,o,a){super(e),za.set(this,void 0),Ua.set(this,void 0),Va.set(this,void 0),Ba.set(this,void 0),Wa.set(this,void 0),Ga.set(this,!0),Ha.set(this,void 0),Ya.set(this,void 0),$a.set(this,null),Za.set(this,!1),qa.set(this,void 0),Xa.set(this,void 0),Ka.set(this,void 0),Ja.set(this,void 0),Qa.set(this,new Ra(os)),rs(this,Ua,t,"f"),rs(this,za,new class{constructor(e,t,n){Mi.set(this,void 0),Ri.set(this,void 0),Ai.set(this,void 0),Di.set(this,void 0),Oi.set(this,void 0),Ni.set(this,void 0),Fi.set(this,void 0),Li.set(this,void 0),zi.set(this,new Map),Ui.set(this,new Map),Vi.set(this,void 0),Bi.set(this,void 0),Wi.set(this,new Array),Gi.set(this,void 0),Hi.set(this,void 0),Yi.set(this,!1),$i.set(this,void 0),Zi.set(this,!1),qi.set(this,void 0),Xi.set(this,void 0),Ki.set(this,void 0),Ji.set(this,void 0),Qi.set(this,void 0),eo.set(this,void 0),to.set(this,!0),no.set(this,new Array),ro.set(this,void 0),io.set(this,0),ao(this,Ri,e,"f"),ao(this,eo,t,"f"),ao(this,Mi,n,"f")}get rtc(){return so(this,Qi,"f")}set rtc(e){ao(this,Qi,e,"f")}get initialRenegotiableOptions(){return so(this,Li,"f")}getRenegotiableJoinOptions(){const{audioBitrate:e,preferSendMono:t}=so(this,Fi,"f");return{audioBitrate:e||Ii,preferSendMono:t}}updateRenegotiableJoinOptions(e){ao(this,Fi,Object.assign(Object.assign({},so(this,Fi,"f")),e),"f")}applyNewJoinOptions(e){var t,n,r,i;const o={};(null===(t=so(this,Fi,"f"))||void 0===t?void 0:t.audioBitrate)&&!(null==e?void 0:e.audioBitrate)&&(o.audioBitrate=null===(n=so(this,Fi,"f"))||void 0===n?void 0:n.audioBitrate),void 0===(null===(r=so(this,Fi,"f"))||void 0===r?void 0:r.preferSendMono)||void 0!==(null==e?void 0:e.preferSendMono)&&null!==(null==e?void 0:e.preferSendMono)||(o.preferSendMono=null===(i=so(this,Fi,"f"))||void 0===i?void 0:i.preferSendMono),ao(this,Fi,Object.assign(Object.assign({},e),o),"f"),ao(this,Li,{audioBitrate:e.audioBitrate||Ii,preferSendMono:void 0===e.preferSendMono||e.preferSendMono},"f")}get isLeaving(){return so(this,$i,"f")}get maxVideoForwarding(){return so(this,Vi,"f")}get videoForwardingStrategy(){return so(this,Bi,"f")}get forwardingParticipantList(){return so(this,Wi,"f")}get participants(){return so(this,zi,"f")}get forwardedParticipants(){return so(this,Ui,"f")}get listenOnly(){return so(this,Zi,"f")}get isAudioOnly(){return so(this,Yi,"f")}getPeerConnectionStatus(){return so(this,Xi,"f")}isDvwc(){return so(this,Qi,"f")instanceof fi}isRts(){return so(this,Qi,"f")instanceof Si}isCustomAudio(){return this.rtc.customAudio}isElectron(){return so(this,Qi,"f")instanceof Br}isOpus(){return so(this,Qi,"f")instanceof Lr}isDapm(){return so(this,Qi,"f")instanceof Lr&&so(this,Qi,"f").isDapm()}init(e,t,n,r=null,i=!1,o,a=null,s=null){return oo(this,void 0,void 0,(function*(){let c;this.clear(),ao(this,Ai,t,"f"),ao(this,Oi,e.id,"f"),ao(this,Ni,e,"f"),this.applyNewJoinOptions(n),ao(this,Ki,r,"f"),ao(this,Zi,i,"f"),o.participantsGetter=()=>so(this,zi,"f"),so(this,Fi,"f").mixing.enabled&&ao(this,Zi,!0,"f");try{try{c=yield this.onInitialized(o,a,s)}catch(e){!function(e){if(108==e.code&&403==e.status)throw new De("MaxCapacityError","Conference is at maximum capacity.");throw e}(e)}if(so(this,Fi,"f").videoFilter){const e={filter:so(this,Fi,"f").videoFilter,filterOptions:Object.assign({},so(this,Fi,"f").videoFilterOptions)};Ae.send(Te.ConferenceVideoFilterUpdate.fromData(e))}return c}catch(e){throw Ae.send(Te.ConferenceGlobalError.fromData(e)),this.releaseRtc(),so(this,ro,"f")&&so(this,ro,"f").stop(),ao(this,ro,null,"f"),e}}))}clear(){so(this,ro,"f")&&so(this,ro,"f").stop(),ao(this,ro,null,"f"),ao(this,Di,null,"f"),ao(this,$i,!1,"f"),ao(this,Oi,null,"f"),ao(this,qi,[],"f"),ao(this,Xi,"","f"),ao(this,zi,new Map,"f"),ao(this,Ui,new Map,"f"),ao(this,qi,[],"f"),ao(this,Qi,null,"f")}videoForwarding(e,t,n){let r=[];return n&&n.forEach(((e,t)=>{r.push(new _i(e.id,0))})),wt.conferences.videoForwarding({conferenceId:so(this,Di,"f"),data:{forwardingStrategy:{type:e,params:{maxActiveStreams:t}},forwardingVideoList:r}}).then((()=>{ao(this,Vi,t,"f"),ao(this,Bi,e,"f"),ao(this,Wi,n,"f")})).catch((e=>{throw new We(e.message)}))}updatePermissions(e){return wt.conferences.updatePermissions({conferenceId:so(this,Di,"f"),data:{userPermissions:e.map((e=>({newPermissions:e.permissions,userId:e.participant.id})))}})}initRtc(e,t=null,n=!1,r,i,o,a,s,c,u,d=null,h=null){return oo(this,void 0,void 0,(function*(){const p={constraints:e,captureMode:yield so(this,Mi,"f").call(this),processCb:t,listenOnly:!!n,ownerId:r,options:i,mixing:o,alias:a,dvwc:s,videoTrack:d,audioTrack:h,dolbyVoice:c};if(Tn.isAvailable())ao(this,Qi,new Br(u),"f"),this.registerRtcEvents(),yield so(this,Qi,"f").init(p);else if((null==n?void 0:n.type)===l.Mixed)ao(this,Qi,new Si(u),"f"),this.registerRtcEvents(),yield so(this,Qi,"f").init(p);else{if(s)try{ao(this,Qi,new fi(u),"f"),this.registerRtcEvents(),yield so(this,Qi,"f").init(p)}catch(e){mr.warn("Falling back to Opus"),Ae.send(Te.ConferenceGlobalError.fromData((f=e.message,new De("DolbyVoiceInitError","Unable to use Dolby Voice, fallback to default settings. Reason: "+f)))),ao(this,Qi,null,"f")}if(!s||s&&!so(this,Qi,"f")){let t;ao(this,Qi,zr.create(u),"f"),this.registerRtcEvents(),so(this,Gi,"f")&&(t=!0===e.audio?so(this,Gi,"f"):!1!==e.audio&&Object.assign(Object.assign({},so(this,Gi,"f")),e.audio),p.constraints.audio=t),yield so(this,Qi,"f").init(p),!1===t&&so(this,Qi,"f").preserveAudioConstraintsSettings(so(this,Gi,"f"))}}var f}))}buildConstraints(e,t){var n,r;return oo(this,void 0,void 0,(function*(){const i=yield so(this,Mi,"f").call(this),o=i.mode===cr.Unprocessed||i.mode===cr.Music||i.mode===cr.Standard&&"low"===(null===(n=i.modeOptions)||void 0===n?void 0:n.noiseReductionLevel);so(this,Fi,"f").constraints=qn({requestedConstraints:so(this,Fi,"f").constraints,mixingEnabled:null===(r=so(this,Fi,"f").mixing)||void 0===r?void 0:r.enabled,dolbyProcessing:e,dapm:t},o)}))}registerRtcEvents(){so(this,Qi,"f").on("sessionCreated",this.onSessionCreated.bind(this)),so(this,Qi,"f").on("sessionEnded",this.onRtcSessionEnded.bind(this)),so(this,Qi,"f").on("reconnect",this.onReconnect.bind(this)),so(this,Qi,"f").on("error",this.onRtcError.bind(this)),so(this,Qi,"f").on("autoplayBlocked",this.onAutoplayBlocked.bind(this)),so(this,Qi,"f").on("addStream",this.onStreamAdded.bind(this)),so(this,Qi,"f").on("updateStream",this.onStreamUpdated.bind(this)),so(this,Qi,"f").on("removeStream",this.onStreamRemoved.bind(this)),so(this,Qi,"f").on("addScreenStream",this.onScreenStreamAdded.bind(this)),so(this,Qi,"f").on("removeScreenStream",this.onScreenStreamRemoved.bind(this)),so(this,Qi,"f").on("updateScreenStream",this.onScreenStreamUpdated.bind(this)),so(this,Qi,"f").on("endedScreenStream",this.onScreenStreamEnded.bind(this)),so(this,Qi,"f").on("connectionStatus",this.onPeerConnectionStatus.bind(this)),so(this,Qi,"f").on("iceCandidatesGatheringComplete",this.onIceCandidatesGatheringComplete.bind(this)),so(this,Qi,"f").on("onBandwidthRestrictionChanged",this.onBandwidthRestrictionChanged.bind(this)),so(this,Qi,"f").on("onTrackEnded",this.onRtcTrackEnded.bind(this)),so(this,Qi,"f").on("onTrackMute",this.onAudioMute.bind(this)),so(this,Qi,"f").on("onDnrStatusChange",this.onDnrStatusChange.bind(this)),so(this,Qi,"f").on("traceRtcEvent",this.onTraceRtcEvent.bind(this))}onTraceRtcEvent(e){Ae.send(e)}startRtsView(e,t,n){return oo(this,void 0,void 0,(function*(){so(this,Qi,"f")instanceof Si&&(yield so(this,Qi,"f").startRtsView(e,t,n))}))}stopRtsView(){return oo(this,void 0,void 0,(function*(){so(this,Qi,"f")instanceof Si&&so(this,Qi,"f").stopRtsView()}))}onInitialized(e,t,n){var r,i,o,a,s,c,u,d,h,p,f,m,g,v,y;return oo(this,void 0,void 0,(function*(){mr.trace("Conference.onInitialized");const _=bn.isChrome||bn.isEdge,w=!this.isDvwc()&&Kn()&&_;yield this.buildConstraints(null===(r=e.params)||void 0===r?void 0:r.dolbyVoice,w);let b=Object.assign({},so(this,Fi,"f"));so(this,Fi,"f").dvwc&&(b.dvwc=!0),so(this,Ni,"f").updateAudioTransmitting((null===(i=so(this,Fi,"f").constraints)||void 0===i?void 0:i.audio)&&!so(this,Zi,"f")),(null===(o=so(this,Fi,"f").constraints)||void 0===o?void 0:o.video)&&!so(this,Zi,"f")&&so(this,Ni,"f").updateVideoTransmitting(!0),so(this,Ni,"f").status=ce.CONNECTING,this.participants.set(so(this,Oi,"f"),so(this,Ni,"f"));const k={conferenceId:so(this,Ai,"f"),data:{sync:!0,sdp_version:zr.sdpVersion(),user:{type:so(this,Zi,"f")?"listener":"user"},options:Object.assign(Object.assign({},b),{listenMode:null===(a=so(this,Zi,"f"))||void 0===a?void 0:a.type})}};so(this,Fi,"f").hasOwnProperty("maxVideoForwarding")&&ao(this,Vi,so(this,Fi,"f").maxVideoForwarding,"f"),so(this,Fi,"f").forwardingStrategy&&ao(this,Bi,so(this,Fi,"f").forwardingStrategy,"f"),so(this,Fi,"f").mixing.enabled&&(k.data.user.type="mixer");try{const{data:r}=yield wt.conferences.joinRoom(k);ao(this,Gi,Object.assign({},wr(yield so(this,Mi,"f").call(this),_r(r.dvwc,null===(s=e.params)||void 0===s?void 0:s.dolbyVoice),w)),"f"),co("JoinConference:",r),ao(this,Di,r.conferenceId,"f"),"NONE"===(null===(c=null==r?void 0:r.metadata)||void 0===c?void 0:c.videoCodec)&&(ao(this,Yi,!0,"f"),so(this,Fi,"f").constraints.video=!1,t&&(t=null)),bn.isFirefox&&"H264"===(null===(u=null==r?void 0:r.metadata)||void 0===u?void 0:u.videoCodec)&&(so(this,Fi,"f").simulcast=!1),"true"===(null===(d=null==r?void 0:r.metadata)||void 0===d?void 0:d.dolbyVoice)&&((null===(f=null===(p=null===(h=so(this,Fi,"f"))||void 0===h?void 0:h.constraints)||void 0===p?void 0:p.audio)||void 0===f?void 0:f.channelCount)&&1!==so(this,Fi,"f").constraints.audio.channelCount&&(so(this,Fi,"f").constraints.audio.channelCount=1),(null===(m=so(this,Fi,"f"))||void 0===m?void 0:m.audioBitrate)&&(so(this,Fi,"f").audioBitrate=null)),yield this.initRtc(so(this,Fi,"f").constraints,so(this,Ki,"f"),so(this,Zi,"f"),so(this,Oi,"f"),so(this,Fi,"f"),so(this,Fi,"f").mixing,so(this,Ai,"f"),zr.createDvwcOptions(so(this,Fi,"f").dvwc,{enabled:r.wasmCandidates&&r.wasmDescription}),null===(g=e.params)||void 0===g?void 0:g.dolbyVoice,so(this,eo,"f"),t,n),ao(this,ro,new class{constructor(e){di.set(this,null),li.set(this,new Array),hi.set(this,void 0),pi.set(this,!1),mi(this,di,e,"f")}start(){mi(this,hi,setInterval(this.run.bind(this),100),"f")}stop(){gi(this,hi,"f")&&clearInterval(gi(this,hi,"f"))}run(){if(gi(this,li,"f").length>0&&gi(this,di,"f").call(this)&&!gi(this,pi,"f")){mi(this,pi,!0,"f");const e=gi(this,li,"f").shift();e.fn().then((t=>{e.resolve(t),mi(this,pi,!1,"f")})).catch((t=>{e.reject(t),mi(this,pi,!1,"f")}))}}push(e,t,...n){return new Promise(((r,i)=>{const o=new vi(r,i,t.bind(e,...n));gi(this,li,"f").push(o)}))}}(so(this,Qi,"f").isPeerConnectionStable.bind(so(this,Qi,"f"))),"f"),so(this,ro,"f").start();const i=(null===(v=so(this,Zi,"f"))||void 0===v?void 0:v.type)===l.Mixed,o={conferenceId:r.conferenceId,conferenceAlias:r.conferenceAlias,conferenceType:r.conferenceType,conferencePincode:r.conferencePincode,metadata:Object.assign(Object.assign({},r.metadata),{rtsViewer:i}),recordingStatus:r.recordingStatus,recordingUser:r.recordingUser,startRecordTimestamp:r.startRecordTimestamp,listenOnly:so(this,Zi,"f")};if(Ae.send(Te.ConferenceJoined.fromData(o)),i||r.participants&&r.participants.map((e=>{e.user_id=e.participant_id,Ae.send(L.fromData(e))})),r.hasOwnProperty("vfs")&&void 0!==r.vfs.defaultMaxVideoForwarded?ao(this,Vi,r.vfs.defaultMaxVideoForwarded,"f"):ao(this,Vi,25,"f"),e.params=M.fromJoinData(r.metadata),r.description||r.wasmDescription){this.updateOfferTimestamp(this.getOfferTimestamp(r.description.oid));const e={peerId:so(this,Oi,"f"),description:r.description,candidates:r.candidates,wasmDescription:r.wasmDescription,wasmCandidates:r.wasmCandidates,isMaster:!0};yield so(this,Qi,"f").addPeer(e)}else i&&(yield so(this,Qi,"f").ensurePeer({peerId:so(this,Oi,"f"),isMaster:!0}));return i&&"in_progress"===(null===(y=null==r?void 0:r.rtsInfo)||void 0===y?void 0:y.status)&&(yield this.startRtsView(r.rtsInfo.streamName,r.rtsInfo.streamAccountId,r.rtsInfo.subscribeToken)),setTimeout((()=>{"checking"===so(this,Xi,"f")&&Ae.send(Te.ConferenceGlobalError.fromData(Qe(so(this,Oi,"f"))))}),25e3),o}catch(e){if(2170===e.code)throw new We(e.message);throw ao(this,Di,null,"f"),mr.error("webrtc","Failed to join conference",e),Ae.send(Te.ConferenceGlobalError.fromData(e)),e}}))}onSessionCreated(e,t,n,r,i,o,a){co("Conference.onSessionCreated",e,t,o,a),t.sdp,Ae.send(Te.ConferenceGlobalTrace.fromData({api:"onSessionCreated",description:"Send answer",data:{oid:o}})),wt.conferences.answer({conferenceId:so(this,Di,"f"),peerId:e,data:{oid:o,sdp:t.sdp,candidates:n,ssMsid:r,state:i,wasm:a}}).then((e=>{mr.debug(e)})).catch((e=>{mr.error("webrtc",e),Ae.send(Te.ConferenceGlobalError.fromData(e))}))}onRtcSessionEnded(e){let t=!0===so(this,to,"f")?Te.ConferenceLeft.fromData(e):new Te.ConferenceLeft;Ae.send(t)}onRtcError(e){Ae.send(Te.ConferenceGlobalError.fromData(e))}onIceCandidatesGatheringComplete(e,t){mr.trace("Conference.onIceCandidatesGatheringComplete",e,t),wt.conferences.candidates({conferenceId:so(this,Di,"f"),peerId:e,data:{commandType:"CandidatesGatheredCommand",candidates:t}}).then((e=>{mr.debug(e)})).catch((e=>{mr.error("webrtc",e),Ae.send(Te.ConferenceGlobalError.fromData(e))}))}onPeerConnectionStatus(e){var t;so(this,Ri,"f")&&(e.peerId===so(this,Oi,"f")&&ao(this,Xi,e.connectionStatus,"f"),"failed"===e.connectionStatus?Ae.send(Te.ConferenceGlobalError.fromData(Qe(e.peerId))):"disconnected"===e.connectionStatus&&Ae.send(Te.ConferenceGlobalError.fromData((t=e.peerId,new Oe("PeerConnectionDisconnectedError","Peer connection has been disconnected",t)))))}onRenegociationEnded(e){so(this,Ri,"f")}onAutoplayBlocked(){so(this,Ri,"f")&&so(this,Ri,"f").onAutoplayBlocked()}onStreamAdded(e,t){Ae.send(Te.StreamAdded.fromData({peerId:e,stream:t}))}onStreamUpdated(e,t){Ae.send(Te.StreamUpdated.fromData({peerId:e,stream:t}))}onStreamRemoved(e,t){Ae.send(Te.StreamRemoved.fromData({peerId:e,stream:t}))}onScreenStreamAdded(e,t){Ae.send(Te.StreamAdded.fromData({peerId:e,stream:t}))}onScreenStreamRemoved(e,t){Ae.send(Te.StreamRemoved.fromData({peerId:e,stream:t}))}onScreenStreamUpdated(e,t){Ae.send(Te.StreamUpdated.fromData({peerId:e,stream:t}))}onScreenStreamEnded(){this.stopScreenShare()}onReconnect(){const e={conferenceId:so(this,Di,"f"),data:{pcWasm:this.isDvwc(),recreate:!0}};return wt.conferences.postRenegociate(e).then((e=>{if(!e.data||!e.data.description)throw this.releaseRtc(),new Error("Failed to negociate SDP");return e.data.description.oid,{peerId:so(this,Oi,"f"),description:e.data.description,candidates:e.data.candidates}})).then((e=>{so(this,Qi,"f").renegociate(e)})).catch((e=>{throw this.releaseRtc(),new Error("Failed to negociate connection")})),Promise.resolve()}onRtcTrackEnded(e){Ae.send(Te.ConferenceGlobalError.fromData(e))}onAudioMute(e,t){Ae.send(new ie({level:"info",action:"MuteStateChanged",description:"The mute state has been updated.",component:"ConferenceService",api:"mute",payload:[{mute:e,participantId:t}]}))}onDnrStatusChange(e){Ae.send(new ie({level:"info",action:"DnrStatusChanged",description:"The dnr status has been updated.",component:"ConferenceService",api:"dnr",payload:[{enabled:e}]}))}getOfferTimestamp(e){if("string"==typeof e)return Number(e.split(":")[0])}updateOfferTimestamp(e){e&&e>so(this,io,"f")&&ao(this,io,e,"f")}isOfferOutdated(e,t){return(!t||t<so(this,io,"f"))&&(console.warn("Received outdated offer. OID: "+e),!0)}setRemoteOffer(e){var t,n;return oo(this,void 0,void 0,(function*(){co("setRemoteOffer",e);const r=this.getOfferTimestamp(null===(t=null==e?void 0:e.description)||void 0===t?void 0:t.oid);if(!this.isOfferOutdated(null===(n=null==e?void 0:e.description)||void 0===n?void 0:n.oid,r)){if(this.updateOfferTimestamp(r),so(this,zi,"f").get(e.userId)||Ae.send(L.fromData({user_id:e.userId})),!so(this,zi,"f").get(e.userId)&&e.userId!==so(this,Oi,"f"))throw i=e.userId,new ze("NotFoundError","Unable to find participant: "+i);{const t={peerId:e.userId,description:e.description,candidates:e.candidates,isMaster:e.master,state:e.state};try{yield so(this,ro,"f").push(so(this,Qi,"f"),so(this,Qi,"f").addPeer,t)}catch(e){Ae.send(Te.ConferenceGlobalError.fromData(e))}}var i}}))}addParticipant(e){co("addUser",e);let t=so(this,zi,"f").get(e.userId);return t||(t=new le(e.userId,e.participantType),t.init(e),so(this,zi,"f").set(e.userId,t)),t}updateParticipant(e){co("updateUser",e);let t=so(this,zi,"f").get(e.userId);return t?(e.audioReceivingStopped=e.audioReceivingStopped||e.userId===so(this,Oi,"f"),e.userId===so(this,Oi,"f")?e.video=t.videoTransmitting:t.updateAudioTransmitting(e.audio||!1),t.update(e),"INACTIVE"===e.status&&e.userId!==so(this,Oi,"f")&&so(this,Qi,"f").ensurePeer({peerId:e.userId,isMaster:!1}),"LEFT"===e.status?so(this,Qi,"f").removePeer(e.userId):this.isElectron()&&this.rtc.addFakePeer(e.userId)):e.userId===so(this,Oi,"f")||(t=this.addParticipant(e)),t}participantSwitched(e){co("userSwitched"),so(this,Qi,"f")}onConferenceStats(e){}stopVideoLocally(e){return oo(this,void 0,void 0,(function*(){try{yield this.checkInitialized(),yield so(this,Qi,"f").stopVideoForPeer(e)}catch(e){throw e}}))}stopVideoForLocalPeer(){return oo(this,void 0,void 0,(function*(){try{yield this.checkInitialized(),yield so(this,Qi,"f").stopVideoForPeer(so(this,Oi,"f"));let e=yield wt.conferences.stopMedia({conferenceId:so(this,Di,"f"),peerId:so(this,Oi,"f"),data:{index:0,label:"camera",media:["video"]}});if(!e.data||!e.data.description)throw new Error("Empty server response for stop video");const t=e.data.description;yield this.pushRemoteOffer(t),yield so(this,Qi,"f").createAnswer(so(this,Oi,"f"),"default",t.oid)}catch(e){throw mr.error(e),e}}))}stopVideoForRemotePeer(e){return oo(this,void 0,void 0,(function*(){try{yield this.checkInitialized(),yield so(this,Qi,"f").stopVideoForPeer(e),yield wt.conferences.stopMedia({conferenceId:so(this,Di,"f"),peerId:e,data:{index:0,label:"camera",media:["video"]}})}catch(e){throw Ae.send(Te.ConferenceGlobalError.fromData(e)),mr.error(e),e}}))}startVideoForLocalPeer(e){return oo(this,void 0,void 0,(function*(){let t=null;try{yield this.checkInitialized();const n=yield wt.conferences.startMedia({conferenceId:so(this,Di,"f"),peerId:so(this,Oi,"f"),data:{index:0,label:"camera",media:["video"]}});if(!n.data||!n.data.description)throw new Error("Empty server response for start video");t=n.data.description.oid;const r=n.data.description;yield so(this,ro,"f").push(so(this,Qi,"f"),so(this,Qi,"f").setRemoteSdp,so(this,Oi,"f"),r,""),yield so(this,Qi,"f").startVideoForPeer(so(this,Oi,"f"),e),yield so(this,Qi,"f").createAnswer(so(this,Oi,"f"),"default",t)}catch(e){throw t&&so(this,Qi,"f").createAnswer(so(this,Oi,"f"),"default",t),mr.error(e),e}}))}startVideoForRemotePeer(e,t){return oo(this,void 0,void 0,(function*(){try{yield this.checkInitialized(),yield wt.conferences.startMedia({conferenceId:so(this,Di,"f"),peerId:e,data:{index:0,label:"camera",media:["video"]}})}catch(e){throw Ae.send(Te.ConferenceGlobalError.fromData(e)),e}}))}stopAudioForLocalPeer(){return oo(this,void 0,void 0,(function*(){try{yield this.checkInitialized(),so(this,Ni,"f").updateAudioTransmitting(!1),yield so(this,Qi,"f").stopAudioForPeer(so(this,Oi,"f"));const{data:e}=yield wt.conferences.stopMedia(this.createRequestConferenceMediaPayload("audio"));if(!e||!e.description)throw new Error("Empty server response for stop audio");yield this.pushRemoteOffer(e.description),yield so(this,Qi,"f").createAnswer(so(this,Oi,"f"),"default",e.description.oid)}catch(e){throw so(this,Ni,"f").updateAudioTransmitting(!0),e}}))}stopAudioForRemotePeer(e){return oo(this,void 0,void 0,(function*(){try{yield this.checkInitialized(),yield so(this,Qi,"f").stopAudioForPeer(e),yield wt.conferences.stopMedia(this.createRequestConferenceMediaPayload("audio",e))}catch(e){throw Ae.send(Te.ConferenceGlobalError.fromData(e)),mr.error(e),e}}))}startAudioForLocalPeer(e){var t,n;return oo(this,void 0,void 0,(function*(){let r;try{if(yield this.checkInitialized(),r=yield wt.conferences.startMedia(this.createRequestConferenceMediaPayload("audio")),!r.data||!r.data.description)throw new Error("Empty server response for start audio");yield xi(this.pushRemoteOffer(r.data.description),ji,"startAudioForLocalPeer (pushRemoteOffer)"),so(this,Ni,"f").updateAudioTransmitting(!0);const t=yield so(this,Mi,"f").call(this),n=yield xi(so(this,Qi,"f").startAudioForPeer(so(this,Oi,"f"),e,t),2*Ci,"startAudioForLocalPeer (rtc.startAudioForPeer)");return yield xi(so(this,Qi,"f").createAnswer(so(this,Oi,"f"),"default",r.data.description.oid),ji,"startAudioForLocalPeer (rtc.createAnswer)"),n}catch(e){throw so(this,Ni,"f").updateAudioTransmitting(!1),(null===(n=null===(t=r.data)||void 0===t?void 0:t.description)||void 0===n?void 0:n.oid)&&so(this,Qi,"f").createAnswer(so(this,Oi,"f"),"default",r.data.description.oid),mr.error(e),e}}))}startAudioForRemotePeer(e){return oo(this,void 0,void 0,(function*(){try{yield this.checkInitialized(),yield wt.conferences.startMedia(this.createRequestConferenceMediaPayload("audio",e))}catch(e){throw Ae.send(Te.ConferenceGlobalError.fromData(e)),mr.error(e),e}}))}startStream(e,t){const n=new Array,r=so(this,Qi,"f").peers.find((e=>e.isMaster));let i=null;return e.getAudioTracks().length>0&&n.push("audio"),e.getVideoTracks().length>0&&n.push("video"),this.checkInitialized().then((()=>wt.conferences.startMedia({conferenceId:so(this,Di,"f"),peerId:so(this,Oi,"f"),data:{index:2,label:"custom",media:n}}))).then((e=>{if(!e.data||!e.data.description)throw new Error("Empty server response for start audio");return i=e.data.description.oid,e.data.description})).then((e=>this.pushRemoteOffer(e))).then((()=>so(this,Qi,"f").addStream(e,r.connection,2))).then((()=>so(this,Qi,"f").createAnswer(so(this,Oi,"f"),"default",i))).catch((e=>{throw mr.error(e),Ae.send(Te.ConferenceGlobalError.fromData(e)),e}))}pushRemoteOffer(e){return oo(this,void 0,void 0,(function*(){const t=this.getOfferTimestamp(null==e?void 0:e.oid);this.isOfferOutdated(null==e?void 0:e.oid,t)||(this.updateOfferTimestamp(t),yield so(this,ro,"f").push(so(this,Qi,"f"),so(this,Qi,"f").setRemoteSdp,so(this,Oi,"f"),e,""))}))}stopStream(e){}selectAudioInput(e){return this.checkInitialized().then((()=>so(this,Qi,"f").selectAudioInput(e))).catch((e=>{throw Ae.send(Te.ConferenceGlobalError.fromData(e)),e}))}onLocalVideoUpdated(e){return oo(this,void 0,void 0,(function*(){return yield this.checkInitialized(),so(this,Qi,"f").updateLocalVideo(e)}))}selectVideoInput(e,t){return this.checkInitialized().then((()=>so(this,Qi,"f").selectVideoInput(e,t))).catch((e=>{throw Ae.send(Te.ConferenceGlobalError.fromData(e)),e}))}startScreenShare(e){let t=null,n=null,r="audioshare",i="screenshare";return so(this,Qi,"f").startScreenShare(e).then((e=>(t=e,wt.screen.start({conferenceId:so(this,Di,"f")}).then((e=>{if(!e.data||!e.data.description)throw new Error("Empty server response for start audio");return n=e.data.description.oid,r=e.data.ssAudioMid,i=e.data.ssVideoMid,e.data.description})).then((e=>this.pushRemoteOffer(e))).then((()=>so(this,Qi,"f").addMasterScreenStream(t,r,i))).then((()=>so(this,Qi,"f").createAnswer(so(this,Oi,"f"),"default",n))).catch((e=>{throw this.releaseScreenShare(),Ae.send(Te.ConferenceGlobalError.fromData(e)),e})))))}changeScreenShare(e){let t=null;return so(this,Qi,"f")?so(this,Qi,"f").changeScreenShare(e).then((()=>wt.conferences.renegociate({conferenceId:so(this,Di,"f")}))).then((e=>{if(!e.data||!e.data.description)throw new Error("Empty server response");return t=e.data.description.oid,e.data.description})).then((e=>this.pushRemoteOffer(e))).then((()=>so(this,Qi,"f").createAnswer(so(this,Oi,"f"),"default",t))).catch((e=>{throw mr.error(e),Ae.send(Te.ConferenceGlobalError.fromData(e)),e})):Promise.reject(et())}stopScreenShareLocally(){return this.checkInitialized().then((()=>so(this,Qi,"f").stopScreenShare()))}releaseScreenShare(){return oo(this,void 0,void 0,(function*(){try{yield this.checkInitialized(),so(this,Qi,"f").releaseScreenShare()}catch(e){throw e}}))}stopScreenShare(){let e=null;return this.checkInitialized().then((()=>so(this,Qi,"f").stopScreenShare())).then((()=>{if(!so(this,$i,"f"))return wt.screen.stop({conferenceId:so(this,Di,"f")}).then((t=>{if(!t.data||!t.data.description)throw new Error("Empty server response");return e=t.data.description.oid,t.data.description})).then((e=>this.pushRemoteOffer(e))).then((()=>so(this,Qi,"f").createAnswer(so(this,Oi,"f"),"default",e))).catch((e=>{throw Ae.send(Te.ConferenceGlobalError.fromData(e)),e}))}))}meanOpinionScore(){const e=so(this,qi,"f").map((e=>e.packetLost)).reduce(((e,t)=>e+t))/so(this,qi,"f").length;return Math.max(1,Math.ceil(5-5*e/20))}leave({leaveRoom:e=!0,reason:t="hangUp",keepAlive:n=!1}={}){return oo(this,void 0,void 0,(function*(){Ae.send(new Te.ConferenceLeaving),so(this,ro,"f")&&so(this,ro,"f").stop(),ao(this,$i,!0,"f"),so(this,Qi,"f")&&(so(this,Qi,"f").isLeavingConference=!0);let r=Promise.resolve();if(n)return wt.conferences.leave({conferenceId:so(this,Di,"f"),keepAlive:n,data:{reason:t}});e&&null!=so(this,Di,"f")&&(r=wt.conferences.leave({conferenceId:so(this,Di,"f"),data:{reason:t}}).catch((e=>mr.info(e))));let i=yield this.createConferenceLeftEvent();return r.then((e=>oo(this,void 0,void 0,(function*(){return yield this.releaseRtc(),Ae.send(i),ao(this,Vi,void 0,"f"),ao(this,$i,!1,"f"),mr.debug("Leave conference",this),Promise.resolve(e)}))))}))}releaseRtc(){var e;return oo(this,void 0,void 0,(function*(){so(this,Qi,"f")&&(yield so(this,Qi,"f").release(),null===(e=so(this,Qi,"f"))||void 0===e||e.removeAllListeners()),ao(this,Qi,null,"f")}))}setClientStateDumpsEnabled(e){ao(this,to,e,"f")}getClientStateDumpsEnabled(){return so(this,to,"f")}kick(e){return this.checkInitialized().then((()=>wt.conferences.kick({conferenceId:so(this,Di,"f"),peerId:e}))).catch((e=>{throw e}))}onKicked(){return oo(this,void 0,void 0,(function*(){let e=yield this.createConferenceLeftEvent();Ae.send(e),yield this.releaseRtc()}))}checkInitialized(){return new Promise(((e,t)=>{so(this,Qi,"f")||t(et()),e(!0)}))}createConferenceLeftEvent(){return oo(this,void 0,void 0,(function*(){if(so(this,Qi,"f")&&!0===so(this,to,"f"))try{let e=yield so(this,Qi,"f").createStateDump({liteMode:!0});return Te.ConferenceLeft.fromData(e)}catch(e){mr.info(e)}return new Te.ConferenceLeft}))}onBandwidthRestrictionChanged(e){Ae.send(Te.BandwidthRestrictionChanged.fromData({bandwidth:e}))}set audioConstraints(e){ao(this,Gi,e,"f")}createRequestConferenceMediaPayload(e,t){return{conferenceId:so(this,Di,"f"),peerId:t||so(this,Oi,"f"),data:{index:0,label:"camera",media:[e]}}}renegotiateCaptureMode(e,t,n,r=!0,i=!0){return oo(this,void 0,void 0,(function*(){if(!this.rtc)return Promise.reject(et());{let o;try{if(r){if(o=yield wt.conferences.postRenegociate({conferenceId:so(this,Di,"f"),data:{options:e}}),!o.data||!o.data.description)throw new Error("Empty server response");yield this.pushRemoteOffer(o.data.description)}so(this,Qi,"f").updateOptions(e),i&&(t&&!this.isCustomAudio()||this.isOpus()&&n)&&(yield so(this,Qi,"f").updateAudioProcessing(t,n)),this.updateRenegotiableJoinOptions(e),o&&(yield so(this,Qi,"f").createAnswer(so(this,Oi,"f"),"default",o.data.description.oid))}catch(e){throw mr.error(e),Ae.send(Te.ConferenceGlobalError.fromData(e)),e}}}))}setVideoForwarding(e){const t=this.participants.get(e);t?this.forwardedParticipants.set(e,t):this.forwardedParticipants.set(e,new le(e)),this.rtc.setVideoForwarding(e)}removeVideoForwarding(e){this.forwardedParticipants.delete(e),this.rtc.removeVideoForwarding(e)}}(this,n,(()=>o.getCaptureMode())),"f"),rs(this,Wa,!1,"f"),rs(this,Ya,r,"f"),rs(this,Xa,i,"f"),rs(this,Ka,o,"f"),rs(this,Ja,a,"f");const s={onStreamAdded:this.onStreamAdded.bind(this),onStreamUpdated:this.onStreamUpdated.bind(this),onStreamRemoved:this.onStreamRemoved.bind(this),onParticipantAdded:this.onParticipantAdded.bind(this),onParticipantUpdated:this.onParticipantUpdated.bind(this),onConferenceGlobalError:this.onConferenceGlobalError.bind(this)};rs(this,qa,new ja(t,is(this,za,"f"),s,(()=>is(this,Va,"f"))),"f")}create(e){return ns(this,void 0,void 0,(function*(){const t=function(e){(e=e||{}).params=e.params||{};const t=e.preferredRegions&&{preferredRegions:e.preferredRegions},n=e.params.spatialAudioStyle&&{spatialAudioStyle:e.params.spatialAudioStyle};return Object.assign(Object.assign({alias:e.alias||"",type:e.type||"sdk_conf"},t),{pinCode:e.pinCode,params:Object.assign({ttl:e.params.ttl||0,mode:e.params.mode||"standard",rtcpMode:e.params.rtcpMode||"average",stats:!!e.params.stats,currentLanguage:e.params.currentLanguage||"english",videoCodec:e.params.audioOnly?"NONE":e.params.videoCodec||"H264",liveRecording:e.params.liveRecording||"false",dolbyVoice:void 0===e.params.dolbyVoice?"true":e.params.dolbyVoice},n)})}(e),n=yield wt.conferences.create({data:t});return n.data.ownerToken&&wt.setConferenceTokens(n.data.conferenceId,n.data.ownerToken),this.onConferenceCreated(),To.fromCreateData(n.data)}))}fetch(e){return ns(this,void 0,void 0,(function*(){const t=new To(e),n=wt.getConferenceToken(e);return n&&(t.permissions=this.getPermissionsFromToken(n)),t}))}demo(e={spatialAudio:!1}){var t;return ns(this,void 0,void 0,(function*(){const n=yield wt.conferences.getDemo();return yield this._join(To.fromCreateData(n.data),{spatialAudio:e.spatialAudio,conference:{isDemo:!0},conferenceAccessToken:null===(t=null==n?void 0:n.data)||void 0===t?void 0:t.ownerToken})}))}replay(e,t={offset:0},n){return ns(this,void 0,void 0,(function*(){t.conferenceAccessToken?wt.currentConferenceToken=t.conferenceAccessToken:wt.setCurrentConferenceToken(e.id);let r=yield wt.conferences.replay({conferenceId:e.id,data:{offset:t.offset}});return r.data.ownerToken&&wt.setConferenceTokens(r.data.conferenceId,r.data.ownerToken),yield this._join(To.fromCreateData(r.data),{mixing:n},!0)}))}listen(e,t){return ns(this,void 0,void 0,(function*(){const n=t?Object.assign(Object.assign({},t),{constraints:{audio:!1,video:!1}}):{constraints:{audio:!1,video:!1}},r=!(null==t?void 0:t.type)||{type:t.type};return yield this._join(e,n,r)}))}join(e,t){return ns(this,void 0,void 0,(function*(){if(is(this,Wa,"f"))throw new Error("Already joining a conference");return this._join(e,t,!1)}))}_join(e,t,n=!1){var r,i,o,a,s,c;return ns(this,void 0,void 0,(function*(){try{if(!(null==e?void 0:e.id))throw new Ye("The provided conference has invalid ID");if(e.id===(null===(r=this.current)||void 0===r?void 0:r.id))return this.current;if(t.hasOwnProperty("maxVideoForwarding")&&void 0!==t.maxVideoForwarding&&("number"!=typeof t.maxVideoForwarding||!Number.isInteger(t.maxVideoForwarding)||t.maxVideoForwarding<0))throw new We("The number of streams provided in the videoForwarding API is incorrect.");if((null==t?void 0:t.forwardingStrategy)===yi.ClosestUser&&!1===(null==t?void 0:t.spatialAudio))throw new Ye("Unable to join a conference with closestUserStrategy and spatial audio disabled.");rs(this,Wa,!0,"f"),Ae.send(new Te.ConferenceJoining(e.id)),void 0!==t.leaveConferenceOnBeforeUnload&&rs(this,Ga,t.leaveConferenceOnBeforeUnload,"f");const l=Object.assign({constraints:t.constraints,mixing:(u=e.id,d=t.mixing,{enabled:(d=d||{}).enabled||!1,uri:d.uri||u}),simulcast:Zn(t.simulcast),preferSendMono:!("preferSendMono"in t)||t.preferSendMono,preferRecvMono:"preferRecvMono"in t&&t.preferRecvMono,maxVideoForwarding:t.maxVideoForwarding,forwardingStrategy:t.forwardingStrategy||yi.LastSpeaker,dvwc:t.dvwc||!1,videoFilter:t.videoFilter,videoFilterOptions:Object.assign({},t.videoFilterOptions),supportedAVSyncFakeAudio:!0,audioBitrate:t.dvwc?void 0:t.audioBitrate,supportedSpatialAudioStyles:[Io.Shared,Io.Disabled,Io.Individual],supportedMultiScreenShare:h.SendRecv},t.spatialAudio&&{spatialAudio:t.spatialAudio});"audioTweaks"in t&&Object.defineProperty(l,"audioTweaks",{value:t.audioTweaks});const p=null;mr.setConferenceId(e.id),yield this.leave(),rs(this,Va,e,"f"),t.conferenceAccessToken?wt.currentConferenceToken=t.conferenceAccessToken:wt.setCurrentConferenceToken(e.id);let f=wt.getCurrentConferenceToken();if(f&&(this.current.permissions=this.getPermissionsFromToken(f),this.current.permissions.has(ko.SendVideo)||(t.constraints.video=!1),this.current.permissions.has(ko.SendAudio)||(t.constraints.audio=!1)),t.customVideoTrack&&!(t.customVideoTrack instanceof MediaStreamTrack))throw new Ye("Invalid argument. The option 'customVideoTrack' expected a value of type MediaStreamTrack");let m=()=>{};const g="join";if(!is(this,Va,"f").isAudioOnly)try{if(t.customVideoTrack)try{rs(this,$a,yield is(this,Ya,"f").start(t.customVideoTrack,t.videoProcessor),"f"),m=()=>is(this,Qa,"f").customVideoStarted(g,t.videoProcessor)}catch(e){throw m=()=>is(this,Qa,"f").customVideoStartFailed(g,e,t.videoProcessor),e}else if(t.constraints&&"video"in t.constraints)if(t.constraints.video){const e="boolean"==typeof t.constraints.video||t.constraints.video instanceof Boolean?void 0:t.constraints.video;try{rs(this,$a,yield is(this,Ya,"f").start(e,t.videoProcessor),"f"),m=()=>is(this,Qa,"f").cameraVideoStarted(g,e,t.videoProcessor)}catch(n){throw m=()=>is(this,Qa,"f").cameraVideoStartFailed(g,n,e,t.videoProcessor),n}}else try{yield is(this,Ya,"f").stop(),rs(this,$a,null,"f"),m=()=>is(this,Qa,"f").localVideoStopped(g)}catch(e){throw m=()=>is(this,Qa,"f").localVideoStopFailed(g,e),e}else if(t.videoProcessor)try{yield is(this,Ya,"f").setProcessor(t.videoProcessor),m=()=>is(this,Qa,"f").videoProcessorEnabled(g,t.videoProcessor)}catch(e){throw m=()=>is(this,Qa,"f").videoProcessorEnableFailed(g,e,t.videoProcessor),e}}catch(e){if(this.shouldReport(e)&&Ae.send(Te.ConferenceGlobalError.fromData(e)),!this.shouldSwallowWhenJoining(e))throw e}const{metadata:v,conferenceAlias:y}=yield is(this,za,"f").init(is(this,Ua,"f").participant,e.id,l,p,n,e,is(this,$a,"f"),t.customAudioTrack);m(),"NONE"===v.videoCodec&&is(this,$a,"f")&&(yield is(this,Ya,"f").stop(),rs(this,$a,null,"f")),Ae.send(new ie({level:"info",action:"MediaConstraintsApplied",description:"The constraints have been applied at join time.",component:os,api:"join",payload:[l.constraints]})),(null==t?void 0:t.audioBitrate)&&(null==t?void 0:t.dvwc)&&console.error("Audio bitrate change is not supported in Dolby Voice conferences."),(null===(o=null===(i=null==l?void 0:l.constraints)||void 0===i?void 0:i.audio)||void 0===o?void 0:o.channelCount)&&1!==(null===(s=null===(a=null==t?void 0:t.constraints)||void 0===a?void 0:a.audio)||void 0===s?void 0:s.channelCount)&&((null==t?void 0:t.dvwc)||(null===(c=null==e?void 0:e.params)||void 0===c?void 0:c.dolbyVoice))&&console.error("Multichannel input audio is not supported in Dolby Voice conferences.");const _=!0===(null==t?void 0:t.spatialAudio)?(null==v?void 0:v.spatialAudioStyle)?null==v?void 0:v.spatialAudioStyle:Io.Individual:null;return rs(this,Ha,(e=>{switch(e.style){case"individual":return new Jo(e.conferenceId,e.participantId);case"shared":return new ha(e.conferenceId,e.participantId,e.setDirection,e.audioAttenuationName);default:return}})({style:_,participantId:is(this,Ua,"f").participant.id,conferenceId:e.id,setDirection:is(this,za,"f").isDvwc()?is(this,za,"f").rtc.setClientRotation.bind(is(this,za,"f").rtc):null}),"f"),e.params=M.fromJoinData(v),e.status=bo.Joined,y&&"string"==typeof y&&(e.alias=y),rs(this,Wa,!1,"f"),rs(this,Za,n,"f"),this.isJoinedAsRTSViewer()&&Ae.send(z.fromData({user_id:is(this,Ua,"f").participant.id,status:"ON_AIR",participantType:"LISTENER",audio:!1,audioReceivingStopped:!0,name:is(this,Ua,"f").participant.info.name,avatarUrl:is(this,Ua,"f").participant.info.avatarUrl,externalId:is(this,Ua,"f").participant.info.externalId,video:!1})),is(this,Va,"f")}catch(e){throw yield this.leave(),rs(this,Wa,!1,"f"),e}var u,d}))}updatePermissions(e){return ns(this,void 0,void 0,(function*(){return is(this,za,"f").updatePermissions(e)}))}leave(e={}){var t;return ns(this,void 0,void 0,(function*(){const n=e.leaveRoom||!0,r=e.reason||"hangUp",i=e.keepAlive||!1;is(this,Va,"f")&&is(this,za,"f")&&!is(this,za,"f").isLeaving&&(is(this,qa,"f").onLeave(),is(this,Ha,"f")&&is(this,Ha,"f").release(),yield is(this,za,"f").leave({leaveRoom:n,reason:r,keepAlive:i}),is(this,za,"f").clear()),rs(this,Va,null,"f"),rs(this,Ha,null,"f"),(null===(t=is(this,Ua,"f"))||void 0===t?void 0:t.participant)&&(is(this,Ua,"f").participant.status=ce.LEFT)}))}playBlockedAudio(){return ns(this,void 0,void 0,(function*(){yield is(this,za,"f").rtc.playBlockedAudio()}))}mute(e,t){var n;if(e.id===is(this,Ua,"f").participant.id){if(!this.current.permissions.has(ko.SendAudio))throw Je()}else if((null===(n=is(this,Va,"f").params)||void 0===n?void 0:n.dolbyVoice)&&!this.isJoinedAsRTSViewer())throw new Be;this.manager.rtc.mutePeer(e.id,t)}toggleMute(e){var t;if(e.id===is(this,Ua,"f").participant.id){if(!this.current.permissions.has(ko.SendAudio))throw Je()}else if((null===(t=is(this,Va,"f").params)||void 0===t?void 0:t.dolbyVoice)&&!this.isJoinedAsRTSViewer())throw new Be;return this.manager.rtc.toggleMute(e.id)}isMuted(){return is(this,za,"f").rtc.isOwnMuted()}muteOutput(e){return is(this,za,"f").rtc.muteOutput(e)}audioLevel(e,t){if(is(this,Va,"f")&&is(this,Va,"f").params.dolbyVoice&&is(this,Ua,"f").participant.id!==e.id&&!is(this,za,"f").isDvwc())throw new Be;return is(this,za,"f").rtc.getLevel(e.id,t)}isSpeaking(e,t){if(is(this,Va,"f")){const n=this.participants.get(e.id);if((!is(this,Va,"f").params.dolbyVoice||n===is(this,Ua,"f").participant||is(this,za,"f").isElectron()&&is(this,za,"f").isDvwc())&&(!is(this,za,"f").isElectron()||n!==is(this,Ua,"f").participant))return is(this,za,"f").rtc.isSpeaking(e.id,t);t(!(!n||!n.active))}}startStream(e,t=On.Custom){return is(this,za,"f").startStream(e,t)}stopStream(e){}startVideo(e,t){return ns(this,void 0,void 0,(function*(){if(this.isJoinedAsRTSViewer())return Promise.reject(new Be);try{return yield this.startVideoInternal(e,t)}catch(e){this.shouldReport(e)&&Ae.send(Te.ConferenceGlobalError.fromData(e))}}))}startVideoInternal(e,t,n){return e.id===is(this,Ua,"f").participant.id?is(this,Ya,"f").start(t,n).then((()=>Promise.resolve())):is(this,Xa,"f").start(e)}stopVideo(e){return ns(this,void 0,void 0,(function*(){if(this.isJoinedAsRTSViewer())return Promise.reject(new Be);try{return yield this.stopVideoInternal(e)}catch(e){this.shouldReport(e)&&Ae.send(Te.ConferenceGlobalError.fromData(e))}}))}stopVideoInternal(e,t){return e.id===is(this,Ua,"f").participant.id?is(this,Ya,"f").stop():is(this,Xa,"f").stop(e)}videoForwarding(e,t){return ns(this,void 0,void 0,(function*(){if(this.isJoinedAsRTSViewer())return Promise.reject(new Be("Video forwarding is not available to a client who has joined as an RTS viewer."));if(is(this,za,"f").isAudioOnly)return Promise.reject(new Be("Video forwarding is not available to a client who has joined audio only conference."));let n=is(this,za,"f").maxVideoForwarding,r=is(this,za,"f").videoForwardingStrategy;if("object"==typeof e){if(n=void 0!==e.max?e.max:is(this,za,"f").maxVideoForwarding,r=e.strategy||is(this,za,"f").videoForwardingStrategy,t=e.participants||is(this,za,"f").forwardingParticipantList,r===yi.ClosestUser&&!is(this,Ha,"f"))throw new Ye("Unable to join a conference with closestUserStrategy and spatial audio disabled.")}else n=e;if("number"!=typeof n||!Number.isInteger(n)||n<0)throw new We("The number of streams provided in the videoForwarding API is incorrect.");return n===is(this,za,"f").maxVideoForwarding&&r===is(this,za,"f").videoForwardingStrategy&&t.length===is(this,za,"f").forwardingParticipantList.length&&t.every(((e,t)=>{var n;return e.id===(null===(n=is(this,za,"f").forwardingParticipantList[t])||void 0===n?void 0:n.id)}))?void 0:is(this,za,"f").videoForwarding(r,n,t)}))}audioProcessing(e,t){return ns(this,void 0,void 0,(function*(){if(is(this,za,"f").isDvwc()||is(this,za,"f").isElectron())yield is(this,za,"f").rtc.setTransparentMode(!t.send.audioProcessing);else{const n={send:{audioProcessing:!!(t||{}).send.audioProcessing}};yield wt.conferences.audioUpdate({conferenceId:this._conferenceId,peerId:e.id,data:{opusProcessing:{enabled:n.send.audioProcessing}}})}}))}startAudio(e){if(is(this,Ua,"f").participant.id===e.id&&[p.LISTENER,p.MIXER].includes(is(this,Ua,"f").participant.type))throw new Be;if(is(this,Ua,"f").participant.id!==e.id&&this.current&&this.current.params.dolbyVoice&&[p.LISTENER].includes(is(this,Ua,"f").participant.type))throw new Be;return e.id===is(this,Ua,"f").participant.id?is(this,Ka,"f").start():is(this,Ja,"f").start(e).then((()=>e.updateAudioReceivingStopped(!1)))}stopAudio(e){if(is(this,Ua,"f").participant.id===e.id&&[p.LISTENER,p.MIXER].includes(is(this,Ua,"f").participant.type))throw new Be;if(is(this,Ua,"f").participant.id!==e.id&&this.current&&this.current.params.dolbyVoice&&[p.LISTENER].includes(is(this,Ua,"f").participant.type))throw new Be;return e.id===is(this,Ua,"f").participant.id?is(this,Ka,"f").stop():is(this,Ja,"f").stop(e).then((()=>e.updateAudioReceivingStopped(!0)))}startScreenShare(e){if(is(this,Za,"f"))return Promise.reject(new Be("Screen sharing is not available to a client who joined as a listener."));let t={};return t="object"==typeof e?e:{sourceId:e},is(this,za,"f").startScreenShare(t)}stopScreenShare(){return is(this,Za,"f")?Promise.reject(new Be("Screen sharing is not available to a client who joined as a listener.")):is(this,za,"f").stopScreenShare()}localStats(){var e;return null===(e=is(this,za,"f").rtc)||void 0===e?void 0:e.getRtpStats()}simulcast(e){if(this.isJoinedAsRTSViewer()){if(!e.length)throw new Ye("Unable to set video quality because the provided array is empty.");return e.length>1&&console.warn("Real-time Streaming supports only one video stream; only the first value will be applied."),this.manager.rtc.selectSimulcastLayer(e[0].quality)}return wt.conferences.simulcast({conferenceId:this._conferenceId,data:{requested:e}})}kick(e){return ns(this,void 0,void 0,(function*(){return this.isJoinedAsRTSViewer()?Promise.reject(new Be("The kick() method is not available to a client who joined as an RTS viewer.")):is(this,za,"f").kick(e.id)}))}createStateDump(){return ns(this,void 0,void 0,(function*(){return is(this,za,"f").rtc.createStateDump()}))}getStateDumpConfiguration(){return ns(this,void 0,void 0,(function*(){return is(this,za,"f").rtc.getStateDumpConfiguration()}))}configureStateDump(e){return ns(this,void 0,void 0,(function*(){return is(this,za,"f").rtc.configureStateDump(e)}))}setSpatialPosition(e,t){var n;if(3!==Object.values(t).length||Object.values(t).some((e=>null===e||void 0))||!t)throw new Ye("ConferenceService::setSpatialPosition needs to supply all (x, y, z) for position");if(!is(this,Va,"f")||!(null===(n=is(this,Va,"f").params)||void 0===n?void 0:n.dolbyVoice)||!is(this,Ha,"f")||is(this,za,"f").listenOnly)throw new Be;is(this,Ha,"f").setParticipantPosition(e,t)}setSpatialDirection(e,t){var n;if(null==(null==t?void 0:t.x)||null==(null==t?void 0:t.y)||null==(null==t?void 0:t.z))throw new Ye("ConferenceService::setSpatialDirection needs to supply all (x, y, z) for direction");if(!is(this,Va,"f")||!(null===(n=is(this,Va,"f").params)||void 0===n?void 0:n.dolbyVoice)||!is(this,Ha,"f")||is(this,za,"f").listenOnly)throw new Be;if(is(this,Ua,"f").participant.id!==e.id)throw new Be;is(this,Ha,"f").setLocalDirection(t)}setSpatialEnvironment(e,t,n,r){var i;if([e,t,n,r].forEach((e=>{if(null==(null==e?void 0:e.x)||null==(null==e?void 0:e.y)||null==(null==e?void 0:e.z))throw new Ye("ConferenceService::setSpatialEnvironment needs to supply all (x, y, z) for scale")})),!is(this,Va,"f")||!(null===(i=is(this,Va,"f").params)||void 0===i?void 0:i.dolbyVoice)||!is(this,Ha,"f")||is(this,za,"f").listenOnly)throw new Be;is(this,Ha,"f").setEnvironment({scale:e,forward:t,up:n,right:r})}qualityIndicators(e){var t;return ns(this,void 0,void 0,(function*(){if(!is(this,Va,"f"))return;const n=new Map;(null===(t=is(this,Va,"f").params)||void 0===t?void 0:t.dolbyVoice)?this.participants.forEach(((t,r)=>{if(t.status==ce.CONNECTED){let i=-1;e.forEach(((e,n)=>{if(n===t.id){const t=e.filter((e=>"Scores"===e.id));t.length>0&&(i=t[0].video)}})),n.set(r,{audio:t.audioQuality?t.audioQuality:-1,video:i})}})):e.forEach(((e,t)=>{const r=e.filter((e=>"Scores"===e.id));r.length>0&&n.set(t,{audio:r[0].audio,video:r[0].video})})),this.emit(es.QualityIndicators,n)}))}onConferenceCreated(){this.emit(es.Created)}onConferenceJoined(e){this._conferenceId=e.conferenceId,rs(this,Ba,setInterval((()=>ns(this,void 0,void 0,(function*(){const e=yield this.localStats();e&&this.qualityIndicators(e)}))),5e3),"f"),this.emit(es.Joined)}onConferenceLeft(e){this._conferenceId=null,is(this,Ba,"f")&&(clearInterval(is(this,Ba,"f")),rs(this,Ba,null,"f")),is(this,Ya,"f").stop().catch((e=>console.error(e))),this.emit(es.Left)}onConferenceEnded(e){this.emit(es.Ended)}onConferenceDestroyed(e){return ns(this,void 0,void 0,(function*(){e.conferenceId===this._conferenceId&&(yield this.leave(),this.emit(es.Ended,e))}))}onConferenceStats(e){this.emit(es.Stats,e)}onConferenceGlobalError(e){return ns(this,void 0,void 0,(function*(){this.current&&this.current.id&&e.error instanceof qe&&(yield this.leave()),this.emit(es.Error,e.error)}))}onOfferCreated(e){var t;Ae.send(Te.ConferenceGlobalTrace.fromData({api:"onOfferCreated",description:"Received offer from ws",data:{oid:null===(t=e.description)||void 0===t?void 0:t.oid}})),is(this,za,"f").setRemoteOffer(e)}onActiveSpeakerChange(e){this.participants.forEach(((t,n)=>{t.active=!!e.speakers.includes(t.id)}))}onDvcsMetric(e){if("GetLevel"===e.name){const t=e.value,n=2,r=-40,i=-15,o=Math.exp(n*((t-r)/(i-r)-1));this.participants.get(e.userId).level=-90==t?0:o}else if("GetQuality"===e.name&&e.value>0){const t=this.participants.get(e.userId);t&&(t.audioQuality=e.value)}}onUpdateToken(e){wt.setConferenceTokens(e.conferenceId,e.conferenceAccessToken),wt.currentConferenceToken=e.conferenceAccessToken,this.updatePermissionsFromToken(e.conferenceAccessToken)}updatePermissionsFromToken(e){let t=this.getPermissionsFromToken(e);var n;if(this.current&&(!this.current.permissions||(n=this.current.permissions).size!==t.size||![...n].every((e=>t.has(e))))){const e=is(this,Ua,"f").participant.streams.filter((e=>e.type===On.Camera)),n=is(this,Ua,"f").participant.streams.filter((e=>e.type===On.ScreenShare));e.length>0&&e[0].getVideoTracks().length>0&&!t.has(ko.SendVideo)&&is(this,za,"f").stopVideoLocally(is(this,Ua,"f").participant.id),n.length>0&&!t.has(ko.ShareScreen)&&is(this,za,"f").stopScreenShareLocally(),this.current.permissions=new Set(t),this.emit(es.PermissionsUpdated,this.current.permissions)}}getPermissionsFromToken(e){let t=Mo(e);return new Set(t.authorities)}onParticipantAdded(e){this.emit(es.ParticipantAdded,e)}onParticipantUpdated(e){"Left"===e.status&&is(this,Ha,"f")&&is(this,Ha,"f")instanceof Jo&&is(this,Ha,"f").removeParticipant(e.id),this.emit(es.ParticipantUpdated,e)}onParticipantKicked(e){return ns(this,void 0,void 0,(function*(){e.status="KICKED";const t=is(this,za,"f").updateParticipant(e);t&&(this.emit(es.ParticipantUpdated,t),yield is(this,za,"f").onKicked(),is(this,za,"f").clear(),rs(this,Va,null,"f"))}))}onParticipantSwitched(e){is(this,za,"f").participantSwitched(e)}onOwnParticipantSwitched(e){this.emit(es.Switched),this.leave({leaveRoom:!1})}onAutoplayBlocked(){this.emit(es.AutoplayBlocked)}onStreamAdded(e,t){this.emit(es.StreamAdded,e,t)}onStreamUpdated(e,t){this.emit(es.StreamUpdated,e,t)}onStreamRemoved(e,t){this.emit(es.StreamRemoved,e,t)}get peerConnectionStatus(){return is(this,za,"f").getPeerConnectionStatus()}get participants(){return is(this,za,"f")?is(this,za,"f").participants:new Map}get maxVideoForwarding(){return is(this,za,"f")?is(this,za,"f").maxVideoForwarding:void 0}get videoForwardingStrategy(){return is(this,za,"f").videoForwardingStrategy}get current(){return is(this,Va,"f")}get manager(){return is(this,za,"f")}get spatialAudioStyle(){return is(this,Ha,"f")instanceof Jo?Io.Individual:is(this,Ha,"f")instanceof ha?Io.Shared:null}get leaveConferenceOnBeforeUnload(){return is(this,Ga,"f")}onLocalVideoStarted(e){rs(this,$a,e.track,"f")}onLocalVideoStopped(e){rs(this,$a,null,"f")}onLocalVideoUpdated(e){rs(this,$a,e.track,"f")}onRtsStatusUpdated(e){this._conferenceId===e.conferenceId&&("in_progress"===e.status?is(this,za,"f").startRtsView(e.streamName,e.streamAccountId,e.subscribeToken).catch((e=>console.error(e))):is(this,za,"f").stopRtsView())}isJoinedAsRTSViewer(){var e;return(null===(e=is(this,Za,"f"))||void 0===e?void 0:e.type)===l.Mixed}shouldReport(e){return e instanceof Ei||e instanceof Fa||e instanceof Ne||e instanceof He}shouldSwallowWhenJoining(e){return e instanceof Ei||e instanceof Fa||e instanceof He||e instanceof Ne&&"OverconstrainedError"!==e.name}};za=new WeakMap,Ua=new WeakMap,Va=new WeakMap,Ba=new WeakMap,Wa=new WeakMap,Ga=new WeakMap,Ha=new WeakMap,Ya=new WeakMap,$a=new WeakMap,Za=new WeakMap,qa=new WeakMap,Xa=new WeakMap,Ka=new WeakMap,Ja=new WeakMap,Qa=new WeakMap,ts([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],as.prototype,"playBlockedAudio",null),ts([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],as.prototype,"mute",null),ts([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],as.prototype,"toggleMute",null),ts([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],as.prototype,"isMuted",null),ts([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],as.prototype,"muteOutput",null),ts([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],as.prototype,"audioLevel",null),ts([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],as.prototype,"isSpeaking",null),ts([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],as.prototype,"startStream",null),ts([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],as.prototype,"stopStream",null),ts([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],as.prototype,"startVideo",null),ts([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],as.prototype,"stopVideo",null),ts([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],as.prototype,"videoForwarding",null),ts([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],as.prototype,"audioProcessing",null),ts([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],as.prototype,"startAudio",null),ts([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],as.prototype,"stopAudio",null),ts([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],as.prototype,"startScreenShare",null),ts([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],as.prototype,"stopScreenShare",null),ts([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],as.prototype,"localStats",null),ts([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],as.prototype,"simulcast",null),ts([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],as.prototype,"kick",null),ts([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],as.prototype,"createStateDump",null),ts([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],as.prototype,"getStateDumpConfiguration",null),ts([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],as.prototype,"configureStateDump",null),ts([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],as.prototype,"setSpatialPosition",null),ts([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],as.prototype,"setSpatialDirection",null),ts([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],as.prototype,"setSpatialEnvironment",null),as=ts([dt([Ce.ConferenceGlobalError,Ce.OfferCreated,Ce.ParticipantSwitched,Ce.OwnParticipantSwitched,Ce.ConferenceStats,Ce.ConferenceDestroyed,Ce.DvcsMetric,Ce.ActiveSpeakerChange,Ce.UpdateToken,Ce.ParticipantKicked,Ce.LocalVideoStarted,Ce.LocalVideoStopped,Ce.LocalVideoUpdated,Ce.RtsStatusUpdated])],as);class ss{constructor(e,t){this.participantId=e,this.startTimestamp=t}}var cs,us=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},ds=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},ls=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};const hs="statusUpdated";var ps;!function(e){e.Recording="RECORDING",e.NotRecording="NOT_RECORDING"}(ps||(ps={}));let fs=class extends ut{constructor(e){super(e),cs.set(this,null)}start(){return wt.conferences.startRecording({conferenceId:this._conferenceId})}stop(){return wt.conferences.stopRecording({conferenceId:this._conferenceId})}onConferenceJoined(e){super.onConferenceJoined(e),this.onRecordingStatusUpdated(oe.fromJoinEvent(e))}onConferenceLeft(e){super.onConferenceLeft(e),ds(this,cs,null,"f")}onRecordingStatusUpdated(e){if(e.status===ps.NotRecording){if(null!==ls(this,cs,"f")){const e=ls(this,cs,"f"),t=!1;ds(this,cs,null,"f"),this.emit(hs,t,e)}}else if(e.status===ps.Recording){const t=!0;ds(this,cs,new ss(e.participantId,e.startTimestamp),"f"),this.emit(hs,t,ls(this,cs,"f"))}}get current(){return ls(this,cs,"f")}};cs=new WeakMap,us([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],fs.prototype,"start",null),us([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],fs.prototype,"stop",null),fs=us([dt([Ce.RecordingStatusUpdated])],fs);var ms,gs,vs,ys,_s,ws,bs,ks,Ss,Es,Ts,Cs,js,xs,Ps,Is,Ms,Rs,As,Ds,Os,Ns,Fs=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},Ls=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};const zs=xe()("vxt:ws");class Us{constructor(e,t,n){ms.set(this,void 0),gs.set(this,void 0),vs.set(this,3e4),ys.set(this,50),_s.set(this,2e3),ws.set(this,2e3),bs.set(this,6e4),ks.set(this,3e5),Ss.set(this,!1),Es.set(this,void 0),Ts.set(this,void 0),Cs.set(this,void 0),js.set(this,0),xs.set(this,void 0),Ps.set(this,void 0),Is.set(this,void 0),Ms.set(this,!1),Rs.set(this,!1),As.set(this,void 0),Ds.set(this,null),Os.set(this,null),Ns.set(this,[]),Fs(this,ms,e,"f"),Fs(this,Es,t,"f"),Fs(this,Cs,n,"f")}openSession(){return Fs(this,Ss,!1,"f"),Fs(this,gs,new WebSocket(`${Ls(this,ms,"f")}/v2/session?Voxeet-Id=${Ls(this,Es,"f")}&Token=${Ls(this,Cs,"f")}`,undefined),"f"),Ls(this,gs,"f").onmessage=this.onMessage.bind(this),Ls(this,gs,"f").onopen=this.onOpen.bind(this),Ls(this,gs,"f").onclose=this.onClose.bind(this),Ls(this,gs,"f").onerror=this.onError.bind(this),this.startKeepAlive(),Ls(this,Ms,"f")&&Fs(this,Ps,setTimeout((()=>{Fs(this,Ms,!1,"f"),this.closeSession(),Fs(this,Ss,!1,"f"),this.handleReconnection()}),Ls(this,ws,"f")),"f"),new Promise(((e,t)=>{Ls(this,Ds,"f")||Ls(this,Os,"f")||(Fs(this,Ds,e,"f"),Fs(this,Os,t,"f"))}))}closeSession(){Fs(this,Ss,!0,"f"),this.stopKeepAlive(),Ls(this,gs,"f")&&(Ls(this,gs,"f").close(1e3,"Close session."),Fs(this,gs,null,"f")),Fs(this,Ns,[],"f")}startKeepAlive(){this.stopKeepAlive(),Fs(this,xs,setInterval((()=>{Ls(this,gs,"f")&&(Ls(this,gs,"f").readyState===WebSocket.CLOSED?this.openSession():this.send({type:"keep_alive"},!0))}),Ls(this,vs,"f")),"f")}stopKeepAlive(){Ls(this,xs,"f")&&clearInterval(Ls(this,xs,"f"))}send(e,t=!1){var n;zs("Sending message: ",e),e.message_id||(e.message_id=Fs(this,js,(n=Ls(this,js,"f"),++n),"f")),Ls(this,gs,"f").readyState===WebSocket.CONNECTING?Ls(this,Ns,"f").push(e):Ls(this,gs,"f").send(JSON.stringify(e))}isOpen(){return!!Ls(this,gs,"f")&&Ls(this,gs,"f").readyState===WebSocket.OPEN}onOpen(){for(zs("WebSocket opened"),Ae.send(Te.ConferenceGlobalTrace.fromData({api:"SessionClient.onOpen",description:"WebSocket connecton has been established"})),Fs(this,Ms,!1,"f"),Ls(this,Ds,"f")&&(Ls(this,Ds,"f").call(this),Fs(this,Os,null,"f"),Fs(this,Ds,null,"f")),Ls(this,Ps,"f")&&(clearTimeout(Ls(this,Ps,"f")),Fs(this,Ps,null,"f"),Fs(this,ys,50,"f")),Ls(this,Is,"f")&&(clearTimeout(Ls(this,Is,"f")),Fs(this,Is,null,"f"));Ls(this,Ns,"f").length;){const e=Ls(this,Ns,"f").shift();this.send(e)}}onClose(e){if(zs("WebSocket closed"),Fs(this,gs,null,"f"),e.code>1e3)try{Ae.send(B.fromData(new Ve(e.reason),e.code))}catch(e){if("WebSocketError"!==e.name)throw e;console.error(e)}this.handleReconnection()}handleReconnection(){if(!Ls(this,Ss,"f")&&(Ls(this,Is,"f")||Fs(this,Is,setTimeout((()=>{Fs(this,Rs,!0,"f");const e=new Ve("Reconnection timed out");Ls(this,Os,"f")&&(Ls(this,Os,"f").call(this,e),Fs(this,Os,null,"f"),Fs(this,Ds,null,"f")),Ae.send(B.fromData(e))}),Ls(this,bs,"f")),"f"),!Ls(this,Ms,"f")&&!Ls(this,Rs,"f"))){Fs(this,Ms,!0,"f"),setTimeout((()=>{this.openSession()}),Ls(this,ys,"f"));let e=2*Ls(this,ys,"f");Fs(this,ys,e>Ls(this,_s,"f")?Ls(this,_s,"f"):e,"f")}}onError(e){console.error(e)}onMessage(e){let t;e.data&&(t=JSON.parse(e.data)),zs("Received data:",t.type,t),"UpdateToken"===t.type&&this.send({ackMessageUuid:t.amu}),Ae.send(class{constructor(){}static fromData(e){if(e&&e.type){const t=e.type.replace(/(^[a-z])/,(e=>e.toUpperCase())).replace(/(\_\w)/g,(e=>e[1].toUpperCase())).replace(/Push/g,(e=>"")).replace(/Event/g,(e=>""));if("function"==typeof Me[t])return"function"==typeof Me[t].fromData?Me[t].fromData(e):new Me[t](Object.assign({},e))}}}.fromData(t))}}ms=new WeakMap,gs=new WeakMap,vs=new WeakMap,ys=new WeakMap,_s=new WeakMap,ws=new WeakMap,bs=new WeakMap,ks=new WeakMap,Ss=new WeakMap,Es=new WeakMap,Ts=new WeakMap,Cs=new WeakMap,js=new WeakMap,xs=new WeakMap,Ps=new WeakMap,Is=new WeakMap,Ms=new WeakMap,Rs=new WeakMap,As=new WeakMap,Ds=new WeakMap,Os=new WeakMap,Ns=new WeakMap;var Vs,Bs,Ws,Gs,Hs,Ys,$s,Zs,qs,Xs=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Ks=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},Js=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};let Qs=class extends ct{constructor(e){super(e),this.wsHost="wss://comms.sdk.dolby.io",Vs.set(this,void 0),Bs.set(this,void 0),Ws.set(this,void 0),Gs.set(this,void 0),Hs.set(this,void 0),Ys.set(this,void 0),$s.set(this,void 0),Zs.set(this,void 0),qs.set(this,void 0)}onConferenceLeaving(e){return Xs(this,void 0,void 0,(function*(){Ks(this,Zs,setTimeout(this.leaveConferenceTimeoutExpired.bind(this),1e3),"f")}))}onConferenceLeft(e){return Xs(this,void 0,void 0,(function*(){this.leaveConferenceTimeoutExpired()}))}leaveConferenceTimeoutExpired(){var e;Js(this,Zs,"f")&&(clearTimeout(Js(this,Zs,"f")),Ks(this,Zs,null,"f")),(null===(e=Js(this,$s,"f"))||void 0===e?void 0:e.length)&&(Js(this,$s,"f").forEach((e=>e())),Ks(this,$s,[],"f"))}register(){return Xs(this,void 0,void 0,(function*(){if(!this.isTokenValid(wt.accessToken))if(wt.getTokenCallback()){const e=!0,t=yield wt.getTokenCallback()(e);if(!t)throw tt();wt.accessToken=t}else{if(!this.customerKey||!this.customerSecret)throw new Error("Uninitialized VoxeetSDK");wt.tokenCallback=this.refreshToken.bind(this);const{data:{access_token:e,refresh_token:t}}=yield wt.init.register({headers:{Authorization:"Basic "+btoa(encodeURI(Js(this,Bs,"f"))+":"+encodeURI(Js(this,Ws,"f")))},data:{grant_type:"client_credentials"}});wt.accessToken=e&&e,wt.refreshToken=t&&t,wt.leavingCallback=()=>{jp.conference.leave()}}this.startAccessTokenExpirationTimeouts()}))}open(e={}){return Xs(this,void 0,void 0,(function*(){if(Js(this,Vs,"f"))throw new $e("A session has already been opened");Ks(this,Zs,null,"f"),Ks(this,$s,[],"f"),yield this.register();const t=e;t.sdkVersion=jp.version;let n=yield wt.init.identify({data:t});Ks(this,qs,new le(n.data.user_id),"f"),Js(this,qs,"f").info=e,Js(this,qs,"f").updateAudioReceivingStopped(!0),wt.jwtToken=n.data.jwt_user_token,wt.wsHost="devssl"===jp.flavor&&(n.data.wsUri.startsWith("wss://ws")||wt.wsHost.startsWith("wss://devssl.voxeet.com"))?wt.wsHost:n.data.wsUri,Ks(this,Vs,new Us(wt.wsHost,wt.getHashId(),wt.jwtToken),"f"),yield Js(this,Vs,"f").openSession(),Ae.send(new _e)}))}close(){return new Promise(((e,t)=>{Js(this,Zs,"f")?(Js(this,$s,"f")||Ks(this,$s,[],"f"),Js(this,$s,"f").push(e)):e()})).then((()=>wt.init.logout().then((()=>{wt.jwtToken=null,Ks(this,qs,null,"f"),Js(this,Vs,"f")&&(Js(this,Vs,"f").closeSession(),Ks(this,Vs,null,"f")),Ae.send(new we)}))))}refreshToken(){return wt.accessToken=null,wt.init.refresh({headers:{Authorization:"Basic "+btoa(encodeURI(Js(this,Bs,"f"))+":"+encodeURI(Js(this,Ws,"f")))},data:{refresh_token:wt.refreshToken}}).then((e=>(wt.accessToken=e.data.access_token,e.data.access_token)))}get participant(){return Js(this,qs,"f")}get customerKey(){return Js(this,Bs,"f")}get customerSecret(){return Js(this,Ws,"f")}refreshAccessToken(){return wt.getTokenCallback()?wt.getTokenCallback()(wt.isTokenExpired()).then((e=>{if(!e)throw tt();wt.accessToken=e,this.startAccessTokenExpirationTimeouts()})):this.refreshToken()}accessTokenTimeoutHalfExpiration(){wt.getTokenCallback()(wt.isTokenExpired()).then((e=>{if(!e)throw tt();wt.accessToken=e,this.startAccessTokenExpirationTimeouts()}))}accessTokenTimeoutThreeQuarterExpiration(){wt.getTokenCallback()(wt.isTokenExpired()).then((e=>{if(!e)throw tt();wt.accessToken=e,this.startAccessTokenExpirationTimeouts()}))}accessTokenTimeoutExpired(){wt.getTokenCallback()(wt.isTokenExpired()).then((e=>{if(!e)throw tt();wt.accessToken=e,jp.conference.leave()}))}startAccessTokenExpirationTimeouts(){return Xs(this,void 0,void 0,(function*(){const{exp:e}=Mo(wt.accessToken);clearTimeout(Js(this,Gs,"f")),clearTimeout(Js(this,Hs,"f")),clearTimeout(Js(this,Ys,"f")),wt.accessTokenExpiration=e,Ks(this,Gs,setTimeout(this.accessTokenTimeoutHalfExpiration.bind(this),1e3*(wt.accessTokenExpiration-(new Date).getTime()/1e3)/2),"f"),Ks(this,Hs,setTimeout(this.accessTokenTimeoutThreeQuarterExpiration.bind(this),1e3*(wt.accessTokenExpiration-(new Date).getTime()/1e3)*3/4),"f"),Ks(this,Ys,setTimeout(this.accessTokenTimeoutExpired.bind(this),1e3*(wt.accessTokenExpiration-(new Date).getTime()/1e3)),"f")}))}isTokenValid(e){let t=!0;try{wt.accessToken||(t=!1);const{exp:e}=Mo(wt.accessToken)}catch(e){t=!1}return t}isOpen(){return!!Js(this,Vs,"f")&&Js(this,Vs,"f").isOpen()}set customerKey(e){Ks(this,Bs,e,"f")}set customerSecret(e){Ks(this,Ws,e,"f")}set accessToken(e){wt.accessToken=e}set refreshCallback(e){wt.tokenCallback=e}updateParticipantInfo({name:e,avatarUrl:t}){var n,r,i;return Xs(this,void 0,void 0,(function*(){const o=null===(n=jp.conference.current)||void 0===n?void 0:n.id,a={name:e,avatarUrl:t};o&&(a.cid=o);const s=yield wt.init.updateParticipantInfo({data:a});(null===(r=null==s?void 0:s.data)||void 0===r?void 0:r.jwt_user_token)?wt.setJwtToken(null===(i=null==s?void 0:s.data)||void 0===i?void 0:i.jwt_user_token):console.warn("could not update xToken because its not in the response",s)}))}};var ec,tc;Vs=new WeakMap,Bs=new WeakMap,Ws=new WeakMap,Gs=new WeakMap,Hs=new WeakMap,Ys=new WeakMap,$s=new WeakMap,Zs=new WeakMap,qs=new WeakMap,Qs=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}([dt([Ce.ConferenceLeaving])],Qs),function(e){e[e.AudioInput=1]="AudioInput",e[e.AudioOutput=2]="AudioOutput",e[e.VideoInput=4]="VideoInput"}(ec||(ec={})),function(e){e[e.ListDevices=1]="ListDevices",e[e.GetDifferences=2]="GetDifferences"}(tc||(tc={}));var nc,rc,ic=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},oc=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},ac=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};const sc=(e,t)=>new ie({level:"info",action:"AudioOutputSelected",description:e,component:"MediaDeviceService",api:"selectAudioOutput",payload:[t]}),cc=(e,t)=>new ie({level:"error",action:"AudioOutputError",description:e,component:"MediaDeviceService",api:"selectAudioOutput",payload:[t]}),uc=(e,t)=>new ie({level:"info",action:"AudioInputSelected",description:e,component:"MediaDeviceService",api:"selectAudioInput",payload:[t]}),dc=(e,t)=>new ie({level:"error",action:"AudioInputError",description:e,component:"MediaDeviceService",api:"selectAudioInput",payload:[t]}),lc=(e,t)=>new ie({level:"info",action:"VideoInputSelected",description:e,component:"MediaDeviceService",api:"selectVideoInput",payload:[t]}),hc=(e,t)=>new ie({level:"error",action:"VideoInputError",description:e,component:"MediaDeviceService",api:"selectVideoInput",payload:[t]});class pc extends ut{constructor(e,t){super(e),nc.set(this,void 0),rc.set(this,void 0),oc(this,nc,t,"f");const n={handler:function(e){this.emit("deviceChanged",e)}.bind(this),deviceKind:ec.AudioOutput|ec.AudioInput|ec.VideoInput,handlerType:tc.ListDevices|tc.GetDifferences};oc(this,rc,ac(this,nc,"f").onDeviceChange(n),"f")}getComfortNoiseLevel(){return ic(this,void 0,void 0,(function*(){return ac(this,nc,"f").getComfortNoiseLevel()}))}setComfortNoiseLevel(e){return ic(this,void 0,void 0,(function*(){return ac(this,nc,"f").setComfortNoiseLevel(e)}))}enumerateDevices(){return ic(this,void 0,void 0,(function*(){return ac(this,nc,"f").getConnectedDevices()}))}enumerateAudioInputDevices(){return ic(this,void 0,void 0,(function*(){return ac(this,nc,"f").getConnectedAudioInputDevices()}))}enumerateAudioOutputDevices(){return ic(this,void 0,void 0,(function*(){return ac(this,nc,"f").getConnectedAudioOutputDevices()}))}enumerateVideoInputDevices(){return ic(this,void 0,void 0,(function*(){return ac(this,nc,"f").getConnectedVideoInputDevices()}))}selectAudioInput(e){return ic(this,void 0,void 0,(function*(){const t=yield ac(this,nc,"f").getConnectedAudioInputDevices();return new Promise("string"==typeof e?(n,r)=>ic(this,void 0,void 0,(function*(){const i=t.find((t=>t.deviceId===e));i||(Ae.send(dc("Failed to select audio input device. Reason: Device not found",{device:e})),r(new Error("Failed to select audio input device. Reason: Device not found"))),yield ac(this,nc,"f").selectAudioInputDevice(i).then((()=>{ac(this,nc,"f").selectedAudioInputDevice=i,Ae.send(uc("Audio input has been selected.",{device:e})),n(`device ${e} selected`)}),(t=>{Ae.send(dc(`Failed to select audio input device: ${t.message}`,{device:e})),r(new Ze(t.message,"audio input"))}))})):(n,r)=>ic(this,void 0,void 0,(function*(){e&&e.deviceId||(Ae.send(dc("Unable to select audio input. Provided device is invalid",e)),r(new Ye("Unable to select audio input. Provided device is invalid"))),t.find((t=>t.deviceId===e.deviceId&&t.kind===e.kind&&t.groupId===e.groupId&&t.label===e.label))||(Ae.send(dc("Failed to select audio input device. Reason: Device not found",e)),r(new Error("Failed to select audio input device. Reason: Device not found"))),yield ac(this,nc,"f").selectAudioInputDevice(e).then((()=>{ac(this,nc,"f").selectedAudioInputDevice=e,Ae.send(uc("Audio input has been selected",e)),n(`device ${e} selected`)}),(t=>{Ae.send(dc(`Failed to select audio input device: ${t.message}`,e)),r(new Ze(t.message,"audio input"))}))})))}))}selectAudioOutput(e){return ic(this,void 0,void 0,(function*(){const t=yield ac(this,nc,"f").getConnectedAudioOutputDevices();return new Promise("string"==typeof e?(n,r)=>ic(this,void 0,void 0,(function*(){const i=t.find((t=>t.deviceId===e));i||(Ae.send(cc("Failed to select audio output device. Reason: Device not found",{device:e})),r(new Error("Failed to select audio output device. Reason: Device not found"))),yield ac(this,nc,"f").selectAudioOutputDevice(i).then((()=>{ac(this,nc,"f").selectedAudioOutputDevice=i,Ae.send(sc("Audio output has been selected.",{device:e})),n(`device ${e} selected`)}),(t=>{Ae.send(cc(`Audio output couldn't be selected: ${t.message}`,{device:e})),r(new Ze(t.message,"audio output"))}))})):(n,r)=>ic(this,void 0,void 0,(function*(){e&&e.deviceId||(Ae.send(cc("Unable to select audio output. Provided device is invalid",e)),r(new Ye("Unable to select audio output. Provided device is invalid"))),t.find((t=>t.deviceId===e.deviceId&&t.kind===e.kind&&t.groupId===e.groupId&&t.label===e.label))||(Ae.send(cc("Failed to select audio output device. Reason: Device not found",e)),r(new Error("Failed to select audio output device. Reason: Device not found"))),yield ac(this,nc,"f").selectAudioOutputDevice(e).then((()=>{ac(this,nc,"f").selectedAudioOutputDevice=e,Ae.send(sc("Audio output has been selected.",e)),n(`device ${e} selected`)}),(t=>{Ae.send(cc(`Audio output couldn't be selected: ${t.message}`,e)),r(new Ze(t.message,"audio output"))}))})))}))}selectVideoInput(e){return ic(this,void 0,void 0,(function*(){const t=yield ac(this,nc,"f").getConnectedVideoInputDevices();return new Promise("string"==typeof e?(n,r)=>ic(this,void 0,void 0,(function*(){const i=t.find((t=>t.deviceId===e));i||(Ae.send(hc("Failed to select video input device. Reason: Device not found",{device:e})),r(new Error("Failed to select video input device. Reason: Device not found"))),yield ac(this,nc,"f").selectVideoInputDevice(i).then((()=>{ac(this,nc,"f").selectedVideoInputDevice=i,Ae.send(lc("Video input has been selected.",{device:e})),n(`device ${e} selected`)}),(t=>{Ae.send(hc(`Failed to select video input device: ${t.message}`,{device:e})),r(new Ze(t.message,"video input"))}))})):(n,r)=>ic(this,void 0,void 0,(function*(){e&&e.deviceId||(Ae.send(hc("Unable to select video input. Provided device is invalid",e)),r(new Ye("Unable to select video input. Provided device is invalid"))),t.find((t=>t.deviceId===e.deviceId&&t.kind===e.kind&&t.groupId===e.groupId&&t.label===e.label))||(Ae.send(hc("Failed to select video input device. Reason: Device not found",e)),r(new Error("Failed to select video input device. Reason: Device not found"))),yield ac(this,nc,"f").selectVideoInputDevice(e).then((()=>{ac(this,nc,"f").selectedVideoInputDevice=e,Ae.send(lc("Video input has been selected.",e)),n(`device ${e} selected`)}),(t=>{Ae.send(hc(`Failed to select video input device: ${t.message}`,e)),r(new Ze(t.message,"video input"))}))})))}))}get selectedAudioInputDevice(){return ac(this,nc,"f").selectedAudioInputDevice}get selectedAudioOutputDevice(){return ac(this,nc,"f").selectedAudioOutputDevice}get selectedVideoInputDevice(){return ac(this,nc,"f").selectedVideoInputDevice}enumerateAudioDevices(e="input"){return ic(this,void 0,void 0,(function*(){return"input"===e||void 0===e?yield this.enumerateAudioInputDevices():yield this.enumerateAudioOutputDevices()}))}enumerateVideoDevices(e="input"){return ic(this,void 0,void 0,(function*(){return this.enumerateVideoInputDevices()}))}}nc=new WeakMap,rc=new WeakMap;var fc,mc,gc,vc=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},yc=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},_c=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};!function(e){e.Received="received"}(gc||(gc={}));let wc=class extends ut{constructor(e,t){super(e),fc.set(this,void 0),mc.set(this,!1),yc(this,fc,t,"f")}send(e){return _c(this,mc,"f")?Promise.reject(new Be("Sending commands is not available to a client who joined as an RTS viewer.")):wt.conferences.broadcast({conferenceId:this._conferenceId,data:{message:e}})}onConferenceMessageReceived(e){if(_c(this,fc,"f").current){const t=_c(this,fc,"f").participants.get(e.participantId);t&&this.emit(gc.Received,t,e.message)}}onConferenceJoined(e){super.onConferenceJoined(e),yc(this,mc,e.isJoinedAsRTSViewer(),"f")}onConferenceLeft(e){super.onConferenceLeft(e),yc(this,mc,!1,"f")}};var bc;fc=new WeakMap,mc=new WeakMap,vc([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],wc.prototype,"send",null),wc=vc([dt([Ce.ConferenceMessageReceived])],wc),function(e){e.Invitation="Invitation",e.ConferenceCreated="Conference.Created",e.ConferenceEnded="Conference.Ended",e.ParticipantJoined="Participant.Joined",e.ParticipantLeft="Participant.Left",e.ConferenceActiveParticipants="Conference.ActiveParticipants"}(bc||(bc={}));var kc,Sc,Ec,Tc=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n};!function(e){e.Invitation="invitation",e.ConferenceCreated="conferenceCreated",e.ConferenceEnded="conferenceEnded",e.ConferenceStatus="conferenceStatus",e.ParticipantJoined="participantJoined",e.ParticipantLeft="participantLeft",e.ActiveParticipants="activeParticipants"}(Ec||(Ec={}));let Cc=class extends ct{constructor(e,t){super(e),kc.set(this,!1),Sc.set(this,void 0),Tc(this,Sc,t,"f")}subscribe(e){const t=e.find((e=>e.type===bc.Invitation));if(t&&Tc(this,kc,!0,"f"),!t||e.length>1)return wt.subscription.post({data:{subscriptions:e.filter((e=>e.type!==bc.Invitation))}})}unsubscribe(e){const t=e.find((e=>e.type===bc.Invitation));if(t&&Tc(this,kc,!1,"f"),!t||e.length>1)return wt.subscription.delete({data:{subscriptions:e.filter((e=>e.type!==bc.Invitation))}})}invite(e,t){return n=this,r=void 0,o=function*(){return wt.conferences.invite({conferenceId:e.id,data:{externalProfiles:t.map((e=>({externalId:e.info?e.info.externalId:e.externalId,externalName:e.info?e.info.name:e.name,externalPhotoUrl:e.info?e.info.avatarUrl:e.avatarUrl,permissions:e.permissions})))}})},new((i=void 0)||(i=Promise))((function(e,t){function a(e){try{c(o.next(e))}catch(e){t(e)}}function s(e){try{c(o.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(a,s)}c((o=o.apply(n,r||[])).next())}));var n,r,i,o}onInvitationReceived(e){wt.setConferenceTokens(e.conferenceId,e.conferenceToken),this.emit(Ec.Invitation,e)}onConferenceStatusNotification(e){this.emit(Ec.ConferenceStatus,e)}onConferenceCreatedNotification(e){this.emit(Ec.ConferenceCreated,e)}onConferenceEndedNotification(e){this.emit(Ec.ConferenceEnded,e)}onParticipantJoinedNotification(e){this.emit(Ec.ParticipantJoined,e)}onParticipantLeftNotification(e){this.emit(Ec.ParticipantLeft,e)}onActiveParticipants(e){this.emit(Ec.ActiveParticipants,e)}};kc=new WeakMap,Sc=new WeakMap,Cc=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}([dt([Ce.InvitationReceived,Ce.ConferenceCreatedNotification,Ce.ConferenceEndedNotification,Ce.ConferenceStatusNotification,Ce.ParticipantJoinedNotification,Ce.ParticipantLeftNotification,Ce.ActiveParticipants])],Cc);class jc{constructor(){this.type=""}}class xc{constructor(){this.version="1.1",this.userId="",this.timestamp=0}}class Pc{constructor(){this.cpu="",this.ram=0,this.screen=""}}class Ic{constructor(){this["web-sdk"]="3.11.1",this.dapm="0.118.1-1184480-bf183dab",this["dapm-dvdnr"]="2.4.0"}}class Mc{constructor(){this.name="",this.os="",this.timeZone=""}}const Rc=new Map([["RTCCandidatePairStats",e=>"candidate-pair"===e.type&&!bn.isFirefox&&!0===e.nominated||bn.isFirefox&&!0===e.selected],["RTCOutboundRtpAudioStreamStats",e=>"outbound-rtp"===e.type&&"audio"===e.mediaType],["RTCOutboundRtpVideoStreamStats",e=>"outbound-rtp"===e.type&&"video"===e.mediaType],["RTCRemoteInboundRTPStreamStats",e=>"remote-inbound-rtp"===e.type],["RTCInboundRTPAudioStreamStats",e=>"inbound-rtp"===e.type&&"audio"===e.mediaType],["RTCInboundRTPVideoStreamStats",e=>"inbound-rtp"===e.type&&"video"===e.mediaType],["RTCMediaStreamAudioTrack",e=>"track"===e.type&&"audio"===e.kind],["RTCMediaStreamVideoTrack",e=>"track"===e.type&&"video"===e.kind],["RTCStreamDescription",e=>"stream"===e.type],["WebAudioStats",e=>"audio"===e.type],["DataChannelStats",e=>"data-channel"===e.type],["TransportStats",e=>"transport"===e.type],["RTCVideoSource",e=>"media-source"===e.type&&"video"===e.kind&&(bn.isChrome||bn.isEdge)],["RTCAudioSource",e=>"media-source"===e.type&&"audio"===e.kind&&bn.isChrome]]),Ac={RTCCandidatePairStats:class extends jc{constructor(){super(...arguments),this.id="",this.availableOutgoingBitrate=0,this.availableIncomingBitrate=0,this.bytesSent=0,this.bytesReceived=0,this.bitrateSent=0,this.bitrateReceived=0,this.totalRoundTripTime=0,this.currentRoundTripTime=0,this.requestsReceived=0,this.requestsSent=0,this.responsesReceived=0,this.responsesSent=0,this.consentRequestsSent=0,this.selected=!1}},RTCOutboundRtpAudioStreamStats:class extends jc{constructor(){super(...arguments),this.ssrc=0,this.trackId="",this.mediaType="audio",this.packetsSent=0,this.bytesSent=0,this.bitrateSent=0,this.retransmittedPacketsSent=0,this.retransmittedBytesSent=0}},RTCOutboundRtpVideoStreamStats:class extends jc{constructor(){super(...arguments),this.ssrc=0,this.trackId="",this.mediaType="video",this.packetsSent=0,this.bytesSent=0,this.bitrateSent=0,this.retransmittedPacketsSent=0,this.retransmittedBytesSent=0,this.contentType="",this.nackCount=0,this.firCount=0,this.pliCount=0,this.qualityLimitationReason="",this.framesEncoded=0,this.framesSent=0,this.frameWidth=0,this.frameHeight=0,this.keyFramesEncoded=0,this.totalPacketSendDelay=0,this.encoderImplementation="",this.qpSum=0,this.framesPerSecond=0,this.mediaSourceId=""}},RTCRemoteInboundRTPStreamStats:class extends jc{constructor(){super(...arguments),this.ssrc=0,this.kind="",this.packetLost=0,this.jitter=0,this.roundTripTime=0}},RTCInboundRTPAudioStreamStats:class extends jc{constructor(){super(...arguments),this.ssrc=0,this.trackId="",this.mediaType="audio",this.packetsReceived=0,this.bytesReceived=0,this.bitrateReceived=0,this.packetsLost=0,this.jitter=0,this.jitterBufferDelay=0,this.jitterBufferEmittedCount=0,this.jitterBufferMinimumDelay=0,this.jitterBufferTargetDelay=0}},RTCInboundRTPVideoStreamStats:class extends jc{constructor(){super(...arguments),this.ssrc=0,this.trackId="",this.mediaType="video",this.packetsReceived=0,this.bytesReceived=0,this.bitrateReceived=0,this.packetsLost=0,this.jitter=0,this.jitterBufferDelay=0,this.jitterBufferEmittedCount=0,this.framesDecoded=0,this.frameHeight=0,this.frameWidth=0,this.keyFramesDecoded=0,this.totalInterFrameDelay=0,this.totalSquaredInterFrameDelay=0,this.framesReceived=0,this.framesDropped=0,this.firCount=0,this.pliCount=0,this.nackCount=0,this.decoderImplementation="",this.qpSum=0,this.framesPerSecond=0}},RTCMediaStreamAudioTrack:class extends jc{constructor(){super(...arguments),this.id="",this.kind="audio",this.jitterBufferDelay=0,this.jitterBufferEmittedCount=0,this.audioLevel=0,this.totalAudioEnergy=0}},RTCMediaStreamVideoTrack:class extends jc{constructor(){super(...arguments),this.id="",this.kind="video",this.jitterBufferDelay=0,this.jitterBufferEmittedCount=0,this.frameWidth=0,this.frameHeight=0,this.framesReceived=0,this.framesDecoded=0}},RTCStreamDescription:class extends jc{constructor(){super(...arguments),this.streamIdentifier="",this.trackIds=[]}},WebAudioStats:class extends jc{constructor(){super(...arguments),this.bufferIsOverrun=!1,this.bufferOverrunTimes=0,this.bufferOverrunLength=0,this.bufferOverrunMaxLength=0,this.bufferOverrunDuration=0,this.bufferIsUnderrun=!1,this.bufferUnderrunTimes=0,this.bufferUnderrunMaxLength=0,this.bufferUnderrunDuration=0}},DataChannelStats:class extends jc{constructor(){super(...arguments),this.bytesReceived=0,this.bytesSent=0,this.dataChannelIdentifier=0,this.id="",this.label="",this.messagesReceived=0,this.messagesSent=0,this.state="",this.timestamp=0}},TransportStats:class extends jc{constructor(){super(...arguments),this.id="",this.dtlsState="",this.selectedCandidatePairChanges=0,this.selectedCandidatePairId=""}},RTCVideoSource:class extends jc{constructor(){super(...arguments),this.type="media-source",this.id="",this.kind="video",this.trackIdentifier=0,this.width=0,this.height=0,this.framesPerSecond=0,this.frames=0}},RTCAudioSource:class extends jc{constructor(){super(...arguments),this.type="media-source",this.id="",this.kind="audio",this.trackIdentifier=0,this.audioLevel=0,this.totalAudioEnergy=0,this.totalSamplesDuration=0}}};var Dc=n(9034),Oc=n.n(Dc);class Nc{static getHost(){return Nc.host}}Nc.host="https://comms.sdk.dolby.io",Nc.endpoints={configuration:{fetch:{method:"GET",uri:"/v1/telemetry/metrics/configuration"}},webrtc:{sendBatch:{method:"POST",uri:"/v1/telemetry/metrics/webrtc/conferences/{conferenceId}/users/{userId}"}},dvc:{sendBatch:{method:"PUT",uri:"/v1/telemetry/metrics/dvc/conferences/{conferenceId}/users/{userId}/timestamp/{timestamp}"}},device:{send:{method:"PUT",uri:"/v1/telemetry/metrics/device/users/{userId}/timestamp/{timestamp}"}},dump:{sendBatch:{method:"PUT",uri:"/v1/telemetry/metrics/dump/{type}/conferences/{conferenceId}/users/{userId}/timestamp/{timestamp}"}},events:{send:{method:"PUT",uri:"/v1/telemetry/events/conferences/{conferenceId}/users/{userId}/timestamp/{timestamp}"},sendBatch:{method:"POST",uri:"/v1/telemetry/events/conferences/{conferenceId}/users/{userId}"}}},yt.inject(Nc,wt.getToken,wt.setToken,wt.getJwtToken,wt.getTokenCallback,(()=>{}),Nc.getHost,Nc.endpoints,!0,wt.isTokenExpired,wt.getLeavingCallback);var Fc=Nc;function Lc(e,t){if(e===t)return!0;if("object"==typeof e&&null!=e&&"object"==typeof t&&null!=t){if(Object.keys(e).length!=Object.keys(t).length)return!1;for(let n in e){if(!t.hasOwnProperty(n))return!1;if(!Lc(e[n],t[n]))return!1}return!0}return!1}class zc{constructor(e){this.type=e.type,this.level=e.level}}class Uc extends zc{constructor(e){super({type:"UserAction",level:e.level,component:e.component}),this.action=e.action,this.description=e.description,this.component=e.component,this.api=e.api,e.payload&&(this.payload=e.payload)}}class Vc extends zc{constructor(e){super({type:"SDKError",level:"error"}),this.error=e.error,this.message=e.message,e.code&&(this.code=e.code)}}class Bc extends zc{constructor(e){super({type:"SDKTrace",level:"trace"}),e.description&&(this.description=e.description),this.payload=e.data,this.api=e.api}}var Wc,Gc,Hc,Yc,$c,Zc,qc,Xc,Kc,Jc,Qc,eu,tu,nu=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},ru=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},iu=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};const ou=xe()("vxt:telemetry"),au={events:{enabled:!0,trace:!1,flushSec:10,batch:5},dvc:{enabled:!1,logLevel:"info"},webrtc:{enabled:!0,samplingFreqSec:10,batch:3},device:{enabled:!0},rts:{enabled:!1}};let su=class extends ut{constructor(e,t,n,r){super(e),this.configuration=au,Wc.set(this,new Ic),Gc.set(this,"1.1"),Hc.set(this,void 0),Yc.set(this,void 0),$c.set(this,void 0),Zc.set(this,void 0),qc.set(this,{}),Xc.set(this,void 0),Kc.set(this,void 0),Jc.set(this,{}),Qc.set(this,{}),eu.set(this,void 0),tu.set(this,!1),ru(this,Hc,t,"f"),ru(this,Yc,n,"f"),ru(this,$c,r,"f"),this.sendExecutor=new La(2*Ci)}registerComponent(e,t){e&&t&&!iu(this,Wc,"f")[e]&&(iu(this,Wc,"f")[e]=t)}localStats(){var e;return null===(e=iu(this,Hc,"f").manager.rtc.getRtpStatsForTelemetry())||void 0===e?void 0:e.metrics}onConferenceJoining(e){ru(this,tu,!0,"f"),this._conferenceId=e.conferenceId}onConferenceJoined(e){var t;return nu(this,void 0,void 0,(function*(){let n;ru(this,tu,!1,"f"),this._conferenceId=e.conferenceId,yield this.getConfiguration(),n=(null===(t=e.listenOnly)||void 0===t?void 0:t.type)===l.Mixed?this.configuration.rts.enabled:this.configuration.webrtc.enabled,n&&ru(this,Zc,setInterval(this.collect.bind(this),1e3*this.configuration.webrtc.samplingFreqSec),"f")}))}onConferenceLeaving(e){return nu(this,void 0,void 0,(function*(){iu(this,Zc,"f")&&(clearInterval(iu(this,Zc,"f")),ru(this,Zc,null,"f"))}))}onConferenceLeft(e){return nu(this,void 0,void 0,(function*(){if(iu(this,Zc,"f")&&(clearInterval(iu(this,Zc,"f")),ru(this,Zc,null,"f")),!0===iu(this,Hc,"f").manager.getClientStateDumpsEnabled())try{yield this.sendReport(e.stateDump)}catch(e){console.log("Sending error: "+e)}this.flushEventReport(),ru(this,Qc,{},"f"),this._conferenceId=null,this.flush(),ru(this,qc,{},"f"),ru(this,Jc,{},"f"),ru(this,Xc,null,"f"),ru(this,Kc,null,"f")}))}onConferenceGlobalError(e){return nu(this,void 0,void 0,(function*(){if(!this.configuration.events.enabled)return;let t;e.error instanceof Ne?t=new Vc({error:"MediaStreamError",message:e.error.toString()}):e.error instanceof Oe&&"PeerNotFoundError"!=e.error.name?t=new Vc({error:e.error.name,message:e.error.message}):e.error instanceof Ve?t=new Vc({error:e.error.name,message:e.error.message,code:e.code}):e.error instanceof qe?t=new Vc({error:"DvcError",message:`${e.error.name}: ${e.error.message}`}):(e.error instanceof He||e.error instanceof De&&"DolbyVoiceInitError"===e.error.name||e.error instanceof Fa||e.error instanceof Ei)&&(t=new Vc({error:e.error.name,message:e.error.message})),this.onEventReport(t)}))}onUserAction(e){return nu(this,void 0,void 0,(function*(){if(!this.configuration.events.enabled)return;const t=new Uc(e);this.onEventReport(t,e.timestamp)}))}onConferenceGlobalTrace(e){return nu(this,void 0,void 0,(function*(){if(!this.configuration.events.trace)return;const t=new Bc(e);this.onEventReport(t,e.ts)}))}onEventReport(e,t){const n=t||Date.now();iu(this,Qc,"f")[this.getReportCacheTimestampKey(n)]=e,Object.keys(iu(this,Qc,"f")).length>=this.configuration.events.batch&&this.flushEventReport(),iu(this,eu,"f")||ru(this,eu,setTimeout(this.flushEventReport.bind(this),1e3*this.configuration.events.flushSec),"f")}getReportCacheTimestampKey(e){return iu(this,Qc,"f")[e]?this.getReportCacheTimestampKey(e+1):e}flushEventReport(){iu(this,eu,"f")&&(clearTimeout(iu(this,eu,"f")),ru(this,eu,null,"f")),Object.keys(iu(this,Qc,"f")).length>=1&&(this.sendEventReport(iu(this,Qc,"f")),ru(this,Qc,{},"f"))}sendEventReport(e){var t,n;if(!(null===(n=null===(t=iu(this,Yc,"f"))||void 0===t?void 0:t.participant)||void 0===n?void 0:n.id))return;const r=this._conferenceId||"00000000-0000-0000-0000-000000000000";if(1===Object.keys(e).length){const t=Object.keys(e)[0],n=e[t];this.sendExecutor.execute((()=>nu(this,void 0,void 0,(function*(){try{yield Fc.events.send({conferenceId:r,userId:iu(this,Yc,"f").participant.id,timestamp:t,headers:{"Content-Type":"application/json"},data:JSON.stringify(n)})}catch(e){this.onEventReport(new Vc({error:"TelemetryError",message:"Unable to send client event logs. Reason: "+e.message}),Date.now())}}))))}else Object.keys(e).length>1&&this.sendExecutor.execute((()=>nu(this,void 0,void 0,(function*(){try{yield Fc.events.sendBatch({conferenceId:r,userId:iu(this,Yc,"f").participant.id,headers:{"Content-Type":"application/json"},data:JSON.stringify(e)})}catch(e){this.onEventReport(new Vc({error:"TelemetryError",message:"Unable to send client event logs. Reason: "+e.message}),Date.now())}}))))}collect(){var e,t,n,r,i,o,a;return nu(this,void 0,void 0,(function*(){if(!(null===(e=iu(this,Hc,"f").manager)||void 0===e?void 0:e.rtc))return;let s=yield iu(this,Hc,"f").manager.rtc.getRtpStatsForTelemetry();if(s){const e=Oc()().utc().valueOf(),c=s.metrics;delete s.metrics;const u={audioInput:iu(this,$c,"f").selectedAudioInputDevice,audioOutput:iu(this,$c,"f").selectedAudioOutputDevice,videoInput:iu(this,$c,"f").selectedVideoInputDevice},d=Object.assign(Object.assign(Object.assign({},s),{version:iu(this,Gc,"f"),conferenceId:this._conferenceId,userId:iu(this,Yc,"f").participant.id,timestamp:0,metrics:{}}),!Lc(u,iu(this,Jc,"f"))&&{devices:Object.assign(Object.assign(Object.assign({},!Lc(u.audioInput,iu(this,Jc,"f").audioInput)&&{audioInput:{groupId:null===(t=u.audioInput)||void 0===t?void 0:t.groupId,label:null===(n=u.audioInput)||void 0===n?void 0:n.label}}),!Lc(u.audioOutput,iu(this,Jc,"f").audioOutput)&&{audioOutput:{groupId:null===(r=u.audioOutput)||void 0===r?void 0:r.groupId,label:null===(i=u.audioOutput)||void 0===i?void 0:i.label}}),!Lc(u.videoInput,iu(this,Jc,"f").videoInput)&&{videoInput:{groupId:null===(o=u.videoInput)||void 0===o?void 0:o.groupId,label:null===(a=u.videoInput)||void 0===a?void 0:a.label}})});this.analyze(c,e),c.forEach(((e,t)=>{const n=new Array;d.metrics[t]=n,e.forEach((e=>{Rc.forEach(((t,r)=>{t(e)&&n.push(function(e,t){let n=new t;return Object.keys(n).forEach((t=>{n[t]=e[t]})),n}(e,Ac[r]))}))}))})),d.timestamp=e,ru(this,Jc,u,"f"),iu(this,qc,"f")[e]=d,this.flush()}}))}analyze(e,t){iu(this,Xc,"f")&&e.forEach(((e,n)=>{const r=iu(this,Xc,"f").get(n);r&&e.filter((e=>"inbound-rtp"===e.type||"outbound-rtp"===e.type||"candidate-pair"===e.type)).forEach((e=>{const n=r.filter((t=>t.id===e.id)),i=Oc()(t).diff(Oc()(iu(this,Kc,"f")),"seconds");e.bytesSent&&n[0]&&n[0].bytesSent&&(e.bitrateSent=parseFloat(((e.bytesSent-n[0].bytesSent)/i/1024*8).toFixed(2))),e.bytesReceived&&n[0]&&n[0].bytesReceived&&(e.bitrateReceived=parseFloat(((e.bytesReceived-n[0].bytesReceived)/i/1024*8).toFixed(2)))}))})),ru(this,Xc,e,"f"),ru(this,Kc,t,"f")}flush(){if(Object.keys(iu(this,qc,"f")).length>=this.configuration.webrtc.batch){const e=iu(this,qc,"f");this.sendExecutor.execute((()=>this.flushInternal(e,this._conferenceId,iu(this,Yc,"f").participant.id))),ru(this,qc,{},"f")}}flushInternal(e,t,n){return nu(this,void 0,void 0,(function*(){try{yield Fc.webrtc.sendBatch({conferenceId:t,userId:n,headers:{"Content-Type":"application/json"},data:JSON.stringify(e)})}catch(e){this.onEventReport(new Vc({error:"TelemetryError",message:"Unable to send metrics report. Reason: "+e.message}),Date.now())}}))}getConfiguration(){return nu(this,void 0,void 0,(function*(){try{const e=(yield Fc.configuration.fetch()).data;this.configuration=Object.assign(Object.assign({},au),e),ou("Configuration: ",this.configuration),iu(this,Hc,"f").manager.setClientStateDumpsEnabled(this.configuration.dvc.enabled)}catch(e){console.error("Failed to fetch Telemetry configuration!",e)}}))}onSessionOpened(){super.onSessionOpened(),this.getConfiguration().then((()=>{var e;const t=new xc;t.userId=iu(this,Yc,"f").participant.id,t.timestamp=Oc()().utc().valueOf();const n=new Mc,r=null===(e=bn.parsed)||void 0===e?void 0:e.getResult(),i=new Pc;i.screen=`${window.screen.width}x${window.screen.height}`,this.registerComponent("app",window.location.href),n.componentsVersion=iu(this,Wc,"f"),n.hardware=i,n.name=`${r.browser.name} ${r.browser.version}`,n.os=`${r.os.name} ${r.os.version} ${r.os.versionName}`,n.timeZone=Oc()().format("UTCZ"),t.metrics=n,Fc.device.send({userId:t.userId,timestamp:t.timestamp,data:t})}))}sendReport(e){return nu(this,void 0,void 0,(function*(){try{if(e){let t=Oc()().utc().valueOf();e.component&&"dvc"!==e.component?Fc.dump.sendBatch({conferenceId:this._conferenceId,userId:iu(this,Yc,"f").participant.id,timestamp:t,headers:{"Content-Type":"application/zip"},data:e.content,type:e.component}):Fc.dvc.sendBatch({conferenceId:this._conferenceId,userId:iu(this,Yc,"f").participant.id,timestamp:t,headers:{"Content-Type":"application/zip"},data:e.content})}}catch(e){console.log("Failed to create and send state dump")}}))}};Wc=new WeakMap,Gc=new WeakMap,Hc=new WeakMap,Yc=new WeakMap,$c=new WeakMap,Zc=new WeakMap,qc=new WeakMap,Xc=new WeakMap,Kc=new WeakMap,Jc=new WeakMap,Qc=new WeakMap,eu=new WeakMap,tu=new WeakMap,su=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}([dt([Ce.SessionOpened,Ce.ConferenceLeaving,Ce.UserAction,Ce.ConferenceGlobalError,Ce.ConferenceJoining,Ce.ConferenceGlobalTrace])],su);var cu,uu,du,lu=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},hu=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class pu extends ut{constructor(e,t){super(e),cu.set(this,void 0),uu.set(this,void 0),lu(this,cu,t,"f")}leaveAfterDelay(e){hu(this,cu,"f").leave({keepAlive:!0,reason:"tabClosure"}),this.sleep(e)}sleep(e){const t=(new Date).getTime();for(;(new Date).getTime()<t+e;);}onConferenceJoined(e){super.onConferenceJoined(e),!0===hu(this,cu,"f").leaveConferenceOnBeforeUnload&&(lu(this,uu,window.onbeforeunload,"f"),window.onbeforeunload=e=>{const t=e.target.activeElement,n=t&&t.href&&t.href.startsWith("mailto:"),r=t&&t.href&&t.href.startsWith("tel:");n||r||this.leaveAfterDelay(1500)})}onConferenceLeft(e){window.onbeforeunload=hu(this,uu,"f")||null,super.onConferenceLeft(e)}}cu=new WeakMap,uu=new WeakMap,function(e){e.None="none",e.Bokeh="bokeh",e.StaticImage="staticimage"}(du||(du={}));var fu,mu,gu,vu,yu,_u,wu=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},bu=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};let ku=class{constructor(e,t,n){fu.set(this,void 0),mu.set(this,void 0),gu.set(this,void 0),vu.set(this,du.None),yu.set(this,{}),_u.set(this,null),wu(this,fu,e,"f"),wu(this,mu,t,"f"),wu(this,gu,n,"f")}setFilter(e,t={}){return new Promise(((n,r)=>{bu(this,gu,"f").isFilterSupported(e)?(wu(this,vu,e,"f"),wu(this,yu,Object.assign({},t),"f"),this.isLiveVideoTrack(bu(this,_u,"f"))?n(bu(this,gu,"f").setFilter(bu(this,_u,"f"),bu(this,vu,"f"),bu(this,yu,"f"))):n()):r(new Be("Setting video filter on camera stream failed. Filter '"+e+"' is unsupported"))}))}isLocalParticipant(e){return e===bu(this,mu,"f").participant.id}isLiveVideoTrack(e){return e&&"live"===e.readyState}hasLiveVideoTrack(e){return e.getVideoTracks().length>0&&this.isLiveVideoTrack(this.getVideoTrackFrom(e))}getVideoTrackFrom(e){return e.getVideoTracks()[0]}isCameraStreamType(e){return e&&e.type===On.Camera}onStreamAdded(e){bu(this,gu,"f").isFilterSupported(bu(this,vu,"f"))&&this.isLocalParticipant(e.peerId)&&this.hasLiveVideoTrack(e.stream)&&this.isCameraStreamType(e.stream)&&(wu(this,_u,this.getVideoTrackFrom(e.stream),"f"),bu(this,gu,"f").setFilter(bu(this,_u,"f"),bu(this,vu,"f"),bu(this,yu,"f")).catch((e=>mr.warn("Setting video filter on camera stream failed. "+e))))}onStreamUpdated(e){bu(this,gu,"f").isFilterSupported(bu(this,vu,"f"))&&this.isLocalParticipant(e.peerId)&&this.isCameraStreamType(e.stream)&&(this.hasLiveVideoTrack(e.stream)?(wu(this,_u,this.getVideoTrackFrom(e.stream),"f"),bu(this,gu,"f").setFilter(bu(this,_u,"f"),bu(this,vu,"f"),bu(this,yu,"f")).catch((e=>mr.warn("Setting video filter on camera stream failed. "+e)))):wu(this,_u,null,"f"))}onStreamRemoved(e){bu(this,gu,"f").isFilterSupported(bu(this,vu,"f"))&&this.isLocalParticipant(e.peerId)&&this.isCameraStreamType(e.stream)&&wu(this,_u,null,"f")}onConferenceVideoFilterUpdate(e){bu(this,gu,"f").isFilterSupported(e.filter)?this.setFilter(e.filter,e.filterOptions):mr.warn("Setting video filter on camera stream failed. Filter '"+e.filter+"' is unsupported")}};fu=new WeakMap,mu=new WeakMap,gu=new WeakMap,vu=new WeakMap,yu=new WeakMap,_u=new WeakMap,ku=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}([dt([Ce.ConferenceVideoFilterUpdate,Ce.StreamAdded,Ce.StreamRemoved,Ce.StreamUpdated])],ku);var Su,Eu,Tu,Cu=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},ju=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n};class xu{constructor(){Su.set(this,null),Eu.set(this,""),Tu.set(this,void 0),this.filterHandlers=new Map([[du.None,xu.prototype.filterNoneHandler],[du.Bokeh,xu.prototype.filterBokehHandler],[du.StaticImage,xu.prototype.filterStaticImageHandler]])}get supportedFilters(){if(!Cu(this,Tu,"f"))try{(()=>{const e=navigator.mediaDevices.getSupportedConstraints();return!!(e.hasOwnProperty("videoFilterMode")&&e.hasOwnProperty("videoFilterImageFileData")&&e.hasOwnProperty("videoFilterEnableDenoise"))&&e.videoFilterMode&&e.videoFilterImageFileData&&e.videoFilterEnableDenoise})()?ju(this,Tu,[du.None,du.Bokeh,du.StaticImage],"f"):ju(this,Tu,[],"f")}catch(e){ju(this,Tu,[],"f"),mr.warn("Checking system capabilities failed. "+e)}return Cu(this,Tu,"f")}isFilterSupported(e){return this.supportedFilters.includes(e)}setFilter(e,t,n={}){return new Promise(((r,i)=>{this.isFilterSupported(t)?e?e instanceof MediaStream?r(this.setFilterOnStream(e,t,n)):r(this.setFilterOnTrack(e,t,n)):i(new Error("Setting video filter failed. Stream is null")):i(new Be("Setting video filter failed. Filter '"+t+"' is unsupported."))}))}setFilterOnStream(e,t,n={}){return new Promise(((r,i)=>{e.getVideoTracks().length>0&&null!=e.getVideoTracks()[0]?r(this.setFilterOnTrack(e.getVideoTracks()[0],t,n)):i(new Error("Setting video filter failed. There is no video tracks in stream."))}))}setFilterOnTrack(e,t,n={}){return new Promise(((r,i)=>{"video"===e.kind?r(this.handleFilter(e,t,n)):i(new Error("Setting video filter failed. Media track isn't a video track"))}))}handleFilter(e,t,n){return new Promise(((r,i)=>{const o=this.filterHandlers.get(t);o?r(o.call(this,e,n)):i(new Error("Filter handler is undefined."))})).then((()=>mr.debug(`Set video filter '${t}' on video track '${e.id}'`)))}filterNoneHandler(e,t){return t.videoDenoise?xu.applyEffect(e,{mode:"none",denoise:!0}):xu.applyEffect(e,{mode:"disabled"})}filterBokehHandler(e,t){return xu.applyEffect(e,{mode:"bokeh",denoise:t.videoDenoise})}filterStaticImageHandler(e,t){return this.readFileAsBinaryString(t.imageFile).then((n=>xu.applyEffect(e,{mode:"static_image",imageData:n,denoise:t.videoDenoise})))}static applyEffect(e,t){return((e,t,n,r)=>{const i=e.getSettings();return e.applyConstraints({width:{exact:null==i?void 0:i.width},height:{exact:null==i?void 0:i.height},frameRate:{exact:null==i?void 0:i.frameRate},videoFilterMode:t,videoFilterImageFileData:n,videoFilterEnableDenoise:r})})(e,t.mode,t.imageData||"",t.denoise||!1)}readFileAsBinaryString(e){return new Promise(((t,n)=>{if(!e)return void n(new Error("Reading image file failed. File is null."));if(Cu(this,Su,"f")===e)return void t(Cu(this,Eu,"f"));const r=new FileReader;r.onerror=()=>{r.abort(),n(new Error("Reading image file failed. "+r.error))},r.onload=()=>{ju(this,Su,e,"f"),ju(this,Eu,r.result,"f"),t(r.result)},r.readAsBinaryString(e)}))}}Su=new WeakMap,Eu=new WeakMap,Tu=new WeakMap;var Pu,Iu,Mu=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},Ru=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class Au extends ut{constructor(e,t,n){super(e),Pu.set(this,void 0),Iu.set(this,void 0),Mu(this,Pu,new xu,"f"),Mu(this,Iu,new ku(t,n,Ru(this,Pu,"f")),"f")}getSupportedFilters(){return[...Ru(this,Pu,"f").supportedFilters]}setFilter(e,t={}){return void 0===t.stream?Ru(this,Iu,"f").setFilter(e,t):Ru(this,Pu,"f").setFilter(t.stream,e,t)}}Pu=new WeakMap,Iu=new WeakMap;var Du,Ou,Nu=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},Fu=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class Lu extends ut{constructor(e,t,n){super(e),Du.set(this,void 0),Ou.set(this,void 0),Nu(this,Du,t,"f"),Nu(this,Ou,n,"f")}get local(){return Fu(this,Du,"f")}get remote(){return Fu(this,Ou,"f")}}Du=new WeakMap,Ou=new WeakMap;var zu,Uu,Vu=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},Bu=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class Wu{constructor(e,t){zu.set(this,void 0),Uu.set(this,void 0),Vu(this,zu,e,"f"),Vu(this,Uu,t,"f")}get local(){return Bu(this,zu,"f")}get remote(){return Bu(this,Uu,"f")}}zu=new WeakMap,Uu=new WeakMap;var Gu,Hu,Yu,$u,Zu,qu=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},Xu=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n};class Ku extends Error{constructor(){super("override value")}}class Ju{constructor(){Gu.set(this,void 0),Hu.set(this,void 0),Yu.set(this,void 0),$u.set(this,void 0),Zu.set(this,void 0)}get storeValue(){return qu(this,Yu,"f")}getValue(){return qu(this,Hu,"f")&&(qu(this,Hu,"f").call(this,new Ku),Xu(this,Gu,void 0,"f"),Xu(this,Hu,void 0,"f")),new Promise(((e,t)=>{Xu(this,Gu,e,"f"),Xu(this,Hu,t,"f")}))}executeGet(e){if(qu(this,Gu,"f")&&qu(this,Hu,"f")){let t=qu(this,Gu,"f"),n=qu(this,Hu,"f");e().then((e=>{t(e)}),(e=>{n(e)}))}Xu(this,Gu,void 0,"f"),Xu(this,Hu,void 0,"f")}set storeValue(e){Xu(this,Yu,e,"f")}setValue(e){return qu(this,Zu,"f")&&(qu(this,Zu,"f").call(this,new Ku),Xu(this,$u,void 0,"f"),Xu(this,Zu,void 0,"f")),Xu(this,Yu,e,"f"),new Promise(((e,t)=>{Xu(this,$u,e,"f"),Xu(this,Zu,t,"f")}))}executeSet(e){if(qu(this,$u,"f")&&qu(this,Zu,"f")){let t=qu(this,$u,"f"),n=qu(this,Zu,"f");e(qu(this,Yu,"f")).then((e=>{t(e)}),(e=>{n(e)}))}else qu(this,Yu,"f")&&e(qu(this,Yu,"f"));Xu(this,$u,void 0,"f"),Xu(this,Zu,void 0,"f")}}Gu=new WeakMap,Hu=new WeakMap,Yu=new WeakMap,$u=new WeakMap,Zu=new WeakMap;var Qu,ed,td,nd,rd,id,od,ad,sd,cd,ud,dd,ld,hd,pd,fd,md,gd,vd,yd=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},_d=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},wd=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};function bd(e){return yd(this,void 0,void 0,(function*(){if(!(null===navigator||void 0===navigator?void 0:navigator.mediaDevices))return[];const t=yield navigator.mediaDevices.enumerateDevices();return e?t.filter((t=>t.kind===e)):t}))}class kd extends Error{constructor(){super("not supported")}}class Sd{constructor(){Qu.set(this,void 0),ed.set(this,void 0),td.set(this,void 0),nd.set(this,new Ju),rd.set(this,void 0),id.set(this,void 0),od.set(this,void 0),ad.set(this,void 0),sd.set(this,void 0),cd.set(this,!1),ud.set(this,!1),dd.set(this,!1),ld.set(this,[]),hd.set(this,[]),pd.set(this,[]),fd.set(this,null),md.set(this,null),gd.set(this,null),vd.set(this,[]),this.initSelectAudioDevice(),this.initSelectVideoDevice(),bd().then((e=>{if(e){_d(this,hd,e.filter((e=>"audiooutput"===e.kind)),"f"),_d(this,ld,e.filter((e=>"audioinput"===e.kind)),"f"),_d(this,pd,e.filter((e=>"videoinput"===e.kind)),"f");const t=wd(this,hd,"f").find((e=>"default"===e.deviceId));t&&t.deviceId&&_d(this,ad,t,"f")}}))}initSelectAudioDevice(){_d(this,Qu,(e=>Promise.reject(new kd)),"f"),_d(this,ed,(e=>Promise.reject(new kd)),"f"),_d(this,cd,_d(this,ud,!1,"f"),"f")}initSelectVideoDevice(){_d(this,td,(e=>Promise.reject(new kd)),"f"),_d(this,dd,!1,"f")}get selectedAudioInputDevice(){return wd(this,od,"f")}set selectedAudioInputDevice(e){e&&_d(this,od,e,"f")}get selectedAudioOutputDevice(){return wd(this,ad,"f")}set selectedAudioOutputDevice(e){e&&_d(this,ad,e,"f")}get selectedVideoInputDevice(){return wd(this,sd,"f")}set selectedVideoInputDevice(e){e&&_d(this,sd,e,"f")}get setComfortNoiseLevel(){return wd(this,id,"f")?e=>(wd(this,nd,"f").storeValue=e,wd(this,id,"f").call(this,e)):wd(this,nd,"f").setValue.bind(wd(this,nd,"f"))}set setComfortNoiseLevel(e){_d(this,id,e,"f"),e&&wd(this,nd,"f").executeSet(wd(this,id,"f"))}get getComfortNoiseLevel(){return wd(this,rd,"f")?wd(this,rd,"f"):wd(this,nd,"f").getValue.bind(wd(this,nd,"f"))}set getComfortNoiseLevel(e){_d(this,rd,e,"f"),e&&wd(this,nd,"f").executeGet(wd(this,rd,"f"))}get selectAudioInputDevice(){return wd(this,Qu,"f")}set selectAudioInputDevice(e){e&&(_d(this,Qu,e,"f"),_d(this,cd,!0,"f"))}get selectAudioOutputDevice(){return wd(this,ed,"f")}set selectAudioOutputDevice(e){e&&(_d(this,ed,e,"f"),_d(this,ud,!0,"f"))}get selectVideoInputDevice(){return wd(this,td,"f")}set selectVideoInputDevice(e){e&&(_d(this,td,e,"f"),_d(this,dd,!0,"f"))}get audioOutputDevices(){return wd(this,hd,"f")}get audioInputDevices(){return wd(this,ld,"f")}get isOutputSelectorValid(){return wd(this,ud,"f")}getConnectedDevices(){return bd()}getConnectedVideoInputDevices(){return bd("videoinput")}getConnectedAudioInputDevices(){return bd("audioinput")}getConnectedAudioOutputDevices(){return bd("audiooutput")}areDevicesEqual(e,t){return e&&t&&e.deviceId===t.deviceId&&e.label===t.label&&e.kind===t.kind&&e.groupId===t.groupId}trackDevicesUpdates(e,t){return{added:t.filter((t=>!e.find((e=>e.groupId===t.groupId&&e.kind===t.kind)))).filter((e=>"default"!==e.deviceId)),removed:e.filter((e=>!t.find((t=>t.groupId===e.groupId&&t.kind===e.kind&&e.label.includes(t.label))))).filter((e=>"default"!==e.deviceId)),updated:t.filter((t=>e.find(((e,n)=>e.kind===t.kind&&e.deviceId===t.deviceId&&(e.groupId!==t.groupId||e.label!==t.label)))))}}getCurrentSelectedDevice(e,t){return e&&t.find((t=>t.deviceId===e.deviceId&&t.label===e.label&&t.kind===e.kind&&t.groupId===e.groupId))?e:Array.isArray(t)&&t.length>0?((e&&"audioinput"===e.kind||e&&"audiooutput"===e.kind)&&bn.isWindows&&bn.isChrome||bn.isEdge?t.find((e=>"communications"===e.deviceId)):t.find((e=>"default"===e.deviceId)))||t[0]:void 0}scheduleAudioInputChange(e){const t=!wd(this,fd,"f");_d(this,fd,e,"f"),t&&setTimeout((()=>yd(this,void 0,void 0,(function*(){yield wd(this,Qu,"f").call(this,wd(this,fd,"f")),_d(this,fd,null,"f")}))),60)}scheduleAudioOutputChange(e){const t=!wd(this,md,"f");_d(this,md,e,"f"),t&&setTimeout((()=>yd(this,void 0,void 0,(function*(){yield wd(this,ed,"f").call(this,wd(this,md,"f")),_d(this,md,null,"f")}))),60)}scheduleVideoInputChange(e){const t=!wd(this,gd,"f");_d(this,gd,e,"f"),t&&setTimeout((()=>yd(this,void 0,void 0,(function*(){yield wd(this,td,"f").call(this,wd(this,gd,"f")),_d(this,gd,null,"f")}))),60)}isDeviceListUpdated(e,t){return e.length===t.length&&e.every(((e,n)=>e.label===t[n].label&&e.deviceId===t[n].deviceId&&e.groupId===t[n].groupId))}onDeviceChange(e){wd(this,vd,"f").push(e);const t=e=>yd(this,void 0,void 0,(function*(){const e=yield bd(),t=e.filter((e=>"audioinput"===e.kind)),n=e.filter((e=>"audiooutput"===e.kind)),r=e.filter((e=>"videoinput"===e.kind));if(this.isDeviceListUpdated(t,wd(this,ld,"f"))&&this.isDeviceListUpdated(n,wd(this,hd,"f"))&&this.isDeviceListUpdated(r,wd(this,pd,"f")))return;const i=this.getCurrentSelectedDevice(wd(this,od,"f"),t);i&&wd(this,cd,"f")&&!this.areDevicesEqual(i,wd(this,od,"f"))&&this.scheduleAudioInputChange(i),_d(this,od,i,"f");const o=this.getCurrentSelectedDevice(wd(this,ad,"f"),n);o&&wd(this,ud,"f")&&!this.areDevicesEqual(o,wd(this,ad,"f"))&&this.scheduleAudioOutputChange(o),_d(this,ad,o,"f");const a=this.getCurrentSelectedDevice(wd(this,sd,"f"),r);a&&wd(this,dd,"f")&&!this.areDevicesEqual(a,wd(this,sd,"f"))&&this.scheduleVideoInputChange(a),_d(this,sd,a,"f"),wd(this,vd,"f").forEach((e=>{const i=(e.deviceKind&ec.AudioInput)===ec.AudioInput,o=(e.deviceKind&ec.AudioOutput)===ec.AudioOutput,a=(e.deviceKind&ec.VideoInput)===ec.VideoInput,s=(e.handlerType&tc.ListDevices)===tc.ListDevices,c=(e.handlerType&tc.GetDifferences)===tc.GetDifferences;if(!o&&!i&&!a||!s&&!c)return;const u={};if(s&&(u.list=Object.assign(Object.assign(Object.assign({},a&&r.length>0&&{videoInput:[...r]}),i&&t.length>0&&{audioInput:[...t]}),o&&n.length>0&&{audioOutput:[...n]})),c){let e={};if(i){const n=this.trackDevicesUpdates(wd(this,ld,"f"),t);(n&&n.added.length>0||n.updated.length>0||n.removed.length>0)&&(e=Object.assign(Object.assign({},e),{audioInput:n}))}if(o){const t=this.trackDevicesUpdates(wd(this,hd,"f"),n);(t&&t.added.length>0||t.updated.length>0||t.removed.length>0)&&(e=Object.assign(Object.assign({},e),{audioOutput:t}))}if(a){const t=this.trackDevicesUpdates(wd(this,pd,"f"),r);(t&&t.added.length>0||t.updated.length>0||t.removed.length>0)&&(e=Object.assign(Object.assign({},e),{videoInput:t}))}const s=[...a?["videoInput"]:[],...i?["audioInput"]:[],...o?["audioOutput"]:[]],c=Object.keys(e);s.filter((e=>c.includes(e))).length>0&&(u.updates=e)}Object.keys(u).length>0&&e.handler(u)})),_d(this,ld,t,"f"),_d(this,hd,n,"f"),_d(this,pd,r,"f")}));let n;return bn.isAndroid&&bn.isChrome?n=setInterval(t,1e3):(null===navigator||void 0===navigator?void 0:navigator.mediaDevices)&&(navigator.mediaDevices.ondevicechange=t),()=>{const t=wd(this,vd,"f").indexOf(e);t>-1&&wd(this,vd,"f").splice(t,1),n&&clearInterval(n)}}}Qu=new WeakMap,ed=new WeakMap,td=new WeakMap,nd=new WeakMap,rd=new WeakMap,id=new WeakMap,od=new WeakMap,ad=new WeakMap,sd=new WeakMap,cd=new WeakMap,ud=new WeakMap,dd=new WeakMap,ld=new WeakMap,hd=new WeakMap,pd=new WeakMap,fd=new WeakMap,md=new WeakMap,gd=new WeakMap,vd=new WeakMap;var Ed,Td,Cd=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},jd=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},xd=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class Pd{constructor(e){Ed.set(this,void 0),Td.set(this,void 0),jd(this,Ed,e,"f"),xd(this,Ed,"f").selectVideoInputDevice=this.onVideInputSelectedCallback.bind(this)}getCurrentDeviceId(){var e;return null===(e=xd(this,Ed,"f").selectedVideoInputDevice)||void 0===e?void 0:e.deviceId}setNewDeviceId(e){return Cd(this,void 0,void 0,(function*(){const t=yield xd(this,Ed,"f").getConnectedVideoInputDevices();if(!t||0===t.length)return;const n=t.find((t=>t.deviceId===e));n&&(xd(this,Ed,"f").selectedVideoInputDevice=n)}))}setOnVideoDeviceIdChangedCallback(e){jd(this,Td,e,"f")}onVideInputSelectedCallback(e){return Cd(this,void 0,void 0,(function*(){xd(this,Td,"f")&&(null==e?void 0:e.deviceId)&&(yield xd(this,Td,"f").call(this,e.deviceId))}))}}Ed=new WeakMap,Td=new WeakMap;var Id=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class Md{constructor(e){this.mediaStreamTrack=e}getMediaStreamTrack(){return this.mediaStreamTrack}stop(){return Id(this,void 0,void 0,(function*(){}))}applyConstraints(e){return Id(this,void 0,void 0,(function*(){}))}}var Rd,Ad=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Dd=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},Od=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class Nd extends Md{constructor(e,t){super(e),Rd.set(this,void 0),Dd(this,Rd,t,"f")}static create(e){return Ad(this,void 0,void 0,(function*(){const t=(yield navigator.mediaDevices.enumerateDevices()).filter((e=>"videoinput"===e.kind));if(bn.isSafari&&0===t.length)throw new Ne({name:"NotFoundError",message:"Unable to detect video devices. Joining conference without video."});let n;try{n=yield navigator.mediaDevices.getUserMedia({video:null==e||e,audio:!1})}catch(e){throw new Ne(e)}if(!n)throw new He("Failed to create a video track from the camera. MediaStream is null.");if(!n.getVideoTracks()||!n.getVideoTracks().length)throw new He("Failed to create a video track from the camera. No video track in the media stream.");const r=n.getVideoTracks()[0];return n.removeTrack(r),r.onended=()=>{const e={track:{readyState:null==r?void 0:r.readyState,kind:null==r?void 0:r.kind,enabled:null==r?void 0:r.enabled,id:null==r?void 0:r.id}};Ae.send(Te.ConferenceGlobalTrace.fromData({api:"MediaStreamTrack.onended",data:e}))},new Nd(r,e)}))}getConstraints(){return Od(this,Rd,"f")}stop(){return Ad(this,void 0,void 0,(function*(){this.mediaStreamTrack&&this.mediaStreamTrack.stop()}))}applyConstraints(e){return Ad(this,void 0,void 0,(function*(){const t=Object.assign(Object.assign({},Od(this,Rd,"f")),e);try{yield this.getMediaStreamTrack().applyConstraints(t)}catch(e){throw new Ne(e)}Dd(this,Rd,t,"f")}))}}Rd=new WeakMap;class Fd extends Md{static create(e){return new Fd(e)}constructor(e){super(e)}applyConstraints(e){return t=this,n=void 0,i=function*(){const t=this.getMediaStreamTrack().getConstraints(),n=Object.assign(Object.assign({},t),e);yield this.getMediaStreamTrack().applyConstraints(n)},new((r=void 0)||(r=Promise))((function(e,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(a,s)}c((i=i.apply(t,n||[])).next())}));var t,n,r,i}}var Ld,zd,Ud=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},Vd=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class Bd{constructor(e){Ld.set(this,new Array),zd.set(this,void 0),Ud(this,zd,e,"f")}reset(){Vd(this,Ld,"f").length=0}hit(){Vd(this,Ld,"f").push(Date.now())}hitsInLastXTime(e){const t=Date.now();this.removeOldHits(t);const n=t,r=t-e;return this.getHits(n,r).length}removeOldHits(e){const t=e,n=e-Vd(this,zd,"f");Ud(this,Ld,this.getHits(t,n),"f")}getHits(e,t){return Vd(this,Ld,"f").filter((n=>t<=n&&n<=e))}}Ld=new WeakMap,zd=new WeakMap;var Wd,Gd,Hd,Yd,$d,Zd=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},qd=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};!function(e){e.Camera="camera",e.Custom="custom"}($d||($d={}));class Xd{constructor(e,t){Wd.set(this,void 0),Gd.set(this,void 0),Zd(this,Wd,e,"f"),Zd(this,Gd,t,"f")}static camera(e,t){return new Kd(e,t)}static custom(e,t){return new Jd(e,t)}get sourceType(){return qd(this,Wd,"f")}get processorOptions(){return qd(this,Gd,"f")}set processorOptions(e){Zd(this,Gd,e,"f")}isCamera(){return qd(this,Wd,"f")===$d.Camera}isCustom(){return qd(this,Wd,"f")===$d.Custom}asCamera(){return this}asCustom(){return this}}Wd=new WeakMap,Gd=new WeakMap;class Kd extends Xd{constructor(e,t){super($d.Camera,t),Hd.set(this,void 0),Zd(this,Hd,e,"f")}get constraints(){return qd(this,Hd,"f")}}Hd=new WeakMap;class Jd extends Xd{constructor(e,t){super($d.Custom,t),Yd.set(this,void 0),Zd(this,Yd,e,"f")}get userVideoTrack(){return qd(this,Yd,"f")}}Yd=new WeakMap;var Qd=n(3958),el=n.n(Qd);class tl{static get modelFileUrl(){return xr("vsl_impl.bin","f8a22a1934bcaf5dbb64319b6e40758e")}static get wasmFileUrl(){return xr("vsl_impl.wasm","f8a22a1934bcaf5dbb64319b6e40758e")}static get dvdnrFileUrl(){return xr("dvdnr.wasm","3fce421b27d87403287e7d94e770f57e")}}var nl,rl=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},il=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},ol=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};const al=n(4661);function sl(){return function(e,t,n){const r=n.value;return n.value=function(...e){try{const t=r.apply(this,e);return"object"==typeof t&&"function"==typeof t.then?t.catch((e=>{throw rt(e)})):t}catch(e){throw rt(e)}},n}}class cl{constructor(e){nl.set(this,void 0),function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===r?i.call(e,n):i?i.value=n:t.set(e,n)}(this,nl,e,"f")}static create(e,t){return il(this,void 0,void 0,(function*(){const n=yield new al.VideoFilter(e,t);return new cl(n)}))}getModelVersion(){return ol(this,nl,"f").getModelVersion()}setProcessingErrorHandler(e){ol(this,nl,"f").setProcessingErrorHandler(e)}getOutput(){return il(this,void 0,void 0,(function*(){return yield ol(this,nl,"f").getOutput()}))}stop(){ol(this,nl,"f").stop()}start(){ol(this,nl,"f").start()}changeOutputFrameRate(e){return il(this,void 0,void 0,(function*(){return yield ol(this,nl,"f").changeOutputFrameRate(e)}))}changeInput(e){return il(this,void 0,void 0,(function*(){yield ol(this,nl,"f").changeInput(e)}))}setPassthroughMode(e){ol(this,nl,"f").setPassthroughMode(e)}getPassthroughMode(){return ol(this,nl,"f").getPassthroughMode()}setBackgroundMode(e){ol(this,nl,"f").setBackgroundMode(e)}getBackgroundMode(){return ol(this,nl,"f").getBackgroundMode()}changeBackground(e){return il(this,void 0,void 0,(function*(){yield ol(this,nl,"f").changeBackground(e)}))}setFaceEnhanceMode(e){ol(this,nl,"f").setFaceEnhanceMode(e)}getFaceEnhanceMode(){return ol(this,nl,"f").getFaceEnhanceMode()}setDenoiseMode(e){ol(this,nl,"f").setDenoiseMode(e)}getDenoiseMode(){return ol(this,nl,"f").getDenoiseMode()}setAutoframeMode(e){ol(this,nl,"f").setAutoframeMode(e)}getAutoframeMode(){return ol(this,nl,"f").getAutoframeMode()}setFaceSmoothMode(e){ol(this,nl,"f").setFaceSmoothMode(e)}getFaceSmoothMode(){return ol(this,nl,"f").getFaceSmoothMode()}setFaceSmoothStrength(e){ol(this,nl,"f").setFaceSmoothStrength(e)}getFaceSmoothStrength(){return ol(this,nl,"f").getFaceSmoothStrength()}getFaceSmoothStrengthMax(){return ol(this,nl,"f").getFaceSmoothStrengthMax()}getFaceSmoothStrengthMin(){return ol(this,nl,"f").getFaceSmoothStrengthMin()}setStudioLightMode(e){ol(this,nl,"f").setStudioLightMode(e)}getStudioLightMode(){return ol(this,nl,"f").getStudioLightMode()}setFaceGlowStrength(e){ol(this,nl,"f").setFaceGlowStrength(e)}getFaceGlowStrength(){return ol(this,nl,"f").getFaceGlowStrength()}getFaceGlowStrengthMax(){return ol(this,nl,"f").getFaceGlowStrengthMax()}getFaceGlowStrengthMin(){return ol(this,nl,"f").getFaceGlowStrengthMin()}}nl=new WeakMap,rl([sl()],cl.prototype,"getModelVersion",null),rl([sl()],cl.prototype,"setProcessingErrorHandler",null),rl([sl()],cl.prototype,"getOutput",null),rl([sl()],cl.prototype,"stop",null),rl([sl()],cl.prototype,"start",null),rl([sl()],cl.prototype,"changeOutputFrameRate",null),rl([sl()],cl.prototype,"changeInput",null),rl([sl()],cl.prototype,"setPassthroughMode",null),rl([sl()],cl.prototype,"getPassthroughMode",null),rl([sl()],cl.prototype,"setBackgroundMode",null),rl([sl()],cl.prototype,"getBackgroundMode",null),rl([sl()],cl.prototype,"changeBackground",null),rl([sl()],cl.prototype,"setFaceEnhanceMode",null),rl([sl()],cl.prototype,"getFaceEnhanceMode",null),rl([sl()],cl.prototype,"setDenoiseMode",null),rl([sl()],cl.prototype,"getDenoiseMode",null),rl([sl()],cl.prototype,"setAutoframeMode",null),rl([sl()],cl.prototype,"getAutoframeMode",null),rl([sl()],cl.prototype,"setFaceSmoothMode",null),rl([sl()],cl.prototype,"getFaceSmoothMode",null),rl([sl()],cl.prototype,"setFaceSmoothStrength",null),rl([sl()],cl.prototype,"getFaceSmoothStrength",null),rl([sl()],cl.prototype,"getFaceSmoothStrengthMax",null),rl([sl()],cl.prototype,"getFaceSmoothStrengthMin",null),rl([sl()],cl.prototype,"setStudioLightMode",null),rl([sl()],cl.prototype,"getStudioLightMode",null),rl([sl()],cl.prototype,"setFaceGlowStrength",null),rl([sl()],cl.prototype,"getFaceGlowStrength",null),rl([sl()],cl.prototype,"getFaceGlowStrengthMax",null),rl([sl()],cl.prototype,"getFaceGlowStrengthMin",null),rl([sl()],cl,"create",null);var ul,dl,ll=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},hl=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},pl=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};const fl=xe()("vxt:video:processor");function ml(e){return null!=e}function gl(e,t,n){return e<0?t:e>1?n:Math.round((n-t)*e+t)}class vl{constructor(e){ul.set(this,void 0),dl.set(this,{}),hl(this,ul,e,"f")}static create(e,t){var n;return ll(this,void 0,void 0,(function*(){const r={passthrough:!0,model_filepath:tl.modelFileUrl,wasm_filepath:tl.wasmFileUrl,dvdnr_filepath:tl.dvdnrFileUrl,debug:null!==(n=null==t?void 0:t.debugLogs)&&void 0!==n&&n};t&&(r.flags={nonBlockingAsyncPixelReadback:t.nonBlockingAsyncPixelReadback},fl("Set video processor flags:",t));const i=yield cl.create(e,r);return fl.enabled&&fl("Vsl wrapper created, model:",i.getModelVersion()),new vl(i)}))}stop(){pl(this,ul,"f").stop()}start(){pl(this,ul,"f").start()}setProcessingErrorCallback(e){pl(this,ul,"f").setProcessingErrorHandler((t=>ll(this,void 0,void 0,(function*(){yield e(rt(t,"Internal video processing exception"))}))))}setOptions(e){return ll(this,void 0,void 0,(function*(){e=function(e,t){if(!ml(t))return Object.assign({},e);const n={};return Object.keys(e).forEach((r=>{ml(e[r])&&(el()(e[r],t[r])||(n[r]=e[r]))})),n}(e,pl(this,dl,"f")),ml(e.virtualBackground)&&(yield this.handleVirtualBackground(e.virtualBackground)),ml(e.facialSmoothing)&&(yield this.handleFacialSmoothing(e.facialSmoothing)),ml(e.autoBrightness)&&(yield this.handleAutoBrightness(e.autoBrightness)),ml(e.spotLight)&&(yield this.handleSpotLight(e.spotLight)),ml(e.noiseReduction)&&(yield this.handleNoiseReduction(e.noiseReduction)),ml(e.autoFraming)&&(yield this.handleAutoFraming(e.autoFraming)),hl(this,dl,Object.assign(Object.assign({},pl(this,dl,"f")),e),"f"),fl("Set video processor options:",e)}))}getOptions(){return pl(this,dl,"f")}getOutputStream(){return ll(this,void 0,void 0,(function*(){return yield pl(this,ul,"f").getOutput()}))}changeOutputStreamFrameRate(e){return ll(this,void 0,void 0,(function*(){yield pl(this,ul,"f").changeOutputFrameRate(e)}))}changeInputStream(e){return ll(this,void 0,void 0,(function*(){yield pl(this,ul,"f").changeInput(e)}))}handleVirtualBackground(e){return ll(this,void 0,void 0,(function*(){if(!1===e)pl(this,ul,"f").setPassthroughMode(!0);else if("bokeh"===e)pl(this,ul,"f").setBackgroundMode("bokeh"),pl(this,ul,"f").setPassthroughMode(!1);else{if(!(e instanceof HTMLImageElement||e instanceof HTMLVideoElement))throw new He("Unknown a video background type: '"+e+"'");yield pl(this,ul,"f").changeBackground(e),pl(this,ul,"f").setBackgroundMode("replace"),pl(this,ul,"f").setPassthroughMode(!1)}}))}handleFacialSmoothing(e){if(!1===e)pl(this,ul,"f").setFaceSmoothMode(!1);else{const t=pl(this,ul,"f").getFaceSmoothStrengthMin(),n=gl(e,t,pl(this,ul,"f").getFaceSmoothStrengthMax());if(n==t)return void pl(this,ul,"f").setFaceSmoothMode(!1);pl(this,ul,"f").getFaceSmoothMode()||pl(this,ul,"f").setFaceSmoothMode(!0),pl(this,ul,"f").setFaceSmoothStrength(n)}}handleAutoBrightness(e){pl(this,ul,"f").setFaceEnhanceMode(e)}handleSpotLight(e){if(!1===e)pl(this,ul,"f").setStudioLightMode(!1);else{const t=pl(this,ul,"f").getFaceGlowStrengthMin(),n=gl(e,t,pl(this,ul,"f").getFaceGlowStrengthMax());if(n==t)return void pl(this,ul,"f").setStudioLightMode(!1);pl(this,ul,"f").getStudioLightMode()||pl(this,ul,"f").setStudioLightMode(!0),pl(this,ul,"f").setFaceGlowStrength(n)}}handleNoiseReduction(e){pl(this,ul,"f").setDenoiseMode(e)}handleAutoFraming(e){pl(this,ul,"f").setAutoframeMode(e)}}ul=new WeakMap,dl=new WeakMap;var yl,_l,wl,bl=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},kl=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},Sl=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};const El=xe()("vxt:video:processor");class Tl extends Md{constructor(e,t,n){super(t),yl.set(this,void 0),_l.set(this,void 0),wl.set(this,!1),kl(this,_l,e,"f"),kl(this,yl,n,"f")}static create(e,t,n){return bl(this,void 0,void 0,(function*(){const r=new MediaStream([e.getMediaStreamTrack()]),i=yield vl.create(r,n),o=yield i.getOutputStream();if(!o||!o.getVideoTracks().length)throw new He("Failed to initialize a video processor engine.");const a=o.getVideoTracks()[0],s=new Tl(e,a,i);return i.setProcessingErrorCallback((e=>bl(this,void 0,void 0,(function*(){Sl(s,wl,"f")||t&&(yield s.stop(),yield t(e),t=null)})))),i.start(),s}))}setProcessorOptions(e){return bl(this,void 0,void 0,(function*(){return Sl(this,yl,"f").setOptions(e)}))}getProcessorOptions(){return Sl(this,yl,"f").getOptions()}getInputTrack(){return Sl(this,_l,"f")}setInputTrack(e){return bl(this,void 0,void 0,(function*(){const t=new MediaStream([e.getMediaStreamTrack()]);yield Sl(this,yl,"f").changeInputStream(t),kl(this,_l,e,"f")}))}stop(){return bl(this,void 0,void 0,(function*(){Sl(this,wl,"f")||(this.mediaStreamTrack&&(yield this.mediaStreamTrack.stop()),Sl(this,yl,"f")&&Sl(this,yl,"f").stop(),kl(this,wl,!0,"f"))}))}applyConstraints(e){return bl(this,void 0,void 0,(function*(){void 0!==(null==e?void 0:e.frameRate)&&("number"==typeof e.frameRate?yield Sl(this,yl,"f").changeOutputStreamFrameRate(e.frameRate):El("'frameRate' defiend as a range is not supported"))}))}get engine(){return Sl(this,yl,"f")}}yl=new WeakMap,_l=new WeakMap,wl=new WeakMap;var Cl;class jl{static merge(e,t){return Object.assign(Object.assign({},e),t)}static getDefaultConstraints(){return bn.isFirefox?{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:25}}:{width:{max:1280,ideal:1280},height:{max:720,ideal:720},frameRate:{max:25,ideal:25}}}static getBandwidthConstraints(e){if(e<=0)return{};const t=(bn.isMobile||"undefined"!=typeof navigator&&"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1?Yn.videoSettings.mobile:Yn.videoSettings.desktop).find((t=>e>t.range.min&&e<=t.range.max));return t?bn.isFirefox?{width:{ideal:t.dimensions.width},height:{ideal:t.dimensions.height},frameRate:{ideal:t.fps}}:{width:{max:t.dimensions.width,ideal:t.dimensions.width},height:{max:t.dimensions.height,ideal:t.dimensions.height},frameRate:{max:t.fps,ideal:t.fps}}:{}}static applyBandwidthConstraintsIfNeeded(e,t,n,r,i){var o,a,s,c,u;return a=this,s=void 0,u=function*(){const a=jl.getBandwidthConstraints(n);if(!a)return void console.warn("Failed to adapt video quality to bandwidth. Video constraints are undefined.");const s=null!==(o=e.getConstraints())&&void 0!==o?o:{};let c=!1;if(r&&(el()(s.width,a.width)||(s.width=a.width,c=!0),el()(s.height,a.height)||(s.height=a.height,c=!0)),i&&(el()(s.frameRate,a.frameRate)||(s.frameRate=a.frameRate,c=!0)),c)try{if(yield e.applyConstraints(s),t&&(null==s?void 0:s.frameRate)){const n=e.getMediaStreamTrack().getSettings().frameRate;yield t.applyConstraints({frameRate:n})}}catch(e){console.warn("Failed to adapt video quality to bandwidth",e)}},new((c=void 0)||(c=Promise))((function(e,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function r(e){try{i(u.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):(i=t.value,i instanceof c?i:new c((function(e){e(i)}))).then(n,r)}i((u=u.apply(a,s||[])).next())}))}static remove(e,t){if(!e)return[e,[]];if(!t)return[e,[]];const n=[],r=Object.assign({},e);return t.forEach((e=>{r[e]&&(n.push(e),delete r[e])})),[r,n]}}!function(e){e.Bokeh="bokeh",e.BackgroundReplacement="backgroundreplacement",e.None="none"}(Cl||(Cl={}));const xl={},Pl=new La(ji),Il=e=>{xl[e]=new La(ji)};Ae.on(Ce.ParticipantAdded,(e=>{xl[e.userId]||Il(e.userId)})),Ae.on(Ce.ParticipantUpdated,(e=>{var t;"LEFT"===e.status&&(t=e.userId,delete xl[t])}));const Ml=e=>(xl[e]||Il(e),xl[e]),Rl=()=>Pl;function Al(e){var t,n,r,i,o;return n=this,r=void 0,o=function*(){try{const n=yield null===(t=null===navigator||void 0===navigator?void 0:navigator.permissions)||void 0===t?void 0:t.query({name:e});return"granted"===(null==n?void 0:n.state)}catch(t){return console.debug(`failed to perform permissions.query(${e}), returning null`),null}},new((i=void 0)||(i=Promise))((function(e,t){function a(e){try{c(o.next(e))}catch(e){t(e)}}function s(e){try{c(o.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(a,s)}c((o=o.apply(n,r||[])).next())}))}var Dl,Ol,Nl,Fl,Ll,zl,Ul,Vl,Bl,Wl,Gl=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Hl=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},Yl=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},$l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const Zl=xe()("vxt:video:local");function ql(e){return null!=e}function Xl(e){return"number"==typeof e}function Kl(e){return"boolean"==typeof e}function Jl(e,t,n){return t<=e&&e<=n}var Ql;!function(e){e.VideoStarted="videoStarted",e.VideoStopped="videoStopped",e.VideoUpdated="videoUpdated",e.VideoInternalError="videoInternalError"}(Ql||(Ql={}));let eh=class extends ut{constructor(e,t){super(e),Dl.set(this,null),Ol.set(this,null),Nl.set(this,null),Fl.set(this,!0),Ll.set(this,!0),zl.set(this,void 0),Ul.set(this,new Bd(1e4)),Vl.set(this,!1),Bl.set(this,!1),Wl.set(this,!0),Hl(this,zl,t,"f"),t.setOnVideoDeviceIdChangedCallback(this.changeCameraDeviceId.bind(this))}start(e,t){return Gl(this,void 0,void 0,(function*(){const n=yield this.createSchedulerParamsForStartVideo();return Rl().execute((()=>this.startLocalVideo(e,t)),n)}))}createSchedulerParamsForStartVideo(){return Gl(this,void 0,void 0,(function*(){return{info:"start local participant video",customMaxExecutionTimeMs:(yield Al("camera"))?ji:2*Ci}}))}startLocalVideo(e,t){var n,r,i;return Gl(this,void 0,void 0,(function*(){if(Yl(this,Vl,"f")||Yl(this,Bl,"f"))throw new Be("Local video is not available to listeners and in an audio-only conference.");if(!Yl(this,Wl,"f"))throw Je();let o,a,s;const c=this.adjustVideoProcessorOptionsOrThrow(t);if(e instanceof MediaStreamTrack){if("video"!==e.kind)throw new Ye("Failed to start a video. The user-provided media stream track must be 'video' kind.");s=Xd.custom(e,c),o=a=!1}else{const t=e?Object.assign({},e):void 0;s=Xd.camera(t,c),o=!((null===(n=s.constraints)||void 0===n?void 0:n.width)||(null===(r=s.constraints)||void 0===r?void 0:r.height)),a=!(null===(i=s.constraints)||void 0===i?void 0:i.frameRate)}let u;try{return u=yield xi(this.createLocalVideo(s),2*Ci,"startLocalVideo (createLocalVideo)"),yield xi((()=>Gl(this,void 0,void 0,(function*(){let e;s.processorOptions&&(e=yield this.createProcessedVideo(u,s.processorOptions));let t=null;this.isLocalVideoAttached()&&(t=this.detachLocalVideo()),this.isProcessedVideoAttached()&&(t=this.detachProcessedVideo()),t&&(yield this.onVideoStopped(t.getMediaStreamTrack())),this.attachLocalVideo(u),e&&this.attachProcessedVideo(e),Hl(this,Dl,s,"f"),Hl(this,Fl,o,"f"),Hl(this,Ll,a,"f"),Yl(this,Dl,"f").isCamera()&&(yield Yl(this,zl,"f").setNewDeviceId(u.getMediaStreamTrack().getSettings().deviceId));const n=e||u;return yield this.onVideoStarted(n.getMediaStreamTrack()),n.getMediaStreamTrack()})))(),ji,"startLocalVideo (iife)")}catch(e){throw u&&u.stop().catch((e=>Zl("Failed to stop a local video.",e))),e}}))}stop(){return Gl(this,void 0,void 0,(function*(){const e={info:"stop local participant video",customMaxExecutionTimeMs:ji};return Rl().execute((()=>this.stopLocalVideo()),e)}))}stopLocalVideo(){return Gl(this,void 0,void 0,(function*(){Hl(this,Fl,!0,"f"),Hl(this,Ll,!0,"f"),Hl(this,Dl,null,"f");let e=null;this.isLocalVideoAttached()&&(e=this.detachLocalVideo()),this.isProcessedVideoAttached()&&(e=this.detachProcessedVideo()),e&&(yield this.onVideoStopped(e.getMediaStreamTrack()))}))}setProcessor(e){return Gl(this,void 0,void 0,(function*(){return Rl().execute((()=>this.setProcessorInternal(e)),{info:"set video processor for local video"})}))}setProcessorInternal(e){return Gl(this,void 0,void 0,(function*(){if(null==e)throw new Ye("Argument 'processor' is missing but required.");const t=this.adjustVideoProcessorOptionsOrThrow(e);if(this.isProcessedVideoAttached()){const{flags:e}=t,n=$l(t,["flags"]);e&&Zl("Video processor is already enabled. Skip video processor flags."),yield this.getProcessedVideo().setProcessorOptions(n),Yl(this,Dl,"f").processorOptions=Object.assign(Object.assign({},Yl(this,Dl,"f").processorOptions),t)}else{if(!this.isLocalVideoAttached())throw new Be("Failed to set the video processor. The local video isn't started.");const e=yield this.createProcessedVideo(this.getLocalVideo(),t);this.attachProcessedVideo(e),Yl(this,Dl,"f").processorOptions=t,yield this.onVideoUpdated(e.getMediaStreamTrack())}}))}disableProcessing(){return Gl(this,void 0,void 0,(function*(){return Rl().execute((()=>this.disableProcessingInternal()),{info:"disable video processor for local video"})}))}disableProcessingInternal(){return Gl(this,void 0,void 0,(function*(){this.isProcessedVideoAttached()&&(this.detachProcessedVideo(),Yl(this,Dl,"f").processorOptions=void 0,yield this.onVideoUpdated(this.getLocalVideo().getMediaStreamTrack()))}))}applyConstraints(e){return Gl(this,void 0,void 0,(function*(){if(!this.isLocalVideoAttached())throw new Be("Failed to apply the constraints. The local video isn't started.");if(!e)return;const[t,n]=jl.remove(e,["deviceId","groupId"]);if(n.length&&Zl(`Invalid constraints: ${JSON.stringify(n)} are not allowed and will be skipped.`),e=t,Object.keys(e).length){if(yield this.getLocalVideo().applyConstraints(e),this.isProcessedVideoAttached()&&e.frameRate){const e=this.getLocalVideo().getMediaStreamTrack().getSettings().frameRate;yield this.getProcessedVideo().applyConstraints({frameRate:e})}void 0!==e.frameRate&&Hl(this,Ll,!1,"f"),void 0===e.height&&void 0===e.width||Hl(this,Fl,!1,"f")}}))}emitLocalVideoStarted(e){Ae.send(Te.LocalVideoStarted.fromData({track:e})),Zl("Local video track started:",e),this.emit(Ql.VideoStarted,e)}emitLocalVideoStopped(e){Ae.send(Te.LocalVideoStopped.fromData({track:e})),Zl("Local video track stopped:",e),this.emit(Ql.VideoStopped,e)}emitLocalVideoUpdated(e){Ae.send(Te.LocalVideoUpdated.fromData({track:e})),Zl("Local video track updated:",e),this.emit(Ql.VideoUpdated,e)}emitLocalVideoInternalError(e){this.emit(Ql.VideoInternalError,e)}changeCameraDeviceId(e){return Gl(this,void 0,void 0,(function*(){if(!this.isLocalVideoAttached())return;let t,n;t=this.isLocalVideoCustom()?jl.merge(jl.getDefaultConstraints(),{deviceId:e}):jl.merge(this.getLocalVideoAsCamera().getConstraints(),{deviceId:e});try{n=yield Nd.create(t)}catch(e){return this.emitLocalVideoInternalError(e),void this.stop().catch((e=>Zl("Failed to stop a local video.",e)))}if(this.isProcessedVideoAttached()){let e;try{e=yield this.createProcessedVideo(n,Yl(this,Dl,"f").processorOptions)}catch(e){return n.stop().catch((e=>Zl("Failed to stop a local video.",e))),this.emitLocalVideoInternalError(e),void this.stop().catch((e=>Zl("Failed to stop a local video.",e)))}this.detachLocalVideo(),this.detachProcessedVideo(),this.attachLocalVideo(n),this.attachProcessedVideo(e),yield this.onVideoUpdated(e.getMediaStreamTrack())}else this.detachLocalVideo(),this.attachLocalVideo(n),yield this.onVideoUpdated(n.getMediaStreamTrack())}))}onBandwidthRestrictionChanged(e){(Yl(this,Fl,"f")||Yl(this,Ll,"f"))&&this.isLocalVideoCamera()&&jl.applyBandwidthConstraintsIfNeeded(this.getLocalVideoAsCamera(),this.getProcessedVideo(),e.bandwidth,Yl(this,Fl,"f"),Yl(this,Ll,"f"))}onUpdateToken(e){const t=Mo(e.conferenceAccessToken);new Set(t.authorities).has(ko.SendVideo)?Hl(this,Wl,!0,"f"):(Hl(this,Wl,!1,"f"),this.stop())}handleProcessingError(e){return Gl(this,void 0,void 0,(function*(){Yl(this,Ul,"f").hit();const t=Yl(this,Ul,"f").hitsInLastXTime(5e3);if(Zl("Number of video processor errors in last",5,"seconds:",t),this.emitLocalVideoInternalError(e),t>=3)return Yl(this,Ul,"f").reset(),console.error("The video processor has stopped. Too many errors. Last error: ",e),void this.stop().catch((e=>Zl("Failed to stop a local video.",e)));Zl("Video processor unit restarting...");try{const e=yield this.createProcessedVideo(this.getLocalVideo(),Yl(this,Dl,"f").processorOptions);this.detachProcessedVideo(),this.attachProcessedVideo(e),yield this.onVideoUpdated(e.getMediaStreamTrack())}catch(t){Zl("Failed to restart a video processor unit",t),this.emitLocalVideoInternalError(t),console.error("The video processor has stopped.",e),this.stop().catch((e=>Zl("Failed to stop a local video.",e)))}}))}getLocalVideo(){return Yl(this,Ol,"f")}getLocalVideoAsCamera(){return Yl(this,Ol,"f")}isLocalVideoCamera(){return Yl(this,Ol,"f")instanceof Nd}isLocalVideoCustom(){return Yl(this,Ol,"f")instanceof Fd}attachLocalVideo(e){Hl(this,Ol,e,"f")}detachLocalVideo(){const e=Yl(this,Ol,"f");return Hl(this,Ol,null,"f"),e.stop().catch((e=>Zl("Failed to stop a local video",e))),e}isLocalVideoAttached(){return null!==Yl(this,Ol,"f")}createLocalVideo(e){var t;return Gl(this,void 0,void 0,(function*(){if(e.isCustom())return Fd.create(e.asCustom().userVideoTrack);if(e.isCamera()){let n=e.asCamera().constraints;return n=n?Object.assign(Object.assign({},jl.getDefaultConstraints()),n):jl.getDefaultConstraints(),null!==(t=n.deviceId)&&void 0!==t||(n.deviceId=Yl(this,zl,"f").getCurrentDeviceId()),Nd.create(n)}}))}getProcessedVideo(){return Yl(this,Nl,"f")}attachProcessedVideo(e){Hl(this,Nl,e,"f")}detachProcessedVideo(){const e=Yl(this,Nl,"f");return Hl(this,Nl,null,"f"),e.stop().catch((e=>Zl("Failed to stop a processed video",e))),e}isProcessedVideoAttached(){return null!==Yl(this,Nl,"f")}createProcessedVideo(e,t){return Gl(this,void 0,void 0,(function*(){let n;try{const{flags:r}=t,i=$l(t,["flags"]);return n=yield Tl.create(e,this.handleProcessingError.bind(this),r),yield n.setProcessorOptions(i),n}catch(e){throw n&&n.stop().catch((e=>Zl("Failed to stop processed video",e))),e}}))}adjustVideoProcessorOptionsOrThrow(e){var t,n,r;if(!ql(e))return e;if(e=Object.assign({},e),!bn.isVideoProcessingSupported)throw new Be("The video processor feature is unsupported on your browser");if(ql(e.type)){if(ql(e.virtualBackground))console.warn("'type' property is deprecated and has no effect if 'virtualBackground' is defined.");else{console.warn("'type' property is deprecated. Please consider to use 'virtualBackground' property instead.");const t=[Cl.Bokeh,Cl.BackgroundReplacement];if([...t,Cl.None].indexOf(e.type)<0)throw new Ye(`Invalid argument: Video processor type '${e.type}' is unknown. Possible types: ${JSON.stringify(t)}.`);if(e.type===Cl.None)e.virtualBackground=!1;else if(e.type===Cl.Bokeh)e.virtualBackground="bokeh";else if(e.type===Cl.BackgroundReplacement){if(void 0===e.image||null===e.image||!(e.image instanceof HTMLImageElement))throw new Ye(`Invalid argument: Property 'image' is missing. The property is required for '${e.type}' processor.`);e.virtualBackground=e.image}}delete e.type,delete e.image}if(ql(e.virtualBackground))if(!1===e.virtualBackground);else if(e.virtualBackground instanceof HTMLVideoElement);else if(e.virtualBackground instanceof HTMLImageElement){if(!e.virtualBackground.complete)throw new Ye("Invalid argument: The image is not fully loaded. A decoded image is expected.")}else if("bokeh"!==e.virtualBackground)throw new Ye("Invalid argument: Type of 'virtualBackground' is invalid. Possible value types: false | \"bokeh\" | HTMLVideoElement | HTMLImageElement");if(ql(e.facialSmoothing))if(!1===e.facialSmoothing);else{if(!Xl(e.facialSmoothing))throw new Ye("Invalid argument: Type of 'facialSmoothing' is invalid. Possible value types: false | number");{const t=0,n=1;if(!Jl(e.facialSmoothing,t,n))throw new Ye(`Invalid argument: 'facialSmoothing' is out of range. The argument must be in range [${t}, ${n}]`)}}if(ql(e.spotLight))if(!1===e.spotLight);else{if(!Xl(e.spotLight))throw new Ye("Invalid argument: Type of 'spotLight' is invalid. Possible value types: false | number");{const t=0,n=1;if(!Jl(e.spotLight,t,n))throw new Ye(`Invalid argument: 'spotLight' is out of range. The argument must be in range [${t}, ${n}]`)}}if(ql(e.autoBrightness)&&!Kl(e.autoBrightness))throw new Ye("Invalid argument: Type of 'autoBrightness' is invalid. Boolean value is expected.");if(ql(e.noiseReduction)&&!Kl(e.noiseReduction))throw new Ye("Invalid argument: Type of 'noiseReduction' is invalid. Boolean value is expected.");if(ql(e.autoFraming)&&!Kl(e.autoFraming))throw new Ye("Invalid argument: Type of 'autoFraming' is invalid. Boolean value is expected.");return null!==(t=e.flags)&&void 0!==t||(e.flags={}),null!==(n=(r=e.flags).nonBlockingAsyncPixelReadback)&&void 0!==n||(r.nonBlockingAsyncPixelReadback=!0),e}onConferenceJoined(e){var t;super.onConferenceJoined(e),Hl(this,Vl,!!e.listenOnly,"f"),Hl(this,Bl,"NONE"===(null===(t=e.parameters)||void 0===t?void 0:t.videoCodec),"f")}onConferenceLeft(e){super.onConferenceLeft(e),Hl(this,Vl,!1,"f"),Hl(this,Bl,!1,"f")}onVideoStarted(e){return this.emitLocalVideoStarted(e),this._conferenceId?jp.conference.manager.startVideoForLocalPeer(e).then((t=>e)).catch((e=>console.error(e))):Promise.resolve(e)}onVideoStopped(e){return this.emitLocalVideoStopped(e),this._conferenceId?jp.conference.manager.stopVideoForLocalPeer().catch((t=>console.error(t,e))):Promise.resolve()}onVideoUpdated(e){return Gl(this,void 0,void 0,(function*(){return this.emitLocalVideoUpdated(e),this._conferenceId?jp.conference.manager.onLocalVideoUpdated(e).catch((t=>console.error(t,e))):Promise.resolve()}))}};Dl=new WeakMap,Ol=new WeakMap,Nl=new WeakMap,Fl=new WeakMap,Ll=new WeakMap,zl=new WeakMap,Ul=new WeakMap,Vl=new WeakMap,Bl=new WeakMap,Wl=new WeakMap,eh=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}([dt([Ce.BandwidthRestrictionChanged,Ce.UpdateToken])],eh);var th,nh,rh=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},ih=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};const oh=xe()("vxt:video:local");function ah(e,t,n){t.on(e,((...t)=>n.emit(e,...t)))}class sh extends ut{constructor(e,t,n){super(e),th.set(this,void 0),nh.set(this,void 0),rh(this,th,t,"f"),rh(this,nh,n,"f"),ah(Ql.VideoStarted,t,this),ah(Ql.VideoStopped,t,this),ah(Ql.VideoUpdated,t,this),t.on(Ql.VideoInternalError,(e=>this.onInternalError(e)))}start(e,t){return ih(this,th,"f").start(e,t).then((n=>(e instanceof MediaStreamTrack?ih(this,nh,"f").customVideoStarted("start",t):ih(this,nh,"f").cameraVideoStarted("start",e,t),n))).catch((n=>{throw this.shouldReport(n)&&this.reportError(n),e instanceof MediaStreamTrack?ih(this,nh,"f").customVideoStartFailed("start",n,t):ih(this,nh,"f").cameraVideoStartFailed("start",n,e,t),n}))}stop(){return ih(this,th,"f").stop().then((()=>ih(this,nh,"f").localVideoStopped("stop"))).catch((e=>{throw this.shouldReport(e)&&this.reportError(e),ih(this,nh,"f").localVideoStopFailed("stop",e),e}))}setProcessor(e){return ih(this,th,"f").setProcessor(e).then((()=>ih(this,nh,"f").videoProcessorEnabled("setProcessor",e))).catch((t=>{throw this.shouldReport(t)&&this.reportError(t),ih(this,nh,"f").videoProcessorEnableFailed("setProcessor",t,e),t}))}disableProcessing(){return ih(this,th,"f").disableProcessing().then((()=>ih(this,nh,"f").videoProcessorDisabled("disableProcessing"))).catch((e=>{throw this.shouldReport(e)&&this.reportError(e),ih(this,nh,"f").videoProcessorDisableFailed("disableProcessing",e),e}))}applyConstraints(e){return ih(this,th,"f").applyConstraints(e).then((()=>ih(this,nh,"f").videoConstraintsApplied("applyConstraints",e))).catch((t=>{throw this.shouldReport(t)&&this.reportError(t),ih(this,nh,"f").videoConstraintsApplyField("applyConstraints",t,e),t}))}isConferenceActive(){return!!this._conferenceId}isEligibleToReport(e){return e instanceof Ne&&"OverconstrainedError"!==e.name||e instanceof He}onInternalError(e){this.isConferenceActive()&&this.isEligibleToReport(e)?this.reportError(e):console.error(e)}reportError(e){try{Ae.send(Te.ConferenceGlobalError.fromData(e))}catch(e){oh(e)}}shouldReport(e){return e instanceof Ei||e instanceof Fa||e instanceof He||e instanceof Ne}onSessionClosed(){super.onSessionClosed(),ih(this,th,"f").stop().catch((e=>oh("Failed to stop video on session closed event")))}}th=new WeakMap,nh=new WeakMap,function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);o>3&&a&&Object.defineProperty(t,n,a)}([("Cannot start video when session is closed. Please open a session first.",function(e,t,n){const r=n.value;return n.value=function(...t){try{e.checkSession.call(this,"Cannot start video when session is closed. Please open a session first.")}catch(e){return Promise.reject(e)}return r.apply(this,t)},n})],sh.prototype,"start",null);var ch,uh=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},dh=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},lh=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n};class hh extends ut{constructor(e){super(e),ch.set(this,!1)}start(e){return Ml(e.id).execute((()=>this.startRemoteVideo(e)),{info:"start remote participant video"})}startRemoteVideo(e){if(dh(this,ch,"f"))throw new Be("Starting a remote video is not available to a client who joined as an RTS viewer.");return wt.conferences.startMedia({conferenceId:this._conferenceId,peerId:e.id,data:{index:0,label:"camera",media:["video"]}})}stop(e){return Ml(e.id).execute((()=>this.stopRemoteVideo(e)),{info:"stop remote participant video"})}stopRemoteVideo(e){if(dh(this,ch,"f"))throw new Be("Stopping a remote video is not available to a client who joined as an RTS viewer.");return wt.conferences.stopMedia({conferenceId:this._conferenceId,peerId:e.id,data:{index:0,label:"camera",media:["video"]}})}onConferenceJoined(e){super.onConferenceJoined(e),lh(this,ch,e.isJoinedAsRTSViewer(),"f")}onConferenceLeft(e){super.onConferenceLeft(e),lh(this,ch,!1,"f")}}ch=new WeakMap,uh([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],hh.prototype,"startRemoteVideo",null),uh([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],hh.prototype,"stopRemoteVideo",null);const ph={setCaptureMode:function(e={mode:cr.Standard},t){return n=this,r=void 0,o=function*(){var e;jp.conference.manager.updateRenegotiableJoinOptions((e=t.mode,Pi[e]))},new((i=void 0)||(i=Promise))((function(e,t){function a(e){try{c(o.next(e))}catch(e){t(e)}}function s(e){try{c(o.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(a,s)}c((o=o.apply(n,r||[])).next())}));var n,r,i,o}},fh=e=>new ie({level:"info",action:"AudioCaptureModeChanged",description:"Audio capture mode has been updated.",component:"LocalAudio",api:"setCaptureMode",payload:e}),mh=(e,t)=>new ie({level:"error",action:"AudioCaptureModeError",description:e,component:"LocalAudio",api:"setCaptureMode",payload:t});const gh={setCaptureMode:function(e,t){var n,r,i,o,a;return r=this,i=void 0,a=function*(){try{(null===(n=t.modeOptions)||void 0===n?void 0:n.echoCancellation)&&(yield jp.conference.manager.rtc.setEchoCancellation(t.modeOptions.echoCancellation)),yield jp.conference.manager.rtc.setCaptureMode(t),Ae.send(fh([t]))}catch(e){Ae.send(mh(e.message||"Error while setting capture mode",[t]))}},new((o=void 0)||(o=Promise))((function(e,t){function n(e){try{c(a.next(e))}catch(e){t(e)}}function s(e){try{c(a.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(n,s)}c((a=a.apply(r,i||[])).next())}))}};var vh=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const yh=xe()("vxt:audio:captureMode:opus"),_h=new La(2*Ci),wh={renegotiateRequestOptions:Pi.unprocessed,sendRequest:!0},bh={renegotiateRequestOptions:Pi.music,sendRequest:!0};let kh;const Sh={setCaptureMode:function(e,t,{isDapmReady:n,shouldUpdateProcessing:r}){return vh(this,void 0,void 0,(function*(){(null==kh?void 0:kh.signal)&&!kh.signal.aborted&&kh.abort(),kh=new AbortController,n(null==kh?void 0:kh.signal).then((n=>{_h.execute((()=>function(e,t,n,r){return vh(this,void 0,void 0,(function*(){const{renegotiateRequestOptions:i,sendRequest:o}=function(e,t){if(t.mode===cr.Unprocessed)return wh;if(t.mode===cr.Standard)return n=e,r=t,{renegotiateRequestOptions:jp.conference.manager.initialRenegotiableOptions,sendRequest:!(n.mode===cr.Standard&&r.mode===cr.Standard)};if(t.mode===cr.Music)return bh;{const e="This capture mode is not supported by WebRTC Opus.";throw Ae.send(mh(e,[t])),new Be(e)}var n,r}(e,t),a=Object.assign({},wr(t,pr.NON_DV_OPUS,n));yield jp.conference.manager.renegotiateCaptureMode(i,a,t,o,r),Ae.send(fh([t]))}))}(e,t,n,r)))})).catch((e=>{if("aborted"!==e)throw e;yh("canceled scheduled capture mode request because there is a new one")}))}))}};var Eh,Th,Ch,jh,xh,Ph=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Ih=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},Mh=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};const Rh=xe()("vxt:audio:captureMode:opusDvc"),Ah={renegotiateRequestOptions:Pi.unprocessed,sendRequest:!0},Dh={renegotiateRequestOptions:Pi.music,sendRequest:!0},Oh=new La(2*Ci);class Nh{constructor(e,t){Eh.set(this,!0),Th.set(this,!0),Ch.set(this,void 0),jh.set(this,void 0),xh.set(this,void 0),Ih(this,Ch,e,"f"),Ih(this,jh,t,"f")}setCaptureMode(e,t,{participantId:n,conferenceId:r,isDapmReady:i,shouldUpdateProcessing:o}){return Ph(this,void 0,void 0,(function*(){this.isThereAnyPendingWaitingForDapmTaskController()&&Mh(this,xh,"f").abort(),i(this.registerWaitingForDapmTaskController()).then((i=>{Oh.execute((()=>this.performSetCaptureModeSteps(e,t,n,r,i,o)))})).catch((e=>{if("aborted"!==e)throw e;Rh("canceled scheduled capture mode request because there is a new one")}))}))}performSetCaptureModeSteps(e,t,n,r,i,o){return Ph(this,void 0,void 0,(function*(){Ih(this,Eh,this.getAudioProcessingValue(t),"f");const{renegotiateRequestOptions:a,sendRequest:s}=this.getRenegotiateOptions(e,t),c=Object.assign({},wr(t,pr.DV_OPUS,i));yield Mh(this,Ch,"f").call(this,a,c,t,s,o),Ae.send(fh([t])),yield this.updateProcessing(r,n,i)}))}getRenegotiateOptions(e,t){if(t.mode===cr.Unprocessed)return Ah;if(t.mode===cr.Standard)return this.getModeStandardRenegotiateOptions(e,t);if(t.mode===cr.Music)return Dh;{const e="This capture mode is not supported by WebRTC Opus.";throw Ae.send(mh(e,[t])),new Be(e)}}getModeStandardRenegotiateOptions(e,t){return{renegotiateRequestOptions:Mh(this,jh,"f").call(this),sendRequest:!(e.mode===cr.Standard&&t.mode===cr.Standard)}}updateProcessing(e,t,n){return Ph(this,void 0,void 0,(function*(){const r=Mh(this,Eh,"f")&&!n;Mh(this,Th,"f")!==r&&(yield wt.conferences.audioUpdate({conferenceId:e,peerId:t,data:{opusProcessing:{enabled:r}}})),Ih(this,Th,r,"f")}))}getAudioProcessingValue(e){var t;return"high"===(null===(t=e.modeOptions)||void 0===t?void 0:t.noiseReductionLevel)}init(e,t,n,r){return Ph(this,void 0,void 0,(function*(){Ih(this,Th,!0,"f");try{this.isThereAnyPendingWaitingForDapmTaskController()&&(Rh("init shall be a first function that calls isDapmReady callback, this shouldn't happen"),Mh(this,xh,"f").abort()),Ih(this,Eh,this.getAudioProcessingValue(r),"f");const i=yield n(this.registerWaitingForDapmTaskController());yield this.updateProcessing(e,t,i)}catch(e){if("aborted"!==e)throw e;Rh("canceled initial audio processing update, as new task will do that")}}))}isThereAnyPendingWaitingForDapmTaskController(){var e,t;return(null===(e=Mh(this,xh,"f"))||void 0===e?void 0:e.signal)&&!(null===(t=Mh(this,xh,"f"))||void 0===t?void 0:t.signal.aborted)}registerWaitingForDapmTaskController(){return Ih(this,xh,new AbortController,"f"),Mh(this,xh,"f").signal}}Eh=new WeakMap,Th=new WeakMap,Ch=new WeakMap,jh=new WeakMap,xh=new WeakMap;const Fh=Object.freeze({mode:cr.Standard,modeOptions:Object.freeze({noiseReductionLevel:ur.High})});function Lh(e){const t=e.toLocaleLowerCase();switch(t){case"none":return t;case"abyss":return Qr.ABYSS;case"amradio":return Qr.AMRADIO;case"brokenrobot":return Qr.BROKENROBOT;case"darkmodulation":return Qr.DARKMODULATION;case"feminine":return Qr.FEMININE;case"helium":return Qr.HELIUM;case"interference":return Qr.INTERFERENCE;case"masculine":return Qr.MASCULINE;case"nervousrobot":return Qr.NERVOUSROBOT;case"starshipcaptain":return Qr.STARSHIPCAPTAIN;case"swarm":return Qr.SWARM;case"wobble":return Qr.WOBBLE;default:throw new Ye("Invalid voice font specified for standard capture mode.")}}var zh,Uh,Vh,Bh,Wh,Gh,Hh,Yh=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},$h=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Zh=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},qh=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};const Xh=(e,t)=>new ie({level:"error",action:"MediaConstraintsError",description:e,component:"LocalAudio",api:"applyConstraints",payload:t}),Kh=(e,t)=>new ie({level:"warn",action:"MediaConstraintsWarning",description:e,component:"LocalAudio",api:"applyConstraints",payload:t});let Jh=class extends ut{constructor(e,t){super(e),zh.set(this,void 0),Uh.set(this,!0),Vh.set(this,void 0),Bh.set(this,void 0),Wh.set(this,void 0),Gh.set(this,!0),Hh.set(this,void 0),Zh(this,zh,t,"f"),Zh(this,Vh,Fh,"f"),Zh(this,Hh,new Nh(((...e)=>jp.conference.manager.renegotiateCaptureMode(...e)),(()=>jp.conference.manager.initialRenegotiableOptions)),"f")}getCaptureMode(){return $h(this,void 0,void 0,(function*(){return qh(this,Vh,"f")}))}pickCaptureModeStrategy(){if(this._conferenceId){if(jp.conference.manager.isDvwc())return gh;if(jp.conference.manager.isOpus())return qh(this,Wh,"f")?qh(this,Hh,"f"):Sh;throw"None capture mode matches, this shouldn't happen"}return ph}setCaptureMode(e){var t,n,r,i;return $h(this,void 0,void 0,(function*(){if([p.LISTENER,p.MIXER].includes(null===(t=qh(this,zh,"f").participant)||void 0===t?void 0:t.type))throw new Be;this.validateAudioCaptureOptions(e);const o={conferenceId:this._conferenceId,participantId:null===(r=null===(n=qh(this,zh,"f"))||void 0===n?void 0:n.participant)||void 0===r?void 0:r.id,isDapmReady:e=>jp.conference.manager.rtc.awaitDapmReady(e),shouldUpdateProcessing:this.shouldUpdateProcessing()};let a=e;(null===(i=e.modeOptions)||void 0===i?void 0:i.voiceFont)&&(a=Object.assign(Object.assign({},e),{modeOptions:Object.assign(Object.assign({},e.modeOptions),{voiceFont:Lh(e.modeOptions.voiceFont)})})),yield this.pickCaptureModeStrategy().setCaptureMode(qh(this,Vh,"f"),a,o),Zh(this,Vh,e,"f"),Zh(this,Uh,!1,"f")}))}shouldUpdateProcessing(){var e;const t=(bn.isChrome||bn.isEdge)&&Kn(),n=null===(e=jp.conference.manager.rtc)||void 0===e?void 0:e.dapmWasmFileStatus,r=n===Ar.FAILED||n===Ar.FETCHED;return!t||r}validateAudioCaptureOptions(e){var t;if(!e||!e.mode||!Object.values(cr).includes(null==e?void 0:e.mode))throw new Ye("Unable to change audio capture mode. Please provide a valid audio capture mode.");if("standard"===e.mode&&(null===(t=e.modeOptions)||void 0===t?void 0:t.noiseReductionLevel)&&!Object.values(ur).includes(e.modeOptions.noiseReductionLevel))throw new Ye("Invalid noise reduction level specified for standard capture mode.");if("music"===e.mode&&e.modeOptions&&!Object.values(lr).includes(e.modeOptions.echoCancellation))throw new Ye("Invalid echo cancellation value specified for music capture mode.");if("unprocessed"===e.mode&&e.modeOptions)throw new Ye("Mode options should not be provided for unprocessed capture mode.");return!0}getComfortNoiseLevel(){return $h(this,void 0,void 0,(function*(){if(!this._conferenceId)return qh(this,Bh,"f");if(jp.conference.manager.isDvwc()||jp.conference.manager.isElectron())return jp.conference.manager.rtc.getComfortNoiseLevel();throw new Be("getComfortNoiseLevel is not supported for Opus.")}))}setComfortNoiseLevel(e){return $h(this,void 0,void 0,(function*(){if(Zh(this,Bh,e,"f"),this._conferenceId){if(jp.conference.manager.isDvwc()||jp.conference.manager.isElectron())return new Promise(((t,n)=>$h(this,void 0,void 0,(function*(){yield jp.conference.manager.rtc.setComfortNoiseLevel(e).then((()=>{Ae.send(new ie({level:"info",action:"ComfortNoiseLevelChanged",description:"The comfort noise level has been updated.",component:"LocalAudio",api:"setComfortNoiseLevel",payload:[e]})),t()}),(t=>{Ae.send(new ie({level:"error",action:"ComfortNoiseLevelError",description:t.message||"Error while setting comfort noise level",component:"LocalAudio",api:"setComfortNoiseLevel",payload:[e]})),n(t)}))}))));throw Ae.send(new ie({level:"error",action:"ComfortNoiseLevelChanged",description:"setComfortNoiseLevel is not supported for Opus.",component:"LocalAudio",api:"setComfortNoiseLevel",payload:[e]})),new Be("setComfortNoiseLevel is not supported for Opus.")}}))}start(e){return $h(this,void 0,void 0,(function*(){const t=yield this.createSchedulerParamsForStartAudio();try{return yield Rl().execute((()=>this.startLocalAudio(e)),t)}catch(e){throw this.shouldReport(e)&&Ae.send(Te.ConferenceGlobalError.fromData(e)),e}}))}createSchedulerParamsForStartAudio(){return $h(this,void 0,void 0,(function*(){return{info:"start local participant audio",customMaxExecutionTimeMs:(yield Al("microphone"))?ji:2*Ci}}))}startLocalAudio(e){if([p.LISTENER,p.MIXER].includes(qh(this,zh,"f").participant.type))throw new Be;if(!qh(this,Gh,"f")||!jp.conference.current.permissions.has(ko.SendAudio))throw Je();return jp.conference.manager.startAudioForLocalPeer(e)}stop(){return $h(this,void 0,void 0,(function*(){const e={info:"stop local participant audio",customMaxExecutionTimeMs:ji};try{yield Rl().execute((()=>this.stopLocalAudio()),e)}catch(e){throw this.shouldReport(e)&&Ae.send(Te.ConferenceGlobalError.fromData(e)),e}}))}stopLocalAudio(){if([p.LISTENER,p.MIXER].includes(qh(this,zh,"f").participant.type))throw new Be;return jp.conference.manager.stopAudioForLocalPeer()}applyConstraints(e){return $h(this,void 0,void 0,(function*(){let t;if([p.LISTENER,p.MIXER].includes(qh(this,zh,"f").participant.type))throw t="'applyConstraints' is not available for listeners",Ae.send(Xh(t,[{audio:e}])),new Be(t);if(jp.conference.manager.isDvwc())throw t="'applyConstraints' is not available for Dolby Voice Codec",Ae.send(Xh(t,[e])),new Be(t);if(!qh(this,zh,"f").participant.audioTransmitting)throw t="Failed to apply constraints. Local audio track is not started.",Ae.send(Xh(t,[e])),new Be(t);if(jp.conference.manager.isCustomAudio())throw t="'applyConstraints' is not available when custom input audio is used.",Ae.send(Xh(t,[e])),new Be(t);if(!e)return void Ae.send(Kh("No-op cause constraints are null or undefined",[e]));const n=[];if(["deviceId","groupId"].forEach((t=>{e[t]&&(n.push(t),delete e[t])})),n.length&&console.debug("Invalid constraints:",JSON.stringify(n),"are not allowed and will be skipped."),Object.keys(e).length)return new Promise(((t,n)=>$h(this,void 0,void 0,(function*(){yield jp.conference.manager.rtc.updateAudioProcessing(e,qh(this,Vh,"f")).then((()=>{Ae.send(new ie({level:"info",action:"MediaConstraintsApplied",description:"The constraints were applied.",component:"LocalAudio",api:"applyConstraints",payload:[e]})),t()}),(t=>{Ae.send(Xh(t.message||"The constraints could not be applied",[e])),n(t)}))}))));Ae.send(Kh("No-op cause there is no constraints to apply",[e]))}))}onConferenceJoined(e){const t=Object.create(null,{onConferenceJoined:{get:()=>super.onConferenceJoined}});return $h(this,void 0,void 0,(function*(){t.onConferenceJoined.call(this,e),Zh(this,Wh,e.parameters.dolbyVoice,"f"),e.listenOnly||(qh(this,Bh,"f")&&(yield this.setComfortNoiseLevel(qh(this,Bh,"f"))),yield this.initialUpdateProcessing())}))}initialUpdateProcessing(){var e,t;return $h(this,void 0,void 0,(function*(){const n=this.pickCaptureModeStrategy();if(n.init){const r=e=>jp.conference.manager.rtc.awaitDapmReady(e);yield null===(e=n.init)||void 0===e?void 0:e.call(n,this._conferenceId,null===(t=qh(this,zh,"f").participant)||void 0===t?void 0:t.id,r,qh(this,Vh,"f"))}}))}onUpdateToken(e){const t=Mo(e.conferenceAccessToken);new Set(t.authorities).has(ko.SendAudio)?Zh(this,Gh,!0,"f"):(Zh(this,Gh,!1,"f"),qh(this,zh,"f").participant.audioTransmitting&&this.stop())}shouldReport(e){return e instanceof Ei||e instanceof Fa}};zh=new WeakMap,Uh=new WeakMap,Vh=new WeakMap,Bh=new WeakMap,Wh=new WeakMap,Gh=new WeakMap,Hh=new WeakMap,Yh([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],Jh.prototype,"startLocalAudio",null),Yh([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],Jh.prototype,"stopLocalAudio",null),Yh([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],Jh.prototype,"applyConstraints",null),Jh=Yh([dt([Ce.UpdateToken])],Jh);var Qh,ep,tp=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},np=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},rp=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class ip extends ut{constructor(e,t,n){super(e),Qh.set(this,void 0),ep.set(this,void 0),np(this,Qh,t,"f"),np(this,ep,n,"f")}start(e){return Ml(e.id).execute((()=>this.startRemoteAudio(e)),{info:"start remote participant audio"})}startRemoteAudio(e){return t=this,n=void 0,i=function*(){if(e.id===rp(this,ep,"f").participant.id)return rp(this,Qh,"f").start().then((e=>{}));if((null==e?void 0:e.type)===p.MIXER_MIX)return jp.conference.manager.rtc.mutePeer(e.id,!1),Promise.resolve();if(jp.conference.current&&jp.conference.current.params.dolbyVoice&&[p.LISTENER].includes(rp(this,ep,"f").participant.type))throw new Be;yield jp.conference.manager.startAudioForRemotePeer(e.id);let t=e.audioTransmitting;e.updateAudioReceivingStopped(!1),Ae.send(new Te.AudioUpdated(e,t,e.audioTransmitting))},new((r=void 0)||(r=Promise))((function(e,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(a,s)}c((i=i.apply(t,n||[])).next())}));var t,n,r,i}stop(e){return Ml(e.id).execute((()=>this.stopRemoteAudio(e)),{info:"stop remote participant audio"})}stopRemoteAudio(e){if(e.id===rp(this,ep,"f").participant.id)return rp(this,Qh,"f").stop();if((null==e?void 0:e.type)===p.MIXER_MIX)return jp.conference.manager.rtc.mutePeer(e.id,!0),Promise.resolve();if(rp(this,ep,"f").participant.id!==e.id&&jp.conference.current&&jp.conference.current.params.dolbyVoice&&[p.LISTENER].includes(rp(this,ep,"f").participant.type))throw new Be;return jp.conference.manager.stopAudioForRemotePeer(e.id).then((()=>{let t=e.audioTransmitting;e.updateAudioReceivingStopped(!0),Ae.send(new Te.AudioUpdated(e,t,e.audioTransmitting))}))}setVolume(e,t){if(e.id===rp(this,ep,"f").participant.id)throw new Be("Setting output volume is not supported for the local participant.");if(jp.conference.current&&jp.conference.current.params.dolbyVoice)throw new Be;if("number"!=typeof t||t<0||t>1)throw new Ye("Volume needs to be a number between 0 and 1");jp.conference.manager.rtc.setVolume(e.id,t)}setOutputVolume(e){if("number"!=typeof e||e<0||e>1)throw new Ye("Volume needs to be a number between 0 and 1");jp.conference.manager.rtc.setConferenceVolume(e)}}Qh=new WeakMap,ep=new WeakMap,tp([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],ip.prototype,"startRemoteAudio",null),tp([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],ip.prototype,"stopRemoteAudio",null),tp([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],ip.prototype,"setVolume",null),tp([function(e,t,n){let r=n.value;return n.value=function(...t){return e.checkConference.call(this),r.apply(this,t)},n}],ip.prototype,"setOutputVolume",null);var op,ap,sp,cp,up,dp,lp,hp,pp,fp,mp,gp,vp,yp,_p,wp,bp,kp,Sp,Ep,Tp,Cp=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class jp extends f.EventEmitter{constructor(){super(),op.set(this,new Qs(this)),ap.set(this,new Cc(this,Cp(this,op,"f"))),sp.set(this,new Sd),cp.set(this,new pc(this,Cp(this,sp,"f"))),up.set(this,new eh(this,new Pd(Cp(this,sp,"f")))),dp.set(this,new sh(this,Cp(this,up,"f"),new Ra("LocalVideo"))),lp.set(this,new hh(this)),hp.set(this,new Jh(this,Cp(this,op,"f"))),pp.set(this,new ip(this,Cp(this,hp,"f"),Cp(this,op,"f"))),fp.set(this,new as(this,Cp(this,op,"f"),Cp(this,sp,"f"),Cp(this,up,"f"),Cp(this,lp,"f"),Cp(this,hp,"f"),Cp(this,pp,"f"))),mp.set(this,new fs(this)),gp.set(this,new Wt(this,Cp(this,fp,"f"))),vp.set(this,new Rt(this,Cp(this,fp,"f"))),yp.set(this,new Ht(this)),_p.set(this,new wc(this,Cp(this,fp,"f"))),wp.set(this,new Au(this,Cp(this,fp,"f"),Cp(this,op,"f"))),bp.set(this,new Lu(this,Cp(this,dp,"f"),Cp(this,lp,"f"))),kp.set(this,new Wu(Cp(this,hp,"f"),Cp(this,pp,"f"))),Sp.set(this,new An(this)),Ep.set(this,new su(this,Cp(this,fp,"f"),Cp(this,op,"f"),Cp(this,sp,"f"))),Tp.set(this,new pu(this,Cp(this,fp,"f")))}static registerComponentVersion(e,t){Cp(this.instance,Ep,"f").registerComponent(e,t)}static get session(){return Cp(this.instance,op,"f")}static get mediaDevice(){return Cp(this.instance,cp,"f")}static get conference(){return Cp(this.instance,fp,"f")}static get recording(){return Cp(this.instance,mp,"f")}static get filePresentation(){return Cp(this.instance,gp,"f")}static get videoPresentation(){return Cp(this.instance,vp,"f")}static get broadcasting(){return Cp(this.instance,yp,"f")}static get command(){return Cp(this.instance,_p,"f")}static get videoFilters(){return Cp(this.instance,wp,"f")}static get video(){return Cp(this.instance,bp,"f")}static get notification(){return Cp(this.instance,ap,"f")}static get audio(){return Cp(this.instance,kp,"f")}static get extensions(){return Cp(this.instance,Sp,"f")}static set uxkitVersion(e){this.registerComponentVersion("web-uxkit",e)}static get packageUrlPrefix(){return jr()}static set packageUrlPrefix(e){!function(e){if(e){if("string"!=typeof e)throw new Ye("Provided URL prefix is invalid.");Cr=e,Cr.endsWith("/")||(Cr+="/")}else Cr=Tr()}(e)}static initialize(e,t,{host:n=this.host,wsHost:r=this.wsHost,fileHost:i=this.fileHost,enableTelemetry:o=this.enableTelemetry,telemetryHost:a=this.telemetryHost}={}){jp.session.customerKey=e,jp.session.customerSecret=t,wt.wsHost="devssl"===jp.flavor?r:this.wsHost,wt.host="devssl"===jp.flavor?n:this.host,Lt.host="devssl"===jp.flavor?i:this.fileHost,Fc.host="devssl"===jp.flavor?a:this.telemetryHost,jp.enableTelemetry="devssl"===jp.flavor?o:this.enableTelemetry,jp.displaySettings()}static displaySettings(){console.group("SDK settings:"),console.log("VoxeetSDK version: "+jp.version),console.log("VoxeetSDK flavor: "+jp.flavor),console.log("Telemetry status: "+(jp.enableTelemetry?"enabled":"disabled")),"devssl"===jp.flavor&&(console.group("hosts"),console.log(`Gate endpoint: ${wt.host}`),console.log(`WebSocket endpoint: ${wt.wsHost}`),console.log(`File conversion endpoint: ${Lt.host}`),jp.enableTelemetry&&console.log(`Telemetry endpoint: ${Fc.host}`),console.groupEnd()),console.groupEnd()}static initializeToken(e,t,{host:n=this.host,wsHost:r=this.wsHost,fileHost:i=this.fileHost,enableTelemetry:o=this.enableTelemetry,telemetryHost:a=this.telemetryHost}={}){wt.accessToken=e,wt.tokenCallback=t,wt.wsHost="devssl"===jp.flavor?r:this.wsHost,wt.host="devssl"===jp.flavor?n:this.host,Lt.host="devssl"===jp.flavor?i:this.fileHost,jp.enableTelemetry="devssl"===jp.flavor?o:this.enableTelemetry,Fc.host="devssl"===jp.flavor?a:this.telemetryHost,wt.leavingCallback=()=>{Cp(this.instance,fp,"f").leave()},jp.displaySettings()}static region(e=""){wt.setRegion(e),Lt.setRegion(e)}}op=new WeakMap,ap=new WeakMap,sp=new WeakMap,cp=new WeakMap,up=new WeakMap,dp=new WeakMap,lp=new WeakMap,hp=new WeakMap,pp=new WeakMap,fp=new WeakMap,mp=new WeakMap,gp=new WeakMap,vp=new WeakMap,yp=new WeakMap,_p=new WeakMap,wp=new WeakMap,bp=new WeakMap,kp=new WeakMap,Sp=new WeakMap,Ep=new WeakMap,Tp=new WeakMap,jp.instance=new jp,jp.version="3.11.1",jp.host="https://comms.sdk.dolby.io",jp.wsHost="wss://comms.sdk.dolby.io",jp.fileHost="https://comms.sdk.dolby.io",jp.telemetryHost="https://comms.sdk.dolby.io",jp.enableTelemetry=!0,jp.flavor="production",mr.setLevel("error")}(),r.default}()}));